<!-- cards/xmas-card-writer-assistant.html -->
<h2 id="xmas-card-writer-assistant-title">âœï¸ XMAS Card Writer Assistant</h2>

<form aria-describedby="card-writer-desc">
    <p id="card-writer-desc" class="small">
        Struggling with what to write? Get personalized Christmas card messages for everyone on your list!
        <span style="color:var(--accent)">Save time, spread joy!</span>
    </p>
    
    <!-- RECIPIENT TYPE -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">Who are you writing to?</div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(100px, 1fr));gap:8px;">
            <button type="button" onclick="cwSelectRecipient('family', this)" 
                    class="cw-recipient-btn cw-active" data-recipient="family">
                ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family
            </button>
            <button type="button" onclick="cwSelectRecipient('friend', this)" 
                    class="cw-recipient-btn" data-recipient="friend">
                ğŸ‘¯ Close Friend
            </button>
            <button type="button" onclick="cwSelectRecipient('partner', this)" 
                    class="cw-recipient-btn" data-recipient="partner">
                ğŸ’– Partner
            </button>
            <button type="button" onclick="cwSelectRecipient('coworker', this)" 
                    class="cw-recipient-btn" data-recipient="coworker">
                ğŸ‘” Coworker
            </button>
            <button type="button" onclick="cwSelectRecipient('neighbor', this)" 
                    class="cw-recipient-btn" data-recipient="neighbor">
                ğŸ¡ Neighbor
            </button>
            <button type="button" onclick="cwSelectRecipient('teacher', this)" 
                    class="cw-recipient-btn" data-recipient="teacher">
                ğŸ Teacher
            </button>
            <button type="button" onclick="cwSelectRecipient('boss', this)" 
                    class="cw-recipient-btn" data-recipient="boss">
                ğŸ‘¨â€ğŸ’¼ Boss
            </button>
            <button type="button" onclick="cwSelectRecipient('secret-santa', this)" 
                    class="cw-recipient-btn" data-recipient="secret-santa">
                ğŸ Secret Santa
            </button>
        </div>
    </div>
    
    <!-- TONE SELECTION -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">Message Tone</div>
        <div style="display:flex;flex-wrap:wrap;gap:8px;">
            <button type="button" onclick="cwSelectTone('traditional', this)" 
                    class="cw-tone-btn cw-active" data-tone="traditional">
                ğŸ„ Traditional
            </button>
            <button type="button" onclick="cwSelectTone('funny', this)" 
                    class="cw-tone-btn" data-tone="funny">
                ğŸ˜„ Funny
            </button>
            <button type="button" onclick="cwSelectTone('heartfelt', this)" 
                    class="cw-tone-btn" data-tone="heartfelt">
                â¤ï¸ Heartfelt
            </button>
            <button type="button" onclick="cwSelectTone('modern', this)" 
                    class="cw-tone-btn" data-tone="modern">
                âœ¨ Modern
            </button>
            <button type="button" onclick="cwSelectTone('religious', this)" 
                    class="cw-tone-btn" data-tone="religious">
                ğŸ™ Religious
            </button>
            <button type="button" onclick="cwSelectTone('short', this)" 
                    class="cw-tone-btn" data-tone="short">
                âš¡ Short & Sweet
            </button>
        </div>
    </div>
    
    <!-- CUSTOMIZATION -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
        <div>
            <label for="cw-recipient-name" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                Recipient's Name
            </label>
            <input id="cw-recipient-name" type="text" placeholder="e.g., Grandma, John, The Smith Family" 
                   style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;" />
        </div>
        
        <div>
            <label for="cw-your-name" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                Your Name/Family
            </label>
            <input id="cw-your-name" type="text" placeholder="e.g., The Johnson Family" 
                   style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;" />
        </div>
    </div>
    
    <!-- SPECIAL CIRCUMSTANCES -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">Special Considerations (Optional)</div>
        <div style="display:flex;flex-wrap:wrap;gap:8px;">
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="first-christmas">
                <div class="cw-consideration-box">ğŸ‘¶ First Christmas</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="difficult-year">
                <div class="cw-consideration-box">ğŸ’ª Tough Year</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="new-home">
                <div class="cw-consideration-box">ğŸ  New Home</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="new-job">
                <div class="cw-consideration-box">ğŸ’¼ New Job</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="new-baby">
                <div class="cw-consideration-box">ğŸ£ New Baby</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="far-away">
                <div class="cw-consideration-box">âœˆï¸ Far Away</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="recent-loss">
                <div class="cw-consideration-box">ğŸ•Šï¸ Recent Loss</div>
            </label>
            <label class="cw-consideration-label">
                <input type="checkbox" name="consideration" value="covid-mention">
                <div class="cw-consideration-box">ğŸ¦  COVID Mention</div>
            </label>
        </div>
    </div>
    
    <!-- INCLUDE THESE ELEMENTS -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">Include in Message:</div>
        <div style="display:flex;flex-wrap:wrap;gap:8px;">
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="wishing-health" checked>
                <div class="cw-include-box">â¤ï¸ Wishing Health</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="gratitude" checked>
                <div class="cw-include-box">ğŸ™ Gratitude</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="future-plans">
                <div class="cw-include-box">ğŸ“… Future Plans</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="specific-memory">
                <div class="cw-include-box">ğŸï¸ Specific Memory</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="inside-joke">
                <div class="cw-include-box">ğŸ˜‰ Inside Joke</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="quote">
                <div class="cw-include-box">ğŸ’­ Christmas Quote</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="religious">
                <div class="cw-include-box">â­ Religious Element</div>
            </label>
            <label class="cw-include-label">
                <input type="checkbox" name="include" value="pets">
                <div class="cw-include-box">ğŸ¾ Mention Pets</div>
            </label>
        </div>
    </div>
    
    <!-- ACTIONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="cwGenerateMessage(this)" 
                style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(178,34,34,0.3), rgba(139,0,0,0.2));border:1px solid rgba(178,34,34,0.5);border-radius:8px;color:#b22222;cursor:pointer;font-weight:600;">
            âœ¨ Generate Message
        </button>
        <button type="button" onclick="cwGenerateMultiple(this)"
                style="padding:12px 16px;background:rgba(0,100,0,0.1);border:1px solid rgba(0,100,0,0.3);border-radius:8px;color:#006400;cursor:pointer;">
            ğŸ”„ Multiple Versions
        </button>
        <button type="button" onclick="cwResetAll(this)"
                style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
                    ğŸ”„ Reset
        </button>
    </div>
</form>

<!-- GENERATED MESSAGE -->
<div id="cw-results" style="display:none;margin-top:24px;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <h3 class="small" style="color:#b22222;margin:0;">âœ¨ Your Custom Christmas Message</h3>
        <div style="display:flex;gap:8px;">
            <button type="button" onclick="cwCopyMessage(this)" 
                    style="padding:6px 12px;background:rgba(178,34,34,0.1);border:1px solid rgba(178,34,34,0.3);border-radius:6px;color:#b22222;cursor:pointer;font-size:12px;">
                ğŸ“‹ Copy Text
            </button>
            <button type="button" onclick="cwPrintMessage(this)" 
                    style="padding:6px 12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;font-size:12px;">
                ğŸ–¨ï¸ Print
            </button>
        </div>
    </div>
    
    <!-- MESSAGE DISPLAY -->
    <div id="cw-message-display" style="padding:20px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04));border-radius:10px;border:1px solid rgba(255,215,0,0.3);min-height:200px;font-family:'Georgia', serif;line-height:1.6;white-space:pre-wrap;">
        <!-- Generated message will appear here -->
    </div>
    
    <!-- MESSAGE TIPS -->
    <div style="margin-top:12px;padding:12px;background:rgba(255,215,0,0.1);border-radius:8px;border:1px solid rgba(255,215,0,0.2);">
        <div style="color:#ffd700;font-weight:600;margin-bottom:6px;font-size:14px;">ğŸ’¡ Personalization Tips:</div>
        <div id="cw-personal-tips" style="font-size:13px;color:rgba(255,255,255,0.8);">
            Add a personal touch by mentioning something specific you appreciate about the recipient!
        </div>
    </div>
    
    <!-- ALTERNATIVE VERSIONS -->
    <div id="cw-alternatives" style="display:none;margin-top:16px;">
        <div style="color:var(--accent);font-weight:600;margin-bottom:8px;font-size:14px;">ğŸ”„ Alternative Versions:</div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
            <div class="cw-alt-option" style="padding:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:8px;cursor:pointer;" onclick="cwUseAlternative(this)">
                <!-- Alternative 1 -->
            </div>
            <div class="cw-alt-option" style="padding:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:8px;cursor:pointer;" onclick="cwUseAlternative(this)">
                <!-- Alternative 2 -->
            </div>
            <div class="cw-alt-option" style="padding:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:8px;cursor:pointer;" onclick="cwUseAlternative(this)">
                <!-- Alternative 3 -->
            </div>
        </div>
    </div>
</div>

<!-- CHRISTMAS CARD ETIQUETTE -->
<div style="margin-top:16px;padding:12px;background:rgba(138,43,226,0.1);border-radius:8px;border:1px solid rgba(138,43,226,0.3);">
    <div style="color:#8a2be2;font-weight:600;margin-bottom:6px;font-size:14px;">ğŸ“ Christmas Card Etiquette</div>
    <div id="cw-etiquette-tips" style="font-size:13px;color:rgba(255,255,255,0.8);">
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:8px;">
            <div>âœ… Handwrite when possible</div>
            <div>âœ… Sign with pen, not printed</div>
            <div>âœ… Mail by Dec 10th</div>
            <div>âœ… Include return address</div>
            <div>âœ… Update address list yearly</div>
        </div>
    </div>
</div>

<script>
/* xmas-card-writer-assistant.html
   - Christmas card message generator
   - Scoped with cw- prefix
*/

let cwCurrentRecipient = 'family';
let cwCurrentTone = 'traditional';

// Message templates database
const cwMessages = {
    family: {
        traditional: [
            "Dear {recipient},\n\nWishing you a Christmas filled with love, laughter, and cherished moments. May the warmth of the season surround you and your loved ones. We're so grateful to have you in our lives.\n\nWith all our love,\n{yourName}",
            
            "To our dear {recipient},\n\nAs we gather to celebrate this special season, our hearts are filled with gratitude for the blessing of family. May your Christmas be merry and bright, and may the New Year bring you health and happiness.\n\nMerry Christmas!\n{yourName}"
        ],
        funny: [
            "Hey {recipient},\n\nHope your Christmas is filled with more joy than Uncle Bob's eggnog! May your presents be plentiful and your relatives be tolerable. ğŸ˜„\n\nMerry Christmas!\n{yourName}",
            
            "Dear {recipient},\n\nWishing you a Christmas where you get exactly what you want (and not another ugly sweater)! May your turkey be moist and your family arguments be minimal.\n\nHo ho ho!\n{yourName}"
        ],
        heartfelt: [
            "My dearest {recipient},\n\nAt this special time of year, I want you to know how much you mean to me. Your love and support throughout the year have been my greatest gift. May this Christmas bring you as much joy as you've brought into my life.\n\nAll my love,\n{yourName}",
            
            "To {recipient},\n\nChristmas reminds me of what truly matters - family. Thank you for being the heart of ours. Your kindness, wisdom, and love make every day brighter. I'm so grateful for you.\n\nWith deepest love,\n{yourName}"
        ],
        modern: [
            "Hey {recipient}! ğŸ‘‹\n\nWishing you all the good vibes this Christmas season! Hope your holidays are filled with cozy moments, great food, and even better company. Can't wait to catch up soon!\n\nMerry Christmas! ğŸ„\n{yourName}",
            
            "{recipient},\n\nSending virtual hugs and holiday cheer your way! May your season be stress-free, your WiFi strong, and your Christmas dinner Instagram-worthy. ğŸ˜‰\n\nHappy Holidays!\n{yourName}"
        ],
        religious: [
            "Dear {recipient},\n\nAs we celebrate the birth of our Savior, may you feel His love and peace surround you. Wishing you a blessed Christmas filled with the joy of Christ's love and the promise of new beginnings.\n\nGod bless,\n{yourName}",
            
            "To {recipient},\n\nMay the miracle of Christmas fill your heart with warmth and peace. As we remember God's greatest gift to us, may you feel His presence in your home and heart throughout the coming year.\n\nPeace and blessings,\n{yourName}"
        ],
        short: [
            "Dear {recipient},\n\nWishing you a very Merry Christmas and a Happy New Year!\n\nLove,\n{yourName}",
            
            "{recipient},\n\nJoy, peace, and happiness to you this Christmas season.\n\nWarmly,\n{yourName}"
        ]
    },
    
    friend: {
        traditional: [
            "Dear {recipient},\n\nWishing you a Christmas season filled with joy, laughter, and wonderful memories with those you love. Thank you for your friendship throughout the year.\n\nMerry Christmas!\n{yourName}",
            
            "To my dear friend {recipient},\n\nMay your holidays sparkle with moments of love, laughter, and goodwill. I'm so grateful for our friendship and the memories we've shared this year.\n\nWarmest wishes,\n{yourName}"
        ],
        funny: [
            "Hey {recipient}! ğŸ…\n\nHere's to a Christmas with more cheese boards than awkward family conversations! May your gifts be receipt-included and your holiday pants have elastic waists. ğŸ˜‚\n\nMerry Christmas!\n{yourName}",
            
            "{recipient},\n\nWishing you a Christmas where you actually like all your presents! May your eggnog be strong and your relatives be scarce. Can't wait to hear all the stories!\n\nHo ho ho!\n{yourName}"
        ],
        heartfelt: [
            "My dear friend {recipient},\n\nThis season reminds me how grateful I am for your friendship. Through all the ups and downs, you've been there, and that means more than you know. Wishing you a Christmas as wonderful as you are.\n\nWith love,\n{yourName}",
            
            "To {recipient},\n\nTrue friendship is one of life's greatest gifts, and I'm so thankful for yours. May your Christmas be filled with the same warmth and joy you bring to others.\n\nMerry Christmas, my friend,\n{yourName}"
        ],
        modern: [
            "Hey {recipient}! âœ¨\n\nSending you all the holiday cheer! Hope your Christmas is filled with good times, great people, and maybe a little relaxation too. Let's make plans in the new year!\n\nğŸ„ Merry Christmas! ğŸ„\n{yourName}",
            
            "{recipient},\n\nWishing you a holiday season that's more relaxing than stressful! May your days be merry, bright, and filled with exactly what you need right now.\n\nHappy Holidays! ğŸ‘\n{yourName}"
        ],
        religious: [
            "Dear {recipient},\n\nMay the peace and joy of Christmas be with you and your loved ones. Wishing you blessings during this holy season and throughout the coming year.\n\nGod bless,\n{yourName}",
            
            "To my friend {recipient},\n\nAs we celebrate Christ's birth, may you feel His love surrounding you. Wishing you a blessed Christmas filled with faith, hope, and love.\n\nPeace and joy,\n{yourName}"
        ],
        short: [
            "Dear {recipient},\n\nMerry Christmas! Hope your holidays are wonderful.\n\nBest,\n{yourName}",
            
            "{recipient},\n\nWarmest holiday wishes to you and yours!\n\nCheers,\n{yourName}"
        ]
    },
    
    partner: {
        traditional: [
            "My dearest {recipient},\n\nThis Christmas, I'm reminded of how lucky I am to have you by my side. You make every day brighter and every moment more meaningful. Wishing you a Christmas as magical as our love.\n\nAll my love,\n{yourName}",
            
            "To my beloved {recipient},\n\nAs we celebrate this season of love, I want you to know that you are my greatest gift. Every moment with you is a treasure. Merry Christmas, my love.\n\nForever yours,\n{yourName}"
        ],
        funny: [
            "Hey {recipient}! ğŸ˜˜\n\nAnother year, another Christmas where I promise not to peek at your presents! (No guarantees!) Wishing us a holiday with more cuddles than cooking disasters.\n\nLove you!\n{yourName}",
            
            "To my favorite {recipient},\n\nHere's to a Christmas with more romance than wrapping paper! May our tree be straight, our turkey cooked, and our love stronger than ever.\n\nMerry Christmas, my love!\n{yourName}"
        ],
        heartfelt: [
            "My love {recipient},\n\nYou are the light of my life, and at Christmas, that light shines even brighter. Thank you for another year of love, laughter, and beautiful memories. You are my everything.\n\nWith all my heart,\n{yourName}",
            
            "To {recipient}, my everything,\n\nThis Christmas, I give thanks for you. Your love has transformed my world in ways I never imagined possible. You are the greatest gift I've ever received.\n\nEternally yours,\n{yourName}"
        ],
        modern: [
            "Hey {recipient}! ğŸ’–\n\nCan't wait to spend the holidays with you! Here's to cozy nights, good food, and making new memories together. You're my favorite person to do life with.\n\nMerry Christmas, babe! ğŸ„\n{yourName}",
            
            "{recipient},\n\nAnother year of adventures with you! So grateful for our journey together. Wishing us a holiday season as amazing as our relationship.\n\nLove you lots! â¤ï¸\n{yourName}"
        ],
        religious: [
            "My dear {recipient},\n\nAs we celebrate the birth of Christ, I thank God for bringing you into my life. You are my answered prayer, my blessing, my everything. May God's love surround us always.\n\nWith love and faith,\n{yourName}",
            
            "To my beloved {recipient},\n\nThis Christmas, I praise God for the gift of you. Your love reflects His love, and I am forever grateful. May our home be filled with His peace and joy.\n\nGod bless you,\n{yourName}"
        ],
        short: [
            "My love {recipient},\n\nMerry Christmas! So grateful for you.\n\nLove always,\n{yourName}",
            
            "{recipient},\n\nYou're my best gift. Merry Christmas!\n\nLove,\n{yourName}"
        ]
    },
    
    coworker: {
        traditional: [
            "Dear {recipient},\n\nWishing you a joyous Christmas season and a prosperous New Year. Thank you for your hard work and collaboration throughout the year.\n\nBest wishes,\n{yourName}",
            
            "To {recipient},\n\nMay your holidays be filled with peace, joy, and time with loved ones. Wishing you a well-deserved break and a wonderful New Year.\n\nSeason's greetings,\n{yourName}"
        ],
        funny: [
            "Hey {recipient},\n\nHope your Christmas involves less stress than our last project deadline! Wishing you a holiday with more cookies than emails.\n\nHappy Holidays!\n{yourName}",
            
            "{recipient},\n\nMay your holiday break be longer than our Monday meetings! Wishing you rest, relaxation, and a very Merry Christmas.\n\nCheers,\n{yourName}"
        ],
        heartfelt: [
            "Dear {recipient},\n\nIt's been a pleasure working with you this year. Your dedication and positive attitude make a real difference. Wishing you a Christmas filled with the same joy you bring to work.\n\nWarm regards,\n{yourName}",
            
            "To {recipient},\n\nThank you for being such a wonderful colleague. Your support and teamwork have been invaluable. Wishing you and your family a very Merry Christmas.\n\nWith gratitude,\n{yourName}"
        ],
        modern: [
            "Hey {recipient}! ğŸ„\n\nHope you have an amazing holiday season! Wishing you good rest, great food, and quality time with loved ones. See you in the new year!\n\nHappy Holidays!\n{yourName}",
            
            "{recipient},\n\nSending holiday cheer your way! Hope your break is everything you need it to be. Looking forward to more great work together next year!\n\nSeason's greetings! ğŸ‘\n{yourName}"
        ],
        religious: [
            "Dear {recipient},\n\nWishing you a blessed Christmas season filled with peace and joy. May the New Year bring you continued success and happiness.\n\nWarm regards,\n{yourName}",
            
            "To {recipient},\n\nMay the peace and hope of Christmas be with you and your loved ones throughout the holiday season and the coming year.\n\nSeason's blessings,\n{yourName}"
        ],
        short: [
            "Dear {recipient},\n\nWishing you a wonderful holiday season!\n\nBest,\n{yourName}",
            
            "{recipient},\n\nHappy Holidays and best wishes for the New Year!\n\nRegards,\n{yourName}"
        ]
    }
    // Additional recipient types follow same pattern...
};

// Considerations that modify messages
const cwConsiderationModifiers = {
    'first-christmas': {
        prefix: "Wishing you a magical first Christmas ",
        suffix: " May it be the beginning of many wonderful holiday traditions!"
    },
    'difficult-year': {
        prefix: "After such a challenging year, ",
        suffix: " Wishing you peace, healing, and brighter days ahead."
    },
    'new-home': {
        prefix: "Congratulations on your new home! ",
        suffix: " May it be filled with love, laughter, and wonderful Christmas memories."
    },
    'new-job': {
        prefix: "Congratulations on your new position! ",
        suffix: " Wishing you success and satisfaction in your new role in the coming year."
    },
    'new-baby': {
        prefix: "Congratulations on your new little one! ",
        suffix: " May your first Christmas as a growing family be especially magical."
    },
    'far-away': {
        prefix: "Though we're miles apart, ",
        suffix: " You're in our thoughts this holiday season and always."
    },
    'recent-loss': {
        prefix: "Thinking of you especially during this season ",
        suffix: " Wishing you comfort, peace, and cherished memories."
    },
    'covid-mention': {
        prefix: "After such an unusual year, ",
        suffix: " Wishing you health, safety, and moments of joy this holiday season."
    }
};

// Christmas quotes for inclusion
const cwQuotes = [
    "\"Christmas is not a time nor a season, but a state of mind.\" - Calvin Coolidge",
    "\"The best of all gifts around any Christmas tree: the presence of a happy family all wrapped up in each other.\" - Burton Hillis",
    "\"Christmas is doing a little something extra for someone.\" - Charles Schulz",
    "\"Peace on earth will come to stay, when we live Christmas every day.\" - Helen Steiner Rice",
    "\"Christmas waves a magic wand over this world, and behold, everything is softer and more beautiful.\" - Norman Vincent Peale",
    "\"Blessed is the season which engages the whole world in a conspiracy of love.\" - Hamilton Wright Mabie",
    "\"Christmas is the day that holds all time together.\" - Alexander Smith",
    "\"Gifts of time and love are surely the basic ingredients of a truly merry Christmas.\" - Peg Bracken"
];

// Personalization tips
const cwPersonalTips = [
    "Add a specific memory: 'Remember when we...'",
    "Mention something you admire about them specifically",
    "Reference an inside joke only they would understand",
    "Include a hope or wish for them personally",
    "Add a line about what their friendship means to you",
    "Mention a shared interest or activity",
    "Reference a milestone they reached this year",
    "Add a line about looking forward to future plans together"
];

function cwSelectRecipient(recipient, btn) {
    cwCurrentRecipient = recipient;
    
    // Update active button
    const card = btn.closest('.card') || document;
    card.querySelectorAll('.cw-recipient-btn').forEach(b => {
        b.classList.remove('cw-active');
        b.style.background = 'rgba(255,255,255,0.05)';
        b.style.border = '1px solid rgba(255,255,255,0.1)';
    });
    
    btn.classList.add('cw-active');
    btn.style.background = 'rgba(178,34,34,0.2)';
    btn.style.border = '1px solid rgba(178,34,34,0.4)';
}

function cwSelectTone(tone, btn) {
    cwCurrentTone = tone;
    
    // Update active button
    const card = btn.closest('.card') || document;
    card.querySelectorAll('.cw-tone-btn').forEach(b => {
        b.classList.remove('cw-active');
        b.style.background = 'rgba(255,255,255,0.05)';
        b.style.border = '1px solid rgba(255,255,255,0.1)';
    });
    
    btn.classList.add('cw-active');
    btn.style.background = 'rgba(139,0,0,0.2)';
    btn.style.border = '1px solid rgba(139,0,0,0.4)';
}

function cwGenerateMessage(btn) {
    const card = btn.closest('.card') || document;
    
    // Get inputs
    const recipientName = card.querySelector('#cw-recipient-name').value.trim();
    const yourName = card.querySelector('#cw-your-name').value.trim();
    
    if (!recipientName) {
        alert("Please enter the recipient's name!");
        card.querySelector('#cw-recipient-name').focus();
        return;
    }
    
    if (!yourName) {
        alert("Please enter your name!");
        card.querySelector('#cw-your-name').focus();
        return;
    }
    
    // Get selected considerations
    const considerationCheckboxes = card.querySelectorAll('input[name="consideration"]:checked');
    const considerations = Array.from(considerationCheckboxes).map(cb => cb.value);
    
    // Get included elements
    const includeCheckboxes = card.querySelectorAll('input[name="include"]:checked');
    const includes = Array.from(includeCheckboxes).map(cb => cb.value);
    
    // Show loading state
    const originalText = btn.textContent;
    btn.textContent = "ğŸ”„ Generating...";
    btn.disabled = true;
    
    // Simulate generation delay
    setTimeout(() => {
        // Generate message
        const message = cwCreateMessage(recipientName, yourName, considerations, includes);
        
        // Display message
        card.querySelector('#cw-message-display').textContent = message;
        
        // Show results section
        card.querySelector('#cw-results').style.display = 'block';
        
        // Update personalization tips
        const randomTip = cwPersonalTips[Math.floor(Math.random() * cwPersonalTips.length)];
        card.querySelector('#cw-personal-tips').textContent = randomTip;
        
        // Hide alternatives
        card.querySelector('#cw-alternatives').style.display = 'none';
        
        // Scroll to results
        card.querySelector('#cw-results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        
        // Reset button
        btn.textContent = originalText;
        btn.disabled = false;
        
    }, 800);
}

function cwCreateMessage(recipientName, yourName, considerations, includes) {
    // Get base message template
    let messages = cwMessages[cwCurrentRecipient]?.[cwCurrentTone];
    if (!messages) {
        messages = cwMessages['family']['traditional']; // fallback
    }
    
    // Pick random message from available templates
    let message = messages[Math.floor(Math.random() * messages.length)];
    
    // Replace placeholders
    message = message.replace(/{recipient}/g, recipientName);
    message = message.replace(/{yourName}/g, yourName);
    
    // Apply consideration modifiers
    considerations.forEach(consideration => {
        const modifier = cwConsiderationModifiers[consideration];
        if (modifier) {
            // Split message and insert modifiers
            const lines = message.split('\n');
            if (lines.length > 2) {
                lines[1] = modifier.prefix + lines[1].toLowerCase();
                const lastLine = lines[lines.length - 2];
                lines[lines.length - 2] = lastLine + modifier.suffix;
                message = lines.join('\n');
            }
        }
    });
    
    // Add included elements
    if (includes.includes('quote')) {
        const randomQuote = cwQuotes[Math.floor(Math.random() * cwQuotes.length)];
        message += `\n\n${randomQuote}`;
    }
    
    if (includes.includes('future-plans')) {
        const plans = [
            `Looking forward to catching up with you in the new year!`,
            `Can't wait to see you in ${new Date().getFullYear() + 1}!`,
            `Hope we can make plans together soon!`
        ];
        message += `\n\n${plans[Math.floor(Math.random() * plans.length)]}`;
    }
    
    return message;
}

function cwGenerateMultiple(btn) {
    const card = btn.closest('.card') || document;
    
    // Get inputs
    const recipientName = card.querySelector('#cw-recipient-name').value.trim();
    const yourName = card.querySelector('#cw-your-name').value.trim();
    
    if (!recipientName || !yourName) {
        cwGenerateMessage(btn);
        return;
    }
    
    // Get selected considerations
    const considerationCheckboxes = card.querySelectorAll('input[name="consideration"]:checked');
    const considerations = Array.from(considerationCheckboxes).map(cb => cb.value);
    
    // Get included elements
    const includeCheckboxes = card.querySelectorAll('input[name="include"]:checked');
    const includes = Array.from(includeCheckboxes).map(cb => cb.value);
    
    // Generate 3 alternative messages
    const alternatives = [];
    for (let i = 0; i < 3; i++) {
        // Temporarily switch tone for variety
        const tempTone = Object.keys(cwMessages[cwCurrentRecipient] || cwMessages['family'])[
            Math.floor(Math.random() * Object.keys(cwMessages[cwCurrentRecipient] || cwMessages['family']).length)
        ];
        
        const originalTone = cwCurrentTone;
        cwCurrentTone = tempTone;
        alternatives.push(cwCreateMessage(recipientName, yourName, considerations, includes));
        cwCurrentTone = originalTone;
    }
    
    // Display alternatives
    const altElements = card.querySelectorAll('.cw-alt-option');
    alternatives.forEach((alt, index) => {
        if (altElements[index]) {
            // Show first few lines only
            const preview = alt.split('\n').slice(0, 4).join('\n') + '...';
            altElements[index].innerHTML = `
                <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-bottom:4px;">Option ${index + 1}</div>
                <div style="font-size:13px;line-height:1.4;">${preview}</div>
                <div style="font-size:11px;color:var(--accent);margin-top:8px;">Click to use this version</div>
            `;
            altElements[index].dataset.fullMessage = alt;
        }
    });
    
    // Show alternatives section
    card.querySelector('#cw-alternatives').style.display = 'block';
}

function cwUseAlternative(element) {
    const card = document.currentScript?.closest('.card') || document;
    const fullMessage = element.dataset.fullMessage;
    
    if (fullMessage) {
        card.querySelector('#cw-message-display').textContent = fullMessage;
        
        // Scroll to top of message
        card.querySelector('#cw-message-display').scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // Visual feedback
        element.style.background = 'rgba(178,34,34,0.1)';
        element.style.border = '1px solid rgba(178,34,34,0.3)';
        setTimeout(() => {
            element.style.background = '';
            element.style.border = '';
        }, 1000);
    }
}

function cwCopyMessage(btn) {
    const card = btn.closest('.card') || document;
    const message = card.querySelector('#cw-message-display').textContent;
    
    navigator.clipboard.writeText(message).then(() => {
        const originalText = btn.textContent;
        btn.textContent = "âœ… Copied!";
        setTimeout(() => {
            btn.textContent = originalText;
        }, 2000);
    }).catch(err => {
        // Fallback
        const textArea = document.createElement('textarea');
        textArea.value = message;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        btn.textContent = "âœ… Copied!";
        setTimeout(() => {
            btn.textContent = "ğŸ“‹ Copy Text";
        }, 2000);
    });
}

function cwPrintMessage(btn) {
    const card = btn.closest('.card') || document;
    const message = card.querySelector('#cw-message-display').textContent;
    const recipientName = card.querySelector('#cw-recipient-name').value || 'Recipient';
    
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <html>
            <head>
                <title>Christmas Card Message for ${recipientName}</title>
                <style>
                    body { 
                        font-family: 'Georgia', serif; 
                        padding: 40px; 
                        line-height: 1.6;
                        max-width: 600px;
                        margin: 0 auto;
                    }
                    .message { 
                        white-space: pre-wrap; 
                        font-size: 16px;
                        margin: 30px 0;
                    }
                    .header { 
                        text-align: center; 
                        margin-bottom: 40px;
                        color: #b22222;
                    }
                    .footer { 
                        margin-top: 40px; 
                        text-align: center; 
                        font-size: 12px; 
                        color: #666; 
                    }
                    @media print {
                        body { padding: 0; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h2>ğŸ„ Christmas Card Message ğŸ„</h2>
                    <p>For: ${recipientName}</p>
                </div>
                <div class="message">${message}</div>
                <div class="footer">
                    <p>Generated by The Most Useful Site in the World</p>
                    <p>Print and glue into your Christmas card!</p>
                </div>
            </body>
        </html>
    `);
    printWindow.document.close();
    printWindow.focus();
    
    setTimeout(() => {
        printWindow.print();
    }, 500);
}

function cwResetAll(btn) {
    const card = btn.closest('.card') || document;
    
    // Reset recipient to family
    card.querySelector('.cw-recipient-btn[data-recipient="family"]').click();
    
    // Reset tone to traditional
    card.querySelector('.cw-tone-btn[data-tone="traditional"]').click();
    
    // Clear inputs
    card.querySelector('#cw-recipient-name').value = '';
    card.querySelector('#cw-your-name').value = '';
    
    // Reset checkboxes
    card.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.checked = cb.name === 'include' && (cb.value === 'wishing-health' || cb.value === 'gratitude');
        
        // Update visual state
        const box = cb.closest('label').querySelector('div');
        if (cb.checked) {
            if (cb.name === 'include') {
                box.style.background = 'rgba(178,34,34,0.2)';
                box.style.border = '1px solid rgba(178,34,34,0.4)';
            } else {
                box.style.background = 'rgba(139,0,0,0.2)';
                box.style.border = '1px solid rgba(139,0,0,0.4)';
            }
        } else {
            box.style.background = '';
            box.style.border = '1px solid rgba(255,255,255,0.1)';
        }
    });
    
    // Hide results
    card.querySelector('#cw-results').style.display = 'none';
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.currentScript?.closest('.card') || document;
        
        // Add click handlers for checkboxes
        card.querySelectorAll('.cw-consideration-label, .cw-include-label').forEach(label => {
            const checkbox = label.querySelector('input');
            const box = label.querySelector('div');
            
            box.addEventListener('click', () => {
                checkbox.checked = !checkbox.checked;
                if (checkbox.checked) {
                    if (checkbox.name === 'include') {
                        box.style.background = 'rgba(178,34,34,0.2)';
                        box.style.border = '1px solid rgba(178,34,34,0.4)';
                    } else {
                        box.style.background = 'rgba(139,0,0,0.2)';
                        box.style.border = '1px solid rgba(139,0,0,0.4)';
                    }
                } else {
                    box.style.background = '';
                    box.style.border = '1px solid rgba(255,255,255,0.1)';
                }
            });
        });
        
        console.log('XMAS Card Writer Assistant ready!');
    });
}
</script>

<style>
#xmas-card-writer-assistant-title {
    color: #b22222 !important; /* Christmas red */
    margin-top: 0;
    font-size: 1.4rem !important;
}

.cw-recipient-btn, .cw-tone-btn {
    padding: 10px 8px !important;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: inherit;
    cursor: pointer;
    text-align: center;
    font-size: 13px;
    transition: all 0.2s;
}

.cw-recipient-btn.cw-active {
    background: rgba(178,34,34,0.2) !important;
    border: 1px solid rgba(178,34,34,0.4) !important;
    color: #b22222 !important;
    font-weight: 600;
}

.cw-tone-btn.cw-active {
    background: rgba(139,0,0,0.2) !important;
    border: 1px solid rgba(139,0,0,0.4) !important;
    color: #8b0000 !important;
    font-weight: 600;
}

.cw-consideration-label, .cw-include-label {
    cursor: pointer;
}

.cw-consideration-box, .cw-include-box {
    padding: 10px 8px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    text-align: center;
    font-size: 12px;
    transition: all 0.2s;
    min-width: 80px;
}

.cw-consideration-box:hover, .cw-include-box:hover {
    transform: translateY(-2px);
}

/* Make checkboxes hidden */
.cw-consideration-label input[type="checkbox"],
.cw-include-label input[type="checkbox"] {
    display: none;
}

.cw-alt-option {
    transition: all 0.2s;
}

.cw-alt-option:hover {
    background: rgba(255,255,255,0.05) !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .cw-recipient-btn, .cw-tone-btn {
        padding: 8px 4px !important;
        font-size: 12px !important;
    }
    
    .cw-consideration-box, .cw-include-box {
        padding: 8px 6px !important;
        font-size: 11px !important;
        min-width: 70px;
    }
    
    #cw-message-display {
        font-size: 15px !important;
        padding: 16px !important;
    }
}
</style>
