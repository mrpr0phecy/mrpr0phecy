<!-- cards/digital-detox-roi.html -->
<div class="card-content">
<h2 id="digital-detox-title" style="margin-top:0;color:var(--accent);position:relative;">
  ğŸ§¹ Digital Detox ROI Calculator
  <span style="position:absolute;right:0;top:0;font-size:0.7rem;color:rgba(45,212,255,0.7);font-weight:normal;">
    Lifestyle & Productivity
  </span>
</h2>

<form aria-describedby="digital-detox-desc">
  <p id="digital-detox-desc" class="small" style="margin-bottom:20px;color:rgba(230,250,255,0.9);">
    Calculate the real financial and mental value of cleaning up your digital life. Discover how much your attention is worth.
  </p>

  <!-- Digital Usage Assessment -->
  <div style="margin-bottom:20px;padding:20px;background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(45,212,255,0.02));border-radius:12px;border:1px solid rgba(45,212,255,0.1);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:16px;font-size:1rem;">ğŸ“± Your Digital Footprint</h3>
    
    <!-- Social Media Usage -->
    <div style="margin-bottom:20px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <label style="color:var(--accent);font-weight:500;">âŒš Daily Social Media Time</label>
        <span id="sm-time-display" style="font-size:1.1rem;color:#39ff14;font-weight:600;">2 hours</span>
      </div>
      <input type="range" id="sm-time" min="0.5" max="8" step="0.5" value="2" 
             style="width:100%;height:8px;border-radius:4px;background:rgba(45,212,255,0.1);outline:none;"
             oninput="ddUpdateTimeDisplay(this.value)">
      <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:0.85rem;color:rgba(230,250,255,0.7);">
        <span>30 min</span>
        <span>8+ hours</span>
      </div>
    </div>
    
    <!-- Platform Selection -->
    <div style="margin-bottom:20px;">
      <div style="color:var(--accent);font-weight:500;margin-bottom:12px;">ğŸ“Š Platforms Used (Select all)</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));gap:10px;">
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="facebook" checked>
          <span style="color:rgba(230,250,255,0.9);">Facebook</span>
        </label>
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="instagram" checked>
          <span style="color:rgba(230,250,255,0.9);">Instagram</span>
        </label>
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="tiktok">
          <span style="color:rgba(230,250,255,0.9);">TikTok</span>
        </label>
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="twitter" checked>
          <span style="color:rgba(230,250,255,0.9);">Twitter/X</span>
        </label>
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="youtube" checked>
          <span style="color:rgba(230,250,255,0.9);">YouTube</span>
        </label>
        <label class="platform-checkbox" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="checkbox" name="platform" value="linkedin">
          <span style="color:rgba(230,250,255,0.9);">LinkedIn</span>
        </label>
      </div>
    </div>
    
    <!-- Data Sharing Level -->
    <div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <label style="color:var(--accent);font-weight:500;">ğŸ” Data Sharing Level</label>
        <span id="data-sharing-display" style="font-size:0.9rem;color:#ffcc00;">Moderate</span>
      </div>
      <input type="range" id="data-sharing" min="1" max="5" step="1" value="3" 
             style="width:100%;height:8px;border-radius:4px;background:rgba(45,212,255,0.1);outline:none;"
             oninput="ddUpdateDataSharing(this.value)">
      <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:0.85rem;color:rgba(230,250,255,0.7);">
        <span>Minimal</span>
        <span>Maximum</span>
      </div>
    </div>
  </div>

  <!-- Personal Value Inputs -->
  <div style="margin-bottom:20px;padding:20px;background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(45,212,255,0.02));border-radius:12px;border:1px solid rgba(45,212,255,0.1);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:16px;font-size:1rem;">ğŸ’° Your Personal Value</h3>
    
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;">
      <!-- Hourly Rate -->
      <div class="field">
        <label for="hourly-rate" style="color:var(--accent);font-weight:500;display:block;margin-bottom:8px;">ğŸ’¼ Hourly Rate ($)</label>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="hourly-rate" type="number" min="0" max="500" value="25" 
                 style="flex:1;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;">
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="ddAdjustValue('hourly-rate', 5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+5</button>
            <button type="button" onclick="ddAdjustValue('hourly-rate', -5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-5</button>
          </div>
        </div>
      </div>
      
      <!-- Mental Health Impact -->
      <div class="field">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label style="color:var(--accent);font-weight:500;">ğŸ§  Mental Fatigue Level</label>
          <span id="mental-fatigue-display" style="font-size:0.9rem;color:#ffcc00;">Moderate</span>
        </div>
        <input type="range" id="mental-fatigue" min="1" max="5" step="1" value="3" 
               style="width:100%;height:8px;border-radius:4px;background:rgba(45,212,255,0.1);outline:none;"
               oninput="ddUpdateMentalFatigue(this.value)">
        <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:0.85rem;color:rgba(230,250,255,0.7);">
          <span>None</span>
          <span>Severe</span>
        </div>
      </div>
    </div>
    
    <!-- Digital Goals -->
    <div style="margin-top:20px;">
      <div style="color:var(--accent);font-weight:500;margin-bottom:12px;">ğŸ¯ Desired Digital Reduction</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:10px;">
        <label class="goal-radio" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="radio" name="reduction-goal" value="0.25" checked>
          <span style="color:rgba(230,250,255,0.9);">25% Less</span>
        </label>
        <label class="goal-radio" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="radio" name="reduction-goal" value="0.5">
          <span style="color:rgba(230,250,255,0.9);">50% Less</span>
        </label>
        <label class="goal-radio" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="radio" name="reduction-goal" value="0.75">
          <span style="color:rgba(230,250,255,0.9);">75% Less</span>
        </label>
        <label class="goal-radio" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
          <input type="radio" name="reduction-goal" value="1">
          <span style="color:rgba(230,250,255,0.9);">Full Detox</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="actions" style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:10px;margin-top:20px;">
    <button type="button" onclick="ddCalculateROI()" 
            style="padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;transition:all 0.2s;">
      ğŸ§® Calculate ROI
    </button>
    <button type="button" onclick="ddGeneratePlan()"
            style="padding:14px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);color:#39ff14;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ“‹ Generate Plan
    </button>
    <button type="button" onclick="ddShareResults()"
            style="padding:14px;background:rgba(255,204,0,0.1);border:1px solid rgba(255,204,0,0.3);color:#ffcc00;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ”— Share Insight
    </button>
    <button type="button" onclick="ddReset()"
            style="padding:14px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);color:#ff4d4d;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ”„ Reset
    </button>
  </div>
</form>

<!-- ROI Results -->
<div class="results" aria-live="polite" style="margin-top:20px;">
  <!-- Main ROI Summary -->
  <div id="dd-results-section" style="display:none;background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(45,212,255,0.02));border-radius:8px;padding:24px;border:1px solid rgba(45,212,255,0.1);margin-bottom:20px;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
      <h3 style="color:var(--accent);margin:0;font-size:1.1rem;">ğŸ“Š Your Digital Detox ROI</h3>
      <div style="display:flex;gap:8px;">
        <button onclick="ddSavePlan()" style="padding:6px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:0.9rem;">
          ğŸ’¾ Save Plan
        </button>
        <button onclick="ddExportReport()" style="padding:6px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:0.9rem;">
          ğŸ“ˆ Export
        </button>
      </div>
    </div>
    
    <!-- ROI Summary Cards -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin-bottom:24px;">
      <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">â° Time Value</div>
        <div id="dd-time-value" style="font-size:1.8rem;font-weight:700;color:#39ff14;">$0</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Annual worth of your attention</div>
      </div>
      
      <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">ğŸ’° Data Value</div>
        <div id="dd-data-value" style="font-size:1.8rem;font-weight:700;color:#ffcc00;">$0</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Your personal data worth</div>
      </div>
      
      <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">ğŸ§  Mental ROI</div>
        <div id="dd-mental-roi" style="font-size:1.8rem;font-weight:700;color:#9d4edd;">0%</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Focus improvement</div>
      </div>
      
      <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">ğŸ¯ Total ROI</div>
        <div id="dd-total-roi" style="font-size:1.8rem;font-weight:700;color:#2dd4ff;">0%</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Overall benefit</div>
      </div>
    </div>
    
    <!-- Time Reallocation Visualization -->
    <div style="margin-bottom:24px;">
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:12px;">â³ Time Reallocation Potential</div>
      <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:16px;">
        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
          <span style="color:#39ff14;">Current Digital Time</span>
          <span id="dd-current-time" style="color:rgba(230,250,255,0.9);">14 hrs/week</span>
        </div>
        <div style="height:12px;background:rgba(255,77,77,0.3);border-radius:6px;margin-bottom:12px;position:relative;overflow:hidden;">
          <div id="dd-time-waste-bar" style="height:100%;background:linear-gradient(90deg, rgba(255,77,77,0.8), rgba(255,77,77,0.5));border-radius:6px;width:100%;"></div>
        </div>
        
        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
          <span style="color:#2dd4ff;">Reclaimed Time</span>
          <span id="dd-reclaimed-time" style="color:rgba(230,250,255,0.9);">0 hrs/week</span>
        </div>
        <div style="height:12px;background:rgba(45,212,255,0.3);border-radius:6px;margin-bottom:16px;position:relative;overflow:hidden;">
          <div id="dd-reclaimed-bar" style="height:100%;background:linear-gradient(90deg, rgba(45,212,255,0.8), rgba(45,212,255,0.5));border-radius:6px;width:0%;"></div>
        </div>
        
        <div id="dd-reallocation-suggestions" style="font-size:0.9rem;color:rgba(230,250,255,0.9);">
          Your reclaimed time could be used for: Learning new skills, exercise, creative projects, or quality time with loved ones.
        </div>
      </div>
    </div>
    
    <!-- Personalized Action Plan -->
    <div id="dd-action-plan" style="display:none;">
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:12px;">ğŸ“‹ Your 30-Day Digital Minimalism Plan</div>
      <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:20px;">
        <div id="dd-plan-content">
          <!-- Generated plan will appear here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Industry Comparison -->
  <div style="background:rgba(0,0,0,0.1);border-radius:8px;padding:24px;border:1px solid rgba(255,255,255,0.05);margin-bottom:20px;">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:20px;font-size:1.1rem;">ğŸ“ˆ Digital Attention Economy</h3>
    
    <div style="overflow-x:auto;">
      <table style="width:100%;border-collapse:collapse;font-size:0.9rem;">
        <thead>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.1);">
            <th style="text-align:left;padding:12px;color:var(--accent);">Platform</th>
            <th style="text-align:center;padding:12px;color:var(--accent);">Avg. Time/Day</th>
            <th style="text-align:center;padding:12px;color:var(--accent);">Data Value/User</th>
            <th style="text-align:center;padding:12px;color:var(--accent);">Ad Revenue/User</th>
            <th style="text-align:left;padding:12px;color:var(--accent);">Your Alternative</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;color:#39ff14;">Facebook</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">34 min</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$35/yr</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$53/yr</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Join local community groups</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;color:#2dd4ff;">Instagram</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">29 min</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$42/yr</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$48/yr</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Photo journal or art creation</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;color:#ffcc00;">TikTok</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">52 min</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$28/yr</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$65/yr</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Creative short video projects</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;color:#ff2d55;">YouTube</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">41 min</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$31/yr</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$29/yr</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Educational courses or podcasts</td>
          </tr>
          <tr>
            <td style="padding:12px;color:#9d4edd;">Twitter/X</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">31 min</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$24/yr</td>
            <td style="padding:12px;text-align:center;color:rgba(230,250,255,0.9);">$37/yr</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Newsletter subscriptions</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div style="margin-top:20px;padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;">
      <div style="color:var(--accent);font-weight:600;margin-bottom:8px;">ğŸ’¡ Key Insight</div>
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">
        The average social media user generates $200-300 in annual revenue for platforms through attention and data. 
        Your time has valueâ€”reclaiming it can be one of the highest-ROI investments you make.
      </div>
    </div>
  </div>

  <!-- Mental Health Benefits -->
  <div style="background:rgba(0,0,0,0.1);border-radius:8px;padding:24px;border:1px solid rgba(255,255,255,0.05);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:20px;font-size:1.1rem;">ğŸ§˜ Mental Health Benefits</h3>
    
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin-bottom:20px;">
      <div style="padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;">
        <div style="color:#39ff14;font-weight:600;margin-bottom:8px;">ğŸ˜Œ Reduced Anxiety</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Studies show 30% reduction in anxiety after 1 week of digital detox</div>
      </div>
      <div style="padding:16px;background:rgba(57,255,20,0.05);border-radius:8px;">
        <div style="color:#ffcc00;font-weight:600;margin-bottom:8px;">ğŸ§  Improved Focus</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Attention span can increase by 40% after reducing social media use</div>
      </div>
      <div style="padding:16px;background:rgba(255,204,0,0.05);border-radius:8px;">
        <div style="color:#9d4edd;font-weight:600;margin-bottom:8px;">ğŸ˜´ Better Sleep</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Screen reduction before bed improves sleep quality by 50%</div>
      </div>
      <div style="padding:16px;background:rgba(157,78,221,0.05);border-radius:8px;">
        <div style="color:#2dd4ff;font-weight:600;margin-bottom:8px;">ğŸ˜Š Increased Happiness</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Real-world connections boost life satisfaction by 25%</div>
      </div>
    </div>
    
    <!-- Success Stories -->
    <div>
      <div style="color:var(--accent);font-weight:600;margin-bottom:12px;">ğŸŒŸ Real Results from Users</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:12px;">
        <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="color:#39ff14;font-size:0.9rem;margin-bottom:4px;">Sarah, 28</div>
          <div style="font-size:0.85rem;color:rgba(230,250,255,0.9);">"Saved 12 hours/week, started a side business that now makes $2k/month"</div>
        </div>
        <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="color:#2dd4ff;font-size:0.9rem;margin-bottom:4px;">Mike, 34</div>
          <div style="font-size:0.85rem;color:rgba(230,250,255,0.9);">"Reduced anxiety by 70%, learned guitar with reclaimed time"</div>
        </div>
        <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="color:#ffcc00;font-size:0.9rem;margin-bottom:4px;">Alex, 41</div>
          <div style="font-size:0.85rem;color:rgba(230,250,255,0.9);">"Cut social media 75%, got promoted at work in 6 months"</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Digital Detox ROI Calculator - Complete Implementation

// Platform data values (annual revenue per user)
const platformData = {
    facebook: { time: 34, dataValue: 35, adRevenue: 53, color: '#39ff14' },
    instagram: { time: 29, dataValue: 42, adRevenue: 48, color: '#2dd4ff' },
    tiktok: { time: 52, dataValue: 28, adRevenue: 65, color: '#ffcc00' },
    twitter: { time: 31, dataValue: 24, adRevenue: 37, color: '#ff2d55' },
    youtube: { time: 41, dataValue: 31, adRevenue: 29, color: '#9d4edd' },
    linkedin: { time: 17, dataValue: 38, adRevenue: 45, color: '#0077b5' }
};

// Mental health improvement factors
const mentalHealthFactors = {
    1: { label: 'None', improvement: 0.1, color: '#39ff14' },
    2: { label: 'Low', improvement: 0.2, color: '#2dd4ff' },
    3: { label: 'Moderate', improvement: 0.35, color: '#ffcc00' },
    4: { label: 'High', improvement: 0.5, color: '#ffa500' },
    5: { label: 'Severe', improvement: 0.7, color: '#ff2d55' }
};

// Data sharing levels
const dataSharingLevels = {
    1: { label: 'Minimal', multiplier: 0.5, desc: 'Basic profile only' },
    2: { label: 'Low', multiplier: 0.75, desc: 'Limited sharing' },
    3: { label: 'Moderate', multiplier: 1, desc: 'Average user' },
    4: { label: 'High', multiplier: 1.5, desc: 'Active sharer' },
    5: { label: 'Maximum', multiplier: 2, desc: 'Everything shared' }
};

// Initialize calculator
function ddInitialize() {
    // Set up event listeners
    document.getElementById('sm-time').addEventListener('input', function() {
        ddUpdateTimeDisplay(this.value);
        ddCalculateROI();
    });
    
    document.getElementById('data-sharing').addEventListener('input', function() {
        ddUpdateDataSharing(this.value);
        ddCalculateROI();
    });
    
    document.getElementById('mental-fatigue').addEventListener('input', function() {
        ddUpdateMentalFatigue(this.value);
        ddCalculateROI();
    });
    
    document.getElementById('hourly-rate').addEventListener('input', ddCalculateROI);
    
    // Platform checkboxes
    document.querySelectorAll('input[name="platform"]').forEach(cb => {
        cb.addEventListener('change', ddCalculateROI);
    });
    
    // Goal radios
    document.querySelectorAll('input[name="reduction-goal"]').forEach(rb => {
        rb.addEventListener('change', ddCalculateROI);
    });
    
    // Initial calculation
    setTimeout(ddCalculateROI, 300);
}

// Update time display
function ddUpdateTimeDisplay(hours) {
    const display = document.getElementById('sm-time-display');
    display.textContent = `${hours} hour${hours != 1 ? 's' : ''}`;
}

// Update data sharing display
function ddUpdateDataSharing(level) {
    const display = document.getElementById('data-sharing-display');
    const data = dataSharingLevels[level];
    display.textContent = data.label;
    display.style.color = level <= 2 ? '#39ff14' : level <= 3 ? '#ffcc00' : '#ff2d55';
}

// Update mental fatigue display
function ddUpdateMentalFatigue(level) {
    const display = document.getElementById('mental-fatigue-display');
    const data = mentalHealthFactors[level];
    display.textContent = data.label;
    display.style.color = data.color;
}

// Adjust input values
function ddAdjustValue(field, amount) {
    const input = document.getElementById(field);
    if (input) {
        let value = parseFloat(input.value) + amount;
        value = Math.max(0, Math.min(500, value));
        input.value = value;
        ddCalculateROI();
    }
}

// Main ROI calculation
function ddCalculateROI() {
    try {
        // Get inputs
        const dailyHours = parseFloat(document.getElementById('sm-time').value);
        const hourlyRate = parseFloat(document.getElementById('hourly-rate').value) || 25;
        const dataSharingLevel = parseInt(document.getElementById('data-sharing').value);
        const mentalFatigueLevel = parseInt(document.getElementById('mental-fatigue').value);
        
        // Get selected platforms
        const selectedPlatforms = Array.from(document.querySelectorAll('input[name="platform"]:checked'))
            .map(cb => cb.value);
        
        // Get reduction goal
        const reductionGoal = parseFloat(document.querySelector('input[name="reduction-goal"]:checked').value);
        
        // Calculate time value
        const weeklyHours = dailyHours * 7;
        const annualHours = weeklyHours * 52;
        const timeValue = annualHours * hourlyRate;
        
        // Calculate data value
        let totalDataValue = 0;
        selectedPlatforms.forEach(platform => {
            if (platformData[platform]) {
                totalDataValue += platformData[platform].dataValue * dataSharingLevels[dataSharingLevel].multiplier;
            }
        });
        
        // Calculate mental ROI
        const mentalImprovement = mentalHealthFactors[mentalFatigueLevel].improvement * reductionGoal * 100;
        
        // Calculate reclaimed time
        const reclaimedHoursWeekly = weeklyHours * reductionGoal;
        const reclaimedTimeValue = reclaimedHoursWeekly * 52 * hourlyRate;
        
        // Calculate total ROI percentage
        const totalInvestment = timeValue + totalDataValue;
        const totalReturn = reclaimedTimeValue + (totalDataValue * reductionGoal);
        const totalROI = totalInvestment > 0 ? ((totalReturn - totalInvestment) / totalInvestment * 100) : 0;
        
        // Update UI
        ddUpdateResults(
            timeValue, 
            totalDataValue, 
            mentalImprovement, 
            totalROI,
            weeklyHours,
            reclaimedHoursWeekly,
            selectedPlatforms.length
        );
        
    } catch (error) {
        console.error('ROI Calculation error:', error);
    }
}

// Update results display
function ddUpdateResults(timeValue, dataValue, mentalROI, totalROI, weeklyHours, reclaimedHours, platformCount) {
    // Show results section
    document.getElementById('dd-results-section').style.display = 'block';
    
    // Update summary cards
    document.getElementById('dd-time-value').textContent = `$${Math.round(timeValue).toLocaleString()}`;
    document.getElementById('dd-data-value').textContent = `$${Math.round(dataValue)}`;
    document.getElementById('dd-mental-roi').textContent = `${Math.round(mentalROI)}%`;
    document.getElementById('dd-total-roi').textContent = `${Math.round(totalROI)}%`;
    document.getElementById('dd-total-roi').style.color = totalROI > 50 ? '#39ff14' : totalROI > 20 ? '#ffcc00' : '#ff2d55';
    
    // Update time visualization
    document.getElementById('dd-current-time').textContent = `${weeklyHours.toFixed(1)} hrs/week`;
    document.getElementById('dd-reclaimed-time').textContent = `${reclaimedHours.toFixed(1)} hrs/week`;
    document.getElementById('dd-reclaimed-bar').style.width = `${(reclaimedHours / weeklyHours * 100)}%`;
    
    // Update reallocation suggestions
    const suggestions = document.getElementById('dd-reallocation-suggestions');
    if (reclaimedHours >= 10) {
        suggestions.innerHTML = `ğŸ¯ <strong>${reclaimedHours.toFixed(1)} hours/week reclaimed!</strong> You could: Learn a new language (6 months), write a book (4 months), train for a marathon (3 months), or start a profitable side business.`;
    } else if (reclaimedHours >= 5) {
        suggestions.innerHTML = `âœ¨ <strong>${reclaimedHours.toFixed(1)} hours/week reclaimed!</strong> Perfect for: Gym routine (3x/week), meditation practice, online course completion, or quality family time.`;
    } else {
        suggestions.innerHTML = `ğŸ‘ <strong>${reclaimedHours.toFixed(1)} hours/week reclaimed!</strong> Great for: Daily reading, short workouts, skill practice, or creative hobbies.`;
    }
}

// Generate personalized action plan
function ddGeneratePlan() {
    const dailyHours = parseFloat(document.getElementById('sm-time').value);
    const mentalLevel = parseInt(document.getElementById('mental-fatigue').value);
    const reductionGoal = parseFloat(document.querySelector('input[name="reduction-goal"]:checked').value);
    const selectedPlatforms = Array.from(document.querySelectorAll('input[name="platform"]:checked'))
        .map(cb => cb.value);
    
    const planContent = document.getElementById('dd-plan-content');
    const planSection = document.getElementById('dd-action-plan');
    
    // Build personalized plan
    let planHTML = `
        <div style="margin-bottom:16px;">
            <div style="color:var(--accent);font-weight:600;margin-bottom:8px;">ğŸ¯ Your 30-Day Digital Minimalism Roadmap</div>
            <div style="color:rgba(230,250,255,0.9);font-size:0.9rem;">
                Based on your ${dailyHours} hours/day usage across ${selectedPlatforms.length} platforms
            </div>
        </div>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:16px;">
    `;
    
    // Week 1: Awareness
    planHTML += `
        <div style="padding:12px;background:rgba(45,212,255,0.05);border-radius:8px;">
            <div style="color:#39ff14;font-weight:600;margin-bottom:8px;">ğŸ“… Week 1: Awareness</div>
            <ul style="margin:0;padding-left:16px;font-size:0.9rem;color:rgba(230,250,255,0.9);">
                <li>Track your exact usage with screen time features</li>
                <li>Delete 1 least-used app</li>
                <li>Turn off non-essential notifications</li>
                <li>Set app time limits (${Math.round(dailyHours * 0.8)} hours max)</li>
            </ul>
        </div>
    `;
    
    // Week 2: Reduction
    planHTML += `
        <div style="padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;">
            <div style="color:#ffcc00;font-weight:600;margin-bottom:8px;">ğŸ“… Week 2: Reduction</div>
            <ul style="margin:0;padding-left:16px;font-size:0.9rem;color:rgba(230,250,255,0.9);">
                <li>Unfollow accounts that don't add value</li>
                <li>Designate "phone-free" hours (start with 2 hours/day)</li>
                <li>Replace social scrolling with: ${ddGetAlternativeActivity()}</li>
                <li>Clean up your contacts/following lists</li>
            </ul>
        </div>
    `;
    
    // Week 3: Replacement
    planHTML += `
        <div style="padding:12px;background:rgba(255,204,0,0.05);border-radius:8px;">
            <div style="color:#9d4edd;font-weight:600;margin-bottom:8px;">ğŸ“… Week 3: Replacement</div>
            <ul style="margin:0;padding-left:16px;font-size:0.9rem;color:rgba(230,250,255,0.9);">
                <li>Join a real-world activity or club</li>
                <li>Start a ${ddGetSkillSuggestion()} project</li>
                <li>Schedule in-person meetings instead of DMs</li>
                <li>Create a digital-free bedtime routine</li>
            </ul>
        </div>
    `;
    
    // Week 4: Optimization
    planHTML += `
        <div style="padding:12px;background:rgba(157,78,221,0.05);border-radius:8px;">
            <div style="color:#2dd4ff;font-weight:600;margin-bottom:8px;">ğŸ“… Week 4: Optimization</div>
            <ul style="margin:0;padding-left:16px;font-size:0.9rem;color:rgba(230,250,255,0.9);">
                <li>Audit remaining digital usage</li>
                <li>Set up intentional social media checks (2x/day)</li>
                <li>Establish digital sabbath (1 day/week offline)</li>
                <li>Review progress and adjust goals</li>
            </ul>
        </div>
    `;
    
    planHTML += `</div>`;
    
    // Add motivational metrics
    planHTML += `
        <div style="margin-top:16px;padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
            <div style="color:var(--accent);font-weight:600;margin-bottom:8px;">ğŸ“Š Expected Outcomes After 30 Days</div>
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:12px;font-size:0.9rem;">
                <div>
                    <div style="color:#39ff14;">Time Saved</div>
                    <div style="color:rgba(230,250,255,0.9);">${Math.round(dailyHours * reductionGoal * 30)} hours</div>
                </div>
                <div>
                    <div style="color:#2dd4ff;">Focus Gain</div>
                    <div style="color:rgba(230,250,255,0.9);">${mentalHealthFactors[mentalLevel].improvement * 100}%</div>
                </div>
                <div>
                    <div style="color:#ffcc00;">Data Protected</div>
                    <div style="color:rgba(230,250,255,0.9);">$${Math.round(selectedPlatforms.length * 25 * reductionGoal)} value</div>
                </div>
                <div>
                    <div style="color:#9d4edd;">Life Satisfaction</div>
                    <div style="color:rgba(230,250,255,0.9);">+25-40%</div>
                </div>
            </div>
        </div>
    `;
    
    planContent.innerHTML = planHTML;
    planSection.style.display = 'block';
    
    // Smooth scroll to plan
    planSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Get alternative activity suggestion
function ddGetAlternativeActivity() {
    const activities = [
        'reading physical books',
        'learning a new skill online',
        'outdoor exercise',
        'creative writing',
        'cooking new recipes',
        'meditation practice',
        'podcast listening',
        'instrument practice'
    ];
    return activities[Math.floor(Math.random() * activities.length)];
}

// Get skill suggestion
function ddGetSkillSuggestion() {
    const skills = [
        'coding', 'photography', 'writing', 'cooking', 
        'language learning', 'graphic design', 'music production',
        'woodworking', 'gardening', 'financial investing'
    ];
    return skills[Math.floor(Math.random() * skills.length)];
}

// Share results
function ddShareResults() {
    const timeValue = document.getElementById('dd-time-value').textContent;
    const totalROI = document.getElementById('dd-total-roi').textContent;
    
    const text = `ğŸ“± Digital Detox ROI: My attention is worth ${timeValue}/year! 
A ${totalROI} ROI from reducing social media usage.

Calculate your own at The Most Useful Site in the World`;
    
    if (navigator.share) {
        navigator.share({
            title: 'My Digital Detox ROI Results',
            text: text,
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(text).then(() => {
            alert('Results copied to clipboard! Share with friends.');
        });
    }
}

// Save plan
function ddSavePlan() {
    const plan = {
        timestamp: new Date().toISOString(),
        dailyHours: document.getElementById('sm-time').value,
        hourlyRate: document.getElementById('hourly-rate').value,
        reductionGoal: document.querySelector('input[name="reduction-goal"]:checked').value,
        platforms: Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.value)
    };
    
    localStorage.setItem('dd-detox-plan', JSON.stringify(plan));
    
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'âœ… Saved!';
    setTimeout(() => {
        button.textContent = originalText;
    }, 2000);
}

// Export report
function ddExportReport() {
    const timeValue = document.getElementById('dd-time-value').textContent;
    const dataValue = document.getElementById('dd-data-value').textContent;
    const mentalROI = document.getElementById('dd-mental-roi').textContent;
    const totalROI = document.getElementById('dd-total-roi').textContent;
    
    const report = `
DIGITAL DETOX ROI REPORT
=======================

ğŸ“Š SUMMARY
â€¢ Time Value: ${timeValue}/year
â€¢ Data Value: ${dataValue}/year
â€¢ Mental Improvement: ${mentalROI}
â€¢ Total ROI: ${totalROI}

ğŸ“± CURRENT USAGE
â€¢ Daily Social Media: ${document.getElementById('sm-time').value} hours
â€¢ Platforms: ${Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.value).join(', ')}
â€¢ Hourly Rate: $${document.getElementById('hourly-rate').value}/hour

ğŸ¯ RECOMMENDATIONS
â€¢ Reduce usage by: ${document.querySelector('input[name="reduction-goal"]:checked').value * 100}%
â€¢ Reclaimed time: ${document.getElementById('dd-reclaimed-time').textContent}
â€¢ Alternative activities: ${ddGetAlternativeActivity()}

Generated by The Most Useful Site in the World
    `.trim();
    
    // Create download
    const blob = new Blob([report], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'digital-detox-roi-report.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

// Reset calculator
function ddReset() {
    if (confirm('Reset all inputs to defaults?')) {
        document.getElementById('sm-time').value = 2;
        ddUpdateTimeDisplay(2);
        document.getElementById('data-sharing').value = 3;
        ddUpdateDataSharing(3);
        document.getElementById('mental-fatigue').value = 3;
        ddUpdateMentalFatigue(3);
        document.getElementById('hourly-rate').value = 25;
        
        document.querySelectorAll('input[name="platform"]').forEach(cb => {
            cb.checked = ['facebook', 'instagram', 'twitter', 'youtube'].includes(cb.value);
        });
        
        document.querySelector('input[name="reduction-goal"][value="0.25"]').checked = true;
        
        document.getElementById('dd-results-section').style.display = 'none';
        document.getElementById('dd-action-plan').style.display = 'none';
        
        ddCalculateROI();
    }
}

// Initialize on load
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', ddInitialize);
} else {
    ddInitialize();
}
</script>
</div>
