<h2 id="number-theory-title" style="margin-top:0;">Number Theory Tools</h2>

<form aria-describedby="number-theory-desc">
  <p id="number-theory-desc" class="small">Explore properties of integers. Check primality, compute GCD/LCM, and generate factors with step‑by‑step notes.</p>

  <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
    <div class="field">
      <label for="nt-number">Number</label>
      <input id="nt-number" type="number" placeholder="e.g. 42" style="width:100%;" />
    </div>

    <div class="field">
      <label for="nt-second">Second number (optional)</label>
      <input id="nt-second" type="number" placeholder="e.g. 56" style="width:100%;" />
    </div>

    <div class="field">
      <label for="nt-operation">Operation</label>
      <select id="nt-operation" style="width:100%;">
        <option value="prime" selected>Prime check</option>
        <option value="factors">Factors</option>
        <option value="gcd">GCD</option>
        <option value="lcm">LCM</option>
      </select>
    </div>

    <div class="field">
      <label for="nt-show-steps">Show steps</label>
      <select id="nt-show-steps" style="width:100%;">
        <option value="yes" selected>Yes</option>
        <option value="no">No</option>
      </select>
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="ntCalculate(this)">Calculate</button>
    <button type="button" class="secondary" onclick="ntReset(this)">Reset</button>
    <button type="button" onclick="ntCopy(this)">Copy Result</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Results</h3>
  <textarea id="nt-output" rows="12" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
    <div id="nt-hint" class="small" style="opacity:0.9;"></div>
  </div>
</div>

<script>
/* number-theory.html
   - Provides prime check, factors, GCD, LCM
   - Scoped with nt- prefix
*/

function ntReset(btn){
  const card=btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#nt-output').value="";
  card.querySelector('#nt-hint').textContent="";
}

function ntCopy(btn){
  const card=btn.closest('.card');
  const out=card.querySelector('#nt-output').value;
  if(!out.trim())return;
  navigator.clipboard?.writeText(out).then(()=>{
    const hint=card.querySelector('#nt-hint');
    hint.textContent="Copied to clipboard.";
    setTimeout(()=>{if(hint.textContent==="Copied to clipboard.")hint.textContent="";},1600);
  }).catch(()=>alert("Copy failed."));
}

function ntCalculate(btn){
  const card=btn.closest('.card');
  const n=parseInt(card.querySelector('#nt-number').value);
  const m=parseInt(card.querySelector('#nt-second').value);
  const op=card.querySelector('#nt-operation').value;
  const showSteps=card.querySelector('#nt-show-steps').value==="yes";
  if(isNaN(n)){card.querySelector('#nt-hint').textContent="Please enter a number.";return;}
  let output="";
  if(op==="prime"){
    const prime=isPrime(n);
    output=`${n} is ${prime?"prime":"not prime"}.`;
    if(showSteps)output+=`\nSteps: Test divisibility up to √${n}.`;
  } else if(op==="factors"){
    const factors=getFactors(n);
    output=`Factors of ${n}: ${factors.join(', ')}`;
    if(showSteps)output+=`\nSteps: Divide ${n} by integers ≤ √${n}.`;
  } else if(op==="gcd"){
    if(isNaN(m)){output="Second number required.";}
    else{
      const g=gcd(n,m);
      output=`GCD(${n},${m}) = ${g}`;
      if(showSteps)output+=`\nSteps: Apply Euclidean algorithm.`;
    }
  } else if(op==="lcm"){
    if(isNaN(m)){output="Second number required.";}
    else{
      const l=(n*m)/gcd(n,m);
      output=`LCM(${n},${m}) = ${l}`;
      if(showSteps)output+=`\nSteps: LCM = (n×m)/GCD.`;
    }
  }
  card.querySelector('#nt-output').value=output;
  card.querySelector('#nt-hint').textContent="Results generated.";
}

function isPrime(num){
  if(num<=1)return false;
  if(num<=3)return true;
  if(num%2===0||num%3===0)return false;
  for(let
