<h2 id="fitness-score-calculator-title">üèÉ‚Äç‚ôÇÔ∏è Fitness Score Analyzer</h2>

<form aria-describedby="fitness-description">
    <p id="fitness-description" class="small" style="color:rgba(230,250,255,0.9);margin-bottom:20px;">
        Calculate your comprehensive fitness score with detailed insights and personalized recommendations.
        <span style="color:var(--accent);font-weight:500;">Based on scientific health metrics and activity analysis.</span>
    </p>
    
    <!-- Personal Information -->
    <div style="margin-bottom:24px;">
        <h3 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">üë§ Personal Information</h3>
        <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:16px;">
            <div>
                <label for="fs-age" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    üéÇ Age (years)
                </label>
                <div style="position:relative;">
                    <input id="fs-age" type="number" min="1" max="120" value="30" 
                           style="width:100%;padding:14px;padding-right:40px;border-radius:10px;border:2px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
                    <div style="position:absolute;right:16px;top:50%;transform:translateY(-50%);color:rgba(230,250,255,0.7);">yrs</div>
                </div>
                <div style="margin-top:6px;font-size:0.8rem;color:rgba(230,250,255,0.6);">
                    <span id="fs-age-range" style="color:#39ff14;">Optimal range: 20-40</span>
                </div>
            </div>
            
            <div>
                <label for="fs-gender" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    üë§ Gender
                </label>
                <div style="display:flex;gap:10px;">
                    <button type="button" onclick="fsSetGender('male')" id="fs-gender-male"
                            style="flex:1;padding:12px;background:rgba(45,212,255,0.2);border:2px solid var(--accent);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
                        Male
                    </button>
                    <button type="button" onclick="fsSetGender('female')" id="fs-gender-female"
                            style="flex:1;padding:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:rgba(230,250,255,0.8);cursor:pointer;">
                        Female
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Health Metrics -->
    <div style="margin-bottom:24px;">
        <h3 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">‚ù§Ô∏è Health Metrics</h3>
        <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:16px;">
            <div>
                <label for="fs-resting-hr" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    üíì Resting Heart Rate
                </label>
                <div style="position:relative;">
                    <input id="fs-resting-hr" type="range" min="30" max="120" value="70" 
                           style="width:100%;margin-bottom:8px;" />
                    <div style="display:flex;justify-content:space-between;">
                        <span style="font-size:0.8rem;color:#ff2d55;">120</span>
                        <span id="fs-hr-value" style="color:#fff;font-weight:600;font-size:1.1rem;">70</span>
                        <span style="font-size:0.8rem;color:#39ff14;">30</span>
                    </div>
                </div>
                <div style="margin-top:6px;font-size:0.8rem;color:rgba(230,250,255,0.6);">
                    <span id="fs-hr-rating" style="color:#ffcc00;">Average</span>
                </div>
            </div>
            
            <div>
                <label for="fs-vo2max" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    üèÉ‚Äç‚ôÇÔ∏è VO‚ÇÇ Max Estimate
                </label>
                <div style="position:relative;">
                    <input id="fs-vo2max" type="range" min="20" max="80" value="40" 
                           style="width:100%;margin-bottom:8px;" />
                    <div style="display:flex;justify-content:space-between;">
                        <span style="font-size:0.8rem;color:#39ff14;">80</span>
                        <span id="fs-vo2-value" style="color:#fff;font-weight:600;font-size:1.1rem;">40</span>
                        <span style="font-size:0.8rem;color:#ff2d55;">20</span>
                    </div>
                </div>
                <div style="margin-top:6px;font-size:0.8rem;color:rgba(230,250,255,0.6);">
                    <span id="fs-vo2-rating" style="color:#ffcc00;">Moderate</span>
                </div>
            </div>
        </div>
        
        <!-- BMI Calculator -->
        <div style="margin-top:16px;">
            <label style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                ‚öñÔ∏è Body Composition
            </label>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                    <input id="fs-height" type="number" placeholder="Height (cm)" min="100" max="250" 
                           style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
                </div>
                <div>
                    <input id="fs-weight" type="number" placeholder="Weight (kg)" min="30" max="200" 
                           style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
                </div>
            </div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center;">
                <button onclick="fsCalculateBMI()" style="padding:8px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;">
                    Calculate BMI
                </button>
                <div id="fs-bmi-result" style="color:rgba(230,250,255,0.7);font-size:0.9rem;">
                    Enter height & weight
                </div>
            </div>
        </div>
    </div>
    
    <!-- Lifestyle & Activity -->
    <div style="margin-bottom:24px;">
        <h3 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">üö¥‚Äç‚ôÇÔ∏è Activity Profile</h3>
        
        <!-- Activity Level -->
        <div style="margin-bottom:16px;">
            <div style="color:rgba(230,250,255,0.8);margin-bottom:8px;font-size:14px;">Weekly Exercise:</div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
                <button type="button" onclick="fsSetActivity('sedentary')" id="fs-activity-sedentary"
                        style="padding:12px 16px;background:rgba(45,212,255,0.2);border:2px solid var(--accent);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
                    üõãÔ∏è Sedentary
                </button>
                <button type="button" onclick="fsSetActivity('light')" id="fs-activity-light"
                        style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:rgba(230,250,255,0.8);cursor:pointer;">
                    üö∂‚Äç‚ôÇÔ∏è Light
                </button>
                <button type="button" onclick="fsSetActivity('moderate')" id="fs-activity-moderate"
                        style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:rgba(230,250,255,0.8);cursor:pointer;">
                    üèÉ‚Äç‚ôÇÔ∏è Moderate
                </button>
                <button type="button" onclick="fsSetActivity('active')" id="fs-activity-active"
                        style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:rgba(230,250,255,0.8);cursor:pointer;">
                    üèãÔ∏è‚Äç‚ôÇÔ∏è Active
                </button>
                <button type="button" onclick="fsSetActivity('athlete')" id="fs-activity-athlete"
                        style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:rgba(230,250,255,0.8);cursor:pointer;">
                    ü•á Athlete
                </button>
            </div>
        </div>
        
        <!-- Additional Factors -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
            <div>
                <label for="fs-sleep" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    üò¥ Sleep Quality
                </label>
                <select id="fs-sleep" style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;cursor:pointer;">
                    <option value="poor">Poor (Ôºú6 hours)</option>
                    <option value="average" selected>Average (6-7 hours)</option>
                    <option value="good">Good (7-8 hours)</option>
                    <option value="excellent">Excellent (8+ hours)</option>
                </select>
            </div>
            
            <div>
                <label for="fs-diet" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">
                    ü•ó Diet Quality
                </label>
                <select id="fs-diet" style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;cursor:pointer;">
                    <option value="poor">Poor (Fast food)</option>
                    <option value="average" selected>Average (Mixed)</option>
                    <option value="good">Good (Balanced)</option>
                    <option value="excellent">Excellent (Clean)</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="actions" style="display:flex;gap:12px;">
        <button type="button" onclick="fsCalculate()" 
                style="flex:1;padding:16px;background:linear-gradient(135deg, rgba(57,255,20,0.2), rgba(45,212,255,0.2));border:2px solid rgba(57,255,20,0.4);border-radius:12px;color:#39ff14;cursor:pointer;font-weight:600;font-size:1.1rem;display:flex;align-items:center;justify-content:center;gap:10px;">
            üèÜ Calculate Fitness Score
        </button>
        <button type="button" onclick="fsReset()"
                style="padding:16px 24px;background:rgba(255,77,77,0.1);border:2px solid rgba(255,77,77,0.3);border-radius:12px;color:#ff4d4d;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:8px;">
            üîÑ Reset
        </button>
    </div>
</form>

<!-- Results Display -->
<div class="results" aria-live="polite" style="margin-top:24px;">
    <!-- Score Display -->
    <div style="text-align:center;margin-bottom:24px;">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">Your Overall Fitness Score</div>
        <div id="fs-score-display" style="
            width:180px;
            height:180px;
            margin:0 auto;
            border-radius:50%;
            background:conic-gradient(
                #ff2d55 0%,
                #ffcc00 25%,
                #39ff14 50%,
                #2dd4ff 75%,
                #9d4edd 100%
            );
            display:flex;
            align-items:center;
            justify-content:center;
            position:relative;
            animation:fsPulse 2s infinite alternate;
        ">
            <div style="
                width:140px;
                height:140px;
                background:var(--panel);
                border-radius:50%;
                display:flex;
                align-items:center;
                justify-content:center;
                flex-direction:column;
            ">
                <div id="fs-score-value" style="font-size:2.5rem;font-weight:800;color:#fff;">--</div>
                <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);">/ 100</div>
            </div>
        </div>
        <div id="fs-score-category" style="margin-top:12px;font-size:1.2rem;font-weight:600;color:var(--accent);">
            Calculate to see your category
        </div>
    </div>
    
    <!-- Score Breakdown -->
    <div style="margin-bottom:20px;">
        <h4 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">üìä Score Breakdown</h4>
        <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;">
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="font-size:0.8rem;color:rgba(230,250,255,0.7);margin-bottom:4px;">Cardiovascular</div>
                <div id="fs-cardio-score" style="font-size:1.1rem;color:#2dd4ff;font-weight:600;">--</div>
                <div style="height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin-top:6px;overflow:hidden;">
                    <div id="fs-cardio-bar" style="height:100%;background:#2dd4ff;width:0%;"></div>
                </div>
            </div>
            
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="font-size:0.8rem;color:rgba(230,250,255,0.7);margin-bottom:4px;">Activity Level</div>
                <div id="fs-activity-score" style="font-size:1.1rem;color:#39ff14;font-weight:600;">--</div>
                <div style="height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin-top:6px;overflow:hidden;">
                    <div id="fs-activity-bar" style="height:100%;background:#39ff14;width:0%;"></div>
                </div>
            </div>
            
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="font-size:0.8rem;color:rgba(230,250,255,0.7);margin-bottom:4px;">Body Composition</div>
                <div id="fs-body-score" style="font-size:1.1rem;color:#ffcc00;font-weight:600;">--</div>
                <div style="height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin-top:6px;overflow:hidden;">
                    <div id="fs-body-bar" style="height:100%;background:#ffcc00;width:0%;"></div>
                </div>
            </div>
            
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="font-size:0.8rem;color:rgba(230,250,255,0.7);margin-bottom:4px;">Lifestyle</div>
                <div id="fs-lifestyle-score" style="font-size:1.1rem;color:#9d4edd;font-weight:600;">--</div>
                <div style="height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin-top:6px;overflow:hidden;">
                    <div id="fs-lifestyle-bar" style="height:100%;background:#9d4edd;width:0%;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recommendations -->
    <div id="fs-recommendations" style="display:none;margin-top:20px;">
        <h4 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">üéØ Personalized Recommendations</h4>
        <div style="
            padding:16px;
            background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(57,255,20,0.05));
            border-radius:10px;
            border:1px solid rgba(45,212,255,0.2);
        ">
            <div id="fs-recommendations-content" style="line-height:1.6;"></div>
        </div>
    </div>
    
    <!-- Health Insights -->
    <div id="fs-insights" style="display:none;margin-top:20px;">
        <h4 style="color:var(--accent);margin:0 0 12px 0;font-size:1rem;">üìà Health Insights</h4>
        <div style="
            padding:16px;
            background:rgba(0,0,0,0.2);
            border-radius:10px;
            border:1px solid rgba(255,255,255,0.05);
        ">
            <div id="fs-insights-content" style="line-height:1.6;"></div>
        </div>
    </div>
</div>

<script>
/* fitness-score-calculator.html
   - Comprehensive fitness score calculator with visualization
   - Prefix: fs
*/

let fsGender = 'male';
let fsActivity = 'sedentary';

// Initialize range sliders
function fsInitializeSliders() {
    const hrSlider = document.getElementById('fs-resting-hr');
    const vo2Slider = document.getElementById('fs-vo2max');
    const hrValue = document.getElementById('fs-hr-value');
    const vo2Value = document.getElementById('fs-vo2-value');
    
    // Update display when sliders change
    hrSlider.addEventListener('input', function() {
        const value = parseInt(this.value);
        hrValue.textContent = value;
        
        // Update rating
        let rating, color;
        if (value <= 60) {
            rating = 'Excellent';
            color = '#39ff14';
        } else if (value <= 70) {
            rating = 'Good';
            color = '#2dd4ff';
        } else if (value <= 80) {
            rating = 'Average';
            color = '#ffcc00';
        } else {
            rating = 'Poor';
            color = '#ff2d55';
        }
        
        document.getElementById('fs-hr-rating').textContent = rating;
        document.getElementById('fs-hr-rating').style.color = color;
    });
    
    vo2Slider.addEventListener('input', function() {
        const value = parseInt(this.value);
        vo2Value.textContent = value;
        
        // Update rating
        let rating, color;
        if (value >= 60) {
            rating = 'Excellent';
            color = '#39ff14';
        } else if (value >= 50) {
            rating = 'Very Good';
            color = '#2dd4ff';
        } else if (value >= 40) {
            rating = 'Good';
            color = '#39ff14';
        } else if (value >= 30) {
            rating = 'Fair';
            color = '#ffcc00';
        } else {
            rating = 'Poor';
            color = '#ff2d55';
        }
        
        document.getElementById('fs-vo2-rating').textContent = rating;
        document.getElementById('fs-vo2-rating').style.color = color;
    });
    
    // Trigger initial updates
    hrSlider.dispatchEvent(new Event('input'));
    vo2Slider.dispatchEvent(new Event('input'));
}

function fsSetGender(gender) {
    fsGender = gender;
    
    const maleBtn = document.getElementById('fs-gender-male');
    const femaleBtn = document.getElementById('fs-gender-female');
    
    if (gender === 'male') {
        maleBtn.style.background = 'rgba(45,212,255,0.2)';
        maleBtn.style.border = '2px solid var(--accent)';
        maleBtn.style.color = 'var(--accent)';
        maleBtn.style.fontWeight = '600';
        
        femaleBtn.style.background = 'rgba(255,255,255,0.05)';
        femaleBtn.style.border = '1px solid rgba(255,255,255,0.1)';
        femaleBtn.style.color = 'rgba(230,250,255,0.8)';
        femaleBtn.style.fontWeight = '400';
    } else {
        femaleBtn.style.background = 'rgba(255,45,85,0.2)';
        femaleBtn.style.border = '2px solid #ff2d55';
        femaleBtn.style.color = '#ff2d55';
        femaleBtn.style.fontWeight = '600';
        
        maleBtn.style.background = 'rgba(255,255,255,0.05)';
        maleBtn.style.border = '1px solid rgba(255,255,255,0.1)';
        maleBtn.style.color = 'rgba(230,250,255,0.8)';
        maleBtn.style.fontWeight = '400';
    }
}

function fsSetActivity(activity) {
    fsActivity = activity;
    
    const activities = ['sedentary', 'light', 'moderate', 'active', 'athlete'];
    activities.forEach(act => {
        const btn = document.getElementById(`fs-activity-${act}`);
        if (act === activity) {
            btn.style.background = 'rgba(45,212,255,0.2)';
            btn.style.border = '2px solid var(--accent)';
            btn.style.color = 'var(--accent)';
            btn.style.fontWeight = '600';
        } else {
            btn.style.background = 'rgba(255,255,255,0.05)';
            btn.style.border = '1px solid rgba(255,255,255,0.1)';
            btn.style.color = 'rgba(230,250,255,0.8)';
            btn.style.fontWeight = '400';
        }
    });
}

function fsCalculateBMI() {
    const height = parseFloat(document.getElementById('fs-height').value) / 100; // Convert cm to m
    const weight = parseFloat(document.getElementById('fs-weight').value);
    
    if (!height || !weight || height <= 0 || weight <= 0) {
        document.getElementById('fs-bmi-result').innerHTML = 
            '<span style="color:#ff2d55;">Enter valid height & weight</span>';
        return;
    }
    
    const bmi = weight / (height * height);
    let category, color;
    
    if (bmi < 18.5) {
        category = 'Underweight';
        color = '#ffcc00';
    } else if (bmi < 25) {
        category = 'Normal';
        color = '#39ff14';
    } else if (bmi < 30) {
        category = 'Overweight';
        color = '#ffcc00';
    } else {
        category = 'Obese';
        color = '#ff2d55';
    }
    
    document.getElementById('fs-bmi-result').innerHTML = 
        `BMI: <span style="color:${color};font-weight:600;">${bmi.toFixed(1)}</span> (${category})`;
}

function fsCalculate() {
    // Gather inputs
    const age = parseInt(document.getElementById('fs-age').value) || 30;
    const restingHR = parseInt(document.getElementById('fs-resting-hr').value) || 70;
    const vo2max = parseInt(document.getElementById('fs-vo2max').value) || 40;
    const sleep = document.getElementById('fs-sleep').value;
    const diet = document.getElementById('fs-diet').value;
    
    // Calculate component scores
    let cardioScore = fsCalculateCardioScore(age, restingHR, vo2max);
    let activityScore = fsCalculateActivityScore();
    let bodyScore = fsCalculateBodyScore();
    let lifestyleScore = fsCalculateLifestyleScore(sleep, diet);
    
    // Age adjustment
    let ageFactor = 1;
    if (age < 25) ageFactor = 1.1;
    else if (age < 35) ageFactor = 1.0;
    else if (age < 45) ageFactor = 0.95;
    else if (age < 55) ageFactor = 0.9;
    else if (age < 65) ageFactor = 0.85;
    else ageFactor = 0.8;
    
    // Gender adjustment
    let genderFactor = fsGender === 'male' ? 1.0 : 0.95;
    
    // Calculate total score
    let totalScore = (
        cardioScore * 0.35 +      // 35% cardiovascular
        activityScore * 0.30 +     // 30% activity
        bodyScore * 0.25 +         // 25% body composition
        lifestyleScore * 0.10      // 10% lifestyle
    ) * ageFactor * genderFactor;
    
    // Ensure score is between 0-100
    totalScore = Math.max(0, Math.min(100, totalScore));
    
    // Display results
    fsDisplayResults(totalScore, cardioScore, activityScore, bodyScore, lifestyleScore);
}

function fsCalculateCardioScore(age, restingHR, vo2max) {
    // Resting HR component (0-40 points)
    let hrScore;
    if (restingHR <= 55) hrScore = 40;
    else if (restingHR <= 60) hrScore = 35;
    else if (restingHR <= 65) hrScore = 30;
    else if (restingHR <= 70) hrScore = 25;
    else if (restingHR <= 75) hrScore = 20;
    else if (restingHR <= 80) hrScore = 15;
    else hrScore = 10;
    
    // VO2Max component (0-40 points)
    let vo2Score;
    if (vo2max >= 60) vo2Score = 40;
    else if (vo2max >= 55) vo2Score = 35;
    else if (vo2max >= 50) vo2Score = 30;
    else if (vo2max >= 45) vo2Score = 25;
    else if (vo2max >= 40) vo2Score = 20;
    else if (vo2max >= 35) vo2Score = 15;
    else if (vo2max >= 30) vo2Score = 10;
    else vo2Score = 5;
    
    // Age adjustment for cardio
    let ageAdjustment = 1.0;
    if (age < 30) ageAdjustment = 1.0;
    else if (age < 40) ageAdjustment = 0.95;
    else if (age < 50) ageAdjustment = 0.90;
    else if (age < 60) ageAdjustment = 0.85;
    else ageAdjustment = 0.80;
    
    return ((hrScore + vo2Score) / 2) * ageAdjustment;
}

function fsCalculateActivityScore() {
    // Activity level scoring
    let score;
    switch(fsActivity) {
        case 'sedentary': score = 20; break;
        case 'light': score = 40; break;
        case 'moderate': score = 60; break;
        case 'active': score = 80; break;
        case 'athlete': score = 95; break;
        default: score = 30;
    }
    return score;
}

function fsCalculateBodyScore() {
    const height = parseFloat(document.getElementById('fs-height').value);
    const weight = parseFloat(document.getElementById('fs-weight').value);
    
    if (!height || !weight) return 50; // Default if not entered
    
    const bmi = weight / ((height/100) * (height/100));
    
    // BMI scoring
    if (bmi < 18.5) return 30;      // Underweight
    if (bmi < 22) return 90;        // Ideal low
    if (bmi < 24) return 95;        // Ideal
    if (bmi < 26) return 85;        // Good
    if (bmi < 28) return 70;        // Fair
    if (bmi < 30) return 50;        // Overweight
    if (bmi < 35) return 30;        // Obese I
    return 10;                      // Obese II+
}

function fsCalculateLifestyleScore(sleep, diet) {
    let sleepScore, dietScore;
    
    // Sleep scoring
    switch(sleep) {
        case 'excellent': sleepScore = 100; break;
        case 'good': sleepScore = 80; break;
        case 'average': sleepScore = 60; break;
        case 'poor': sleepScore = 30; break;
        default: sleepScore = 50;
    }
    
    // Diet scoring
    switch(diet) {
        case 'excellent': dietScore = 100; break;
        case 'good': dietScore = 80; break;
        case 'average': dietScore = 60; break;
        case 'poor': dietScore = 30; break;
        default: dietScore = 50;
    }
    
    return (sleepScore + dietScore) / 2;
}

function fsDisplayResults(totalScore, cardioScore, activityScore, bodyScore, lifestyleScore) {
    // Update main score display
    document.getElementById('fs-score-value').textContent = Math.round(totalScore);
    
    // Update category
    let category, categoryColor;
    if (totalScore >= 90) {
        category = 'üèÜ Elite Fitness';
        categoryColor = '#39ff14';
    } else if (totalScore >= 75) {
        category = 'üí™ Excellent';
        categoryColor = '#2dd4ff';
    } else if (totalScore >= 60) {
        category = 'üëç Good';
        categoryColor = '#ffcc00';
    } else if (totalScore >= 45) {
        category = '‚öñÔ∏è Average';
        categoryColor = '#ffa500';
    } else if (totalScore >= 30) {
        category = '‚ö†Ô∏è Needs Improvement';
        categoryColor = '#ff2d55';
    } else {
        category = 'üö® Critical';
        categoryColor = '#ff0000';
    }
    
    document.getElementById('fs-score-category').textContent = category;
    document.getElementById('fs-score-category').style.color = categoryColor;
    
    // Update breakdown scores
    document.getElementById('fs-cardio-score').textContent = Math.round(cardioScore);
    document.getElementById('fs-activity-score').textContent = Math.round(activityScore);
    document.getElementById('fs-body-score').textContent = Math.round(bodyScore);
    document.getElementById('fs-lifestyle-score').textContent = Math.round(lifestyleScore);
    
    // Update progress bars
    document.getElementById('fs-cardio-bar').style.width = `${cardioScore}%`;
    document.getElementById('fs-activity-bar').style.width = `${activityScore}%`;
    document.getElementById('fs-body-bar').style.width = `${bodyScore}%`;
    document.getElementById('fs-lifestyle-bar').style.width = `${lifestyleScore}%`;
    
    // Generate recommendations
    fsGenerateRecommendations(totalScore, cardioScore, activityScore, bodyScore, lifestyleScore);
    
    // Generate insights
    fsGenerateInsights();
    
    // Show hidden sections
    document.getElementById('fs-recommendations').style.display = 'block';
    document.getElementById('fs-insights').style.display = 'block';
    
    // Animation
    const scoreDisplay = document.getElementById('fs-score-display');
    scoreDisplay.style.animation = 'fsPulse 0.5s ease 3';
}

function fsGenerateRecommendations(totalScore, cardioScore, activityScore, bodyScore, lifestyleScore) {
    let recommendations = '<ul style="margin:0;padding-left:20px;">';
    
    // Cardiovascular recommendations
    if (cardioScore < 60) {
        recommendations += `<li><strong>Improve Cardiovascular Health:</strong> Add 30 minutes of moderate cardio 3-4 times per week</li>`;
    } else if (cardioScore < 80) {
        recommendations += `<li><strong>Maintain Cardiovascular Health:</strong> Continue regular cardio exercise</li>`;
    }
    
    // Activity recommendations
    if (activityScore < 50) {
        recommendations += `<li><strong>Increase Activity:</strong> Aim for 150 minutes of moderate activity weekly</li>`;
    }
    
    // Body composition recommendations
    if (bodyScore < 50) {
        recommendations += `<li><strong>Body Composition:</strong> Consider strength training 2-3 times per week</li>`;
    }
    
    // Lifestyle recommendations
    if (lifestyleScore < 60) {
        recommendations += `<li><strong>
