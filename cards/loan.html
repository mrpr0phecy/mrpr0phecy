<h2 id="loan-title">Loan Calculator</h2>

<form>
  <div class="field">
    <label for="loan-amount">Loan amount</label>
    <div class="input"><input id="loan-amount" type="number" value="10000" /></div>
  </div>

  <div class="row">
    <div class="field">
      <label for="loan-rate">Interest rate (%)</label>
      <div class="input"><input id="loan-rate" type="number" value="5" /></div>
    </div>
    <div class="field">
      <label for="loan-years">Term (years)</label>
      <div class="input"><input id="loan-years" type="number" value="5" /></div>
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="loanCalc(this)">Calculate</button>
    <button type="button" class="secondary" onclick="loanReset(this)">Reset</button>
  </div>
</form>

<div class="results">
  <div class="result">
    <div class="label">Monthly payment</div>
    <div class="value" id="loan-monthly">–</div>
  </div>
  <div class="result">
    <div class="label">Total interest</div>
    <div class="value" id="loan-interest">–</div>
  </div>
</div>

<script>
function loanCalc(btn){
  const card = btn.closest('.card');
  const amount = parseFloat(card.querySelector('#loan-amount').value) || 0;
  const rate = (parseFloat(card.querySelector('#loan-rate').value) || 0) / 100 / 12;
  const years = parseInt(card.querySelector('#loan-years').value) || 0;
  const n = years * 12;

  let monthly = 0;
  if(rate === 0){
    monthly = amount / n;
  } else {
    const pow = Math.pow(1 + rate, n);
    monthly = amount * rate * pow / (pow - 1);
  }

  const total = monthly * n;
  const interest = total - amount;

  const fmt = n => new Intl.NumberFormat(undefined,{style:'currency',currency:'GBP'}).format(n);
  card.querySelector('#loan-monthly').textContent = fmt(monthly);
  card.querySelector('#loan-interest').textContent = fmt(interest);
}

function loanReset(btn){
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#loan-monthly').textContent = '–';
  card.querySelector('#loan-interest').textContent = '–';
}
</script>
