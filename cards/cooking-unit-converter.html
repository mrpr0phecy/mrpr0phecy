<!-- cards/cooking-unit-converter.html -->
<h2 id="cooking-unit-converter-title" style="margin-top:0;color:#ff9966 !important;">ü•Ñ Cooking Unit Converter</h2>

<form aria-describedby="cuc-desc">
    <p id="cuc-desc" class="small">
        <span style="color:#ff9966;font-weight:600">PROFESSIONAL CONVERTER</span> - Convert cooking units with food-specific densities. Accurate conversions for flour, sugar, butter, liquids, and more.
    </p>
    
    <!-- FOOD TYPE SELECTOR -->
    <div style="margin-bottom:20px;">
        <div style="color:#ff9966;font-weight:500;margin-bottom:8px;">üçΩÔ∏è Select Food Type</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button type="button" onclick="cucSelectFood('general')" class="cuc-food-btn cuc-active" data-food="general">
                üåæ General
            </button>
            <button type="button" onclick="cucSelectFood('flour')" class="cuc-food-btn" data-food="flour">
                ü´ô Flour
            </button>
            <button type="button" onclick="cucSelectFood('sugar')" class="cuc-food-btn" data-food="sugar">
                üç¨ Sugar
            </button>
            <button type="button" onclick="cucSelectFood('butter')" class="cuc-food-btn" data-food="butter">
                üßà Butter
            </button>
            <button type="button" onclick="cucSelectFood('liquid')" class="cuc-food-btn" data-food="liquid">
                üíß Liquid
            </button>
            <button type="button" onclick="cucSelectFood('spices')" class="cuc-food-btn" data-food="spices">
                üåø Spices
            </button>
        </div>
    </div>
    
    <!-- CONVERSION INPUTS -->
    <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:end;margin-bottom:16px;">
        <div>
            <label for="cuc-value" style="display:block;margin-bottom:6px;color:#ff9966;font-weight:500;">
                Amount
            </label>
            <input id="cuc-value" type="number" step="any" min="0" value="1" 
                   style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;font-size:16px;" />
        </div>
        
        <div style="text-align:center;padding-bottom:10px;">
            <button type="button" onclick="cucSwapUnits()" 
                    style="background:transparent;border:none;color:#ff9966;cursor:pointer;font-size:24px;padding:0 8px;" 
                    title="Swap units">‚áÑ</button>
        </div>
        
        <div>
            <div id="cuc-result-label" style="display:block;margin-bottom:6px;color:#39ff14;font-weight:500;">
                Converted Amount
            </div>
            <input id="cuc-result" type="text" readonly
                   style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:#39ff14;font-size:16px;text-align:center;" 
                   placeholder="Result will appear here" />
        </div>
    </div>
    
    <!-- UNIT SELECTION -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
        <div>
            <label for="cuc-from" style="display:block;margin-bottom:6px;color:#ff9966;font-weight:500;">
                From Unit
            </label>
            <select id="cuc-from" style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;">
                <!-- Options will be populated based on food type -->
            </select>
        </div>
        
        <div>
            <label for="cuc-to" style="display:block;margin-bottom:6px;color:#ff9966;font-weight:500;">
                To Unit
            </label>
            <select id="cuc-to" style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;">
                <!-- Options will be populated based on food type -->
            </select>
        </div>
    </div>
    
    <!-- COMMON CONVERSIONS QUICK SELECT -->
    <div style="margin-bottom:20px;padding:12px;background:rgba(255,153,102,0.1);border-radius:8px;border:1px solid rgba(255,153,102,0.2);">
        <div style="color:#ff9966;font-weight:500;margin-bottom:8px;font-size:14px;">‚ö° Quick Conversions</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button type="button" onclick="cucQuickConvert('1 cup', 'ml')" class="cuc-quick-btn">1 cup ‚Üí ml</button>
            <button type="button" onclick="cucQuickConvert('1 tbsp', 'ml')" class="cuc-quick-btn">1 tbsp ‚Üí ml</button>
            <button type="button" onclick="cucQuickConvert('1 oz', 'grams')" class="cuc-quick-btn">1 oz ‚Üí grams</button>
            <button type="button" onclick="cucQuickConvert('100 grams', 'cups')" class="cuc-quick-btn">100g ‚Üí cups</button>
            <button type="button" onclick="cucQuickConvert('1 liter', 'cups')" class="cuc-quick-btn">1L ‚Üí cups</button>
        </div>
    </div>
    
    <!-- ACTION BUTTONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="cucConvert()" 
                style="flex:1;padding:14px;background:linear-gradient(135deg, #ff9966, #ff7744);border:none;border-radius:8px;color:#fff;cursor:pointer;font-weight:600;font-size:16px;">
            üîÑ Convert
        </button>
        <button type="button" onclick="cucReset()"
                style="padding:14px 20px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:inherit;cursor:pointer;">
            üóëÔ∏è Reset
        </button>
        <button type="button" onclick="cucCopy()"
                style="padding:14px 20px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
            üìã Copy
        </button>
    </div>
</form>

<!-- RESULTS & EQUIVALENTS -->
<div id="cuc-results" style="margin-top:24px;">
    <!-- CONVERSION HISTORY -->
    <div id="cuc-history" style="margin-bottom:16px;display:none;">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;font-size:14px;">üìä Recent Conversions</div>
        <div id="cuc-history-list" style="font-size:13px;color:rgba(255,255,255,0.8);line-height:1.4;">
            <!-- History items will be added here -->
        </div>
    </div>
    
    <!-- EQUIVALENTS TABLE -->
    <div id="cuc-equivalents" style="margin-bottom:20px;">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;font-size:14px;">üìè Common Equivalents</div>
        <div style="font-size:13px;color:rgba(255,255,255,0.8);background:rgba(0,0,0,0.1);border-radius:8px;padding:12px;border:1px solid rgba(255,255,255,0.05);">
            <div id="cuc-equivalents-content">
                Loading equivalents...
            </div>
        </div>
    </div>
    
    <!-- FOOD SPECIFIC NOTES -->
    <div id="cuc-notes" style="padding:12px;background:rgba(255,153,102,0.1);border-radius:8px;border:1px solid rgba(255,153,102,0.3);">
        <div style="color:#ff9966;font-weight:600;margin-bottom:6px;font-size:14px;">üí° Cooking Tips</div>
        <div id="cuc-notes-content" style="font-size:13px;color:rgba(255,255,255,0.9);">
            <span id="cuc-tip-text">Always spoon flour into measuring cups, don't scoop.</span>
            <button onclick="cucNewTip()" style="margin-left:8px;padding:2px 8px;background:transparent;border:1px solid rgba(255,153,102,0.4);border-radius:4px;color:#ff9966;cursor:pointer;font-size:11px;">New Tip</button>
        </div>
    </div>
</div>

<script>
/* cooking-unit-converter.html
   - COMPLETE Cooking Unit Converter
   - Food-specific density calculations
   - Professional chef accuracy
*/

let cucCurrentFood = 'general';
let cucConversionHistory = [];
const cucMaxHistory = 5;

// Food-specific conversion data (grams per cup for weight units)
const cucFoodDensities = {
    general: {  // Standard conversions
        name: "General Cooking",
        note: "Average density for general cooking",
        gramsPerCup: 240,
        mlPerCup: 240,
        gramsPerTbsp: 15,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    },
    flour: {
        name: "All-Purpose Flour",
        note: "Spooned and leveled (not packed)",
        gramsPerCup: 120,
        mlPerCup: 240,
        gramsPerTbsp: 7.5,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    },
    sugar: {
        name: "Granulated Sugar",
        note: "Packed when measuring",
        gramsPerCup: 200,
        mlPerCup: 240,
        gramsPerTbsp: 12.5,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    },
    butter: {
        name: "Butter",
        note: "1 cup = 2 sticks = 16 tbsp = 8 oz",
        gramsPerCup: 227,
        mlPerCup: 240,
        gramsPerTbsp: 14.2,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    },
    liquid: {
        name: "Liquids (Water, Milk)",
        note: "1 ml = 1 gram for water",
        gramsPerCup: 240,
        mlPerCup: 240,
        gramsPerTbsp: 15,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    },
    spices: {
        name: "Spices & Herbs",
        note: "Light and fluffy - varies widely",
        gramsPerCup: 50,
        mlPerCup: 240,
        gramsPerTbsp: 3,
        mlPerTbsp: 15,
        gramsPerOz: 28.35,
        mlPerOz: 29.57
    }
};

// Cooking tips database
const cucTips = {
    general: [
        "Always use proper measuring cups - don't use drinking glasses.",
        "Liquid measuring cups have spouts, dry cups don't.",
        "When doubling recipes, don't just double seasonings - taste and adjust.",
        "Measure over counter, not over bowl to catch spills."
    ],
    flour: [
        "Spoon flour into measuring cup, then level with knife.",
        "Never scoop flour directly with measuring cup - it packs too densely.",
        "Sift flour after measuring for baking, not before.",
        "1 cup flour weighs about 120g when spooned and leveled."
    ],
    sugar: [
        "Pack brown sugar firmly into measuring cup.",
        "Granulated sugar should be level, not packed.",
        "Powdered sugar should be sifted before measuring.",
        "1 cup white sugar = 200g, brown sugar = 220g (packed)."
    ],
    butter: [
        "Butter wrapper has tablespoon markings - use them!",
        "1 stick butter = 8 tbsp = 1/2 cup = 113g.",
        "European butter has higher fat content - adjust recipes.",
        "Room temperature butter creams better with sugar."
    ],
    liquid: [
        "Check measurement at eye level for accuracy.",
        "Use clear liquid measuring cups on flat surface.",
        "1 cup = 240ml exactly for water.",
        "Milk and cream weigh slightly more than water."
    ],
    spices: [
        "Whole spices last longer than ground.",
        "Toast whole spices before grinding for better flavor.",
        "1 tsp dried herbs ‚âà 1 tbsp fresh herbs.",
        "Store spices away from heat and light."
    ]
};

// Available units by category
const cucUnits = {
    volume: ['cups', 'milliliters', 'liters', 'tablespoons', 'teaspoons', 'fluid ounces', 'pints', 'quarts', 'gallons'],
    weight: ['grams', 'kilograms', 'ounces', 'pounds']
};

function cucSelectFood(foodType) {
    cucCurrentFood = foodType;
    
    // Update active button
    const card = document.currentScript?.closest('.card') || document;
    card.querySelectorAll('.cuc-food-btn').forEach(btn => {
        btn.classList.remove('cuc-active');
        btn.style.background = 'rgba(255,255,255,0.05)';
        btn.style.border = '1px solid rgba(255,255,255,0.1)';
        btn.style.color = 'inherit';
    });
    
    const activeBtn = card.querySelector(`.cuc-food-btn[data-food="${foodType}"]`);
    activeBtn.classList.add('cuc-active');
    activeBtn.style.background = 'rgba(255,153,102,0.2)';
    activeBtn.style.border = '1px solid rgba(255,153,102,0.4)';
    activeBtn.style.color = '#ff9966';
    
    // Update unit dropdowns
    cucUpdateUnitOptions(foodType);
    
    // Update equivalents
    cucUpdateEquivalents(foodType);
    
    // Update tip
    cucNewTip();
}

function cucUpdateUnitOptions(foodType) {
    const card = document.currentScript?.closest('.card') || document;
    const fromSelect = card.querySelector('#cuc-from');
    const toSelect = card.querySelector('#cuc-to');
    
    // Clear current options
    fromSelect.innerHTML = '';
    toSelect.innerHTML = '';
    
    // Determine which units to show based on food type
    let availableUnits = [];
    
    if (foodType === 'liquid') {
        // Liquids: volume units only
        availableUnits = cucUnits.volume;
    } else if (foodType === 'spices') {
        // Spices: both volume and weight (very light)
        availableUnits = [...cucUnits.volume, ...cucUnits.weight];
    } else {
        // Most foods: both volume and weight
        availableUnits = [...cucUnits.volume, ...cucUnits.weight];
    }
    
    // Add options to selects
    availableUnits.forEach(unit => {
        const fromOption = document.createElement('option');
        fromOption.value = unit;
        fromOption.textContent = unit;
        fromSelect.appendChild(fromOption);
        
        const toOption = document.createElement('option');
        toOption.value = unit;
        toOption.textContent = unit;
        toSelect.appendChild(toOption);
    });
    
    // Set sensible defaults
    if (foodType === 'liquid') {
        fromSelect.value = 'cups';
        toSelect.value = 'milliliters';
    } else {
        fromSelect.value = 'cups';
        toSelect.value = 'grams';
    }
}

function cucUpdateEquivalents(foodType) {
    const card = document.currentScript?.closest('.card') || document;
    const density = cucFoodDensities[foodType];
    
    let html = `<div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:8px;">`;
    
    if (foodType === 'liquid') {
        html += `
            <div style="color:#ff9966;">1 cup</div><div>240 ml</div>
            <div style="color:#ff9966;">1 tbsp</div><div>15 ml</div>
            <div style="color:#ff9966;">1 tsp</div><div>5 ml</div>
            <div style="color:#ff9966;">1 fl oz</div><div>30 ml</div>
            <div style="color:#ff9966;">1 pint</div><div>2 cups</div>
            <div style="color:#ff9966;">1 quart</div><div>4 cups</div>
            <div style="color:#ff9966;">1 gallon</div><div>16 cups</div>
            <div style="color:#ff9966;">1 liter</div><div>4.2 cups</div>
        `;
    } else {
        const gramsPerCup = density.gramsPerCup;
        html += `
            <div style="color:#ff9966;">1 cup</div><div>${gramsPerCup}g (‚âà${(gramsPerCup/28.35).toFixed(1)} oz)</div>
            <div style="color:#ff9966;">1 tbsp</div><div>${(gramsPerCup/16).toFixed(1)}g</div>
            <div style="color:#ff9966;">1 tsp</div><div>${(gramsPerCup/48).toFixed(1)}g</div>
            <div style="color:#ff9966;">1 oz</div><div>28.35g</div>
            <div style="color:#ff9966;">1 lb</div><div>453.6g</div>
            <div style="color:#ff9966;">100g</div><div>${(100/gramsPerCup).toFixed(2)} cups</div>
            <div style="color:#ff9966;">250g</div><div>${(250/gramsPerCup).toFixed(2)} cups</div>
            <div style="color:#ff9966;">1 kg</div><div>${(1000/gramsPerCup).toFixed(1)} cups</div>
        `;
    }
    
    html += `</div>`;
    card.querySelector('#cuc-equivalents-content').innerHTML = html;
}

function cucConvert() {
    const card = document.currentScript?.closest('.card') || document;
    const value = parseFloat(card.querySelector('#cuc-value').value);
    const fromUnit = card.querySelector('#cuc-from').value;
    const toUnit = card.querySelector('#cuc-to').value;
    
    if (isNaN(value) || value <= 0) {
        card.querySelector('#cuc-result').value = "Enter valid amount";
        return;
    }
    
    if (fromUnit === toUnit) {
        card.querySelector('#cuc-result').value = value.toFixed(2) + ' ' + toUnit;
        return;
    }
    
    // Perform conversion
    const result = cucPerformConversion(value, fromUnit, toUnit, cucCurrentFood);
    
    // Display result
    card.querySelector('#cuc-result').value = result.toFixed(2) + ' ' + toUnit;
    
    // Add to history
    cucAddToHistory(value, fromUnit, result, toUnit, cucCurrentFood);
    
    // Auto-convert on input change
    const valueInput = card.querySelector('#cuc-value');
    const fromSelect = card.querySelector('#cuc-from');
    const toSelect = card.querySelector('#cuc-to');
    
    // Remove old listeners to avoid duplicates
    const newValueInput = valueInput.cloneNode(true);
    const newFromSelect = fromSelect.cloneNode(true);
    const newToSelect = toSelect.cloneNode(true);
    
    valueInput.parentNode.replaceChild(newValueInput, valueInput);
    fromSelect.parentNode.replaceChild(newFromSelect, fromSelect);
    toSelect.parentNode.replaceChild(newToSelect, toSelect);
    
    // Add new listeners
    newValueInput.addEventListener('input', cucConvert);
    newFromSelect.addEventListener('change', cucConvert);
    newToSelect.addEventListener('change', cucConvert);
}

function cucPerformConversion(value, fromUnit, toUnit, foodType) {
    const density = cucFoodDensities[foodType];
    
    // Convert everything to base units first
    let valueInGrams = 0;
    let valueInMl = 0;
    
    // Convert FROM unit to base units
    switch(fromUnit) {
        // Volume units (convert to ml)
        case 'cups':
            valueInMl = value * density.mlPerCup;
            valueInGrams = value * density.gramsPerCup;
            break;
        case 'milliliters':
            valueInMl = value;
            valueInGrams = value * (density.gramsPerCup / density.mlPerCup);
            break;
        case 'liters':
            valueInMl = value * 1000;
            valueInGrams = value * 1000 * (density.gramsPerCup / density.mlPerCup);
            break;
        case 'tablespoons':
            valueInMl = value * density.mlPerTbsp;
            valueInGrams = value * density.gramsPerTbsp;
            break;
        case 'teaspoons':
            valueInMl = value * (density.mlPerTbsp / 3);
            valueInGrams = value * (density.gramsPerTbsp / 3);
            break;
        case 'fluid ounces':
            valueInMl = value * density.mlPerOz;
            valueInGrams = value * (density.gramsPerCup / density.mlPerCup * density.mlPerOz);
            break;
        case 'pints':
            valueInMl = value * 473.176; // 1 pint = 2 cups = 473.176 ml
            valueInGrams = value * density.gramsPerCup * 2;
            break;
        case 'quarts':
            valueInMl = value * 946.353; // 1 quart = 4 cups
            valueInGrams = value * density.gramsPerCup * 4;
            break;
        case 'gallons':
            valueInMl = value * 3785.41; // 1 gallon = 16 cups
            valueInGrams = value * density.gramsPerCup * 16;
            break;
            
        // Weight units (convert to grams)
        case 'grams':
            valueInGrams = value;
            valueInMl = value / (density.gramsPerCup / density.mlPerCup);
            break;
        case 'kilograms':
            valueInGrams = value * 1000;
            valueInMl = value * 1000 / (density.gramsPerCup / density.mlPerCup);
            break;
        case 'ounces':
            valueInGrams = value * density.gramsPerOz;
            valueInMl = value * density.mlPerOz;
            break;
        case 'pounds':
            valueInGrams = value * 453.592; // 1 lb = 453.592g
            valueInMl = value * 453.592 / (density.gramsPerCup / density.mlPerCup);
            break;
    }
    
    // Convert FROM base units to TO unit
    switch(toUnit) {
        // Volume units
        case 'cups':
            return valueInMl / density.mlPerCup;
        case 'milliliters':
            return valueInMl;
        case 'liters':
            return valueInMl / 1000;
        case 'tablespoons':
            return valueInMl / density.mlPerTbsp;
        case 'teaspoons':
            return valueInMl / (density.mlPerTbsp / 3);
        case 'fluid ounces':
            return valueInMl / density.mlPerOz;
        case 'pints':
            return valueInMl / 473.176;
        case 'quarts':
            return valueInMl / 946.353;
        case 'gallons':
            return valueInMl / 3785.41;
            
        // Weight units
        case 'grams':
            return valueInGrams;
        case 'kilograms':
            return valueInGrams / 1000;
        case 'ounces':
            return valueInGrams / density.gramsPerOz;
        case 'pounds':
            return valueInGrams / 453.592;
    }
    
    return 0;
}

function cucAddToHistory(value, fromUnit, result, toUnit, foodType) {
    const historyItem = {
        value: value,
        fromUnit: fromUnit,
        result: result,
        toUnit: toUnit,
        foodType: foodType,
        timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
    };
    
    cucConversionHistory.unshift(historyItem);
    if (cucConversionHistory.length > cucMaxHistory) {
        cucConversionHistory.pop();
    }
    
    // Update history display
    cucUpdateHistoryDisplay();
}

function cucUpdateHistoryDisplay() {
    const card = document.currentScript?.closest('.card') || document;
    const historyDiv = card.querySelector('#cuc-history');
    const historyList = card.querySelector('#cuc-history-list');
    
    if (cucConversionHistory.length === 0) {
        historyDiv.style.display = 'none';
        return;
    }
    
    historyDiv.style.display = 'block';
    
    let html = '';
    cucConversionHistory.forEach(item => {
        const foodName = cucFoodDensities[item.foodType].name;
        html += `<div style="margin-bottom:6px;padding:6px;background:rgba(255,255,255,0.05);border-radius:6px;">
            ${item.value} ${item.fromUnit} ‚Üí ${item.result.toFixed(2)} ${item.toUnit}
            <div style="font-size:11px;color:rgba(255,255,255,0.5);margin-top:2px;">
                ${foodName} ‚Ä¢ ${item.timestamp}
            </div>
        </div>`;
    });
    
    historyList.innerHTML = html;
}

function cucSwapUnits() {
    const card = document.currentScript?.closest('.card') || document;
    const fromSelect = card.querySelector('#cuc-from');
    const toSelect = card.querySelector('#cuc-to');
    
    const temp = fromSelect.value;
    fromSelect.value = toSelect.value;
    toSelect.value = temp;
    
    // Trigger conversion
    cucConvert();
}

function cucQuickConvert(valueStr, toUnit) {
    const card = document.currentScript?.closest('.card') || document;
    
    // Parse value string like "1 cup", "100 grams", etc.
    const match = valueStr.match(/([\d.]+)\s+(\w+)/);
    if (!match) return;
    
    const value = parseFloat(match[1]);
    const fromUnit = match[2];
    
    // Find and select the fromUnit in dropdown
    const fromSelect = card.querySelector('#cuc-from');
    for (let option of fromSelect.options) {
        if (option.text.toLowerCase().includes(fromUnit.toLowerCase())) {
            fromSelect.value = option.value;
            break;
        }
    }
    
    // Find and select the toUnit in dropdown
    const toSelect = card.querySelector('#cuc-to');
    for (let option of toSelect.options) {
        if (option.text.toLowerCase().includes(toUnit.toLowerCase())) {
            toSelect.value = option.value;
            break;
        }
    }
    
    // Set value and convert
    card.querySelector('#cuc-value').value = value;
    cucConvert();
    
    // Visual feedback
    const quickBtns = card.querySelectorAll('.cuc-quick-btn');
    quickBtns.forEach(btn => btn.style.background = '');
    event.target.style.background = 'rgba(255,153,102,0.3)';
    setTimeout(() => {
        event.target.style.background = '';
    }, 1000);
}

function cucReset() {
    const card = document.currentScript?.closest('.card') || document;
    
    card.querySelector('#cuc-value').value = "1";
    card.querySelector('#cuc-result').value = "";
    cucConversionHistory = [];
    cucUpdateHistoryDisplay();
    
    // Visual feedback
    const resetBtn = card.querySelector('button[onclick="cucReset()"]');
    const originalText = resetBtn.textContent;
    resetBtn.textContent = "‚úÖ Reset!";
    setTimeout(() => {
        resetBtn.textContent = originalText;
    }, 1000);
}

function cucCopy() {
    const card = document.currentScript?.closest('.card') || document;
    const result = card.querySelector('#cuc-result').value;
    
    if (!result) return;
    
    // Get conversion details for copy
    const value = card.querySelector('#cuc-value').value;
    const fromUnit = card.querySelector('#cuc-from').value;
    const toUnit = card.querySelector('#cuc-to').value;
    const foodName = cucFoodDensities[cucCurrentFood].name;
    
    const textToCopy = `${value} ${fromUnit} = ${result}\n(${foodName})\nGenerated by Cooking Unit Converter`;
    
    navigator.clipboard.writeText(textToCopy).then(() => {
        // Visual feedback
        const copyBtn = card.querySelector('button[onclick="cucCopy()"]');
        const originalText = copyBtn.textContent;
        copyBtn.textContent = "‚úÖ Copied!";
        copyBtn.style.background = 'rgba(57,255,20,0.3)';
        
        setTimeout(() => {
            copyBtn.textContent = originalText;
            copyBtn.style.background = '';
        }, 2000);
    });
}

function cucNewTip() {
    const card = document.currentScript?.closest('.card') || document;
    const tips = cucTips[cucCurrentFood] || cucTips.general;
    const randomIndex = Math.floor(Math.random() * tips.length);
    card.querySelector('#cuc-tip-text').textContent = tips[randomIndex];
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.currentScript?.closest('.card') || document;
        
        // Initialize with general food type
        cucSelectFood('general');
        
        // Set initial tip
        cucNewTip();
        
        // Auto-convert with initial values
        setTimeout(() => {
            cucConvert();
        }, 300);
        
        console.log('Cooking Unit Converter ready!');
    });
}
</script>

<style>
#cooking-unit-converter-title {
    color: #ff9966 !important;
    margin-top: 0;
    font-size: 1.4rem !important;
}

.cuc-food-btn {
    padding: 10px 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: inherit;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
    flex: 1;
    min-width: 100px;
}

.cuc-food-btn:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-2px);
}

.cuc-food-btn.cuc-active {
    background: rgba(255,153,102,0.2) !important;
    border: 1px solid rgba(255,153,102,0.4) !important;
    color: #ff9966 !important;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(255,153,102,0.2);
}

.cuc-quick-btn {
    padding: 8px 12px;
    background: rgba(255,153,102,0.1);
    border: 1px solid rgba(255,153,102,0.2);
    border-radius: 6px;
    color: #ff9966;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s;
}

.cuc-quick-btn:hover {
    background: rgba(255,153,102,0.2);
    transform: translateY(-1px);
}

@media (max-width: 768px) {
    .cuc-food-btn {
        min-width: calc(33.333% - 6px);
    }
    
    .cuc-quick-btn {
        padding: 6px 8px;
        font-size: 11px;
    }
}
</style>
