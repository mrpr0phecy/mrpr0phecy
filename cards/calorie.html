<h2>Calorie Calculator</h2>
<p class="description">Estimate daily calorie needs with BMR calculation, weight goals, and macronutrient breakdown. Auto-saves profiles for quick access.</p>

<form class="tool-form">
  <div class="row">
    <div class="field">
      <label for="calorie-age">Age</label>
      <input id="calorie-age" type="number" min="1" max="120" value="30" class="input" />
      <div class="helper">Years</div>
    </div>
    <div class="field">
      <label for="calorie-gender">Gender</label>
      <select id="calorie-gender" class="input">
        <option value="male" selected>Male</option>
        <option value="female">Female</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label for="calorie-height">Height</label>
      <div class="input-group">
        <input id="calorie-height" type="number" min="50" max="250" value="175" class="input" />
        <span class="input-unit">cm</span>
      </div>
      <div class="helper">
        <span id="calorie-height-ft">(5'9")</span>
      </div>
    </div>
    <div class="field">
      <label for="calorie-weight">Weight</label>
      <div class="input-group">
        <input id="calorie-weight" type="number" min="20" max="300" value="70" class="input" />
        <span class="input-unit">kg</span>
      </div>
      <div class="helper">
        <span id="calorie-weight-lbs">(154.3 lbs)</span>
      </div>
    </div>
  </div>

  <div class="field">
    <label for="calorie-activity">Activity Level</label>
    <select id="calorie-activity" class="input">
      <option value="1.2">Sedentary (little or no exercise)</option>
      <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
      <option value="1.55" selected>Moderately active (moderate exercise 3-5 days/week)</option>
      <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
      <option value="1.9">Extra active (very hard exercise & physical job)</option>
    </select>
    <div class="helper">Multiplier for BMR calculation</div>
  </div>

  <div class="field">
    <label for="calorie-goal">Weight Goal</label>
    <select id="calorie-goal" class="input">
      <option value="0">Maintain weight</option>
      <option value="-500">Lose weight (0.5 kg/week)</option>
      <option value="-1000">Lose weight (1 kg/week)</option>
      <option value="250">Gain weight (0.25 kg/week)</option>
      <option value="500">Gain weight (0.5 kg/week)</option>
    </select>
  </div>

  <div class="actions">
    <button type="button" class="calculate-btn" onclick="calorieCalc(this)">Calculate</button>
    <button type="button" class="reset-btn" onclick="calorieReset(this)">Reset</button>
    <button type="button" class="save-btn" onclick="calorieSaveProfile(this)">Save Profile</button>
  </div>
</form>

<div class="results" style="margin-top: 24px;">
  <div class="result-section">
    <h3 class="section-title">Calorie Results</h3>
    <div class="result-grid">
      <div class="result-card">
        <div class="result-label">BMR</div>
        <div class="result-value" id="calorie-bmr">–</div>
        <div class="result-desc">Basal Metabolic Rate</div>
      </div>
      <div class="result-card">
        <div class="result-label">Maintenance</div>
        <div class="result-value" id="calorie-maintenance">–</div>
        <div class="result-desc">Daily Calories</div>
      </div>
      <div class="result-card highlight">
        <div class="result-label">Target</div>
        <div class="result-value" id="calorie-target">–</div>
        <div class="result-desc">Daily Calories</div>
      </div>
      <div class="result-card">
        <div class="result-label" id="calorie-weekly-label">Weekly Goal</div>
        <div class="result-value" id="calorie-weekly-goal">–</div>
        <div class="result-desc" id="calorie-weekly-desc">Weight Change</div>
      </div>
    </div>
  </div>

  <div class="result-section" id="calorie-macros-section" style="display: none;">
    <h3 class="section-title">Macronutrient Breakdown</h3>
    <div class="macros-grid">
      <div class="macro-card" style="border-color: #2dd4ff;">
        <div class="macro-header">
          <div class="macro-label">Protein</div>
          <div class="macro-percent" id="calorie-protein-pct">–%</div>
        </div>
        <div class="macro-value" id="calorie-protein">– g</div>
        <div class="macro-calories" id="calorie-protein-kcal">– kcal</div>
        <div class="macro-bar">
          <div class="macro-bar-fill" style="background: #2dd4ff; width: 0%;" id="calorie-protein-bar"></div>
        </div>
      </div>
      <div class="macro-card" style="border-color: #9c27b0;">
        <div class="macro-header">
          <div class="macro-label">Carbs</div>
          <div class="macro-percent" id="calorie-carbs-pct">–%</div>
        </div>
        <div class="macro-value" id="calorie-carbs">– g</div>
        <div class="macro-calories" id="calorie-carbs-kcal">– kcal</div>
        <div class="macro-bar">
          <div class="macro-bar-fill" style="background: #9c27b0; width: 0%;" id="calorie-carbs-bar"></div>
        </div>
      </div>
      <div class="macro-card" style="border-color: #4caf50;">
        <div class="macro-header">
          <div class="macro-label">Fat</div>
          <div class="macro-percent" id="calorie-fat-pct">–%</div>
        </div>
        <div class="macro-value" id="calorie-fat">– g</div>
        <div class="macro-calories" id="calorie-fat-kcal">– kcal</div>
        <div class="macro-bar">
          <div class="macro-bar-fill" style="background: #4caf50; width: 0%;" id="calorie-fat-bar"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="result-section" id="calorie-profiles-section" style="display: none;">
    <h3 class="section-title">Saved Profiles</h3>
    <div class="profiles-grid" id="calorie-profiles-list"></div>
  </div>
</div>

<details class="card-details">
  <summary>How it works & Nutrition Tips</summary>
  <div class="details-content">
    <p><strong>Formula:</strong> Uses Mifflin-St Jeor equation for BMR:</p>
    <div class="formula">
      <div>Men: BMR = 10 × weight(kg) + 6.25 × height(cm) - 5 × age(y) + 5</div>
      <div>Women: BMR = 10 × weight(kg) + 6.25 × height(cm) - 5 × age(y) - 161</div>
    </div>
    
    <p><strong>Nutrition Tips:</strong></p>
    <ul class="tips-list">
      <li>Protein: 1.6-2.2 g/kg for muscle maintenance/growth</li>
      <li>Carbs: 3-5 g/kg for active individuals</li>
      <li>Fat: 0.8-1 g/kg for hormone function</li>
      <li>Stay hydrated: 35 ml/kg body weight daily</li>
      <li>Include fiber: 25-30g daily for digestive health</li>
    </ul>
    
    <p class="disclaimer"><strong>Note:</strong> This is an estimate. Consult healthcare professional for personalized advice.</p>
  </div>
</details>

<script>
(function() {
  const card = document.currentScript.closest('.card');
  let calorieProfiles = JSON.parse(localStorage.getItem('calorieProfiles') || '[]');

  // Initialize
  document.addEventListener('DOMContentLoaded', function() {
    initUnitConverters();
    loadSavedProfiles();
    
    // Auto-calculate on input change
    const inputs = card.querySelectorAll('input, select');
    inputs.forEach(input => {
      input.addEventListener('change', () => {
        const calculateBtn = card.querySelector('.calculate-btn');
        if(calculateBtn) {
          // Add visual feedback
          calculateBtn.style.transform = 'scale(1.02)';
          setTimeout(() => {
            calculateBtn.style.transform = '';
          }, 200);
        }
      });
    });
  });

  function initUnitConverters() {
    // Height converter
    const heightInput = card.querySelector('#calorie-height');
    const heightDisplay = card.querySelector('#calorie-height-ft');
    
    if(heightInput && heightDisplay) {
      heightInput.addEventListener('input', function() {
        const cm = parseFloat(this.value) || 0;
        if(cm > 0) {
          const totalInches = cm / 2.54;
          const feet = Math.floor(totalInches / 12);
          const inches = Math.round(totalInches % 12);
          heightDisplay.textContent = `(${feet}'${inches}")`;
        } else {
          heightDisplay.textContent = '';
        }
      });
      heightInput.dispatchEvent(new Event('input'));
    }
    
    // Weight converter
    const weightInput = card.querySelector('#calorie-weight');
    const weightDisplay = card.querySelector('#calorie-weight-lbs');
    
    if(weightInput && weightDisplay) {
      weightInput.addEventListener('input', function() {
        const kg = parseFloat(this.value) || 0;
        if(kg > 0) {
          const lbs = (kg * 2.20462).toFixed(1);
          weightDisplay.textContent = `(${lbs} lbs)`;
        } else {
          weightDisplay.textContent = '';
        }
      });
      weightInput.dispatchEvent(new Event('input'));
    }
  }

  window.calorieCalc = function(btn) {
    const calculateBtn = btn;
    const age = parseInt(card.querySelector('#calorie-age').value) || 0;
    const gender = card.querySelector('#calorie-gender').value;
    const height = parseFloat(card.querySelector('#calorie-height').value) || 0;
    const weight = parseFloat(card.querySelector('#calorie-weight').value) || 0;
    const activity = parseFloat(card.querySelector('#calorie-activity').value) || 1.2;
    const goal = parseInt(card.querySelector('#calorie-goal').value) || 0;

    // Validate inputs
    if(!validateInputs(age, height, weight)) {
      return;
    }

    // Button loading state
    calculateBtn.innerHTML = '<span class="loading-dots"></span>';
    calculateBtn.disabled = true;

    // Simulate calculation delay for better UX
    setTimeout(() => {
      // Calculate BMR
      let bmr = 10 * weight + 6.25 * height - 5 * age;
      bmr += (gender === 'male') ? 5 : -161;
      
      // Calculate TDEE
      const maintenance = bmr * activity;
      const target = maintenance + goal;
      
      // Calculate weekly change
      const weeklyChangeKgs = (goal * 7) / 7700;
      const weeklyChangeLbs = (weeklyChangeKgs * 2.20462).toFixed(2);
      
      // Update results
      updateResults(bmr, maintenance, target, goal, weeklyChangeKgs, weeklyChangeLbs);
      
      // Calculate and show macros
      calculateMacronutrients(target, weight, goal);
      card.querySelector('#calorie-macros-section').style.display = 'block';
      
      // Auto-save recent calculation
      autoSaveRecent(age, gender, height, weight, activity, goal);
      
      // Restore button
      calculateBtn.innerHTML = 'Calculate';
      calculateBtn.disabled = false;
      calculateBtn.classList.add('success');
      setTimeout(() => calculateBtn.classList.remove('success'), 1000);
      
      // Scroll results into view
      card.querySelector('.results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }, 400);
  };

  function validateInputs(age, height, weight) {
    let isValid = true;
    const fields = {
      age: { value: age, min: 1, max: 120, message: "Age must be 1-120" },
      height: { value: height, min: 50, max: 250, message: "Height must be 50-250 cm" },
      weight: { value: weight, min: 20, max: 300, message: "Weight must be 20-300 kg" }
    };
    
    Object.entries(fields).forEach(([field, data]) => {
      const input = card.querySelector(`#calorie-${field}`);
      if(input && (data.value < data.min || data.value > data.max)) {
        showError(input, data.message);
        isValid = false;
      } else {
        clearError(input);
      }
    });
    
    return isValid;
  }

  function showError(input, message) {
    clearError(input);
    input.classList.add('error');
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.textContent = message;
    errorDiv.style.cssText = 'color: #ff4444; font-size: 0.85em; margin-top: 4px;';
    input.parentNode.appendChild(errorDiv);
    
    // Shake animation
    input.style.animation = 'shake 0.5s';
    setTimeout(() => input.style.animation = '', 500);
  }

  function clearError(input) {
    input.classList.remove('error');
    const existingError = input.parentNode.querySelector('.error-message');
    if(existingError) existingError.remove();
  }

  function updateResults(bmr, maintenance, target, goal, weeklyChangeKgs, weeklyChangeLbs) {
    card.querySelector('#calorie-bmr').textContent = Math.round(bmr).toLocaleString() + " kcal";
    card.querySelector('#calorie-maintenance').textContent = Math.round(maintenance).toLocaleString() + " kcal";
    card.querySelector('#calorie-target').textContent = Math.round(target).toLocaleString() + " kcal";
    
    const weeklyGoal = card.querySelector('#calorie-weekly-goal');
    const weeklyLabel = card.querySelector('#calorie-weekly-label');
    const weeklyDesc = card.querySelector('#calorie-weekly-desc');
    
    if(goal === 0) {
      weeklyGoal.textContent = "Maintain";
      weeklyLabel.textContent = "Weekly Goal";
      weeklyDesc.textContent = "Weight Maintenance";
      weeklyGoal.style.color = "#2dd4ff";
    } else if(goal < 0) {
      const kg = Math.abs(weeklyChangeKgs).toFixed(2);
      const lbs = Math.abs(weeklyChangeLbs);
      weeklyGoal.textContent = `-${kg} kg`;
      weeklyLabel.textContent = "Weekly Loss";
      weeklyDesc.textContent = `(${lbs} lbs/week)`;
      weeklyGoal.style.color = "#2dd4ff";
    } else {
      weeklyGoal.textContent = `+${weeklyChangeKgs.toFixed(2)} kg`;
      weeklyLabel.textContent = "Weekly Gain";
      weeklyDesc.textContent = `(${weeklyChangeLbs} lbs/week)`;
      weeklyGoal.style.color = "#ff9800";
    }
  }

  function calculateMacronutrients(targetCalories, weight, goal) {
    // Calculate protein based on goal
    let proteinPerKg;
    if(goal < 0) {
      proteinPerKg = 2.2; // Weight loss
    } else if(goal > 0) {
      proteinPerKg = 1.8; // Weight gain
    } else {
      proteinPerKg = 1.6; // Maintenance
    }
    
    const proteinGrams = Math.round(proteinPerKg * weight);
    const proteinCalories = proteinGrams * 4;
    
    // Calculate fat (25-35% range, adjust based on goal)
    const fatPercent = goal < 0 ? 0.30 : 0.25; // Higher fat for weight loss
    const fatCalories = targetCalories * fatPercent;
    const fatGrams = Math.round(fatCalories / 9);
    
    // Calculate carbs from remaining calories
    const carbCalories = targetCalories - proteinCalories - fatCalories;
    const carbGrams = Math.round(carbCalories / 4);
    
    // Update displays
    card.querySelector('#calorie-protein').textContent = proteinGrams + " g";
    card.querySelector('#calorie-protein-kcal').textContent = Math.round(proteinCalories) + " kcal";
    
    card.querySelector('#calorie-carbs').textContent = carbGrams + " g";
    card.querySelector('#calorie-carbs-kcal').textContent = Math.round(carbCalories) + " kcal";
    
    card.querySelector('#calorie-fat').textContent = fatGrams + " g";
    card.querySelector('#calorie-fat-kcal').textContent = Math.round(fatCalories) + " kcal";
    
    // Calculate and update percentages
    const proteinPct = Math.round((proteinCalories / targetCalories) * 100);
    const carbPct = Math.round((carbCalories / targetCalories) * 100);
    const fatPct = Math.round((fatCalories / targetCalories) * 100);
    
    card.querySelector('#calorie-protein-pct').textContent = proteinPct + "%";
    card.querySelector('#calorie-carbs-pct').textContent = carbPct + "%";
    card.querySelector('#calorie-fat-pct').textContent = fatPct + "%";
    
    // Update progress bars
    const totalPct = proteinPct + carbPct + fatPct;
    card.querySelector('#calorie-protein-bar').style.width = proteinPct + "%";
    card.querySelector('#calorie-carbs-bar').style.width = carbPct + "%";
    card.querySelector('#calorie-fat-bar').style.width = fatPct + "%";
  }

  window.calorieReset = function(btn) {
    const form = card.querySelector('.tool-form');
    form.reset();
    
    // Reset all displays
    const displays = ['bmr', 'maintenance', 'target', 'weekly-goal', 'protein', 'carbs', 'fat'];
    displays.forEach(id => {
      const element = card.querySelector(`#calorie-${id}`);
      if(element) element.textContent = '–';
    });
    
    // Reset percentage displays
    const pcts = ['protein-pct', 'carbs-pct', 'fat-pct'];
    pcts.forEach(id => {
      const element = card.querySelector(`#calorie-${id}`);
      if(element) element.textContent = '–%';
    });
    
    // Reset bars
    const bars = ['protein-bar', 'carbs-bar', 'fat-bar'];
    bars.forEach(id => {
      const element = card.querySelector(`#calorie-${id}`);
      if(element) element.style.width = '0%';
    });
    
    // Hide sections
    card.querySelector('#calorie-macros-section').style.display = 'none';
    
    // Clear errors
    const inputs = card.querySelectorAll('.error');
    inputs.forEach(input => clearError(input));
    
    // Trigger unit conversions
    card.querySelector('#calorie-height').dispatchEvent(new Event('input'));
    card.querySelector('#calorie-weight').dispatchEvent(new Event('input'));
    
    // Button feedback
    btn.classList.add('active');
    setTimeout(() => btn.classList.remove('active'), 300);
  };

  window.calorieSaveProfile = function(btn) {
    const name = prompt("Enter profile name (max 20 chars):", `Profile ${calorieProfiles.length + 1}`);
    if(!name || name.trim() === '') return;
    
    const trimmedName = name.trim().substring(0, 20);
    
    const profile = {
      id: Date.now(),
      name: trimmedName,
      age: card.querySelector('#calorie-age').value,
      gender: card.querySelector('#calorie-gender').value,
      height: card.querySelector('#calorie-height').value,
      weight: card.querySelector('#calorie-weight').value,
      activity: card.querySelector('#calorie-activity').value,
      goal: card.querySelector('#calorie-goal').value,
      timestamp: new Date().toISOString(),
      color: `hsl(${Math.random() * 360}, 70%, 60%)`
    };
    
    calorieProfiles.push(profile);
    // Keep only last 10 profiles
    if(calorieProfiles.length > 10) {
      calorieProfiles = calorieProfiles.slice(-10);
    }
    
    localStorage.setItem('calorieProfiles', JSON.stringify(calorieProfiles));
    
    // Visual feedback
    btn.innerHTML = '✓ Saved';
    btn.style.background = '#4caf50';
    setTimeout(() => {
      btn.innerHTML = 'Save Profile';
      btn.style.background = '';
    }, 1500);
    
    loadSavedProfiles();
  };

  function autoSaveRecent(age, gender, height, weight, activity, goal) {
    const recent = {
      id: 'recent',
      name: 'Recent',
      age, gender, height, weight, activity, goal,
      timestamp: 'Just now',
      color: '#666'
    };
    
    // Update or add recent
    const recentIndex = calorieProfiles.findIndex(p => p.id === 'recent');
    if(recentIndex > -1) {
      calorieProfiles[recentIndex] = recent;
    } else {
      calorieProfiles.unshift(recent);
    }
  }

  function loadSavedProfiles() {
    const profilesList = card.querySelector('#calorie-profiles-list');
    const profilesSection = card.querySelector('#calorie-profiles-section');
    
    if(calorieProfiles.length === 0) {
      profilesSection.style.display = 'none';
      return;
    }
    
    profilesList.innerHTML = '';
    
    // Show last 5 profiles (excluding recent)
    const displayProfiles = calorieProfiles
      .filter(p => p.id !== 'recent')
      .slice(-5)
      .reverse();
    
    // Add recent if exists
    const recent = calorieProfiles.find(p => p.id === 'recent');
    if(recent) {
      displayProfiles.unshift(recent);
    }
    
    displayProfiles.forEach(profile => {
      const profileCard = document.createElement('div');
      profileCard.className = 'profile-card';
      profileCard.style.borderLeftColor = profile.color;
      
      profileCard.innerHTML = `
        <div class="profile-name">${profile.name}</div>
        <div class="profile-stats">${profile.age}y • ${profile.weight}kg</div>
        <div class="profile-time">${formatTime(profile.timestamp)}</div>
        <button class="profile-delete" onclick="deleteCalorieProfile(${profile.id}, this)">×</button>
      `;
      
      profileCard.onclick = () => loadProfile(profile);
      profilesList.appendChild(profileCard);
    });
    
    profilesSection.style.display = 'block';
  }

  function formatTime(timestamp) {
    if(timestamp === 'Just now') return timestamp;
    
    const date = new Date(timestamp);
    const now = new Date();
    const diffMs = now - date;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMs / 3600000);
    const diffDays = Math.floor(diffMs / 86400000);
    
    if(diffMins < 1) return 'Just now';
    if(diffMins < 60) return `${diffMins}m ago`;
    if(diffHours < 24) return `${diffHours}h ago`;
    if(diffDays < 7) return `${diffDays}d ago`;
    return date.toLocaleDateString();
  }

  function loadProfile(profile) {
    card.querySelector('#calorie-age').value = profile.age;
    card.querySelector('#calorie-gender').value = profile.gender;
    card.querySelector('#calorie-height').value = profile.height;
    card.querySelector('#calorie-weight').value = profile.weight;
    card.querySelector('#calorie-activity').value = profile.activity;
    card.querySelector('#calorie-goal').value = profile.goal;
    
    // Trigger updates
    card.querySelector('#calorie-height').dispatchEvent(new Event('input'));
    card.querySelector('#calorie-weight').dispatchEvent(new Event('input'));
    
    // Auto-calculate
    setTimeout(() => {
      const calculateBtn = card.querySelector('.calculate-btn');
      if(calculateBtn) calorieCalc(calculateBtn);
    }, 100);
    
    // Visual feedback
    const profileCards = card.querySelectorAll('.profile-card');
    profileCards.forEach(card => card.classList.remove('active'));
    event.currentTarget.classList.add('active');
  }

  window.deleteCalorieProfile = function(id, deleteBtn) {
    event.stopPropagation();
    
    calorieProfiles = calorieProfiles.filter(p => p.id !== id);
    localStorage.setItem('calorieProfiles', JSON.stringify(calorieProfiles));
    
    // Remove card with animation
    const profileCard = deleteBtn.closest('.profile-card');
    profileCard.style.transform = 'scale(0.9)';
    profileCard.style.opacity = '0';
    setTimeout(() => {
      profileCard.remove();
      loadSavedProfiles();
    }, 300);
  };
})();
</script>

<style>
/* Calorie Calculator Specific Styles */
.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 16px;
}

.input-group {
  display: flex;
  align-items: center;
}

.input-unit {
  margin-left: 8px;
  color: #9ccbe0;
  font-size: 0.9em;
}

.helper {
  font-size: 0.85em;
  color: #9ccbe0;
  margin-top: 4px;
  min-height: 1.2em;
}

/* Results Grid */
.result-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.result-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid rgba(45, 212, 255, 0.1);
  transition: all 0.3s ease;
}

.result-card:hover {
  border-color: rgba(45, 212, 255, 0.3);
  transform: translateY(-2px);
}

.result-card.highlight {
  background: linear-gradient(135deg, rgba(45, 212, 255, 0.1), rgba(45, 212, 255, 0.05));
  border-color: rgba(45, 212, 255, 0.4);
}

.result-label {
  font-size: 0.9em;
  color: #9ccbe0;
  margin-bottom: 4px;
}

.result-value {
  font-size: 1.8em;
  font-weight: 600;
  color: #2dd4ff;
  margin: 4px 0;
}

.result-desc {
  font-size: 0.85em;
  color: #9ccbe0;
}

/* Macros Grid */
.macros-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

.macro-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 20px;
  border-left: 4px solid;
  transition: all 0.3s ease;
}

.macro-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.macro-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.macro-label {
  font-weight: 600;
  color: #e6faff;
}

.macro-percent {
  color: #9ccbe0;
  font-size: 0.9em;
}

.macro-value {
  font-size: 1.8em;
  font-weight: 600;
  color: #2dd4ff;
  margin: 8px 0;
}

.macro-calories {
  color: #9ccbe0;
  font-size: 0.9em;
  margin-bottom: 12px;
}

.macro-bar {
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.macro-bar-fill {
  height: 100%;
  transition: width 1s ease;
  border-radius: 2px;
}

/* Profiles */
.profiles-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.profile-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 12px;
  border-left: 3px solid;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.profile-card:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-2px);
}

.profile-card.active {
  background: rgba(45, 212, 255, 0.1);
}

.profile-name {
  font-weight: 500;
  color: #e6faff;
  margin-bottom: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-stats {
  font-size: 0.85em;
  color: #2dd4ff;
  margin-bottom: 2px;
}

.profile-time {
  font-size: 0.8em;
  color: #9ccbe0;
}

.profile-delete {
  position: absolute;
  top: 4px;
  right: 4px;
  background: transparent;
  border: none;
  color: #9ccbe0;
  font-size: 1.2em;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  opacity: 0;
  transition: all 0.2s;
}

.profile-card:hover .profile-delete {
  opacity: 1;
}

.profile-delete:hover {
  color: #ff4444;
  background: rgba(255, 68, 68, 0.1);
}

/* Form elements */
.input.error {
  border-color: #ff4444 !important;
  animation: shake 0.5s;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.loading-dots {
  display: inline-block;
}
.loading-dots::after {
  content: '...';
  animation: dots 1.5s infinite;
}

@keyframes dots {
  0%, 20% { content: '.'; }
  40% { content: '..'; }
  60%, 100% { content: '...'; }
}

/* Buttons */
.save-btn {
  background: linear-gradient(135deg, #6f42c1, #9c27b0) !important;
}

.save-btn:hover {
  background: linear-gradient(135deg, #5a32a3, #8e24aa) !important;
}

/* Details section */
.card-details {
  margin-top: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  border-radius: 12px;
  overflow: hidden;
}

.card-details summary {
  padding: 16px;
  background: rgba(45, 212, 255, 0.05);
  cursor: pointer;
  font-weight: 500;
  color: #2dd4ff;
  list-style: none;
  position: relative;
}

.card-details summary::after {
  content: '▼';
  position: absolute;
  right: 16px;
  transition: transform 0.3s;
  font-size: 0.8em;
}

.card-details[open] summary::after {
  transform: rotate(180deg);
}

.details-content {
  padding: 16px;
  background: rgba(45, 212, 255, 0.02);
}

.formula {
  background: rgba(45, 212, 255, 0.1);
  padding: 12px;
  border-radius: 8px;
  margin: 12px 0;
  font-family: monospace;
  color: #9ccbe0;
  border-left: 3px solid #2dd4ff;
}

.tips-list {
  margin: 12px 0;
  padding-left: 20px;
  color: #9ccbe0;
}

.tips-list li {
  margin-bottom: 6px;
  line-height: 1.5;
}

.disclaimer {
  font-size: 0.9em;
  color: #ff9800;
  margin-top: 16px;
  padding: 8px 12px;
  background: rgba(255, 152, 0, 0.1);
  border-radius: 6px;
  border-left: 3px solid #ff9800;
}

/* Sections */
.section-title {
  font-size: 1.2em;
  font-weight: 600;
  color: #e6faff;
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(45, 212, 255, 0.2);
}

.result-section {
  margin-bottom: 32px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .row {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .result-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .macros-grid {
    grid-template-columns: 1fr;
  }
  
  .profiles-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .result-grid {
    grid-template-columns: 1fr;
  }
  
  .profiles-grid {
    grid-template-columns: 1fr;
  }
}
</style>
