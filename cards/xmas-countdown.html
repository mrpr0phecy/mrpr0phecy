<h2 id="xmas-countdown-title" style="margin-top:0;color:var(--accent);">ğŸ„ Christmas Countdown</h2>

<form aria-describedby="xmas-countdown-desc" style="margin-bottom:20px;">
  <p id="xmas-countdown-desc" class="small" style="color:rgba(230,250,255,0.8);margin-bottom:16px;">
    Count down to Christmas with real-time tracking, festive facts, and daily suggestions!
    <span style="color:var(--accent);display:block;margin-top:4px;">
      ğŸ… Shows days, hours, minutes until Christmas morning
    </span>
  </p>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
    <div class="field">
      <label for="xmas-year" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        ğŸ“… Christmas Year
      </label>
      <select id="xmas-year" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;">
        <option value="2024">2024</option>
        <option value="2025" selected>2025</option>
        <option value="2026">2026</option>
        <option value="2027">2027</option>
        <option value="2028">2028</option>
      </select>
    </div>
    
    <div class="field">
      <label for="xmas-timezone" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        ğŸŒ Your Timezone
      </label>
      <select id="xmas-timezone" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:inherit;">
        <option value="-12">UTC-12</option>
        <option value="-8">UTC-8 (PST)</option>
        <option value="-5">UTC-5 (EST)</option>
        <option value="0" selected>UTCÂ±0 (GMT)</option>
        <option value="+1">UTC+1 (CET)</option>
        <option value="+8">UTC+8 (China)</option>
        <option value="+10">UTC+10 (AEST)</option>
      </select>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:16px;">
    <div class="field">
      <label style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        ğŸ Countdown Options
      </label>
      <div style="display:flex;gap:8px;flex-direction:column;">
        <label style="display:flex;align-items:center;gap:6px;font-size:13px;">
          <input type="checkbox" id="xmas-show-seconds" checked style="accent-color:var(--accent);">
          Show seconds
        </label>
        <label style="display:flex;align-items:center;gap:6px;font-size:13px;">
          <input type="checkbox" id="xmas-show-facts" checked style="accent-color:var(--accent);">
          Show daily facts
        </label>
        <label style="display:flex;align-items:center;gap:6px;font-size:13px;">
          <input type="checkbox" id="xmas-sound" style="accent-color:var(--accent);">
          Festive sounds
        </label>
      </div>
    </div>
    
    <div class="field" style="grid-column:span 2;">
      <label for="xmas-message" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        âœï¸ Personal Christmas Message
      </label>
      <input id="xmas-message" type="text" placeholder="e.g., Can't wait for Christmas morning!" 
             style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,77,77,0.3);background:rgba(255,77,77,0.05);color:inherit;" />
    </div>
  </div>

  <div class="actions" style="display:flex;gap:10px;margin-top:20px;">
    <button type="button" onclick="xmasStartCountdown()" id="xmas-start-btn"
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(255,77,77,0.2), rgba(255,77,77,0.1));border:1px solid rgba(255,77,77,0.4);border-radius:8px;color:#ff4d4d;cursor:pointer;font-weight:600;">
      ğŸ… Start Countdown
    </button>
    <button type="button" onclick="xmasPauseCountdown()" id="xmas-pause-btn" disabled
            style="padding:12px 16px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:8px;color:#ffa500;cursor:pointer;">
      â¸ï¸ Pause
    </button>
    <button type="button" onclick="xmasResetCountdown()"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      ğŸ”„ Reset
    </button>
  </div>
</form>

<!-- Countdown Display -->
<div class="results" aria-live="polite" style="margin-top:24px;">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
    <h3 class="small" style="color:var(--accent);margin:0;">â° Time Until Christmas</h3>
    <div id="xmas-status" style="font-size:12px;color:#39ff14;">Ready to start</div>
  </div>

  <!-- Main Countdown Timer -->
  <div style="background:linear-gradient(135deg, rgba(255,77,77,0.1), rgba(45,212,255,0.1));border-radius:12px;border:2px solid rgba(255,77,77,0.3);padding:24px;text-align:center;margin-bottom:16px;">
    <div id="xmas-countdown-display" style="font-family:monospace;font-size:48px;font-weight:700;color:#ff4d4d;text-shadow:0 0 20px rgba(255,77,77,0.5);margin-bottom:8px;">
      00:00:00:00
    </div>
    <div style="display:flex;justify-content:space-between;font-size:12px;color:rgba(230,250,255,0.7);">
      <span>Days</span>
      <span>Hours</span>
      <span>Minutes</span>
      <span id="xmas-seconds-label">Seconds</span>
    </div>
  </div>

  <!-- Progress Bar -->
  <div style="margin-bottom:16px;">
    <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
      <div style="color:var(--accent);font-size:14px;">ğŸ„ Christmas Progress</div>
      <div id="xmas-progress-percent" style="font-size:12px;color:#39ff14;">0%</div>
    </div>
    <div style="height:12px;background:rgba(255,255,255,0.1);border-radius:6px;overflow:hidden;">
      <div id="xmas-progress-bar" style="height:100%;background:linear-gradient(90deg, #ff4d4d, #39ff14);width:0%;transition:width 0.5s;border-radius:6px;"></div>
    </div>
    <div style="display:flex;justify-content:space-between;margin-top:4px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.6);">Jan 1</div>
      <div id="xmas-current-date" style="font-size:11px;color:var(--accent);">Today</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);">Dec 25</div>
    </div>
  </div>

  <!-- Festive Facts & Suggestions -->
  <div style="background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);padding:16px;margin-bottom:16px;">
    <h4 style="color:var(--accent);margin:0 0 12px 0;font-size:14px;">ğŸ Today's Festive Tip</h4>
    <div id="xmas-daily-fact" style="font-size:13px;line-height:1.5;color:rgba(230,250,255,0.9);">
      Start the countdown to see daily Christmas facts and preparation suggestions!
    </div>
  </div>

  <!-- Quick Stats -->
  <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;">
    <div style="background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.2);border-radius:6px;padding:8px;text-align:center;">
      <div style="font-size:18px;font-weight:600;color:#ff4d4d;" id="xmas-stat-days">â€“</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.7);">Days Left</div>
    </div>
    <div style="background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.2);border-radius:6px;padding:8px;text-align:center;">
      <div style="font-size:18px;font-weight:600;color:#ffa500;" id="xmas-stat-weekends">â€“</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.7);">Weekends Left</div>
    </div>
    <div style="background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.2);border-radius:6px;padding:8px;text-align:center;">
      <div style="font-size:18px;font-weight:600;color:#39ff14;" id="xmas-stat-shopping">â€“</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.7);">Shopping Days</div>
    </div>
    <div style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.2);border-radius:6px;padding:8px;text-align:center;">
      <div style="font-size:18px;font-weight:600;color:var(--accent);" id="xmas-stat-percent">â€“</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.7);">Year Progress</div>
    </div>
  </div>
</div>

<!-- Share Section -->
<div style="margin-top:24px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);padding:16px;">
  <h3 class="small" style="color:var(--accent);margin:0 0 12px 0;">ğŸ“¢ Share the Christmas Spirit</h3>
  <div style="display:flex;gap:8px;">
    <button onclick="xmasShareTwitter()" style="flex:1;padding:8px 12px;background:rgba(29,161,242,0.1);border:1px solid rgba(29,161,242,0.3);border-radius:6px;color:#1da1f2;cursor:pointer;font-size:12px;">ğŸ¦ Tweet Countdown</button>
    <button onclick="xmasCopyLink()" style="flex:1;padding:8px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">ğŸ“‹ Copy Link</button>
    <button onclick="xmasSaveWallpaper()" style="flex:1;padding:8px 12px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:6px;color:#ff4d4d;cursor:pointer;font-size:12px;">ğŸ–¼ï¸ Save Wallpaper</button>
  </div>
</div>

<script>
/* xmas-countdown.html
   - Christmas countdown timer with festive features
   - Scoped with "xmas" prefix
*/

let xmasCountdownInterval = null;
let xmasIsRunning = false;
let xmasTargetDate = null;
let xmasFacts = [
  "ğŸ… Did you know? Santa's sleigh would need to travel at 650 miles per SECOND to deliver all presents!",
  "ğŸ„ The first artificial Christmas trees were made in Germany from goose feathers.",
  "ğŸŒŸ The world's largest Christmas stocking was 168 feet long and held 1,000 presents.",
  "ğŸ¦Œ Reindeer are the only mammals whose eyes change color - gold in summer, blue in winter!",
  "ğŸª Leaving cookies for Santa started in the 1930s during the Great Depression.",
  "ğŸ”” Jingle Bells was originally a Thanksgiving song called 'The One Horse Open Sleigh'.",
  "â„ï¸ The tallest Christmas tree ever displayed was 221 feet tall in Seattle!",
  "ğŸ Gift wrapping paper was invented by the Hall brothers after running out of tissue paper.",
  "ğŸ•¯ï¸ Christmas lights were first used in 1882 by Edward Johnson, a friend of Thomas Edison.",
  "ğŸ¶ 'Silent Night' has been translated into over 300 languages worldwide.",
  "ğŸ¬ Candy canes were originally straight white sticks. The curve was added in 1670.",
  "ğŸ“® The first Christmas card was sent in 1843 in England by Sir Henry Cole.",
  "â›„ The largest snowman ever built was 122 feet tall in Maine, USA.",
  "ğŸ„ Christmas trees take 6-8 years to grow to typical height.",
  "ğŸŒŸ The Christmas star might have been a rare planetary alignment of Jupiter and Saturn."
];

function xmasGetChristmasDate(year) {
  return new Date(Date.UTC(year, 11, 25, 0, 0, 0)); // Dec 25 of given year
}

function xmasStartCountdown() {
  if (xmasIsRunning) return;
  
  const card = document.currentScript?.closest('.card') || document;
  const year = parseInt(document.querySelector('#xmas-year').value) || 2025;
  const timezone = parseInt(document.querySelector('#xmas-timezone').value) || 0;
  const showSeconds = document.querySelector('#xmas-show-seconds').checked;
  const showFacts = document.querySelector('#xmas-show-facts').checked;
  
  xmasTargetDate = xmasGetChristmasDate(year);
  
  // Adjust for timezone
  const now = new Date();
  const offset = timezone * 60 * 60 * 1000;
  xmasTargetDate = new Date(xmasTargetDate.getTime() + offset);
  
  xmasIsRunning = true;
  document.querySelector('#xmas-start-btn').disabled = true;
  document.querySelector('#xmas-pause-btn').disabled = false;
  document.querySelector('#xmas-start-btn').textContent = 'â³ Counting down...';
  
  // Show/hide seconds label
  const secondsLabel = document.querySelector('#xmas-seconds-label');
  secondsLabel.style.display = showSeconds ? 'block' : 'none';
  
  xmasUpdateCountdown();
  xmasCountdownInterval = setInterval(xmasUpdateCountdown, showSeconds ? 1000 : 60000); // Update every second or minute
  
  // Update status
  document.querySelector('#xmas-status').textContent = 'ğŸ„ Countdown running';
  document.querySelector('#xmas-status').style.color = '#39ff14';
}

function xmasUpdateCountdown() {
  if (!xmasTargetDate) return;
  
  const now = new Date();
  const diff = xmasTargetDate.getTime() - now.getTime();
  
  if (diff <= 0) {
    xmasChristmasArrived();
    return;
  }
  
  // Calculate time units
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60)) / 1000);
  
  // Update display
  const showSeconds = document.querySelector('#xmas-show-seconds').checked;
  const display = document.querySelector('#xmas-countdown-display');
  
  if (showSeconds) {
    display.textContent = 
      `${days.toString().padStart(2, '0')}:` +
      `${hours.toString().padStart(2, '0')}:` +
      `${minutes.toString().padStart(2, '0')}:` +
      `${seconds.toString().padStart(2, '0')}`;
  } else {
    display.textContent = 
      `${days.toString().padStart(2, '0')}:` +
      `${hours.toString().padStart(2, '0')}:` +
      `${minutes.toString().padStart(2, '0')}`;
  }
  
  // Update stats
  document.querySelector('#xmas-stat-days').textContent = days;
  
  // Calculate weekends left
  const weekendsLeft = Math.floor(days / 7) * 2;
  document.querySelector('#xmas-stat-weekends').textContent = weekendsLeft;
  
  // Shopping days (excluding Sundays and Christmas Eve)
  const shoppingDays = days - Math.floor(days / 7);
  document.querySelector('#xmas-stat-shopping').textContent = shoppingDays;
  
  // Year progress percentage
  const year = xmasTargetDate.getFullYear();
  const yearStart = new Date(Date.UTC(year, 0, 1));
  const yearEnd = new Date(Date.UTC(year + 1, 0, 1));
  const yearProgress = ((now - yearStart) / (yearEnd - yearStart)) * 100;
  document.querySelector('#xmas-stat-percent').textContent = `${yearProgress.toFixed(1)}%`;
  
  // Update progress bar (from Jan 1 to Dec 25)
  const christmasDay = 359; // Day 359 of the year (Dec 25)
  const currentDay = Math.floor((now - yearStart) / (1000 * 60 * 60 * 24));
  const progress = (currentDay / christmasDay) * 100;
  document.querySelector('#xmas-progress-bar').style.width = `${Math.min(100, progress)}%`;
  document.querySelector('#xmas-progress-percent').textContent = `${Math.min(100, progress).toFixed(1)}%`;
  
  // Update current date
  const options = { month: 'short', day: 'numeric' };
  document.querySelector('#xmas-current-date').textContent = now.toLocaleDateString('en-US', options);
  
  // Update daily fact (change every 24 hours)
  const showFacts = document.querySelector('#xmas-show-facts').checked;
  if (showFacts) {
    const factIndex = currentDay % xmasFacts.length;
    document.querySelector('#xmas-daily-fact').textContent = xmasFacts[factIndex];
  }
  
  // Festive sounds (if enabled)
  const soundEnabled = document.querySelector('#xmas-sound').checked;
  if (soundEnabled && days <= 1 && hours <= 1) {
    // Play subtle sound when close to Christmas
    xmasPlayFestiveSound();
  }
}

function xmasChristmasArrived() {
  clearInterval(xmasCountdownInterval);
  xmasIsRunning = false;
  
  const display = document.querySelector('#xmas-countdown-display');
  const status = document.querySelector('#xmas-status');
  const startBtn = document.querySelector('#xmas-start-btn');
  const pauseBtn = document.querySelector('#xmas-pause-btn');
  
  display.textContent = "ğŸ… MERRY CHRISTMAS! ğŸ„";
  display.style.fontSize = "36px";
  display.style.color = "#39ff14";
  display.style.textShadow = "0 0 30px rgba(57,255,20,0.7)";
  
  status.textContent = "ğŸ Christmas has arrived!";
  status.style.color = "#ff4d4d";
  
  startBtn.disabled = true;
  pauseBtn.disabled = true;
  startBtn.textContent = "ğŸ„ Merry Christmas!";
  
  // Update progress to 100%
  document.querySelector('#xmas-progress-bar').style.width = "100%";
  document.querySelector('#xmas-progress-percent').textContent = "100%";
  
  // Show special message
  const personalMessage = document.querySelector('#xmas-message').value || "Wishing you a wonderful Christmas!";
  document.querySelector('#xmas-daily-fact').textContent = `ğŸ… ${personalMessage} ğŸ„`;
  
  // Play celebration sound
  xmasPlayCelebration();
}

function xmasPauseCountdown() {
  if (!xmasIsRunning) return;
  
  clearInterval(xmasCountdownInterval);
  xmasIsRunning = false;
  
  document.querySelector('#xmas-start-btn').disabled = false;
  document.querySelector('#xmas-pause-btn').disabled = true;
  document.querySelector('#xmas-start-btn').textContent = 'â–¶ï¸ Resume Countdown';
  
  document.querySelector('#xmas-status').textContent = 'â¸ï¸ Countdown paused';
  document.querySelector('#xmas-status').style.color = '#ffa500';
}

function xmasResetCountdown() {
  clearInterval(xmasCountdownInterval);
  xmasIsRunning = false;
  xmasTargetDate = null;
  
  const display = document.querySelector('#xmas-countdown-display');
  const status = document.querySelector('#xmas-status');
  const startBtn = document.querySelector('#xmas-start-btn');
  const pauseBtn = document.querySelector('#xmas-pause-btn');
  
  display.textContent = "00:00:00:00";
  display.style.fontSize = "48px";
  display.style.color = "#ff4d4d";
  display.style.textShadow = "0 0 20px rgba(255,77,77,0.5)";
  
  status.textContent = "Ready to start";
  status.style.color = "#39ff14";
  
  startBtn.disabled = false;
  pauseBtn.disabled = true;
  startBtn.textContent = "ğŸ… Start Countdown";
  
  // Reset progress
  document.querySelector('#xmas-progress-bar').style.width = "0%";
  document.querySelector('#xmas-progress-percent').textContent = "0%";
  
  // Reset stats
  document.querySelector('#xmas-stat-days').textContent = "â€“";
  document.querySelector('#xmas-stat-weekends').textContent = "â€“";
  document.querySelector('#xmas-stat-shopping').textContent = "â€“";
  document.querySelector('#xmas-stat-percent').textContent = "â€“";
  
  // Reset fact
  document.querySelector('#xmas-daily-fact').textContent = 
    "Start the countdown to see daily Christmas facts and preparation suggestions!";
}

function xmasPlayFestiveSound() {
  // Simple festive sound using Web Audio API
  try {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
    
    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
    
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.5);
  } catch (e) {
    // Fallback to console log if audio fails
    console.log("ğŸ”” Festive sound would play here!");
  }
}

function xmasPlayCelebration() {
  // Celebration sequence
  for (let i = 0; i < 3; i++) {
    setTimeout(() => {
      xmasPlayFestiveSound();
    }, i * 300);
  }
}

function xmasShareTwitter() {
  const days = document.querySelector('#xmas-stat-days').textContent;
  const text = `ğŸ„ Only ${days} days until Christmas! Track the countdown here: `;
  const url = window.location.href;
  const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
  window.open(shareUrl, '_blank');
}

function xmasCopyLink() {
  const url = window.location.href;
  navigator.clipboard.writeText(url).then(() => {
    const status = document.querySelector('#xmas-status');
    status.textContent = 'âœ… Link copied!';
    status.style.color = '#39ff14';
    setTimeout(() => {
      if (xmasIsRunning) {
        status.textContent = 'ğŸ„ Countdown running';
      } else {
        status.textContent = 'Ready to start';
      }
    }, 2000);
  });
}

function xmasSaveWallpaper() {
  // Create a festive wallpaper image
  const canvas = document.createElement('canvas');
  canvas.width = 1920;
  canvas.height = 1080;
  const ctx = canvas.getContext('2d');
  
  // Background gradient
  const gradient = ctx.createLinearGradient(0, 0, 1920, 1080);
  gradient.addColorStop(0, '#0a0f14');
  gradient.addColorStop(1, '#1a2f3a');
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, 1920, 1080);
  
  // Add stars
  ctx.fillStyle = '#ffffff';
  for (let i = 0; i < 100; i++) {
    const x = Math.random() * 1920;
    const y = Math.random() * 1080;
    const size = Math.random() * 2;
    ctx.beginPath();
    ctx.arc(x, y, size, 0, Math.PI * 2);
    ctx.fill();
  }
  
  // Add Christmas text
  ctx.fillStyle = '#ff4d4d';
  ctx.font = 'bold 100px Arial';
  ctx.textAlign = 'center';
  ctx.fillText('ğŸ„ Christmas Countdown ğŸ…', 960, 400);
  
  const days = document.querySelector('#xmas-stat-days').textContent;
  if (days !== 'â€“') {
    ctx.font = 'bold 150px monospace';
    ctx.fillStyle = '#39ff14';
    ctx.fillText(`${days} DAYS`, 960, 600);
    
    ctx.font = 'bold 50px Arial';
    ctx.fillStyle = '#ffffff';
    ctx.fillText('Until Christmas Morning!', 960, 700);
  }
  
  // Convert to data URL and trigger download
  const dataUrl = canvas.toDataURL('image/png');
  const link = document.createElement('a');
  link.download = 'christmas-countdown-wallpaper.png';
  link.href = dataUrl;
  link.click();
  
  // Update status
  const status = document.querySelector('#xmas-status');
  status.textContent = 'âœ… Wallpaper saved!';
  status.style.color = '#39ff14';
  setTimeout(() => {
    if (xmasIsRunning) {
      status.textContent = 'ğŸ„ Countdown running';
    } else {
      status.textContent = 'Ready to start';
    }
  }, 2000);
}

// Initialize
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    // Set current year as default
    const currentYear = new Date().getFullYear();
    const yearSelect = document.querySelector('#xmas-year');
    yearSelect.value = currentYear;
    
    // Auto-detect timezone
    const timezoneOffset = -new Date().getTimezoneOffset() / 60;
    const timezoneSelect = document.querySelector('#xmas-timezone');
    timezoneSelect.value = timezoneOffset;
    
    // Add auto-start option
    const now = new Date();
    const christmas = xmasGetChristmasDate(currentYear);
    if (now < christmas) {
      // Auto-start countdown if Christmas hasn't passed
      setTimeout(xmasStartCountdown, 1000);
    }
  });
}
</script>

<style>
/* Christmas-themed styles */
#xmas-countdown-title {
  color: #ff4d4d;
  margin-top: 0;
  margin-bottom: 4px;
  background: linear-gradient(45deg, #ff4d4d, #39ff14);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Snow animation */
@keyframes snowFall {
  0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

.snowflake {
  position: absolute;
  background: white;
  border-radius: 50%;
  pointer-events: none;
  animation: snowFall linear infinite;
}

/* Christmas lights animation */
@keyframes lightsTwinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

.christmas-light {
  animation: lightsTwinkle 2s infinite;
}

/* Responsive design */
@media (max-width: 768px) {
  #xmas-countdown-display {
    font-size: 32px !important;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  .share-buttons {
    flex-direction: column;
  }
  
  .share-buttons button {
    width: 100%;
    margin: 4px 0 !important;
  }
}

/* Festive hover effects */
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(255,77,77,0.3);
  transition: all 0.3s ease;
}

/* Progress bar animation */
@keyframes progressPulse {
  0% { box-shadow: 0 0 0 0 rgba(57,255,20,0.4); }
  70% { box-shadow: 0 0 0 10px rgba(57,255,20,0); }
  100% { box-shadow: 0 0 0 0 rgba(57,255,20,0); }
}

#xmas-progress-bar {
  animation: progressPulse 2s infinite;
}

/* Christmas color scheme */
.christmas-red { color: #ff4d4d; }
.christmas-green { color: #39ff14; }
.christmas-gold { color: #ffcc00; }
.christmas-silver { color: #c0c0c0; }
</style>
