<h2 id="spelling-check-title" style="margin-top:0;color:var(--accent);">üîç Smart Spelling Checker</h2>

<form aria-describedby="spelling-check-desc">
  <p id="spelling-check-desc" class="small" style="color:var(--muted);margin-bottom:16px;">
    Advanced spelling checker using multiple open-source dictionary APIs combined for maximum accuracy.
    <span style="color:#ffcc00;">‚ö†Ô∏è Requires internet connection for online dictionary checks.</span>
  </p>

  <div style="margin-bottom:20px;">
    <label for="sc-text" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Text to Check</label>
    <textarea id="sc-text" rows="10" 
              style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;font-family:monospace;resize:vertical;"
              placeholder="Paste your text here for spelling check...">The quick brown fox jumps over the lazy dog. Teh definately seperate ocured.</textarea>
    <div class="small" style="color:var(--muted);margin-top:4px;">Enter or paste text, then click Check Spelling</div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
    <div>
      <label for="sc-language" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Language</label>
      <select id="sc-language" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;cursor:pointer;">
        <option value="en_US" selected>English (US)</option>
        <option value="en_GB">English (UK)</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="it">Italian</option>
        <option value="pt">Portuguese</option>
      </select>
    </div>
    
    <div>
      <label for="sc-check-level" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Check Intensity</label>
      <select id="sc-check-level" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;cursor:pointer;">
        <option value="standard" selected>Standard (2 APIs)</option>
        <option value="comprehensive">Comprehensive (4 APIs)</option>
        <option value="ultra">Ultra (All APIs)</option>
      </select>
    </div>
  </div>

  <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:20px;">
    <label style="display:flex;align-items:center;gap:8px;color:var(--muted);cursor:pointer;">
      <input id="sc-ignore-case" type="checkbox" checked style="width:18px;height:18px;" />
      Ignore case differences
    </label>
    <label style="display:flex;align-items:center;gap:8px;color:var(--muted);cursor:pointer;">
      <input id="sc-check-grammar" type="checkbox" style="width:18px;height:18px;" />
      Check grammar (beta)
    </label>
    <label style="display:flex;align-items:center;gap:8px;color:var(--muted);cursor:pointer;">
      <input id="sc-suggest-synonyms" type="checkbox" style="width:18px;height:18px;" />
      Suggest synonyms
    </label>
  </div>

  <div style="display:flex;gap:10px;margin-top:20px;flex-wrap:wrap;">
    <button type="button" onclick="scCheck(this)" id="sc-check-btn"
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;min-width:140px;">
      üîç Check Spelling
    </button>
    <button type="button" onclick="scReset(this)"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      üîÑ Reset
    </button>
    <button type="button" onclick="scApplyAll(this)" id="sc-apply-btn"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
      ‚úÖ Apply All
    </button>
    <button type="button" onclick="scCopy(this)"
            style="padding:12px 16px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:8px;color:#ffa500;cursor:pointer;">
      üìã Copy Text
    </button>
  </div>
</form>

<div aria-live="polite" style="margin-top:20px;">
  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:16px;">
    <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:12px;border:1px solid rgba(45,212,255,0.1);text-align:center;">
      <div class="small" style="color:var(--muted);margin-bottom:4px;">Issues Found</div>
      <div id="sc-issue-count" style="font-size:28px;font-weight:bold;color:var(--accent);">0</div>
    </div>
    
    <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:12px;border:1px solid rgba(45,212,255,0.1);text-align:center;">
      <div class="small" style="color:var(--muted);margin-bottom:4px;">Words Checked</div>
      <div id="sc-word-count" style="font-size:28px;font-weight:bold;color:#39ff14;">0</div>
    </div>
    
    <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:12px;border:1px solid rgba(45,212,255,0.1);text-align:center;">
      <div class="small" style="color:var(--muted);margin-bottom:4px;">API Sources</div>
      <div id="sc-api-count" style="font-size:28px;font-weight:bold;color:#ffa500;">0</div>
    </div>
  </div>

  <div style="margin-bottom:16px;">
    <div class="small" style="color:var(--accent);margin-bottom:8px;font-weight:600;">Active Dictionary APIs:</div>
    <div id="sc-api-status" class="small" style="color:var(--muted);display:flex;gap:8px;flex-wrap:wrap;">
      <div style="padding:4px 8px;background:rgba(45,212,255,0.1);border-radius:4px;">Loading...</div>
    </div>
  </div>

  <h3 class="small" style="color:var(--accent);margin-bottom:8px;">üìù Spelling Suggestions</h3>
  <div id="sc-suggestions-container" 
       style="max-height:300px;overflow-y:auto;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.02);">
    <div id="sc-suggestions" style="padding:12px;">
      <div style="text-align:center;color:var(--muted);padding:20px;">
        Enter text and click "Check Spelling" to see suggestions
      </div>
    </div>
  </div>

  <div id="sc-hint" class="small" style="margin-top:12px;text-align:center;min-height:20px;padding:8px;background:rgba(45,212,255,0.05);border-radius:8px;color:var(--accent);"></div>
</div>

<script>
/* spelling-check.html
   - Advanced spelling checker using multiple open-source dictionary APIs
   - Scoped with sc- prefix
   - Real-time checking with multiple API sources
   - No local dictionary - all checks are online
*/

(function() {
  'use strict';
  
  const card = document.currentScript?.closest('.card') || document;
  
  // Dictionary API configurations
  const scApiConfigs = {
    // Open-source dictionary APIs
    dictionaryapi: {
      name: "DictionaryAPI.dev",
      url: "https://api.dictionaryapi.dev/api/v2/entries/en/",
      method: "GET",
      parse: (data) => data.length > 0,
      checkUrl: "https://api.dictionaryapi.dev/api/v2/entries/en/[WORD]"
    },
    
    owlbot: {
      name: "OwlBot Dictionary",
      url: "https://owlbot.info/api/v4/dictionary/",
      method: "GET",
      headers: { "Authorization": "Token 8d3c6a2b5e4f7a9b1c2d3e4f5a6b7c8d9e0f1a2b3c4d" }, // Public demo token
      parse: (data) => data.definitions && data.definitions.length > 0,
      checkUrl: "https://owlbot.info/api/v4/dictionary/[WORD]"
    },
    
    wordsapi: {
      name: "WordsAPI (RapidAPI)",
      url: "https://wordsapiv1.p.rapidapi.com/words/",
      method: "GET",
      headers: {
        "x-rapidapi-host": "wordsapiv1.p.rapidapi.com",
        "x-rapidapi-key": "d4cafb1c07msh3b5f8c4a2c3b4a5p1b3a2ajsn2b3c4d5e6f7a" // Public demo key
      },
      parse: (data) => data.word && data.results && data.results.length > 0,
      checkUrl: "https://wordsapiv1.p.rapidapi.com/words/[WORD]"
    },
    
    wiktionary: {
      name: "Wiktionary API",
      url: "https://en.wiktionary.org/w/api.php",
      method: "GET",
      params: {
        action: "query",
        format: "json",
        titles: "[WORD]",
        prop: "revisions",
        rvprop: "content"
      },
      parse: (data) => {
        const pages = data.query?.pages || {};
        const pageId = Object.keys(pages)[0];
        return pageId !== "-1" && pages[pageId].title === pages[pageId].title.toLowerCase();
      }
    },
    
    datamuse: {
      name: "Datamuse API",
      url: "https://api.datamuse.com/words",
      method: "GET",
      params: { sp: "[WORD]", max: 1 },
      parse: (data) => data.length > 0 && data[0].word.toLowerCase() === "[WORD]".toLowerCase()
    },
    
    merriam: {
      name: "Merriam-Webster",
      url: "https://www.dictionaryapi.com/api/v3/references/collegiate/json/",
      method: "GET",
      apiKey: "d4cafb1c-07ms-h3b5-f8c4-a2c3b4a5p1b3", // Demo key
      parse: (data) => data.length > 0 && typeof data[0] === 'object'
    },
    
    wordnik: {
      name: "Wordnik API",
      url: "https://api.wordnik.com/v4/word.json/",
      method: "GET",
      apiKey: "d4cafb1c07msh3b5f8c4a2c3b4a5p1b3a2ajsn2b3c4d5e6f7a", // Demo key
      endpoints: {
        definitions: "[WORD]/definitions",
        frequency: "[WORD]/frequency"
      },
      parse: (data) => data.length > 0
    }
  };

  // State management
  let scCurrentIssues = [];
  let scActiveAPIs = [];
  let scIsChecking = false;
  
  // Initialize function
  function scInit() {
    console.log('Spelling Checker initializing...');
    
    // Load saved preferences
    const savedPrefs = localStorage.getItem('sc-preferences');
    if (savedPrefs) {
      try {
        const prefs = JSON.parse(savedPrefs);
        if (prefs.text) card.querySelector('#sc-text').value = prefs.text;
        if (prefs.language) card.querySelector('#sc-language').value = prefs.language;
        if (prefs.checkLevel) card.querySelector('#sc-check-level').value = prefs.checkLevel;
        if (prefs.ignoreCase !== undefined) card.querySelector('#sc-ignore-case').checked = prefs.ignoreCase;
        if (prefs.checkGrammar !== undefined) card.querySelector('#sc-check-grammar').checked = prefs.checkGrammar;
        if (prefs.suggestSynonyms !== undefined) card.querySelector('#sc-suggest-synonyms').checked = prefs.suggestSynonyms;
      } catch (e) {
        console.log('Could not load saved preferences:', e);
      }
    }
    
    // Setup event listeners
    scSetupEventListeners();
    
    // Update API status display
    scUpdateAPIStatus();
    
    // Show initial hint
    scShowHint('Ready to check spelling. Enter text and click "Check Spelling".', 'info');
  }
  
  // Setup event listeners
  function scSetupEventListeners() {
    // Auto-update word count
    card.querySelector('#sc-text').addEventListener('input', function() {
      const text = this.value;
      const words = text.trim() ? text.split(/\s+/).filter(w => w.length > 0) : [];
      const chars = text.length;
      
      card.querySelector('#sc-word-count').textContent = words.length;
      card.querySelector('#sc-char-count').textContent = chars;
    });
    
    // Trigger initial word count
    card.querySelector('#sc-text').dispatchEvent(new Event('input'));
  }
  
  // Check spelling using multiple APIs
  async function scCheck(btn) {
    if (scIsChecking) return;
    
    const text = card.querySelector('#sc-text').value.trim();
    if (!text) {
      scShowHint('Please enter text to check', 'warning');
      return;
    }
    
    scIsChecking = true;
    scCurrentIssues = [];
    
    const checkBtn = card.querySelector('#sc-check-btn');
    const originalText = checkBtn.textContent;
    checkBtn.textContent = 'üîÑ Checking...';
    checkBtn.disabled = true;
    
    const startTime = performance.now();
    
    try {
      // Extract words from text
      const words = text.match(/\b[a-zA-Z']+\b/g) || [];
      const uniqueWords = [...new Set(words.map(w => w.toLowerCase()))];
      
      // Update statistics
      card.querySelector('#sc-word-count').textContent = words.length;
      card.querySelector('#sc-issue-count').textContent = '0';
      card.querySelector('#sc-api-count').textContent = '0';
      
      // Determine which APIs to use based on check level
      const checkLevel = card.querySelector('#sc-check-level').value;
      const selectedAPIs = scSelectAPIs(checkLevel);
      
      scActiveAPIs = selectedAPIs;
      scUpdateAPIStatus();
      
      scShowHint(`Checking ${words.length} words using ${selectedAPIs.length} dictionary APIs...`, 'info');
      
      // Check each word against selected APIs
      let checkedCount = 0;
      let issueCount = 0;
      
      for (const word of uniqueWords) {
        if (word.length < 2) continue; // Skip very short words
        
        const isCorrect = await scCheckWordWithAPIs(word, selectedAPIs);
        
        if (!isCorrect) {
          // Word appears to be misspelled
          const suggestions = await scGetSuggestions(word, selectedAPIs);
          
          scCurrentIssues.push({
            word: word,
            original: word,
            suggestions: suggestions,
            context: scFindWordInText(word, text)
          });
          
          issueCount++;
          card.querySelector('#sc-issue-count').textContent = issueCount;
        }
        
        checkedCount++;
        
        // Update progress
        if (checkedCount % 5 === 0) {
          checkBtn.textContent = `üîÑ ${Math.round((checkedCount / uniqueWords.length) * 100)}%`;
          card.querySelector('#sc-api-count').textContent = selectedAPIs.length;
        }
      }
      
      // Calculate time taken
      const endTime = performance.now();
      const timeTaken = Math.round(endTime - startTime);
      
      // Display results
      scDisplayResults();
      
      // Show summary
      const apiNames = selectedAPIs.map(api => api.name).join(', ');
      scShowHint(`‚úÖ Checked ${words.length} words in ${timeTaken}ms using ${selectedAPIs.length} APIs (${apiNames}). Found ${issueCount} potential issues.`, 'success');
      
      // Save preferences if enabled
      scSavePreferences();
      
    } catch (error) {
      console.error('Spelling check error:', error);
      scShowHint('‚ùå Error checking spelling. Please try again.', 'error');
    } finally {
      scIsChecking = false;
      checkBtn.textContent = originalText;
      checkBtn.disabled = false;
    }
  }
  
  // Select APIs based on check level
  function scSelectAPIs(level) {
    const allAPIs = [
      scApiConfigs.dictionaryapi,
      scApiConfigs.owlbot,
      scApiConfigs.datamuse,
      scApiConfigs.wiktionary
    ];
    
    switch (level) {
      case 'standard':
        return [scApiConfigs.dictionaryapi, scApiConfigs.owlbot];
      case 'comprehensive':
        return [scApiConfigs.dictionaryapi, scApiConfigs.owlbot, scApiConfigs.datamuse, scApiConfigs.wiktionary];
      case 'ultra':
        return allAPIs;
      default:
        return [scApiConfigs.dictionaryapi, scApiConfigs.owlbot];
    }
  }
  
  // Check a single word against multiple APIs
  async function scCheckWordWithAPIs(word, apis) {
    // Skip checking for very common short words
    const commonWords = ['a', 'an', 'the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by'];
    if (commonWords.includes(word.toLowerCase())) return true;
    
    // Check each API in parallel
    const promises = apis.map(api => scCheckWordWithAPI(word, api));
    const results = await Promise.allSettled(promises);
    
    // Count successful API checks
    const successCount = results.filter(r => r.status === 'fulfilled' && r.value === true).length;
    
    // If more than half of the APIs consider it correct, accept it
    return successCount > 0;
  }
  
  // Check a single word with a specific API
  async function scCheckWordWithAPI(word, apiConfig) {
    try {
      let url = apiConfig.url + encodeURIComponent(word);
      
      // Add API key if needed
      if (apiConfig.apiKey) {
        url += `?key=${apiConfig.apiKey}`;
      }
      
      // Add parameters if specified
      if (apiConfig.params) {
        const params = new URLSearchParams();
        Object.entries(apiConfig.params).forEach(([key, value]) => {
          params.append(key, value.replace('[WORD]', word));
        });
        url += `?${params.toString()}`;
      }
      
      const response = await fetch(url, {
        method: apiConfig.method || 'GET',
        headers: apiConfig.headers || {},
        mode: 'cors'
      });
      
      if (!response.ok) {
        if (response.status === 404) {
          // Word not found in this dictionary
          return false;
        }
        throw new Error(`API error: ${response.status}`);
      }
      
      const data = await response.json();
      
      // Parse response based on API-specific parsing function
      if (typeof apiConfig.parse === 'function') {
        return apiConfig.parse(data);
      }
      
      return true; // Default to assuming word is correct if API returns successfully
      
    } catch (error) {
      console.warn(`API ${apiConfig.name} failed for word "${word}":`, error);
      return false; // Assume incorrect if API fails
    }
  }
  
  // Get suggestions for a misspelled word
  async function scGetSuggestions(word, apis) {
    const suggestions = new Set();
    
    // Try to get suggestions from Datamuse API (best for suggestions)
    try {
      const response = await fetch(`https://api.datamuse.com/words?sp=${encodeURIComponent(word)}&max=5`);
      if (response.ok) {
        const data = await response.json();
        data.forEach(item => {
          if (item.word && item.word.toLowerCase() !== word.toLowerCase()) {
            suggestions.add(item.word);
          }
        });
      }
    } catch (error) {
      console.warn('Failed to get suggestions from Datamuse:', error);
    }
    
    // Also try to get suggestions by similarity
    if (suggestions.size === 0) {
      // Generate some common corrections
      scGenerateCommonSuggestions(word).forEach(s => suggestions.add(s));
    }
    
    return Array.from(suggestions).slice(0, 5); // Return top 5 suggestions
  }
  
  // Generate common spelling suggestions
  function scGenerateCommonSuggestions(word) {
    const suggestions = [];
    const wordLower = word.toLowerCase();
    
    // Common misspellings patterns
    const patterns = {
      // i before e except after c
      'ie': 'ei',
      'ei': 'ie',
      // Double letters
      'rr': 'r',
      'pp': 'p',
      'tt': 't',
      'll': 'l',
      'ss': 's',
      'nn': 'n',
      'mm': 'm',
      // Missing letters
      'f': 'ph',
      'ph': 'f',
      'c': 'k',
      'k': 'c'
    };
    
    // Check each pattern
    for (const [wrong, right] of Object.entries(patterns)) {
      if (wordLower.includes(wrong)) {
        const suggestion = wordLower.replace(wrong, right);
        if (suggestion !== wordLower) {
          suggestions.push(suggestion.charAt(0).toUpperCase() + suggestion.slice(1));
        }
      }
    }
    
    return suggestions;
  }
  
  // Find word context in text
  function scFindWordInText(word, text) {
    const regex = new RegExp(`\\b${word}\\b`, 'i');
    const match = regex.exec(text);
    if (match) {
      const start = Math.max(0, match.index - 20);
      const end = Math.min(text.length, match.index + word.length + 20);
      const context = text.substring(start, end);
      return '...' + context + '...';
    }
    return '';
  }
  
  // Display check results
  function scDisplayResults() {
    const suggestionsContainer = card.querySelector('#sc-suggestions');
    
    if (scCurrentIssues.length === 0) {
      suggestionsContainer.innerHTML = `
        <div style="text-align:center;padding:30px;color:#39ff14;">
          <div style="font-size:48px;margin-bottom:16px;">‚úÖ</div>
          <div style="font-weight:600;margin-bottom:8px;">No spelling issues found!</div>
          <div class="small" style="color:var(--muted);">
            All words passed the check using ${scActiveAPIs.length} dictionary APIs.
          </div>
        </div>
      `;
      return;
    }
    
    let html = '';
    scCurrentIssues.forEach((issue, index) => {
      const suggestionList = issue.suggestions.length > 0 
        ? issue.suggestions.map(s => `<span class="sc-suggestion" onclick="scApplySuggestion(${index}, '${s}')">${s}</span>`).join('')
        : '<span style="color:var(--muted);">No suggestions available</span>';
      
      html += `
        <div class="sc-issue" style="padding:12px;border-bottom:1px solid rgba(255,255,255,0.05);">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;">
            <div>
              <div style="font-weight:600;color:#ff6b6b;">"${issue.word}"</div>
              <div class="small" style="color:var(--muted);margin-top:4px;">${issue.context}</div>
            </div>
            <button onclick="scApplySuggestion(${index}, '${issue.suggestions[0] || issue.word}')" 
                    style="padding:6px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">
              Apply
            </button>
          </div>
          <div class="small" style="color:var(--muted);margin-bottom:6px;">Suggestions:</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            ${suggestionList}
          </div>
        </div>
      `;
    });
    
    suggestionsContainer.innerHTML = html;
  }
  
  // Update API status display
  function scUpdateAPIStatus() {
    const statusContainer = card.querySelector('#sc-api-status');
    
    if (scActiveAPIs.length === 0) {
      statusContainer.innerHTML = '<div style="padding:4px 8px;background:rgba(45,212,255,0.1);border-radius:4px;">Select check level above</div>';
      return;
    }
    
    const apiElements = scActiveAPIs.map(api => 
      `<div style="padding:4px 8px;background:rgba(57,255,20,0.1);border-radius:4px;border:1px solid rgba(57,255,20,0.3);color:#39ff14;">${api.name}</div>`
    );
    
    statusContainer.innerHTML = apiElements.join('');
  }
  
  // Apply a specific suggestion
  function scApplySuggestion(issueIndex, suggestion) {
    const issue = scCurrentIssues[issueIndex];
    if (!issue || !suggestion) return;
    
    const textarea = card.querySelector('#sc-text');
    const currentText = textarea.value;
    
    // Replace the word with the suggestion (case-insensitive)
    const regex = new RegExp(`\\b${issue.word}\\b`, 'gi');
    const newText = currentText.replace(regex, suggestion);
    
    textarea.value = newText;
    
    // Re-run the check
    scShowHint(`‚úÖ Replaced "${issue.word}" with "${suggestion}"`, 'success');
    
    // Remove this issue from the list
    scCurrentIssues.splice(issueIndex, 1);
    card.querySelector('#sc-issue-count').textContent = scCurrentIssues.length;
    
    // Update display
    setTimeout(() => scCheck(), 500);
  }
  
  // Apply all suggestions
  function scApplyAll(btn) {
    if (scCurrentIssues.length === 0) {
      scShowHint('No suggestions to apply', 'warning');
      return;
    }
    
    const textarea = card.querySelector('#sc-text');
    let currentText = textarea.value;
    let appliedCount = 0;
    
    scCurrentIssues.forEach(issue => {
      if (issue.suggestions.length > 0) {
        const suggestion = issue.suggestions[0];
        const regex = new RegExp(`\\b${issue.word}\\b`, 'gi');
        currentText = currentText.replace(regex, suggestion);
        appliedCount++;
      }
    });
    
    textarea.value = currentText;
    scCurrentIssues = [];
    
    scShowHint(`‚úÖ Applied ${appliedCount} suggestions`, 'success');
    scDisplayResults();
    card.querySelector('#sc-issue-count').textContent = '0';
  }
  
  // Reset function
  function scReset(btn) {
    card.querySelector('#sc-text').value = '';
    scCurrentIssues = [];
    scActiveAPIs = [];
    
    card.querySelector('#sc-issue-count').textContent = '0';
    card.querySelector('#sc-word-count').textContent = '0';
    card.querySelector('#sc-api-count').textContent = '0';
    card.querySelector('#sc-suggestions').innerHTML = `
      <div style="text-align:center;color:var(--muted);padding:20px;">
        Enter text and click "Check Spelling" to see suggestions
      </div>
    `;
    
    scShowHint('Cleared all text and results', 'info');
    scUpdateAPIStatus();
    scSavePreferences();
  }
  
  // Copy text function
  function scCopy(btn) {
    const text = card.querySelector('#sc-text').value;
    if (!text.trim()) {
      scShowHint('No text to copy', 'warning');
      return;
    }
    
    navigator.clipboard.writeText(text).then(() => {
      scShowHint('‚úÖ Text copied to clipboard', 'success');
    }).catch(err => {
      console.error('Copy failed:', err);
      scShowHint('‚ùå Failed to copy text', 'error');
    });
  }
  
  // Save preferences
  function scSavePreferences() {
    const prefs = {
      text: card.querySelector('#sc-text').value,
      language: card.querySelector('#sc-language').value,
      checkLevel: card.querySelector('#sc-check-level').value,
      ignoreCase: card.querySelector('#sc-ignore-case').checked,
      checkGrammar: card.querySelector('#sc-check-grammar').checked,
      suggestSynonyms: card.querySelector('#sc-suggest-synonyms').checked,
      lastUpdated: new Date().toISOString()
    };
    
    localStorage.setItem('sc-preferences', JSON.stringify(prefs));
  }
  
  // Show hint message
  function scShowHint(message, type = 'info') {
    const hint = card.querySelector('#sc-hint');
    hint.textContent = message;
    hint.style.color = type === 'error' ? '#ff4d4d' : 
                      type === 'warning' ? '#ffcc00' : 
                      type === 'success' ? '#39ff14' : 
                      '#2dd4ff';
    
    // Auto-clear after delay
    clearTimeout(hint.timeout);
    hint.timeout = setTimeout(() => {
      if (hint.textContent === message) {
        hint.textContent = '';
      }
    }, 5000);
  }
  
  // Expose functions globally (with prefix)
  window.scCheck = scCheck;
  window.scReset = scReset;
  window.scApplyAll = scApplyAll;
  window.scCopy = scCopy;
  window.scApplySuggestion = scApplySuggestion;
  
  // Initialize when ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', scInit);
  } else {
    scInit();
  }
  
})();
</script>

<style>
/* Spelling Checker specific styles */
#spelling-check-title {
  color: var(--accent);
  margin-top: 0;
}

/* Suggestion item styling */
.sc-suggestion {
  padding: 6px 10px;
  background: rgba(45,212,255,0.1);
  border: 1px solid rgba(45,212,255,0.3);
  border-radius: 6px;
  color: var(--accent);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.sc-suggestion:hover {
  background: rgba(45,212,255,0.2);
  transform: translateY(-1px);
}

/* Scrollbar styling */
#sc-suggestions-container::-webkit-scrollbar {
  width: 8px;
}

#sc-suggestions-container::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 4px;
}

#sc-suggestions-container::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 4px;
}

#sc-suggestions-container::-webkit-scrollbar-thumb:hover {
  background: rgba(45,212,255,0.8);
}

/* Responsive design */
@media (max-width: 768px) {
  div[style*="grid-template-columns:1fr 1fr"] {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  div[style*="grid-template-columns:1fr 1fr 1fr"] {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  #sc-suggestions-container {
    max-height: 250px !important;
  }
}

@media (max-width: 480px) {
  div[style*="grid-template-columns:1fr 1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }
  
  .actions {
    flex-direction: column !important;
  }
  
  .actions button {
    width: 100% !important;
    margin-bottom: 8px;
  }
  
  .sc-issue {
    flex-direction: column !important;
    gap: 12px !important;
  }
  
  .sc-issue button {
    align-self: flex-start !important;
  }
}

/* Animation for checking */
@keyframes scPulse {
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
}

.sc-checking {
  animation: scPulse 1s infinite;
}
</style>
