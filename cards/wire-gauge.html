<h2>Wire Gauge & Voltage Drop Calculator</h2>
<p class="description">Professional wire sizing calculator for electrical installations with NEC/IEC compliance checks and safety recommendations.</p>

<form class="tool-form">
  <!-- Safety Notice -->
  <div class="safety-notice">
    <div class="warning-icon">‚ö†Ô∏è</div>
    <div class="warning-content">
      <strong>Important Safety Notice:</strong> This tool is for educational purposes only. Always consult a licensed electrician and follow local electrical codes (NEC, IEC, etc.).
    </div>
  </div>

  <!-- Circuit Parameters -->
  <div class="input-section">
    <h3 class="section-title">
      <span class="section-icon">‚ö°</span>
      Circuit Parameters
    </h3>
    
    <div class="form-grid">
      <div class="field">
        <label for="current">Load Current</label>
        <div class="input-group">
          <input id="current" type="number" min="0.1" max="1000" step="0.1" placeholder="e.g., 20" class="input" />
          <span class="input-unit">Amps</span>
        </div>
        <div class="helper">
          Common: 15A (lights) ¬∑ 20A (outlets) ¬∑ 30A (dryer)
        </div>
      </div>
      
      <div class="field">
        <label for="length">One-Way Length</label>
        <div class="input-group">
          <input id="length" type="number" min="1" max="1000" step="1" placeholder="e.g., 50" class="input" />
          <select id="length-unit" class="unit-select">
            <option value="ft">Feet</option>
            <option value="m">Meters</option>
          </select>
        </div>
        <div class="helper">From source to load (one-way distance)</div>
      </div>
      
      <div class="field">
        <label for="voltage">System Voltage</label>
        <select id="voltage" class="select">
          <option value="120">120V (US Residential)</option>
          <option value="230">230V (EU/UK Standard)</option>
          <option value="240">240V (US 2-Phase)</option>
          <option value="400">400V (EU 3-Phase)</option>
          <option value="480">480V (US Industrial)</option>
          <option value="custom">Custom Voltage</option>
        </select>
        <div id="custom-voltage-container" class="custom-input" style="display: none;">
          <input id="custom-voltage" type="number" min="12" max="1000" placeholder="Enter voltage" class="input" />
        </div>
      </div>
    </div>
  </div>

  <!-- Wire Specifications -->
  <div class="input-section">
    <h3 class="section-title">
      <span class="section-icon">üîß</span>
      Wire Specifications
    </h3>
    
    <div class="form-grid">
      <div class="field">
        <label for="material">Conductor Material</label>
        <select id="material" class="select">
          <option value="copper" selected>Copper (Cu) - Standard</option>
          <option value="copper_90">Copper - 90¬∞C Rated</option>
          <option value="aluminum">Aluminum (Al) - 75¬∞C Rated</option>
          <option value="aluminum_90">Aluminum - 90¬∞C Rated</option>
        </select>
        <div class="helper">Copper: Better conductivity ¬∑ Aluminum: Lighter/cheaper</div>
      </div>
      
      <div class="field">
        <label for="insulation">Insulation Type</label>
        <select id="insulation" class="select">
          <option value="thhn">THHN/THWN-2 (Common)</option>
          <option value="xhhw">XHHW (Wet Locations)</option>
          <option value="uf">UF (Underground)</option>
          <option value="mc">MC (Metal Clad)</option>
        </select>
      </div>
      
      <div class="field">
        <label for="max-drop">Max Voltage Drop</label>
        <div class="slider-group">
          <input id="max-drop" type="range" min="1" max="10" step="0.5" value="3" class="slider" />
          <div class="slider-info">
            <span id="drop-value">3%</span>
            <span class="slider-range">1% - 10%</span>
          </div>
        </div>
        <div class="helper">NEC: ‚â§3% branch, ‚â§5% total ¬∑ IEC: ‚â§4%</div>
      </div>
    </div>
  </div>

  <!-- Environmental Factors -->
  <div class="input-section">
    <h3 class="section-title">
      <span class="section-icon">üå°Ô∏è</span>
      Environmental Factors
    </h3>
    
    <div class="form-grid">
      <div class="field">
        <label for="phase">Phase Configuration</label>
        <select id="phase" class="select">
          <option value="single" selected>Single Phase (1√ò)</option>
          <option value="three">Three Phase (3√ò)</option>
          <option value="three_delta">Three Phase Delta (Œî)</option>
          <option value="three_wye">Three Phase Wye (Y)</option>
        </select>
      </div>
      
      <div class="field">
        <label for="temperature">Ambient Temperature</label>
        <div class="input-group">
          <input id="temperature" type="number" min="-20" max="50" step="1" value="30" class="input" />
          <span class="input-unit">¬∞C</span>
        </div>
        <div class="helper">Standard: 30¬∞C ¬∑ Hot: 40¬∞C+ requires derating</div>
      </div>
      
      <div class="field">
        <label for="conductors">Conductors in Raceway</label>
        <select id="conductors" class="select">
          <option value="1-3">1-3 conductors</option>
          <option value="4-6" selected>4-6 conductors</option>
          <option value="7-9">7-9 conductors</option>
          <option value="10-20">10-20 conductors</option>
        </select>
        <div class="helper">More conductors = more heat = derating required</div>
      </div>
    </div>
  </div>

  <!-- Preset Circuits -->
  <div class="presets-section">
    <div class="presets-title">Common Circuit Presets:</div>
    <div class="presets-grid">
      <button type="button" class="preset-btn" onclick="loadPreset('residential')">
        <span class="preset-icon">üè†</span>
        <span class="preset-text">Residential</span>
      </button>
      <button type="button" class="preset-btn" onclick="loadPreset('commercial')">
        <span class="preset-icon">üè¢</span>
        <span class="preset-text">Commercial</span>
      </button>
      <button type="button" class="preset-btn" onclick="loadPreset('industrial')">
        <span class="preset-icon">üè≠</span>
        <span class="preset-text">Industrial</span>
      </button>
      <button type="button" class="preset-btn" onclick="loadPreset('solar')">
        <span class="preset-icon">‚òÄÔ∏è</span>
        <span class="preset-text">Solar PV</span>
      </button>
    </div>
  </div>

  <div class="form-actions">
    <button type="button" class="btn primary" onclick="calculate()">
      <span class="btn-icon">‚ö°</span>
      Calculate Wire Size
    </button>
    <button type="button" class="btn" onclick="reset()">
      <span class="btn-icon">üîÑ</span>
      Reset
    </button>
  </div>
</form>

<!-- Results Section -->
<div class="results">
  <!-- Key Metrics -->
  <div class="metrics-grid">
    <div class="metric-card">
      <div class="metric-icon">üìè</div>
      <div class="metric-content">
        <div class="metric-label">Minimum Wire Size</div>
        <div class="metric-value" id="wire-size">‚Äì</div>
        <div class="metric-sub" id="wire-area">‚Äì mm¬≤</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon">üìâ</div>
      <div class="metric-content">
        <div class="metric-label">Voltage Drop</div>
        <div class="metric-value" id="voltage-drop">‚Äì</div>
        <div class="metric-sub" id="drop-percent">‚Äì</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon">üí°</div>
      <div class="metric-content">
        <div class="metric-label">Power Loss</div>
        <div class="metric-value" id="power-loss">‚Äì</div>
        <div class="metric-sub" id="energy-loss">‚Äì kWh/year</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon">üìè</div>
      <div class="metric-content">
        <div class="metric-label">Max Length</div>
        <div class="metric-value" id="max-length">‚Äì</div>
        <div class="metric-sub" id="max-length-unit">feet</div>
      </div>
    </div>
  </div>

  <!-- Detailed Results -->
  <div class="result-section">
    <div class="section-header">
      <h3 class="section-title">
        <span class="section-icon">üìä</span>
        Calculation Details
      </h3>
      <select id="results-format" class="select small" onchange="updateResultsFormat()">
        <option value="summary">Summary</option>
        <option value="detailed">Detailed</option>
        <option value="technical">Technical</option>
      </select>
    </div>
    
    <div class="results-container" id="results-container">
      <div class="empty-state">
        <div class="empty-icon">‚ö°</div>
        <div class="empty-title">No Calculation Results</div>
        <div class="empty-subtitle">Enter parameters and click Calculate</div>
      </div>
    </div>
  </div>

  <!-- Safety Warnings -->
  <div class="safety-section" id="safety-warnings">
    <div class="section-header">
      <h3 class="section-title">
        <span class="section-icon">‚ö†Ô∏è</span>
        Safety Warnings
      </h3>
    </div>
    <div class="warnings-list" id="warnings-list"></div>
  </div>

  <!-- Recommendations -->
  <div class="recommendations-section" id="recommendations">
    <div class="section-header">
      <h3 class="section-title">
        <span class="section-icon">‚úÖ</span>
        Recommendations
      </h3>
      <button type="button" class="btn secondary small" onclick="showCodeReference()">
        Code Reference
      </button>
    </div>
    <div class="recommendations-list" id="recommendations-list"></div>
  </div>

  <!-- Wire Comparison -->
  <div class="comparison-section">
    <h3 class="section-title">
      <span class="section-icon">üìà</span>
      Wire Size Comparison
    </h3>
    <div class="wire-chart" id="wire-chart">
      <!-- Will be populated by JavaScript -->
    </div>
  </div>

  <!-- Export & Actions -->
  <div class="export-section">
    <div class="export-buttons">
      <button type="button" class="btn" onclick="exportReport()">
        <span class="btn-icon">üì•</span>
        Export Report
      </button>
      <button type="button" class="btn secondary" onclick="printReport()">
        <span class="btn-icon">üñ®Ô∏è</span>
        Print
      </button>
    </div>
  </div>
</div>

<!-- Code Reference Modal (hidden) -->
<div class="modal-overlay" id="code-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">üìö Electrical Code References</h3>
      <button class="modal-close" onclick="closeModal()">√ó</button>
    </div>
    <div class="modal-body">
      <div class="code-reference">
        <div class="code-section">
          <h4>NEC (National Electrical Code)</h4>
          <ul>
            <li><strong>Table 310.16:</strong> Allowable ampacities for insulated conductors</li>
            <li><strong>Article 210.19:</strong> Conductors - Minimum size and voltage drop</li>
            <li><strong>Article 240.4:</strong> Protection of conductors</li>
            <li><strong>Chapter 9, Table 8:</strong> Conductor properties</li>
            <li><strong>Article 310.15:</strong> Ampacity adjustment factors</li>
          </ul>
        </div>
        
        <div class="code-section">
          <h4>IEC (International Electrotechnical Commission)</h4>
          <ul>
            <li><strong>IEC 60228:</strong> Conductors of insulated cables</li>
            <li><strong>IEC 60364:</strong> Low-voltage electrical installations</li>
            <li><strong>IEC 60909:</strong> Short-circuit currents in three-phase systems</li>
          </ul>
        </div>
        
        <div class="notice">
          <div class="notice-icon">‚ÑπÔ∏è</div>
          <div class="notice-text">
            <strong>Note:</strong> Always consult the latest edition of applicable codes and verify with local authorities having jurisdiction (AHJ).
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* Wire Gauge Calculator - Enhanced Version */
class WireGaugeCalculator {
  constructor() {
    this.results = null;
    this.currentFormat = 'summary';
    
    // AWG/Metric wire data
    this.wireSizes = [
      { awg: '14', mm2: 2.08, diameter: 1.63, amps60: 15, amps75: 20, amps90: 25, resistance: 8.45 },
      { awg: '12', mm2: 3.31, diameter: 2.05, amps60: 20, amps75: 25, amps90: 30, resistance: 5.31 },
      { awg: '10', mm2: 5.26, diameter: 2.59, amps60: 30, amps75: 35, amps90: 40, resistance: 3.35 },
      { awg: '8', mm2: 8.37, diameter: 3.26, amps60: 40, amps75: 50, amps90: 55, resistance: 2.10 },
      { awg: '6', mm2: 13.3, diameter: 4.11, amps60: 55, amps75: 65, amps90: 75, resistance: 1.32 },
      { awg: '4', mm2: 21.2, diameter: 5.19, amps60: 70, amps75: 85, amps90: 95, resistance: 0.83 },
      { awg: '2', mm2: 33.6, diameter: 6.54, amps60: 95, amps75: 115, amps90: 130, resistance: 0.52 },
      { awg: '1/0', mm2: 53.5, diameter: 8.25, amps60: 125, amps75: 150, amps90: 170, resistance: 0.33 },
      { awg: '2/0', mm2: 67.4, diameter: 9.27, amps60: 145, amps75: 175, amps90: 195, resistance: 0.26 },
      { awg: '3/0', mm2: 85.0, diameter: 10.4, amps60: 165, amps75: 200, amps90: 225, resistance: 0.21 },
      { awg: '4/0', mm2: 107.2, diameter: 11.7, amps60: 195, amps75: 230, amps90: 260, resistance: 0.16 }
    ];
    
    // Material resistivity (Œ©¬∑mm¬≤/m at 20¬∞C)
    this.materialResistivity = {
      'copper': 0.01724,
      'copper_90': 0.0217,
      'aluminum': 0.0282,
      'aluminum_90': 0.0346
    };
    
    // Temperature correction factors
    this.tempCorrection = {
      20: 1.00, 25: 0.94, 30: 0.91, 35: 0.88, 40: 0.84, 45: 0.80, 50: 0.76
    };
    
    // Bundling derating factors
    this.bundlingDerating = {
      '1-3': 1.00,
      '4-6': 0.80,
      '7-9': 0.70,
      '10-20': 0.50
    };
    
    this.init();
  }
  
  init() {
    // Set up event listeners
    this.setupEventListeners();
    
    // Update voltage drop slider display
    this.updateDropValue();
    
    console.log('Wire Gauge Calculator initialized');
  }
  
  setupEventListeners() {
    // Voltage drop slider
    const dropSlider = document.getElementById('max-drop');
    dropSlider.addEventListener('input', () => this.updateDropValue());
    
    // Custom voltage toggle
    const voltageSelect = document.getElementById('voltage');
    voltageSelect.addEventListener('change', () => {
      const customContainer = document.getElementById('custom-voltage-container');
      customContainer.style.display = voltageSelect.value === 'custom' ? 'block' : 'none';
    });
    
    // Enter key support
    document.querySelectorAll('.input').forEach(input => {
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          this.calculate();
        }
      });
    });
  }
  
  updateDropValue() {
    const dropSlider = document.getElementById('max-drop');
    const dropValue = document.getElementById('drop-value');
    dropValue.textContent = dropSlider.value + '%';
  }
  
  getInputValues() {
    return {
      current: parseFloat(document.getElementById('current').value) || 0,
      length: parseFloat(document.getElementById('length').value) || 0,
      lengthUnit: document.getElementById('length-unit').value,
      voltageSelect: document.getElementById('voltage').value,
      customVoltage: parseFloat(document.getElementById('custom-voltage').value) || 0,
      material: document.getElementById('material').value,
      insulation: document.getElementById('insulation').value,
      maxDropPercent: parseFloat(document.getElementById('max-drop').value) || 3,
      phase: document.getElementById('phase').value,
      temperature: parseFloat(document.getElementById('temperature').value) || 30,
      conductors: document.getElementById('conductors').value
    };
  }
  
  calculate() {
    const inputs = this.getInputValues();
    
    // Validate inputs
    if (!this.validateInputs(inputs)) {
      this.showNotification('Please enter valid parameters', 'error');
      return;
    }
    
    // Calculate voltage
    const voltage = inputs.voltageSelect === 'custom' ? inputs.customVoltage : parseFloat(inputs.voltageSelect);
    
    // Convert length to meters
    let lengthMeters = inputs.length;
    if (inputs.lengthUnit === 'ft') {
      lengthMeters = inputs.length * 0.3048; // feet to meters
    }
    
    // Calculate circuit length (round trip for single phase)
    const isThreePhase = inputs.phase.includes('three');
    const circuitLength = isThreePhase ? lengthMeters * Math.sqrt(3) : lengthMeters * 2;
    
    // Get material resistivity
    const resistivity = this.materialResistivity[inputs.material] || this.materialResistivity.copper;
    
    // Calculate maximum allowable voltage drop
    const maxVoltageDrop = voltage * (inputs.maxDropPercent / 100);
    
    // Calculate minimum cross-sectional area
    let area = (resistivity * circuitLength * inputs.current) / maxVoltageDrop;
    
    // Apply temperature correction
    const tempKey = Math.round(inputs.temperature / 5) * 5;
    const tempFactor = this.tempCorrection[tempKey] || 0.76;
    area /= tempFactor;
    
    // Apply bundling derating
    const bundlingFactor = this.bundlingDerating[inputs.conductors] || 0.8;
    area /= bundlingFactor;
    
    // Find appropriate wire size
    let selectedWire = null;
    for (const wire of this.wireSizes) {
      if (wire.mm2 >= area) {
        selectedWire = wire;
        break;
      }
    }
    
    // If area is larger than our table, use the largest
    if (!selectedWire) {
      selectedWire = this.wireSizes[this.wireSizes.length - 1];
    }
    
    // Calculate actual voltage drop
    const actualResistance = (selectedWire.resistance * circuitLength) / 1000;
    const actualVoltageDrop = actualResistance * inputs.current;
    const actualDropPercent = (actualVoltageDrop / voltage) * 100;
    
    // Calculate power loss
    const powerLoss = actualVoltageDrop * inputs.current; // Watts
    const energyLoss = (powerLoss * 24 * 365) / 1000; // kWh/year
    
    // Calculate maximum length for this wire
    const maxLength = (maxVoltageDrop / (inputs.current * (selectedWire.resistance / 1000))) / 
                      (isThreePhase ? Math.sqrt(3) : 2);
    
    // Convert back to original units if needed
    const maxLengthDisplay = inputs.lengthUnit === 'ft' ? maxLength / 0.3048 : maxLength;
    
    // Store results
    this.results = {
      inputs,
      voltage,
      lengthMeters,
      circuitLength,
      isThreePhase,
      selectedWire,
      actualVoltageDrop,
      actualDropPercent,
      powerLoss,
      energyLoss,
      maxLength: maxLengthDisplay,
      tempFactor,
      bundlingFactor
    };
    
    // Update UI
    this.updateResults();
    this.showSafetyWarnings();
    this.showRecommendations();
    this.updateWireChart();
    
    this.showNotification('Calculation complete', 'success');
  }
  
  validateInputs(inputs) {
    if (!inputs.current || inputs.current <= 0) {
      this.showNotification('Please enter a valid current (Amps)', 'error');
      return false;
    }
    
    if (!inputs.length || inputs.length <= 0) {
      this.showNotification('Please enter a valid length', 'error');
      return false;
    }
    
    if (inputs.voltageSelect === 'custom' && (!inputs.customVoltage || inputs.customVoltage <= 0)) {
      this.showNotification('Please enter a valid custom voltage', 'error');
      return false;
    }
    
    return true;
  }
  
  updateResults() {
    if (!this.results) return;
    
    const { selectedWire, actualDropPercent, powerLoss, energyLoss, maxLength, inputs } = this.results;
    
    // Update metrics
    document.getElementById('wire-size').textContent = selectedWire.awg;
    document.getElementById('wire-area').textContent = selectedWire.mm2.toFixed(2) + ' mm¬≤';
    document.getElementById('voltage-drop').textContent = this.results.actualVoltageDrop.toFixed(2) + 'V';
    document.getElementById('drop-percent').textContent = actualDropPercent.toFixed(2) + '%';
    document.getElementById('power-loss').textContent = powerLoss.toFixed(1) + 'W';
    document.getElementById('energy-loss').textContent = energyLoss.toFixed(0) + ' kWh/year';
    document.getElementById('max-length').textContent = maxLength.toFixed(0);
    document.getElementById('max-length-unit').textContent = inputs.lengthUnit;
    
    // Update detailed results
    this.updateResultsContainer();
  }
  
  updateResultsContainer() {
    const container = document.getElementById('results-container');
    const { selectedWire, inputs, voltage, circuitLength, actualDropPercent, powerLoss, tempFactor, bundlingFactor } = this.results;
    
    let content = '';
    
    switch(this.currentFormat) {
      case 'summary':
        content = `
          <div class="results-summary">
            <div class="result-row">
              <span class="result-label">Selected Wire:</span>
              <span class="result-value">${selectedWire.awg} AWG (${selectedWire.mm2.toFixed(2)} mm¬≤)</span>
            </div>
            <div class="result-row">
              <span class="result-label">Circuit Length:</span>
              <span class="result-value">${circuitLength.toFixed(1)}m total</span>
            </div>
            <div class="result-row">
              <span class="result-label">Voltage Drop:</span>
              <span class="result-value ${actualDropPercent > inputs.maxDropPercent ? 'error' : 'success'}">
                ${actualDropPercent.toFixed(2)}% (max ${inputs.maxDropPercent}%)
              </span>
            </div>
            <div class="result-row">
              <span class="result-label">Power Loss:</span>
              <span class="result-value">${powerLoss.toFixed(1)}W</span>
            </div>
            <div class="result-row">
              <span class="result-label">Derating Applied:</span>
              <span class="result-value">Temp: √ó${tempFactor.toFixed(2)}, Bundling: √ó${bundlingFactor.toFixed(2)}</span>
            </div>
          </div>
        `;
        break;
        
      case 'detailed':
        content = `
          <div class="results-detailed">
            <div class="result-section">
              <h4>Input Parameters</h4>
              <div class="param-grid">
                <div class="param">
                  <span class="param-label">Current:</span>
                  <span class="param-value">${inputs.current}A</span>
                </div>
                <div class="param">
                  <span class="param-label">Voltage:</span>
                  <span class="param-value">${voltage}V</span>
                </div>
                <div class="param">
                  <span class="param-label">Length:</span>
                  <span class="param-value">${inputs.length}${inputs.lengthUnit} one-way</span>
                </div>
                <div class="param">
                  <span class="param-label">Material:</span>
                  <span class="param-value">${inputs.material.replace('_', ' ')}</span>
                </div>
              </div>
            </div>
            
            <div class="result-section">
              <h4>Wire Specifications</h4>
              <div class="spec-grid">
                <div class="spec">
                  <span class="spec-label">AWG Size:</span>
                  <span class="spec-value">${selectedWire.awg}</span>
                </div>
                <div class="spec">
                  <span class="spec-label">Cross-section:</span>
                  <span class="spec-value">${selectedWire.mm2.toFixed(2)} mm¬≤</span>
                </div>
                <div class="spec">
                  <span class="spec-label">Diameter:</span>
                  <span class="spec-value">${selectedWire.diameter.toFixed(2)} mm</span>
                </div>
                <div class="spec">
                  <span class="spec-label">Resistance:</span>
                  <span class="spec-value">${selectedWire.resistance} Œ©/km</span>
                </div>
              </div>
            </div>
            
            <div class="result-section">
              <h4>Performance Metrics</h4>
              <div class="metric-grid">
                <div class="metric">
                  <span class="metric-label">Circuit Resistance:</span>
                  <span class="metric-value">${((selectedWire.resistance * circuitLength) / 1000).toFixed(3)} Œ©</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Voltage Drop:</span>
                  <span class="metric-value">${this.results.actualVoltageDrop.toFixed(2)}V (${actualDropPercent.toFixed(2)}%)</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Power Loss:</span>
                  <span class="metric-value">${powerLoss.toFixed(1)}W</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Efficiency:</span>
                  <span class="metric-value">${(100 - actualDropPercent).toFixed(1)}%</span>
                </div>
              </div>
            </div>
          </div>
        `;
        break;
        
      case 'technical':
        content = `
          <div class="results-technical">
            <div class="technical-section">
              <h4>Calculation Details</h4>
              <div class="calculation-steps">
                <div class="step">
                  <span class="step-label">1. Circuit Length:</span>
                  <span class="step-value">${inputs.length}${inputs.lengthUnit} √ó ${inputs.phase.includes('three') ? '‚àö3' : '2'} = ${circuitLength.toFixed(2)}m</span>
                </div>
                <div class="step">
                  <span class="step-label">2. Maximum Drop:</span>
                  <span class="step-value">${voltage}V √ó ${inputs.maxDropPercent}% = ${(voltage * inputs.maxDropPercent / 100).toFixed(2)}V</span>
                </div>
                <div class="step">
                  <span class="step-label">3. Required Area:</span>
                  <span class="step-value">(œÅ √ó L √ó I) / ŒîV = ${selectedWire.mm2.toFixed(2)} mm¬≤</span>
                </div>
                <div class="step">
                  <span class="step-label">4. Derating Factors:</span>
                  <span class="step-value">Temperature (${inputs.temperature}¬∞C): √ó${tempFactor.toFixed(2)}</span>
                </div>
                <div class="step">
                  <span class="step-label"></span>
                  <span class="step-value">Bundling (${inputs.conductors}): √ó${bundlingFactor.toFixed(2)}</span>
                </div>
              </div>
            </div>
            
            <div class="technical-section">
              <h4>Wire Ampacity Ratings</h4>
              <div class="ampacity-grid">
                <div class="rating">
                  <span class="rating-label">60¬∞C:</span>
                  <span class="rating-value">${selectedWire.amps60}A</span>
                </div>
                <div class="rating">
                  <span class="rating-label">75¬∞C:</span>
                  <span class="rating-value">${selectedWire.amps75}A</span>
                </div>
                <div class="rating">
                  <span class="rating-label">90¬∞C:</span>
                  <span class="rating-value">${selectedWire.amps90}A</span>
                </div>
                <div class="rating">
                  <span class="rating-label">Actual Load:</span>
                  <span class="rating-value ${inputs.current > selectedWire.amps75 ? 'error' : 'success'}">
                    ${inputs.current}A
                  </span>
                </div>
              </div>
            </div>
          </div>
        `;
        break;
    }
    
    container.innerHTML = content;
    container.style.display = 'block';
  }
  
  showSafetyWarnings() {
    const { inputs, selectedWire, actualDropPercent } = this.results;
    const warnings = [];
    const warningsList = document.getElementById('warnings-list');
    const warningsSection = document.getElementById('safety-warnings');
    
    // Check ampacity
    if (inputs.current > selectedWire.amps75) {
      warnings.push(`Current (${inputs.current}A) exceeds 75¬∞C ampacity rating for ${selectedWire.awg} AWG (${selectedWire.amps75}A).`);
    }
    
    // Check voltage drop
    if (actualDropPercent > inputs.maxDropPercent) {
      warnings.push(`Voltage drop (${actualDropPercent.toFixed(2)}%) exceeds maximum allowed (${inputs.maxDropPercent}%).`);
    }
    
    if (actualDropPercent > 5) {
      warnings.push(`Voltage drop exceeds 5% - not recommended for any circuit.`);
    }
    
    // Check for aluminum wire
    if (inputs.material.includes('aluminum')) {
      warnings.push(`Aluminum wiring requires special connectors and proper installation techniques.`);
    }
    
    // Temperature warning
    if (inputs.temperature > 40) {
      warnings.push(`High ambient temperature (${inputs.temperature}¬∞C) requires additional derating.`);
    }
    
    if (warnings.length > 0) {
      let warningsHTML = '';
      warnings.forEach(warning => {
        warningsHTML += `
          <div class="warning-item">
            <span class="warning-icon">‚ö†Ô∏è</span>
            <span class="warning-text">${warning}</span>
          </div>
        `;
      });
      
      warningsList.innerHTML = warningsHTML;
      warningsSection.style.display = 'block';
    } else {
      warningsSection.style.display = 'none';
    }
  }
  
  showRecommendations() {
    const { selectedWire, inputs } = this.results;
    const recommendations = [];
    const recList = document.getElementById('recommendations-list');
    const recSection = document.getElementById('recommendations');
    
    // Circuit breaker recommendation
    let breakerSize = Math.ceil(inputs.current * 1.25);
    breakerSize = Math.max(15, Math.min(breakerSize, 200));
    recommendations.push(`Circuit Breaker: ${breakerSize}A (125% of load current)`);
    
    // Conduit size recommendation
    let conduitSize = '1/2"';
    if (selectedWire.awg === '10' || selectedWire.awg === '8') conduitSize = '3/4"';
    if (selectedWire.awg === '6' || selectedWire.awg === '4') conduitSize = '1"';
    if (selectedWire.awg === '2' || selectedWire.awg === '1/0') conduitSize = '1-1/4"';
    recommendations.push(`Conduit Size: ${conduitSize} minimum for ${selectedWire.awg} AWG`);
    
    // Grounding recommendation
    recommendations.push(`Grounding: ${selectedWire.awg} AWG equipment grounding conductor`);
    
    // Wire type recommendation
    if (inputs.insulation === 'thhn') {
      recommendations.push(`Installation: THHN/THWN-2 in conduit for dry/damp locations`);
    } else if (inputs.insulation === 'uf') {
      recommendations.push(`Installation: UF cable for direct burial (minimum 24" depth)`);
    }
    
    let recHTML = '';
    recommendations.forEach(rec => {
      recHTML += `
        <div class="recommendation-item">
          <span class="rec-icon">‚úì</span>
          <span class="rec-text">${rec}</span>
        </div>
      `;
    });
    
    recList.innerHTML = recHTML;
    recSection.style.display = 'block';
  }
  
  updateWireChart() {
    const chart = document.getElementById('wire-chart');
    const { selectedWire, inputs } = this.results;
    
    // Create a simple comparison of nearby wire sizes
    const startIndex = Math.max(0, this.wireSizes.findIndex(w => w.awg === selectedWire.awg) - 2);
    const endIndex = Math.min(this.wireSizes.length - 1, startIndex + 4);
    const comparisonSizes = this.wireSizes.slice(startIndex, endIndex + 1);
    
    let chartHTML = '<div class="chart-container">';
    
    comparisonSizes.forEach(wire => {
      const isSelected = wire.awg === selectedWire.awg;
      const width = (wire.mm2 / comparisonSizes[comparisonSizes.length - 1].mm2) * 100;
      
      chartHTML += `
        <div class="chart-row">
          <div class="chart-label">
            <span class="wire-size">${wire.awg} AWG</span>
            <span class="wire-area">${wire.mm2.toFixed(1)} mm¬≤</span>
          </div>
          <div class="chart-bar-container">
            <div class="chart-bar ${isSelected ? 'selected' : ''}" style="width: ${width}%">
              <div class="bar-label">${wire.amps75}A</div>
            </div>
          </div>
        </div>
      `;
    });
    
    chartHTML += '</div>';
    chart.innerHTML = chartHTML;
  }
  
  reset() {
    // Clear inputs
    document.querySelectorAll('.input').forEach(input => input.value = '');
    document.getElementById('current').value = '';
    document.getElementById('length').value = '';
    document.getElementById('max-drop').value = 3;
    document.getElementById('temperature').value = 30;
    
    // Clear results
    this.results = null;
    
    // Reset UI
    document.getElementById('wire-size').textContent = '‚Äì';
    document.getElementById('wire-area').textContent = '‚Äì mm¬≤';
    document.getElementById('voltage-drop').textContent = '‚Äì';
    document.getElementById('drop-percent').textContent = '‚Äì';
    document.getElementById('power-loss').textContent = '‚Äì';
    document.getElementById('energy-loss').textContent = '‚Äì kWh/year';
    document.getElementById('max-length').textContent = '‚Äì';
    
    document.getElementById('results-container').innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">‚ö°</div>
        <div class="empty-title">No Calculation Results</div>
        <div class="empty-subtitle">Enter parameters and click Calculate</div>
      </div>
    `;
    
    document.getElementById('safety-warnings').style.display = 'none';
    document.getElementById('recommendations').style.display = 'none';
    document.getElementById('wire-chart').innerHTML = '';
    
    this.updateDropValue();
    this.showNotification('Calculator reset', 'info');
  }
  
  loadPreset(type) {
    const presets = {
      residential: { current: 20, length: 50, voltage: '120', material: 'copper', maxDrop: 3 },
      commercial: { current: 50, length: 100, voltage: '208', material: 'copper_90', maxDrop: 3 },
      industrial: { current: 100, length: 150, voltage: '480', material: 'aluminum', maxDrop: 5 },
      solar: { current: 15, length: 75, voltage: '240', material: 'copper', maxDrop: 2 }
    };
    
    const preset = presets[type];
    if (!preset) return;
    
    // Apply preset values
    document.getElementById('current').value = preset.current;
    document.getElementById('length').value = preset.length;
    document.getElementById('voltage').value = preset.voltage;
    document.getElementById('material').value = preset.material;
    document.getElementById('max-drop').value = preset.maxDrop;
    
    // Update display
    this.updateDropValue();
    this.showNotification(`Loaded ${type} preset`, 'success');
  }
  
  showNotification(message, type = 'info') {
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: ${type === 'success' ? 'rgba(57, 255, 20, 0.2)' : 
                 type === 'error' ? 'rgba(244, 67, 54, 0.2)' : 'rgba(33, 150, 243, 0.2)'};
      border: 1px solid ${type === 'success' ? 'rgba(57, 255, 20, 0.4)' : 
                       type === 'error' ? 'rgba(244, 67, 54, 0.4)' : 'rgba(33, 150, 243, 0.4)'};
      border-radius: 8px;
      color: ${type === 'success' ? '#39ff14' : 
              type === 'error' ? '#f44336' : '#2196f3'};
      z-index: 1000;
      animation: slideIn 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }
}

// Global instance
let wireCalculator;

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
  wireCalculator = new WireGaugeCalculator();
});

// Global helper functions
function calculate() {
  wireCalculator.calculate();
}

function reset() {
  wireCalculator.reset();
}

function loadPreset(type) {
  wireCalculator.loadPreset(type);
}

function updateResultsFormat() {
  wireCalculator.currentFormat = document.getElementById('results-format').value;
  if (wireCalculator.results) {
    wireCalculator.updateResultsContainer();
  }
}

function exportReport() {
  if (!wireCalculator.results) {
    wireCalculator.showNotification('Generate results before exporting', 'error');
    return;
  }
  
  const { inputs, selectedWire, actualDropPercent, powerLoss } = wireCalculator.results;
  const timestamp = new Date().toLocaleString();
  
  const report = `Wire Gauge Calculation Report
===============================
Date: ${timestamp}

Circuit Parameters:
- Current: ${inputs.current} A
- Voltage: ${wireCalculator.results.voltage} V
- Length: ${inputs.length} ${inputs.lengthUnit} (one-way)
- Material: ${inputs.material.replace('_', ' ')}
- Phase: ${inputs.phase}
- Max Voltage Drop: ${inputs.maxDropPercent}%

Results:
- Recommended Wire: ${selectedWire.awg} AWG (${selectedWire.mm2.toFixed(2)} mm¬≤)
- Voltage Drop: ${actualDropPercent.toFixed(2)}%
- Power Loss: ${powerLoss.toFixed(1)} W
- Circuit Length: ${wireCalculator.results.circuitLength.toFixed(1)} m

Safety Notice: This is for educational purposes only. Always consult a licensed electrician.`;

  const blob = new Blob([report], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `wire-calculation-${new Date().toISOString().split('T')[0]}.txt`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  wireCalculator.showNotification('Report exported', 'success');
}

function printReport() {
  if (!wireCalculator.results) {
    wireCalculator.showNotification('Generate results before printing', 'error');
    return;
  }
  
  window.print();
}

function showCodeReference() {
  const modal = document.getElementById('code-modal');
  modal.style.display = 'flex';
}

function closeModal() {
  const modal = document.getElementById('code-modal');
  modal.style.display = 'none';
}

// Close modal on outside click
window.addEventListener('click', (e) => {
  const modal = document.getElementById('code-modal');
  if (e.target === modal) {
    modal.style.display = 'none';
  }
});
</script>

<style>
/* Wire Gauge Calculator Specific Styles */
.safety-notice {
  background: linear-gradient(90deg, rgba(255, 152, 0, 0.1), rgba(244, 67, 54, 0.1));
  border-left: 4px solid #ff9800;
  padding: 16px;
  border-radius: 0 8px 8px 0;
  margin-bottom: 24px;
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.warning-icon {
  font-size: 24px;
  color: #ff9800;
  flex-shrink: 0;
}

.warning-content {
  flex: 1;
  font-size: 0.9em;
  color: #ffcc80;
  line-height: 1.5;
}

.warning-content strong {
  color: #ff9800;
}

/* Input Sections */
.input-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 16px;
}

.input-group {
  display: flex;
  align-items: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(45, 212, 255, 0.3);
  border-radius: 8px;
  overflow: hidden;
}

.input-group .input {
  flex: 1;
  border: none;
  background: transparent;
  padding: 12px;
  color: #e6faff;
  font-size: 14px;
}

.unit-select {
  background: rgba(45, 212, 255, 0.1);
  border: none;
  color: #2dd4ff;
  padding: 0 12px;
  height: 100%;
  font-size: 0.9em;
}

.input-unit {
  padding: 0 12px;
  background: rgba(45, 212, 255, 0.1);
  color: #2dd4ff;
  font-size: 0.9em;
  font-weight: 500;
  height: 100%;
  display: flex;
  align-items: center;
}

.helper {
  font-size: 0.8em;
  color: #9ccbe0;
  margin-top: 4px;
  line-height: 1.4;
}

/* Slider */
.slider-group {
  margin-top: 8px;
}

.slider {
  width: 100%;
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  outline: none;
}

.slider::-webkit-slider-thumb {
  width: 18px;
  height: 18px;
  background: #ff9800;
  border-radius: 50%;
  cursor: pointer;
  -webkit-appearance: none;
}

.slider-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 8px;
  font-size: 0.9em;
  color: #9ccbe0;
}

.slider-range {
  opacity: 0.7;
}

/* Presets */
.presets-section {
  background: rgba(157, 78, 221, 0.05);
  border-radius: 16px;
  padding: 20px;
  border: 1px solid rgba(157, 78, 221, 0.2);
  margin-bottom: 24px;
}

.presets-title {
  font-size: 0.95em;
  font-weight: 500;
  color: #9ccbe0;
  margin-bottom: 12px;
}

.presets-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
}

.preset-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(45, 212, 255, 0.2);
  border-radius: 8px;
  padding: 12px;
  color: #e6faff;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.preset-btn:hover {
  background: rgba(45, 212, 255, 0.1);
  border-color: rgba(45, 212, 255, 0.4);
  transform: translateY(-2px);
}

.preset-icon {
  font-size: 20px;
}

.preset-text {
  font-weight: 500;
}

/* Metrics Grid */
.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.metric-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 20px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  display: flex;
  align-items: center;
  gap: 16px;
  transition: all 0.3s ease;
}

.metric-card:hover {
  border-color: rgba(45, 212, 255, 0.4);
  transform: translateY(-2px);
}

.metric-icon {
  font-size: 2em;
  opacity: 0.8;
}

.metric-content {
  flex: 1;
}

.metric-label {
  font-size: 0.9em;
  color: #9ccbe0;
  margin-bottom: 4px;
}

.metric-value {
  font-size: 1.8em;
  font-weight: 700;
  color: #2dd4ff;
  margin: 4px 0;
  line-height: 1;
}

.metric-sub {
  font-size: 0.85em;
  color: #9ccbe0;
}

/* Results Container */
.result-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.results-container {
  min-height: 150px;
}

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: #9ccbe0;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.empty-title {
  font-size: 1.1em;
  font-weight: 600;
  color: #e6faff;
  margin-bottom: 8px;
}

.empty-subtitle {
  font-size: 0.9em;
  opacity: 0.8;
}

/* Results Content */
.results-summary,
.results-detailed,
.results-technical {
  color: #e6faff;
  line-height: 1.6;
}

.result-row {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.result-row:last-child {
  border-bottom: none;
}

.result-label {
  color: #9ccbe0;
}

.result-value {
  font-weight: 600;
  color: #2dd4ff;
}

.result-value.success {
  color: #39ff14;
}

.result-value.error {
  color: #f44336;
}

.param-grid,
.spec-grid,
.metric-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-top: 12px;
}

.param, .spec, .metric {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 12px;
}

.param-label,
.spec-label,
.metric-label {
  display: block;
  font-size: 0.85em;
  color: #9ccbe0;
  margin-bottom: 4px;
}

.param-value,
.spec-value,
.metric-value {
  font-weight: 600;
  color: #2dd4ff;
}

/* Technical Results */
.calculation-steps {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 16px;
  margin-top: 12px;
}

.step {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.step:last-child {
  border-bottom: none;
}

.step-label {
  color: #9ccbe0;
}

.step-value {
  color: #2dd4ff;
  font-weight: 500;
}

.ampacity-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  margin-top: 12px;
}

.rating {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 12px;
  text-align: center;
}

.rating-label {
  display: block;
  font-size: 0.85em;
  color: #9ccbe0;
  margin-bottom: 4px;
}

.rating-value {
  font-weight: 600;
  color: #2dd4ff;
}

/* Safety Warnings */
.safety-section,
.recommendations-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
  display: none;
}

.warnings-list,
.recommendations-list {
  margin-top: 16px;
}

.warning-item,
.recommendation-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.warning-item:last-child,
.recommendation-item:last-child {
  border-bottom: none;
}

.warning-icon {
  color: #f44336;
  font-size: 16px;
  flex-shrink: 0;
  margin-top: 2px;
}

.warning-text {
  color: #ffcdd2;
  line-height: 1.5;
}

.rec-icon {
  color: #4caf50;
  font-size: 16px;
  flex-shrink: 0;
  margin-top: 2px;
}

.rec-text {
  color: #c8e6c9;
  line-height: 1.5;
}

/* Wire Chart */
.comparison-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.chart-container {
  margin-top: 16px;
}

.chart-row {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 12px;
}

.chart-label {
  width: 120px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wire-size {
  font-weight: 600;
  color: #e6faff;
}

.wire-area {
  font-size: 0.85em;
  color: #9ccbe0;
}

.chart-bar-container {
  flex: 1;
  height: 24px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  overflow: hidden;
}

.chart-bar {
  height: 100%;
  background: linear-gradient(90deg, #2dd4ff, #1ea7d8);
  border-radius: 12px;
  position: relative;
  transition: width 1s ease;
}

.chart-bar.selected {
  background: linear-gradient(90deg, #ff9800, #f57c00);
}

.bar-label {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  color: #000;
  font-size: 0.8em;
  font-weight: 600;
}

/* Export Section */
.export-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
}

.export-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
}

/* Modal */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.modal-content {
  background: #1a1a1a;
  border-radius: 16px;
  max-width: 600px;
  max-height: 80vh;
  overflow-y: auto;
  border: 2px solid #2dd4ff;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-title {
  margin: 0;
  color: #2dd4ff;
  font-size: 1.2em;
}

.modal-close {
  background: none;
  border: none;
  color: #9ccbe0;
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-body {
  padding: 24px;
}

.code-reference {
  color: #e6faff;
}

.code-section {
  margin-bottom: 24px;
}

.code-section h4 {
  color: #ff9800;
  margin-bottom: 12px;
  font-size: 1.1em;
}

.code-section ul {
  margin: 0;
  padding-left: 20px;
}

.code-section li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.notice {
  display: flex;
  gap: 12px;
  background: rgba(255, 152, 0, 0.1);
  border-radius: 8px;
  padding: 16px;
  margin-top: 24px;
  align-items: flex-start;
}

.notice-icon {
  font-size: 20px;
  color: #ff9800;
  flex-shrink: 0;
}

.notice-text {
  color: #ffcc80;
  line-height: 1.5;
}

/* Responsive */
@media (max-width: 768px) {
  .form-grid {
    grid-template-columns: 1fr;
  }
  
  .metrics-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .presets-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .param-grid,
  .spec-grid,
  .metric-grid {
    grid-template-columns: 1fr;
  }
  
  .export-buttons {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .metrics-grid {
    grid-template-columns: 1fr;
  }
  
  .presets-grid {
    grid-template-columns: 1fr;
  }
}
</style>
