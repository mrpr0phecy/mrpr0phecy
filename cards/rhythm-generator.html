<h2 id="rhythm-generator-title">ğŸ¥ Rhythm Generator</h2>

<form aria-describedby="rhythm-generator-desc">
    <p id="rhythm-generator-desc" class="small" style="margin-bottom:20px;color:var(--muted)">
        Generate rhythm patterns for practice and composition.
        <span style="color:var(--accent)">âš ï¸ Educational only â€” verify with professional resources.</span>
    </p>
    
    <!-- RHYTHM SETTINGS -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;margin-bottom:16px;">
        <div>
            <label for="rg-time" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                Time Signature
            </label>
            <select id="rg-time" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
                <option value="4/4">4/4 (Common Time)</option>
                <option value="3/4">3/4 (Waltz)</option>
                <option value="2/4">2/4 (March)</option>
                <option value="6/8">6/8 (Compound)</option>
                <option value="5/4">5/4 (Odd)</option>
                <option value="7/8">7/8 (Complex)</option>
            </select>
        </div>
        
        <div>
            <label for="rg-style" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                Style/Groove
            </label>
            <select id="rg-style" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
                <option value="basic">Basic</option>
                <option value="rock">Rock</option>
                <option value="funk">Funk</option>
                <option value="jazz">Jazz/Swing</option>
                <option value="latin">Latin</option>
                <option value="electronic">Electronic</option>
                <option value="syncopated">Syncopated</option>
                <option value="polyrhythm">Polyrhythm</option>
            </select>
        </div>
    </div>
    
    <!-- PATTERN OPTIONS -->
    <div style="margin-bottom:20px;">
        <label for="rg-complexity" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
            Pattern Complexity
        </label>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                <input type="radio" name="rg-complexity" value="simple" checked style="accent-color:var(--accent);">
                <span style="color:var(--accent);font-size:13px;">Simple</span>
            </label>
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                <input type="radio" name="rg-complexity" value="medium" style="accent-color:var(--accent);">
                <span style="color:var(--accent);font-size:13px;">Medium</span>
            </label>
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                <input type="radio" name="rg-complexity" value="complex" style="accent-color:var(--accent);">
                <span style="color:var(--accent);font-size:13px;">Complex</span>
            </label>
        </div>
    </div>
    
    <!-- INSTRUMENT SELECTION -->
    <div style="margin-bottom:20px;">
        <label for="rg-instrument" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
            Primary Instrument
        </label>
        <select id="rg-instrument" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
            <option value="drumkit">Drum Kit</option>
            <option value="percussion">Hand Percussion</option>
            <option value="piano">Piano/Keys</option>
            <option value="guitar">Guitar</option>
            <option value="bass">Bass</option>
            <option value="melodic">Melodic Instrument</option>
        </select>
    </div>
    
    <!-- LENGTH & BARS -->
    <div style="margin-bottom:20px;">
        <label for="rg-bars" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
            Pattern Length (Bars)
        </label>
        <input id="rg-bars" type="range" min="1" max="8" value="4" step="1" 
               style="width:100%;height:8px;border-radius:4px;background:var(--border);outline:none;"
               oninput="document.getElementById('rg-bars-value').textContent = this.value + ' bar' + (this.value != 1 ? 's' : '')">
        <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:4px;">
            <span>1 bar</span>
            <span id="rg-bars-value">4 bars</span>
            <span>8 bars</span>
        </div>
    </div>
    
    <!-- TEMPO -->
    <div style="margin-bottom:20px;">
        <label for="rg-tempo" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
            Tempo (BPM)
        </label>
        <input id="rg-tempo" type="number" min="40" max="240" step="5" value="120" 
               style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
    </div>
    
    <!-- ACTION BUTTONS -->
    <div style="display:flex;gap:10px;">
        <button type="button" onclick="rgGenerate()" 
                style="flex:1;padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.3), rgba(45,212,255,0.2));border:1px solid rgba(45,212,255,0.6);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
            ğŸ¥ Generate Rhythm
        </button>
        <button type="button" onclick="rgReset()"
                style="padding:14px 20px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
            ğŸ”„ Reset
        </button>
    </div>
</form>

<!-- RESULTS -->
<div id="rg-results" style="margin-top:24px;display:none;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
        <h3 style="color:var(--accent);margin:0;font-size:16px;">ğŸµ Rhythm Pattern</h3>
        <div style="display:flex;gap:8px;">
            <button type="button" onclick="rgPlay()" 
                    style="padding:8px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">
                â–¶ï¸ Play
            </button>
            <button type="button" onclick="rgCopy()"
                    style="padding:8px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">
                ğŸ“‹ Copy
            </button>
        </div>
    </div>
    
    <!-- RHYTHM NOTATION -->
    <div style="margin-bottom:20px;">
        <div id="rg-notation" style="padding:20px;background:rgba(0,0,0,0.2);border-radius:8px;font-family:'Courier New',monospace;font-size:24px;text-align:center;line-height:1.5;min-height:60px;">
            <!-- Rhythm notation will appear here -->
        </div>
    </div>
    
    <!-- PATTERN DESCRIPTION -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:12px;">ğŸ“ Pattern Description</div>
        <div id="rg-description" style="padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;font-family:monospace;white-space:pre-line;max-height:200px;overflow-y:auto;">
            <!-- Description will appear here -->
        </div>
    </div>
    
    <!-- PRACTICE TIPS -->
    <div style="margin-bottom:20px;">
        <div style="color:#39ff14;font-weight:500;margin-bottom:12px;">ğŸ’¡ Practice Tips</div>
        <div id="rg-tips" style="padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;border-left:3px solid #39ff14;">
            <!-- Practice tips will appear here -->
        </div>
    </div>
    
    <!-- METRONOME -->
    <div style="margin-bottom:20px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:12px;">â±ï¸ Metronome Settings</div>
        <div style="padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;text-align:center;">
            <div style="font-size:32px;font-weight:bold;color:#ffcc00;" id="rg-display-tempo">120 BPM</div>
            <div style="display:flex;gap:12px;justify-content:center;margin-top:12px;">
                <button type="button" onclick="rgAdjustTempo(-5)" 
                        style="padding:8px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;">âˆ’5</button>
                <button type="button" onclick="rgAdjustTempo(-1)" 
                        style="padding:8px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;">âˆ’1</button>
                <button type="button" onclick="rgAdjustTempo(1)" 
                        style="padding:8px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;">+1</button>
                <button type="button" onclick="rgAdjustTempo(5)" 
                        style="padding:8px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;">+5</button>
            </div>
        </div>
    </div>
    
    <!-- EXPORT OPTIONS -->
    <div style="display:flex;gap:8px;">
        <button type="button" onclick="rgSavePattern()" 
                style="flex:1;padding:10px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:13px;">
            ğŸ’¾ Save Pattern
        </button>
        <button type="button" onclick="rgExportMIDI()"
                style="padding:10px 14px;background:rgba(255,204,0,0.1);border:1px solid rgba(255,204,0,0.3);border-radius:6px;color:#ffcc00;cursor:pointer;font-size:13px;">
            ğŸµ Export MIDI
        </button>
    </div>
</div>

<!-- RHYTHM FACTS -->
<div style="margin-top:20px;padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;border-left:3px solid var(--accent);">
    <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">ğŸ“š Rhythm Facts</div>
    <div style="font-size:13px;color:var(--muted);">
        <ul style="margin:0;padding-left:20px;">
            <li style="margin-bottom:4px;">Rhythm is the pattern of sounds and silences in time</li>
            <li style="margin-bottom:4px;">4/4 is common in pop, rock, and electronic music</li>
            <li style="margin-bottom:4px;">3/4 is typical for waltzes and some ballads</li>
            <li style="margin-bottom:4px;">Syncopation emphasizes off-beats for a groovy feel</li>
            <li style="margin-bottom:4px;">Swing adds a triplet feel to eighth notes</li>
            <li>Polyrhythms layer different time signatures simultaneously</li>
        </ul>
        <div style="margin-top:8px;color:#ffcc00;">
            âš ï¸ Always confirm rhythm accuracy with a teacher or professional resource.
        </div>
    </div>
</div>

<script>
/* rhythm-generator.html
   - Rhythm pattern generator for music practice
   - Scoped with rg- prefix (Rhythm Generator)
*/

// Rhythm pattern database
const rgPatterns = {
    '4/4': {
        basic: [
            { notation: 'â™© â™© â™© â™©', description: 'Four quarter notes (basic pulse)' },
            { notation: 'â™ª â™ª â™ª â™ª â™ª â™ª â™ª â™ª', description: 'Eight eighth notes' },
            { notation: 'â™© â™ª â™ª â™© â™ª â™ª', description: 'Quarter, two eighths pattern' }
        ],
        rock: [
            { notation: 'â™© â™© â™© â™©', description: 'Basic rock beat (kick on 1 & 3, snare on 2 & 4)' },
            { notation: 'â™© ğ„¾ â™ª â™© ğ„¾ â™ª', description: 'Rock with eighth-note rests' },
            { notation: 'â™ª ğ„¾ â™ª ğ„¾ â™ª ğ„¾ â™ª ğ„¾', description: 'Syncopated rock pattern' }
        ],
        funk: [
            { notation: 'â™ª ğ„¾ â™ª ğ„¾ â™ª ğ„¾ â™ª ğ„¾', description: 'Funk syncopation (emphasis on off-beats)' },
            { notation: 'â™© ğ„¾ â™ª ğ„¾ â™© ğ„¾ â™ª ğ„¾', description: 'Funk groove with sixteenth notes' },
            { notation: 'â™© ğ„¾ ğ„¾ â™ª â™ª ğ„¾ â™ª â™ª', description: 'Complex funk pattern' }
        ],
        jazz: [
            { notation: 'â™© ğ„¾ â™© ğ„¾', description: 'Basic swing feel (triplet-based)' },
            { notation: 'â™ª ğ„¾ ğ„¾ â™ª ğ„¾ ğ„¾', description: 'Swing pattern with syncopation' },
            { notation: 'â™© â™ª ğ„¾ â™© â™ª ğ„¾', description: 'Jazz comping rhythm' }
        ],
        latin: [
            { notation: 'â™© â™ª â™ª â™© â™ª â™ª', description: 'Basic clave pattern (3-2)' },
            { notation: 'â™ª â™ª â™© â™ª â™© â™ª', description: 'Son clave rhythm' },
            { notation: 'â™© â™ª â™ª â™ª â™© â™ª', description: 'Bossa nova pattern' }
        ]
    },
    '3/4': {
        basic: [
            { notation: 'â™© â™© â™©', description: 'Three quarter notes (waltz)' },
            { notation: 'â™© â™ª â™ª â™© â™ª â™ª', description: 'Waltz with eighth notes' },
            { notation: 'â™© ğ„¾ â™© â™ª â™ª', description: 'Waltz with syncopation' }
        ]
    },
    '6/8': {
        basic: [
            { notation: 'â™ª â™ª â™ª â™ª â™ª â™ª', description: 'Six eighth notes' },
            { notation: 'â™© ğ„¾ â™ª â™ª ğ„¾', description: '6/8 with dotted quarter' },
            { notation: 'â™© â™ª â™ª â™© â™ª â™ª', description: 'Two groups of three' }
        ]
    }
};

// Instrument-specific patterns
const rgInstrumentPatterns = {
    drumkit: ['Kick on 1 & 3, Snare on 2 & 4', 'Hi-hat eighth notes', 'Tom fills on 4'],
    percussion: ['Clave pattern', 'Shaker eighth notes', 'Cowbell accents'],
    piano: ['Chord stabs on strong beats', 'Arpeggiated patterns', 'Comping rhythm'],
    guitar: ['Strumming pattern', 'Fingerpicking', 'Palm mute rhythm'],
    bass: ['Walking bass line', 'Root-fifth pattern', 'Syncopated funk bass']
};

// Practice tips database
const rgPracticeTips = [
    'Start slow (50-60% of target tempo) and gradually increase speed',
    'Use a metronome to develop steady timing',
    'Count out loud while playing (1 & 2 & 3 & 4 &)',
    'Practice with a click track to improve rhythm accuracy',
    'Record yourself and listen back for timing issues',
    'Break complex patterns into smaller segments',
    'Focus on consistency rather than speed',
    'Practice with different subdivisions (quarters, eighths, sixteenths)',
    'Work on transitions between different rhythms'
];

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', rgInit);
} else {
    rgInit();
}

function rgInit() {
    console.log('Rhythm Generator initialized');
    
    // Load saved settings if any
    const saved = localStorage.getItem('rg-settings');
    if (saved) {
        try {
            const settings = JSON.parse(saved);
            document.getElementById('rg-time').value = settings.time || '4/4';
            document.getElementById('rg-style').value = settings.style || 'basic';
            document.getElementById('rg-instrument').value = settings.instrument || 'drumkit';
            document.getElementById('rg-tempo').value = settings.tempo || 120;
            document.getElementById('rg-bars').value = settings.bars || 4;
            
            // Set complexity radio
            const complexity = settings.complexity || 'simple';
            document.querySelector(`input[name="rg-complexity"][value="${complexity}"]`).checked = true;
            
        } catch (e) {
            console.error('Failed to load settings:', e);
        }
    }
    
    // Update bars display
    document.getElementById('rg-bars').addEventListener('input', function() {
        const value = this.value;
        document.getElementById('rg-bars-value').textContent = value + ' bar' + (value != 1 ? 's' : '');
    });
}

// Save settings
function rgSaveSettings() {
    const settings = {
        time: document.getElementById('rg-time').value,
        style: document.getElementById('rg-style').value,
        complexity: document.querySelector('input[name="rg-complexity"]:checked').value,
        instrument: document.getElementById('rg-instrument').value,
        tempo: document.getElementById('rg-tempo').value,
        bars: document.getElementById('rg-bars').value
    };
    localStorage.setItem('rg-settings', JSON.stringify(settings));
}

// Generate rhythm pattern
function rgGenerate() {
    const timeSignature = document.getElementById('rg-time').value;
    const style = document.getElementById('rg-style').value;
    const complexity = document.querySelector('input[name="rg-complexity"]:checked').value;
    const instrument = document.getElementById('rg-instrument').value;
    const bars = parseInt(document.getElementById('rg-bars').value);
    const tempo = parseInt(document.getElementById('rg-tempo').value);
    
    // Get patterns based on time signature and style
    let pattern;
    if (rgPatterns[timeSignature] && rgPatterns[timeSignature][style]) {
        const patterns = rgPatterns[timeSignature][style];
        // Select pattern based on complexity
        let patternIndex;
        switch(complexity) {
            case 'simple': patternIndex = 0; break;
            case 'medium': patternIndex = Math.min(1, patterns.length - 1); break;
            case 'complex': patternIndex = Math.min(2, patterns.length - 1); break;
            default: patternIndex = 0;
        }
        pattern = patterns[patternIndex];
    } else {
        // Fallback pattern
        pattern = {
            notation: 'â™© â™© â™© â™©',
            description: 'Basic quarter note pattern'
        };
    }
    
    // Generate multiple bars
    let fullNotation = '';
    for (let i = 0; i < bars; i++) {
        fullNotation += pattern.notation + ' ';
        if ((i + 1) % 4 === 0) fullNotation += '\n';
    }
    
    // Instrument-specific pattern
    const instrumentPatterns = rgInstrumentPatterns[instrument] || ['Quarter note pulse'];
    const instrumentPattern = instrumentPatterns[Math.floor(Math.random() * instrumentPatterns.length)];
    
    // Get random practice tip
    const practiceTip = rgPracticeTips[Math.floor(Math.random() * rgPracticeTips.length)];
    
    // Display results
    rgDisplayResults(fullNotation, pattern.description, instrumentPattern, practiceTip, tempo, timeSignature, style);
    
    // Save settings
    rgSaveSettings();
    
    // Show results section
    document.getElementById('rg-results').style.display = 'block';
    
    rgShowMessage('Rhythm generated!', 'success');
}

// Display results
function rgDisplayResults(notation, description, instrumentPattern, practiceTip, tempo, timeSignature, style) {
    // Update notation display
    document.getElementById('rg-notation').innerHTML = notation.trim();
    
    // Update description
    let descriptionText = `RHYTHM PATTERN ANALYSIS\n`;
    descriptionText += '='.repeat(50) + '\n\n';
    descriptionText += `Time Signature: ${timeSignature}\n`;
    descriptionText += `Style: ${style}\n`;
    descriptionText += `Tempo: ${tempo} BPM\n\n`;
    descriptionText += `Pattern: ${description}\n\n`;
    descriptionText += `Instrument Approach: ${instrumentPattern}\n\n`;
    descriptionText += 'NOTATION:\n';
    descriptionText += notation.replace(/â™©/g, 'Q').replace(/â™ª/g, 'E').replace(/ğ„¾/g, 'R');
    
    document.getElementById('rg-description').textContent = descriptionText;
    
    // Update practice tips
    document.getElementById('rg-tips').innerHTML = `
        <div style="margin-bottom:6px;">${practiceTip}</div>
        <div style="font-size:12px;color:var(--muted);">
            â€¢ Practice at ${Math.round(tempo * 0.5)}-${Math.round(tempo * 0.75)} BPM to start<br>
            â€¢ Count subdivisions out loud<br>
            â€¢ Use a metronome or drum machine
        </div>
    `;
    
    // Update tempo display
    document.getElementById('rg-display-tempo').textContent = `${tempo} BPM`;
    
    // Store current pattern for play function
    rgCurrentPattern = {
        notation: notation,
        tempo: tempo,
        timeSignature: timeSignature
    };
}

// Play rhythm (simulated)
function rgPlay() {
    const tempo = parseInt(document.getElementById('rg-tempo').value);
    rgShowMessage(`Playing at ${tempo} BPM (simulated)`, 'info');
    
    // Simulate visual metronome
    const notation = document.getElementById('rg-notation');
    const originalColor = notation.style.color;
    notation.style.color = '#39ff14';
    
    setTimeout(() => {
        notation.style.color = originalColor;
    }, 500);
}

// Adjust tempo
function rgAdjustTempo(change) {
    const tempoInput = document.getElementById('rg-tempo');
    let tempo = parseInt(tempoInput.value) + change;
    
    // Clamp between min and max
    tempo = Math.max(40, Math.min(240, tempo));
    
    tempoInput.value = tempo;
    document.getElementById('rg-display-tempo').textContent = `${tempo} BPM`;
    
    // Save settings
    rgSaveSettings();
    
    rgShowMessage(`Tempo: ${tempo} BPM`, 'info');
}

// Copy pattern to clipboard
function rgCopy() {
    const description = document.getElementById('rg-description').textContent;
    if (!description || description.includes('Pattern Description')) {
        rgShowMessage('No pattern to copy', 'warning');
        return;
    }
    
    navigator.clipboard.writeText(description).then(() => {
        rgShowMessage('Pattern copied!', 'success');
    }).catch(err => {
        console.error('Copy failed:', err);
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = description;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        rgShowMessage('Copied!', 'success');
    });
}

// Save pattern
function rgSavePattern() {
    const timeSignature = document.getElementById('rg-time').value;
    const style = document.getElementById('rg-style').value;
    const tempo = document.getElementById('rg-tempo').value;
    const notation = document.getElementById('rg-notation').textContent;
    const description = document.getElementById('rg-description').textContent;
    
    let text = `RHYTHM PATTERN\n`;
    text += `Date: ${new Date().toLocaleDateString()}\n`;
    text += `Time: ${timeSignature} | Style: ${style} | Tempo: ${tempo} BPM\n`;
    text += '='.repeat(50) + '\n\n';
    text += `NOTATION:\n${notation}\n\n`;
    text += `DESCRIPTION:\n${description}\n\n`;
    text += 'Generated with Rhythm Generator';
    
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `rhythm-pattern-${timeSignature.replace('/', '-')}-${style}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    rgShowMessage('Pattern saved!', 'success');
}

// Export MIDI (simulated)
function rgExportMIDI() {
    rgShowMessage('MIDI export simulated (requires Web MIDI API)', 'info');
    // Note: Real MIDI export would require Web MIDI API implementation
}

// Reset generator
function rgReset() {
    if (confirm('Reset all settings?')) {
        document.getElementById('rg-time').value = '4/4';
        document.getElementById('rg-style').value = 'basic';
        document.querySelector('input[name="rg-complexity"][value="simple"]').checked = true;
        document.getElementById('rg-instrument').value = 'drumkit';
        document.getElementById('rg-tempo').value = '120';
        document.getElementById('rg-bars').value = '4';
        document.getElementById('rg-bars-value').textContent = '4 bars';
        
        document.getElementById('rg-results').style.display = 'none';
        localStorage.removeItem('rg-settings');
        
        rgShowMessage('Rhythm generator reset', 'info');
    }
}

// Show message
function rgShowMessage(msg, type) {
    const colors = { success: '#39ff14', warning: '#ffcc00', error: '#ff2d55', info: '#2dd4ff' };
    
    // Remove existing
    const existing = document.querySelector('.rg-msg');
    if (existing) existing.remove();
    
    // Create new
    const div = document.createElement('div');
    div.className = 'rg-msg';
    div.textContent = msg;
    div.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        background: rgba(0,0,0,0.9);
        border: 1px solid ${colors[type]};
        border-radius: 8px;
        color: ${colors[type]};
        z-index: 10000;
        font-weight: 500;
        animation: rgSlideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(div);
    
    setTimeout(() => {
        div.style.animation = 'rgSlideOut 0.3s ease-out';
        setTimeout(() => div.remove(), 300);
    }, 3000);
}

// Add animation styles
if (!document.querySelector('#rg-styles')) {
    const style = document.createElement('style');
    style.id = 'rg-styles';
    style.textContent = `
        @keyframes rgSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes rgSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        #rg-notation {
            user-select: all;
            cursor: text;
        }
        
        #rg-description::-webkit-scrollbar {
            width: 8px;
        }
        
        #rg-description::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
        
        #rg-description::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: none;
        }
    `;
    document.head.appendChild(style);
}
</script>

<style>
#rhythm-generator-title {
    color: var(--accent);
    margin-top: 0;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    #rg-notation {
        font-size: 20px !important;
        padding: 16px !important;
    }
    
    #rg-description {
        font-size: 12px !important;
        max-height: 180px !important;
    }
    
    input, button, select {
        font-size: 16px !important; /* Prevents iOS zoom */
        min-height: 44px; /* Better touch target */
    }
    
    button {
        padding: 12px !important;
    }
    
    .tempo-controls {
        flex-wrap: wrap;
        gap: 6px !important;
    }
    
    .tempo-controls button {
        flex: 1;
        min-width: 60px;
    }
}
</style>
