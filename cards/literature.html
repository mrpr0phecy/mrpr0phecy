<h2 id="literature-title" style="margin-top:0;">Literature Helper</h2>

<form aria-describedby="literature-desc">
  <p id="literature-desc" class="small">Track books, themes, and quotes. Pull a random quote to review.</p>

  <div class="row">
    <div class="field">
      <label for="lit-book">Book</label>
      <input id="lit-book" type="text" placeholder="e.g. Macbeth" />
    </div>
    <div class="field">
      <label for="lit-author">Author</label>
      <input id="lit-author" type="text" placeholder="e.g. William Shakespeare" />
    </div>
    <div class="field">
      <label for="lit-theme">Theme</label>
      <input id="lit-theme" type="text" placeholder="e.g. Ambition, guilt" />
    </div>
  </div>

  <div class="row">
    <div class="field" style="flex:1;">
      <label for="lit-quote">Quote</label>
      <input id="lit-quote" type="text" placeholder="e.g. 'Out, damned spot!'" />
    </div>
    <div class="field" style="flex:1;">
      <label for="lit-notes">Notes</label>
      <input id="lit-notes" type="text" placeholder="Brief analysis or context" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="litAdd(this)">Add Entry</button>
    <button type="button" class="secondary" onclick="litReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <h3 class="small">Literature entries</h3>
  <ul id="lit-list" class="small"></ul>

  <div class="actions" style="margin-top:8px;">
    <button type="button" onclick="litRandomQuote(this)">Random Quote</button>
  </div>

  <div class="result">
    <div class="label">Random quote</div>
    <div class="value" id="lit-random">–</div>
  </div>
</div>

<script>
let literatureItems = [];

function litAdd(btn) {
  const card = btn.closest('.card');
  const book = card.querySelector('#lit-book').value.trim();
  const author = card.querySelector('#lit-author').value.trim();
  const theme = card.querySelector('#lit-theme').value.trim();
  const quote = card.querySelector('#lit-quote').value.trim();
  const notes = card.querySelector('#lit-notes').value.trim();

  if (!book && !quote) return;

  literatureItems.push({ book, author, theme, quote, notes });
  renderLiterature(card);
  card.querySelector('form').reset();
}

function renderLiterature(card) {
  const list = card.querySelector('#lit-list');
  list.innerHTML = "";
  literatureItems.forEach((item, idx) => {
    const li = document.createElement('li');
    const parts = [];

    if (item.book) parts.push(`<strong>${item.book}</strong>${item.author ? " — " + item.author : ""}`);
    if (item.theme) parts.push(`Theme: ${item.theme}`);
    if (item.quote) parts.push(`“${item.quote}”`);
    if (item.notes) parts.push(item.notes);

    li.innerHTML = parts.join(" | ");

    // small remove button for quick cleanup
    const removeBtn = document.createElement('button');
    removeBtn.textContent = "Remove";
    removeBtn.className = "tiny";
    removeBtn.style.marginLeft = "8px";
    removeBtn.onclick = () => {
      literatureItems.splice(idx, 1);
      renderLiterature(card);
    };

    li.appendChild(removeBtn);
    list.appendChild(li);
  });
}

function litRandomQuote(btn) {
  const card = btn.closest('.card');
  const quotes = literatureItems.map(i => i.quote).filter(q => q && q.trim().length);
  const out = card.querySelector('#lit-random');

  if (!quotes.length) {
    out.textContent = "Add at least one quote to draw from.";
    return;
  }

  const pick = quotes[Math.floor(Math.random() * quotes.length)];
  out.textContent = `“${pick}”`;
}

function litReset(btn) {
  const card = btn.closest('.card');
  literatureItems = [];
  card.querySelector('form').reset();
  card.querySelector('#lit-list').innerHTML = "";
  card.querySelector('#lit-random').textContent = "–";
}
</script>
