<h2 id="sl-market-title" style="margin-top:0;">Marketplace Search</h2>

<form aria-describedby="sl-market-desc">
  <p id="sl-market-desc" class="small">
    Search Second Life Marketplace items by keyword and view quick results.
  </p>

  <div class="row" style="display:grid;grid-template-columns:1fr;gap:10px;">
    <div class="field">
      <label for="sl-market-query">Search Term</label>
      <input id="sl-market-query" type="text" placeholder="e.g. mesh sofa, gothic outfit" style="width:100%;" />
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="slMarketSearch(this)">Search</button>
    <button type="button" class="secondary" onclick="slMarketReset(this)">Reset</button>
    <button type="button" onclick="slMarketCopy(this)">Copy Results</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Marketplace Results</h3>
  <textarea id="sl-market-output" rows="8" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
    <div id="sl-market-hint" class="small" style="opacity:0.9;"></div>
  </div>
</div>

<script>
/* marketplace-search.html
   - Searches Second Life Marketplace by keyword
   - Scoped with sl-market prefix
*/

// Demo data — in production, replace with API fetch
const SL_MARKET_DEMO = {
  "mesh sofa": [
    "Mesh Sofa Deluxe — L$500",
    "Modern Mesh Sofa — L$350",
    "Classic Mesh Sofa — L$200"
  ],
  "gothic outfit": [
    "Gothic Outfit Black Lace — L$250",
    "Dark Gothic Ensemble — L$400",
    "Vampire Gothic Outfit — L$600"
  ]
};

function slMarketReset(btn){
  const card=btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#sl-market-output').value="";
  card.querySelector('#sl-market-hint').textContent="";
}

function slMarketCopy(btn){
  const card=btn.closest('.card');
  const out=card.querySelector('#sl-market-output').value;
  if(!out.trim())return;
  navigator.clipboard?.writeText(out).then(()=>{
    const hint=card.querySelector('#sl-market-hint');
    hint.textContent="Copied to clipboard.";
    setTimeout(()=>{if(hint.textContent==="Copied to clipboard.")hint.textContent="";},1600);
  }).catch(()=>alert("Copy failed."));
}

function slMarketSearch(btn){
  const card=btn.closest('.card');
  const query=(card.querySelector('#sl-market-query').value||"").toLowerCase().trim();
  if(!query){
    card.querySelector('#sl-market-hint').textContent="Please enter a search term.";
    return;
  }
  let results=SL_MARKET_DEMO[query]||[`No demo results for "${query}".`];
  card.querySelector('#sl-market-output').value=results.join("\n");
  card.querySelector('#sl-market-hint').textContent="Search complete.";
}
</script>
