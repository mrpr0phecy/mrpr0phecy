<h2 id="sequences-series-title">Sequences & Series Calculator</h2>

<form aria-describedby="sequences-series-desc">
  <p id="sequences-series-desc" class="small">
    Calculate arithmetic and geometric sequences and series. 
    <span style="color:var(--accent)">Includes step-by-step solutions and visual representations.</span>
  </p>

  <!-- INPUT GRID - NO EXTRA WRAPPERS -->
  <div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:12px;margin-bottom:16px;">
    <div class="field">
      <label for="ss-first" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        First term (a‚ÇÅ)
      </label>
      <input id="ss-first" type="number" step="any" placeholder="e.g., 2" 
             style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;" />
    </div>

    <div class="field">
      <label for="ss-diff" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Common difference/ratio (d/r)
      </label>
      <input id="ss-diff" type="number" step="any" placeholder="e.g., 3" 
             style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;" />
    </div>

    <div class="field">
      <label for="ss-n" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Number of terms (n)
      </label>
      <input id="ss-n" type="number" min="1" max="1000" placeholder="e.g., 10" 
             style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;" />
    </div>

    <div class="field">
      <label for="ss-calc-type" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Calculation Type
      </label>
      <select id="ss-calc-type" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="nth-term">Find nth term</option>
        <option value="sum">Find sum (S‚Çô)</option>
        <option value="both" selected>Find both</option>
        <option value="terms-list">List all terms</option>
      </select>
    </div>

    <div class="field">
      <label for="ss-type" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Sequence Type
      </label>
      <select id="ss-type" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="arithmetic" selected>Arithmetic (a‚Çô = a‚ÇÅ + (n-1)d)</option>
        <option value="geometric">Geometric (a‚Çô = a‚ÇÅ √ó r^(n-1))</option>
        <option value="fibonacci">Fibonacci-like (a‚Çô = a‚Çô‚Çã‚ÇÅ + a‚Çô‚Çã‚ÇÇ)</option>
      </select>
    </div>

    <div class="field">
      <label for="ss-decimal-places" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Decimal places
      </label>
      <select id="ss-decimal-places" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="0">0 (integers)</option>
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="6">6</option>
      </select>
    </div>
  </div>

  <!-- QUICK EXAMPLES -->
  <div style="margin-bottom:20px;">
    <div style="color:rgba(230,250,255,0.8);margin-bottom:8px;font-size:14px;">Quick Examples:</div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;">
      <button type="button" onclick="ssExample('arithmetic')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Arithmetic: 2, 5, 8...</button>
      <button type="button" onclick="ssExample('geometric')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Geometric: 2, 6, 18...</button>
      <button type="button" onclick="ssExample('fibonacci')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Fibonacci: 0, 1, 1, 2...</button>
      <button type="button" onclick="ssExample('negative')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Negative ratio: 3, -1.5...</button>
    </div>
  </div>

  <!-- ACTIONS - USING THEME COLORS -->
  <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
    <button type="button" onclick="ssCalculate(this)" 
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
      Calculate Sequence
    </button>
    <button type="button" onclick="ssReset(this)"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      Reset
    </button>
    <button type="button" onclick="ssCopy(this)"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
      Copy Result
    </button>
  </div>

  <!-- STEP-BY-STEP TOGGLE -->
  <div style="margin-top:12px;display:flex;align-items:center;gap:8px;">
    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
      <input type="checkbox" id="ss-show-steps" checked style="cursor:pointer;">
      <span style="color:rgba(230,250,255,0.9);font-size:14px;">Show step-by-step solution</span>
    </label>
    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin-left:auto;">
      <input type="checkbox" id="ss-show-formulas" checked style="cursor:pointer;">
      <span style="color:rgba(230,250,255,0.9);font-size:14px;">Show formulas</span>
    </label>
  </div>
</form>

<!-- RESULTS - ARIA LIVE FOR ACCESSIBILITY -->
<div class="results" aria-live="polite" style="margin-top:16px;">
  <h3 class="small" style="color:var(--accent);margin-bottom:8px;">üìä Sequence Results</h3>
  
  <!-- VISUAL SEQUENCE DISPLAY -->
  <div id="ss-visual-container" style="display:none;margin-bottom:12px;padding:12px;background:rgba(0,0,0,0.15);border-radius:8px;border:1px solid rgba(45,212,255,0.1);">
    <div style="color:rgba(230,250,255,0.9);font-size:14px;margin-bottom:6px;">Sequence visualization:</div>
    <div id="ss-sequence-visual" style="display:flex;gap:4px;flex-wrap:wrap;font-family:monospace;"></div>
  </div>
  
  <!-- MAIN OUTPUT -->
  <textarea id="ss-output" rows="12" 
            style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.2);background:rgba(0,0,0,0.2);color:inherit;font-family:monospace;font-size:14px;line-height:1.4;"
            readonly></textarea>

  <!-- FORMULA REFERENCE -->
  <div id="ss-formulas-container" style="margin-top:16px;padding:12px;background:rgba(45,212,255,0.05);border-radius:8px;border:1px solid rgba(45,212,255,0.1);">
    <h4 style="color:var(--accent);margin:0 0 8px 0;font-size:15px;">üìù Sequence Formulas:</h4>
    <div id="ss-formulas-content" style="font-size:14px;line-height:1.5;color:rgba(230,250,255,0.9);">
      <div style="margin-bottom:6px;"><strong>Arithmetic:</strong> a‚Çô = a‚ÇÅ + (n-1)d, S‚Çô = n/2 √ó [2a‚ÇÅ + (n-1)d]</div>
      <div style="margin-bottom:6px;"><strong>Geometric:</strong> a‚Çô = a‚ÇÅ √ó r^(n-1), S‚Çô = a‚ÇÅ(1 - r‚Åø)/(1 - r) for r ‚â† 1</div>
      <div><strong>Infinite Geometric Sum (|r| &lt; 1):</strong> S‚àû = a‚ÇÅ/(1 - r)</div>
    </div>
  </div>

  <!-- HINT AND STATUS -->
  <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
    <div id="ss-hint" class="small" style="color:#39ff14;font-size:13px;flex:1;"></div>
    <div id="ss-summary" style="color:rgba(230,250,255,0.7);font-size:13px;"></div>
  </div>
</div>

<script>
/* sequences-series.html
   - Arithmetic, geometric, and Fibonacci sequences/series
   - Scoped with ss- prefix (sequences series)
   - Enhanced with visualizations and step-by-step solutions
*/

// Format number with specified decimal places
function ssFormat(num, decimals) {
  if (typeof num !== 'number' || isNaN(num)) return 'NaN';
  return num.toFixed(decimals).replace(/\.?0+$/, '');
}

// Generate sequence visualization
function ssVisualizeSequence(terms, type) {
  const container = document.getElementById('ss-sequence-visual');
  if (!container) return;
  
  container.innerHTML = '';
  
  terms.forEach((term, index) => {
    const termEl = document.createElement('div');
    termEl.style.cssText = `
      padding: 6px 8px;
      background: ${index === 0 ? 'rgba(45,212,255,0.2)' : 
                   index === terms.length - 1 ? 'rgba(255,77,77,0.2)' : 
                   'rgba(255,255,255,0.08)'};
      border: 1px solid ${index === 0 ? 'rgba(45,212,255,0.4)' : 
                         index === terms.length - 1 ? 'rgba(255,77,77,0.4)' : 
                         'rgba(255,255,255,0.12)'};
      border-radius: 6px;
      font-size: 13px;
      font-weight: ${index === 0 || index === terms.length - 1 ? '600' : '400'};
      min-width: 36px;
      text-align: center;
    `;
    
    termEl.innerHTML = `
      <div style="font-size:11px;color:${index === 0 ? 'var(--accent)' : 
                                         index === terms.length - 1 ? '#ff4d4d' : 
                                         'rgba(230,250,255,0.7)'};">
        a${index + 1}
      </div>
      <div>${term}</div>
    `;
    
    container.appendChild(termEl);
  });
}

// Calculate sequence based on type
function ssCalculate(btn) {
  const card = btn.closest('.card') || document;
  const a1 = parseFloat(card.querySelector('#ss-first').value);
  const d = parseFloat(card.querySelector('#ss-diff').value);
  const n = parseInt(card.querySelector('#ss-n').value);
  const type = card.querySelector('#ss-type').value;
  const calcType = card.querySelector('#ss-calc-type').value;
  const showSteps = card.querySelector('#ss-show-steps').checked;
  const showFormulas = card.querySelector('#ss-show-formulas').checked;
  const decimals = parseInt(card.querySelector('#ss-decimal-places').value);
  
  // Validation
  if (isNaN(a1) || isNaN(d) || isNaN(n) || n < 1) {
    card.querySelector('#ss-hint').textContent = 'Please enter valid numbers (n ‚â• 1).';
    return;
  }
  
  let output = '';
  let terms = [];
  let result = {};
  
  switch (type) {
    case 'arithmetic':
      // Generate terms
      for (let i = 0; i < n; i++) {
        terms.push(a1 + i * d);
      }
      
      // Calculate based on requested output
      if (calcType === 'nth-term' || calcType === 'both') {
        const nthTerm = a1 + (n - 1) * d;
        result.nthTerm = nthTerm;
      }
      
      if (calcType === 'sum' || calcType === 'both') {
        const sum = (n / 2) * (2 * a1 + (n - 1) * d);
        result.sum = sum;
      }
      break;
      
    case 'geometric':
      // Generate terms
      for (let i = 0; i < n; i++) {
        terms.push(a1 * Math.pow(d, i));
      }
      
      // Calculate based on requested output
      if (calcType === 'nth-term' || calcType === 'both') {
        const nthTerm = a1 * Math.pow(d, n - 1);
        result.nthTerm = nthTerm;
      }
      
      if (calcType === 'sum' || calcType === 'both') {
        let sum;
        if (d === 1) {
          sum = a1 * n; // Special case
        } else {
          sum = a1 * (1 - Math.pow(d, n)) / (1 - d);
        }
        result.sum = sum;
        
        // Check for infinite sum (if |r| < 1)
        if (Math.abs(d) < 1) {
          const infiniteSum = a1 / (1 - d);
          result.infiniteSum = infiniteSum;
        }
      }
      break;
      
    case 'fibonacci':
      // Fibonacci-like sequence starting with a1 and d as second term
      terms = [a1, d];
      for (let i = 2; i < n; i++) {
        terms.push(terms[i-1] + terms[i-2]);
      }
      
      if (calcType === 'nth-term' || calcType === 'both') {
        result.nthTerm = terms[n-1];
      }
      
      if (calcType === 'sum' || calcType === 'both') {
        const sum = terms.reduce((acc, val) => acc + val, 0);
        result.sum = sum;
      }
      break;
  }
  
  // Build output based on calcType
  output += `Sequence type: ${type.charAt(0).toUpperCase() + type.slice(1)}\n`;
  output += `First term (a‚ÇÅ) = ${ssFormat(a1, decimals)}\n`;
  output += type === 'fibonacci' ? `Second term (a‚ÇÇ) = ${ssFormat(d, decimals)}\n` 
                                 : `Common ${type === 'arithmetic' ? 'difference (d)' : 'ratio (r)'} = ${ssFormat(d, decimals)}\n`;
  output += `Number of terms (n) = ${n}\n\n`;
  
  if (calcType === 'terms-list' || calcType === 'both') {
    output += `First ${n} terms:\n`;
    terms.forEach((term, idx) => {
      output += `  a${idx + 1} = ${ssFormat(term, decimals)}\n`;
    });
    output += '\n';
  }
  
  if (calcType === 'nth-term' || calcType === 'both') {
    output += `${n}th term (a‚Çô):\n`;
    output += `  a${n} = ${ssFormat(result.nthTerm, decimals)}\n`;
    if (showSteps) {
      if (type === 'arithmetic') {
        output += `  Formula: a‚Çô = a‚ÇÅ + (n-1)d\n`;
        output += `  Calculation: ${ssFormat(a1, decimals)} + (${n-1})√ó${ssFormat(d, decimals)}\n`;
      } else if (type === 'geometric') {
        output += `  Formula: a‚Çô = a‚ÇÅ √ó r^(n-1)\n`;
        output += `  Calculation: ${ssFormat(a1, decimals)} √ó ${ssFormat(d, decimals)}^(${n-1})\n`;
      }
    }
    output += '\n';
  }
  
  if ((calcType === 'sum' || calcType === 'both') && result.sum !== undefined) {
    output += `Sum of first ${n} terms (S‚Çô):\n`;
    output += `  S${n} = ${ssFormat(result.sum, decimals)}\n`;
    if (showSteps) {
      if (type === 'arithmetic') {
        output += `  Formula: S‚Çô = n/2 √ó [2a‚ÇÅ + (n-1)d]\n`;
        output += `  Calculation: ${n}/2 √ó [2√ó${ssFormat(a1, decimals)} + (${n-1})√ó${ssFormat(d, decimals)}]\n`;
      } else if (type === 'geometric') {
        if (d === 1) {
          output += `  Formula: S‚Çô = a‚ÇÅ √ó n (when r = 1)\n`;
        } else {
          output += `  Formula: S‚Çô = a‚ÇÅ(1 - r‚Åø)/(1 - r)\n`;
          output += `  Calculation: ${ssFormat(a1, decimals)}√ó(1 - ${ssFormat(d, decimals)}^${n})/(1 - ${ssFormat(d, decimals)})\n`;
        }
      }
    }
    output += '\n';
  }
  
  if (result.infiniteSum !== undefined) {
    output += `Infinite geometric sum (|r| < 1):\n`;
    output += `  S‚àû = a‚ÇÅ/(1 - r) = ${ssFormat(result.infiniteSum, decimals)}\n`;
  }
  
  // Update output
  const outputEl = card.querySelector('#ss-output');
  outputEl.value = output;
  
  // Show/hide visual container
  const visualContainer = card.querySelector('#ss-visual-container');
  if (terms.length <= 20) { // Only show visualization for reasonable lengths
    ssVisualizeSequence(terms.map(t => ssFormat(t, decimals)), type);
    visualContainer.style.display = 'block';
  } else {
    visualContainer.style.display = 'none';
  }
  
  // Show/hide formulas
  card.querySelector('#ss-formulas-container').style.display = showFormulas ? 'block' : 'none';
  
  // Update hint and summary
  card.querySelector('#ss-hint').textContent = '‚úì Calculation complete.';
  card.querySelector('#ss-summary').textContent = `Generated ${terms.length} ${type} sequence terms`;
  
  // Clear hint after 3 seconds
  setTimeout(() => {
    if (card.querySelector('#ss-hint').textContent === '‚úì Calculation complete.') {
      card.querySelector('#ss-hint').textContent = '';
    }
  }, 3000);
}

// Reset function
function ssReset(btn) {
  const card = btn.closest('.card') || document;
  card.querySelector('#ss-first').value = '';
  card.querySelector('#ss-diff').value = '';
  card.querySelector('#ss-n').value = '';
  card.querySelector('#ss-output').value = '';
  card.querySelector('#ss-hint').textContent = '';
  card.querySelector('#ss-summary').textContent = '';
  card.querySelector('#ss-visual-container').style.display = 'none';
  card.querySelector('#ss-sequence-visual').innerHTML = '';
  card.querySelector('#ss-type').selectedIndex = 0;
  card.querySelector('#ss-calc-type').selectedIndex = 2;
  card.querySelector('#ss-decimal-places').selectedIndex = 1;
  card.querySelector('#ss-show-steps').checked = true;
  card.querySelector('#ss-show-formulas').checked = true;
  card.querySelector('#ss-formulas-container').style.display = 'block';
}

// Copy function
function ssCopy(btn) {
  const card = btn.closest('.card') || document;
  const output = card.querySelector('#ss-output').value;
  if (!output.trim()) return;
  
  navigator.clipboard.writeText(output).then(() => {
    const hint = card.querySelector('#ss-hint');
    hint.textContent = '‚úÖ Copied to clipboard!';
    hint.style.color = '#39ff14';
    setTimeout(() => {
      if (hint.textContent === '‚úÖ Copied to clipboard!') {
        hint.textContent = '';
      }
    }, 2000);
  }).catch(() => {
    // Fallback for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = output;
    document.body.appendChild(textArea);
    textArea.select();
    try {
      document.execCommand('copy');
      const hint = card.querySelector('#ss-hint');
      hint.textContent = '‚úÖ Copied!';
      setTimeout(() => { hint.textContent = ''; }, 2000);
    } catch (err) {
      alert('Copy failed. Please select and copy manually.');
    }
    document.body.removeChild(textArea);
  });
}

// Example loader
function ssExample(type) {
  const card = document.currentScript?.closest('.card') || document;
  const firstInput = card.querySelector('#ss-first');
  const diffInput = card.querySelector('#ss-diff');
  const nInput = card.querySelector('#ss-n');
  const typeSelect = card.querySelector('#ss-type');
  const calcSelect = card.querySelector('#ss-calc-type');
  
  switch (type) {
    case 'arithmetic':
      firstInput.value = '2';
      diffInput.value = '3';
      nInput.value = '10';
      typeSelect.value = 'arithmetic';
      calcSelect.value = 'both';
      break;
    case 'geometric':
      firstInput.value = '2';
      diffInput.value = '3';
      nInput.value = '8';
      typeSelect.value = 'geometric';
      calcSelect.value = 'both';
      break;
    case 'fibonacci':
      firstInput.value = '0';
      diffInput.value = '1';
      nInput.value = '12';
      typeSelect.value = 'fibonacci';
      calcSelect.value = 'both';
      break;
    case 'negative':
      firstInput.value = '3';
      diffInput.value = '-0.5';
      nInput.value = '6';
      typeSelect.value = 'geometric';
      calcSelect.value = 'both';
      break;
  }
  
  // Trigger calculation
  setTimeout(() => ssCalculate(card.querySelector('[onclick="ssCalculate(this)"]')), 100);
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    const card = document.currentScript?.closest('.card') || document;
    
    // Auto-update hint when inputs change
    const inputs = ['first', 'diff', 'n'];
    inputs.forEach(inputId => {
      const input = card.querySelector(`#ss-${inputId}`);
      if (input) {
        input.addEventListener('input', function() {
          const type = card.querySelector('#ss-type').value;
          const hint = card.querySelector('#ss-hint');
          
          if (this.value.trim()) {
            hint.textContent = `Ready to calculate ${type} sequence`;
            hint.style.color = 'var(--accent)';
          } else {
            hint.textContent = '';
          }
        });
      }
    });
    
    // Update formulas based on selected type
    card.querySelector('#ss-type').addEventListener('change', function() {
      const type = this.value;
      const formulasContent = card.querySelector('#ss-formulas-content');
      
      if (type === 'arithmetic') {
        formulasContent.innerHTML = `
          <div style="margin-bottom:6px;"><strong>Arithmetic Sequence:</strong></div>
          <div style="margin-bottom:4px;margin-left:12px;">nth term: a‚Çô = a‚ÇÅ + (n-1)d</div>
          <div style="margin-left:12px;">Sum: S‚Çô = n/2 √ó [2a‚ÇÅ + (n-1)d]</div>
          <div style="margin-top:6px;font-size:13px;color:rgba(230,250,255,0.7);">
            Example: 2, 5, 8, 11... (d = 3)
          </div>
        `;
      } else if (type === 'geometric') {
        formulasContent.innerHTML = `
          <div style="margin-bottom:6px;"><strong>Geometric Sequence:</strong></div>
          <div style="margin-bottom:4px;margin-left:12px;">nth term: a‚Çô = a‚ÇÅ √ó r^(n-1)</div>
          <div style="margin-left:12px;">Sum (finite): S‚Çô = a‚ÇÅ(1 - r‚Åø)/(1 - r) for r ‚â† 1</div>
          <div style="margin-left:12px;">Sum (infinite): S‚àû = a‚ÇÅ/(1 - r) for |r| &lt; 1</div>
          <div style="margin-top:6px;font-size:13px;color:rgba(230,250,255,0.7);">
            Example: 2, 6, 18, 54... (r = 3)
          </div>
        `;
      } else if (type === 'fibonacci') {
        formulasContent.innerHTML = `
          <div style="margin-bottom:6px;"><strong>Fibonacci-like Sequence:</strong></div>
          <div style="margin-bottom:4px;margin-left:12px;">Recursive: a‚Çô = a‚Çô‚Çã‚ÇÅ + a‚Çô‚Çã‚ÇÇ</div>
          <div style="margin-left:12px;">Initial: a‚ÇÅ, a‚ÇÇ specified</div>
          <div style="margin-top:6px;font-size:13px;color:rgba(230,250,255,0.7);">
            Example: 0, 1, 1, 2, 3, 5, 8, 13...
          </div>
        `;
      }
    });
    
    console.log('Sequences & Series Calculator initialized');
  });
}
</script>

<!-- CARD-SPECIFIC STYLES -->
<style>
#sequences-series-title {
  color: var(--accent);
  margin-top: 0;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .row {
    grid-template-columns: 1fr !important;
  }
  
  .actions {
    flex-direction: column !important;
  }
  
  .actions button {
    width: 100% !important;
    margin: 4px 0 !important;
  }
  
  #ss-sequence-visual {
    justify-content: center;
  }
  
  #ss-sequence-visual > div {
    min-width: 44px !important; /* Touch-friendly */
    padding: 8px !important;
  }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  #ss-output {
    background: rgba(0, 0, 0, 0.3) !important;
  }
  
  #ss-visual-container {
    background: rgba(0, 0, 0, 0.2) !important;
  }
}

/* Animation for new terms */
@keyframes termHighlight {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

#ss-sequence-visual > div {
  transition: all 0.3s ease;
}

#ss-sequence-visual > div:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
</style>
