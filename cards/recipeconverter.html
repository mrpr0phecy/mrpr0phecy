<h2 id="recipeconverter-title" style="margin-top:0;">Recipe Converter</h2>

<form aria-describedby="recipeconverter-desc">
  <p id="recipeconverter-desc" class="small">Scale recipes up or down by servings.</p>

  <div class="row">
    <div class="field">
      <label for="recipeconverter-ingredient">Ingredient</label>
      <input id="recipeconverter-ingredient" type="text" placeholder="e.g. Flour" />
    </div>
    <div class="field">
      <label for="recipeconverter-amount">Amount</label>
      <input id="recipeconverter-amount" type="number" step="any" value="100" />
    </div>
    <div class="field">
      <label for="recipeconverter-unit">Unit</label>
      <input id="recipeconverter-unit" type="text" placeholder="g, ml, cups" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label for="recipeconverter-original">Original servings</label>
      <input id="recipeconverter-original" type="number" min="1" value="4" />
    </div>
    <div class="field">
      <label for="recipeconverter-new">New servings</label>
      <input id="recipeconverter-new" type="number" min="1" value="2" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="recipeconverterCalc(this)">Convert</button>
    <button type="button" class="secondary" onclick="recipeconverterReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <h3 class="small">Converted ingredient</h3>
  <div id="recipeconverter-res">–</div>
</div>

<script>
function recipeconverterCalc(btn) {
  const card = btn.closest('.card');
  const ingredient = card.querySelector('#recipeconverter-ingredient').value.trim();
  const amount = parseFloat(card.querySelector('#recipeconverter-amount').value) || 0;
  const unit = card.querySelector('#recipeconverter-unit').value.trim();
  const original = parseInt(card.querySelector('#recipeconverter-original').value) || 1;
  const newServings = parseInt(card.querySelector('#recipeconverter-new').value) || 1;

  const factor = newServings / original;
  const newAmount = (amount * factor).toFixed(2);

  card.querySelector('#recipeconverter-res').textContent =
    (ingredient || "Ingredient") + ": " + newAmount + " " + (unit || "");
}

function recipeconverterReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#recipeconverter-res').textContent = '–';
}
</script>
