<h2 id="public-speaking-title" style="margin-top:0;">Public Speaking Coach</h2>

<form aria-describedby="public-speaking-desc">
  <p id="public-speaking-desc" class="small">Practise speeches and presentations. Paste your draft or notes, choose focus (clarity, persuasion, timing, confidence), and generate coaching tips with structured feedback.</p>

  <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
    <div class="field" style="grid-column:1 / -1;">
      <label for="ps-text">Speech / notes</label>
      <textarea id="ps-text" rows="10" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;" placeholder="Paste your speech or notes here..."></textarea>
    </div>

    <div class="field">
      <label for="ps-focus">Focus</label>
      <select id="ps-focus" style="width:100%;">
        <option value="clarity">Clarity</option>
        <option value="persuasion">Persuasion</option>
        <option value="timing">Timing</option>
        <option value="confidence">Confidence</option>
        <option value="delivery">Delivery style</option>
      </select>
    </div>

    <div class="field">
      <label for="ps-length">Length</label>
      <select id="ps-length" style="width:100%;">
        <option value="short">Short feedback</option>
        <option value="medium" selected>Medium feedback</option>
        <option value="long">Detailed feedback</option>
      </select>
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="psAnalyze(this)">Generate Feedback</button>
    <button type="button" class="secondary" onclick="psReset(this)">Reset</button>
    <button type="button" onclick="psCopy(this)">Copy Feedback</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Coaching feedback</h3>
  <textarea id="ps-output" rows="12" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
    <div class="small">Estimated words: <span id="ps-wordcount">0</span></div>
    <div id="ps-hint" class="small" style="opacity:0.9;"></div>
  </div>
</div>

<script>
/* public-speaking.html
   - Generates coaching feedback for speeches
   - Scoped with ps- prefix
*/

function psReset(btn){
  const card=btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#ps-output').value="";
  card.querySelector('#ps-wordcount').textContent="0";
  card.querySelector('#ps-hint').textContent="";
}

function psCopy(btn){
  const card=btn.closest('.card');
  const out=card.querySelector('#ps-output').value;
  if(!out.trim())return;
  navigator.clipboard?.writeText(out).then(()=>{
    const hint=card.querySelector('#ps-hint');
    hint.textContent="Copied to clipboard.";
    setTimeout(()=>{if(hint.textContent==="Copied to clipboard.")hint.textContent="";},1600);
  }).catch(()=>alert("Copy failed."));
}

function psAnalyze(btn){
  const card=btn.closest('.card');
  const text=(card.querySelector('#ps-text').value||"").trim();
  const focus=card.querySelector('#ps-focus').value;
  const length=card.querySelector('#ps-length').value;
  if(!text){card.querySelector('#ps-hint').textContent="Please paste a speech.";return;}
  const feedback=buildFeedback({text,focus,length});
  card.querySelector('#ps-output').value=feedback;
  card.querySelector('#ps-wordcount').textContent=estimateWords(feedback);
  card.querySelector('#ps-hint').textContent="Feedback generated.";
}

function buildFeedback(opts){
  const {text,focus,length}=opts;
  const intro=`Speech excerpt: "${text.slice(0,80)}..."`;
  let body="";
  switch(focus){
    case "clarity":
      body="Clarity tips:\n- Simplify complex sentences.\n- Use signposting phrases.\n- Avoid jargon.";
      break;
    case "persuasion":
      body="Persuasion tips:\n- Emphasize benefits.\n- Use rhetorical questions.\n- Include evidence and examples.";
      break;
    case "timing":
      body="Timing tips:\n- Aim for ~120 words per minute.\n- Pause for emphasis.\n- Balance sections evenly.";
      break;
    case "confidence":
      body="Confidence tips:\n- Maintain eye contact.\n- Use strong posture.\n- Practise with recording.";
      break;
    case "delivery":
      body="Delivery tips:\n- Vary pitch and pace.\n- Use gestures naturally.\n- Emphasize key words.";
      break;
  }
  const depthNote=length==="short"?"Keep feedback concise.":
                  length==="medium"?"Provide balanced detail.":
                  "Offer extended commentary with examples.";
  return `${intro}\n\n${body}\n\n${depthNote}`;
}

function estimateWords(text){return(text.trim().split(/\s+/).filter(Boolean).length).toString();}
</script>
