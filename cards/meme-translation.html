<h2 id="meme-translator-title" style="margin-top:0;color:var(--accent);">ğŸ­ Meme Translator</h2>

<form aria-describedby="mt-desc">
  <p id="mt-desc" class="small" style="color:var(--muted);margin-bottom:16px;">
    The ultimate internet language decoder. Translate memes, slang, acronyms, and internet speak with context, origins, and examples.
    <span style="color:#ffcc00;">ğŸŒ Real-time translation across internet cultures</span>
  </p>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
    <div>
      <label for="mt-input" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Internet Speak</label>
      <textarea id="mt-input" rows="4" 
                style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;font-family:monospace;resize:vertical;"
                placeholder="Enter meme text, slang, or acronyms...">FR FR no cap that's sus AF ğŸ§¢</textarea>
    </div>
    
    <div>
      <label for="mt-output" style="display:block;margin-bottom:8px;color:#39ff14;font-weight:500;">Translated Meaning</label>
      <textarea id="mt-output" rows="4" readonly
                style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:#39ff14;font-family:monospace;resize:vertical;"
                placeholder="Translation will appear here..."></textarea>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
    <div>
      <label for="mt-direction" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Translation Direction</label>
      <select id="mt-direction" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;cursor:pointer;">
        <option value="internet2normal" selected>ğŸŒ Internet â†’ Normal English</option>
        <option value="normal2internet">ğŸ“ Normal English â†’ Internet</option>
        <option value="genz2boomer">ğŸ‘¶ Gen Z â†’ ğŸ‘´ Boomer</option>
        <option value="boomer2genz">ğŸ‘´ Boomer â†’ ğŸ‘¶ Gen Z</option>
        <option value="meme2academic">ğŸ­ Meme â†’ Academic</option>
        <option value="academic2meme">ğŸ“š Academic â†’ Meme</option>
      </select>
    </div>
    
    <div>
      <label for="mt-era" style="display:block;margin-bottom:8px;color:var(--accent);font-weight:500;">Internet Era</label>
      <select id="mt-era" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;cursor:pointer;">
        <option value="all" selected>All Eras (1990s-Present)</option>
        <option value="90s">1990s (AOL/AIM Era)</option>
        <option value="00s">2000s (Forum/MySpace Era)</option>
        <option value="10s">2010s (Tumblr/Vine Era)</option>
        <option value="20s">2020s (TikTok/Gen Z Era)</option>
        <option value="gaming">ğŸ® Gaming Slang</option>
        <option value="streaming">ğŸ“º Streaming Culture</option>
        <option value="anime">ğŸŒ Anime/Manga</option>
      </select>
    </div>
  </div>

  <div style="display:flex;gap:10px;margin-top:20px;flex-wrap:wrap;">
    <button type="button" onclick="mtTranslate(this)" id="mt-translate-btn"
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(255,105,180,0.2), rgba(255,105,180,0.1));border:1px solid rgba(255,105,180,0.4);color:#ff69b4;cursor:pointer;font-weight:600;min-width:140px;">
      ğŸ­ Translate
    </button>
    <button type="button" onclick="mtGenerateMeme(this)"
            style="padding:12px 16px;background:rgba(147,112,219,0.1);border:1px solid rgba(147,112,219,0.3);border-radius:8px;color:#9370db;cursor:pointer;">
      ğŸ–¼ï¸ Generate Meme
    </button>
    <button type="button" onclick="mtRandomExample(this)"
            style="padding:12px 16px;background:rgba(255,215,0,0.1);border:1px solid rgba(255,215,0,0.3);border-radius:8px;color:#ffd700;cursor:pointer;">
      ğŸ² Random Example
    </button>
    <button type="button" onclick="mtCopy(this)"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
      ğŸ“‹ Copy
    </button>
  </div>
</form>

<div aria-live="polite" style="margin-top:20px;">
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
    <div style="background:linear-gradient(135deg, rgba(255,105,180,0.1), rgba(147,112,219,0.1));border-radius:8px;padding:16px;border:1px solid rgba(255,105,180,0.2);">
      <div style="font-weight:600;color:#ff69b4;margin-bottom:8px;">ğŸ¯ Translation Breakdown</div>
      <div id="mt-breakdown" class="small" style="color:var(--muted);">
        Enter text to see detailed breakdown...
      </div>
    </div>
    
    <div style="background:linear-gradient(135deg, rgba(147,112,219,0.1), rgba(30,144,255,0.1));border-radius:8px;padding:16px;border:1px solid rgba(147,112,219,0.2);">
      <div style="font-weight:600;color:#9370db;margin-bottom:8px;">ğŸ“š Context & Origin</div>
      <div id="mt-context" class="small" style="color:var(--muted);">
        Context will appear here...
      </div>
    </div>
  </div>

  <h3 class="small" style="color:var(--accent);margin-bottom:8px;">ğŸ”¥ Trending Phrases</h3>
  <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;" id="mt-trending">
    <!-- Trending phrases will be loaded here -->
  </div>

  <div style="background:rgba(0,0,0,0.2);border-radius:8px;padding:16px;border:1px solid rgba(255,255,255,0.08);margin-bottom:16px;">
    <div style="font-weight:600;color:var(--accent);margin-bottom:8px;">ğŸ’¬ Usage Examples</div>
    <div id="mt-examples" class="small" style="color:var(--muted);">
      <div style="margin-bottom:8px;">â€¢ <span style="color:#ff69b4;">Internet:</span> "That's so cringe, my guy"</div>
      <div style="margin-bottom:8px;">â€¢ <span style="color:#39ff14;">Translation:</span> "That's embarrassing, my friend"</div>
      <div>â€¢ <span style="color:#9370db;">Context:</span> Used when someone does something awkward or embarrassing</div>
    </div>
  </div>

  <div id="mt-hint" class="small" style="color:#ff69b4;margin-top:12px;text-align:center;min-height:20px;padding:8px;background:rgba(255,105,180,0.05);border-radius:8px;"></div>
</div>

<script>
/* meme-translator.html
   - Internet language decoder and translator
   - Scoped with mt- prefix (meme-translator)
   - Comprehensive slang database
   - Meme generation capabilities
*/

(function() {
  'use strict';
  
  const card = document.currentScript?.closest('.card') || document;
  
  // Comprehensive internet slang database
  const mtDictionary = {
    // Gen Z / TikTok Era
    "fr fr": { meaning: "For real, for real", origin: "Hip-hop/TikTok", era: "2020s", examples: ["That movie was fire fr fr"] },
    "no cap": { meaning: "No lie, telling the truth", origin: "Atlanta hip-hop", era: "2020s", examples: ["I'm going to the gym, no cap"] },
    "sus": { meaning: "Suspicious", origin: "Among Us game", era: "2020s", examples: ["That's kinda sus bro"] },
    "ğŸ§¢": { meaning: "Cap (lying)", origin: "Hip-hop emoji adaptation", era: "2020s", examples: ["You got a new car? That's ğŸ§¢"] },
    "based": { meaning: "Authentic, true to oneself", origin: "Lil B rapper", era: "2010s", examples: ["Your opinion is so based"] },
    "ratio": { meaning: "Getting more replies than likes", origin: "Twitter culture", era: "2020s", examples: ["You just got ratioed"] },
    "mid": { meaning: "Mediocre, average", origin: "Hip-hop", era: "2020s", examples: ["That album was mid"] },
    "rizz": { meaning: "Charisma, game", origin: "Internet slang", era: "2020s", examples: ["He's got mad rizz"] },
    "gyat": { meaning: "Expression of surprise/attraction", origin: "TikTok", era: "2020s", examples: ["GYAT! Look at that!"] },
    
    // 2010s Era
    "lit": { meaning: "Exciting, amazing", origin: "Hip-hop", era: "2010s", examples: ["This party is lit!"] },
    "woke": { meaning: "Socially aware", origin: "BLM movement", era: "2010s", examples: ["Stay woke to the issues"] },
    "yeet": { meaning: "To throw with force", origin: "Vine", era: "2010s", examples: ["I'm gonna yeet this ball"] },
    "ghosting": { meaning: "Suddenly cutting contact", origin: "Dating apps", era: "2010s", examples: ["She ghosted me after 3 dates"] },
    "ship": { meaning: "Support a relationship", origin: "Fandom culture", era: "2010s", examples: ["I ship them so hard"] },
    "stan": { meaning: "Extreme fan", origin: "Eminem song", era: "2010s", examples: ["I'm a Taylor Swift stan"] },
    "flex": { meaning: "To show off", origin: "Hip-hop", era: "2010s", examples: ["He's flexing his new watch"] },
    
    // 2000s Era
    "lol": { meaning: "Laugh out loud", origin: "Early internet", era: "2000s", examples: ["lol that's funny"] },
    "brb": { meaning: "Be right back", origin: "Chat rooms", era: "2000s", examples: ["brb getting food"] },
    "afk": { meaning: "Away from keyboard", origin: "Online gaming", era: "2000s", examples: ["Going afk for a minute"] },
    "ftw": { meaning: "For the win", origin: "Gaming", era: "2000s", examples: ["Pizza ftw!"] },
    "pwned": { meaning: "Owned/dominated", origin: "Gaming typo", era: "2000s", examples: ["You just got pwned"] },
    "newb": { meaning: "Newbie/beginner", origin: "Gaming", era: "2000s", examples: ["Don't be such a newb"] },
    
    // 1990s Era
    "a/s/l": { meaning: "Age/sex/location", origin: "AOL chat rooms", era: "1990s", examples: ["a/s/l?"] },
    "pos": { meaning: "Parent over shoulder", origin: "AIM", era: "1990s", examples: ["pos, gotta go"] },
    "1337": { meaning: "Elite (leet speak)", origin: "Hacker culture", era: "1990s", examples: ["He's 1337 at coding"] },
    "warez": { meaning: "Pirated software", origin: "Early internet", era: "1990s", examples: ["Downloading warez"] },
    
    // Gaming Slang
    "gg": { meaning: "Good game", origin: "Online gaming", era: "gaming", examples: ["gg everyone"] },
    "wp": { meaning: "Well played", origin: "Online gaming", era: "gaming", examples: ["wp mate"] },
    "nerf": { meaning: "Weaken in-game", origin: "Gaming", era: "gaming", examples: ["They nerfed my favorite gun"] },
    "buff": { meaning: "Strengthen in-game", origin: "Gaming", era: "gaming", examples: ["Time to buff the mages"] },
    "grind": { meaning: "Repeated gameplay", origin: "MMORPGs", era: "gaming", examples: ["Gotta grind for XP"] },
    "dps": { meaning: "Damage per second", origin: "MMORPGs", era: "gaming", examples: ["I play DPS class"] },
    "tank": { meaning: "Damage absorber", origin: "MMORPGs", era: "gaming", examples: ["We need a tank"] },
    "healer": { meaning: "Health restorer", origin: "MMORPGs", era: "gaming", examples: ["Healer down!"] },
    
    // Streaming Culture
    "pog": { meaning: "Play of the game", origin: "Twitch", era: "streaming", examples: ["POG! Amazing play!"] },
    "poggers": { meaning: "Expression of excitement", origin: "Twitch", era: "streaming", examples: ["Poggers in the chat!"] },
    "kekw": { meaning: "Laughing hard", origin: "World of Warcraft/Twitch", era: "streaming", examples: ["kekw that's hilarious"] },
    "copium": { meaning: "Hopium/copium (false hope)", origin: "Twitch", era: "streaming", examples: ["That's pure copium"] },
    "omegalul": { meaning: "Very funny", origin: "Twitch", era: "streaming", examples: ["OMEGALUL that failed"] },
    
    // Anime/Manga
    "kawaii": { meaning: "Cute", origin: "Japanese", era: "anime", examples: ["So kawaii!"] },
    "senpai": { meaning: "Upperclassman/mentor", origin: "Japanese", era: "anime", examples: ["Notice me senpai"] },
    "waifu": { meaning: "Fictional wife", origin: "Anime culture", era: "anime", examples: ["She's my waifu"] },
    "husbando": { meaning: "Fictional husband", origin: "Anime culture", era: "anime", examples: ["He's my husbando"] },
    "tsundere": { meaning: "Cold then loving", origin: "Anime tropes", era: "anime", examples: ["She's such a tsundere"] },
    "yandere": { meaning: "Loving then violent", origin: "Anime tropes", era: "anime", examples: ["That yandere is scary"] },
    
    // Emoji Meanings
    "ğŸ˜‚": { meaning: "Tears of joy", origin: "Emoji standard", era: "2010s", examples: ["That's hilarious ğŸ˜‚"] },
    "ğŸ”¥": { meaning: "Fire/amazing", origin: "Hip-hop culture", era: "2020s", examples: ["This track is ğŸ”¥"] },
    "ğŸ’€": { meaning: "Dying of laughter", origin: "Internet adaptation", era: "2020s", examples: ["I'm ğŸ’€ from that joke"] },
    "âœ¨": { meaning: "Sparkles/magic", origin: "Tumblr aesthetic", era: "2010s", examples: ["You're amazing âœ¨"] },
    "ğŸ™": { meaning: "Prayer/please", origin: "Emoji standard", era: "2010s", examples: ["Hope you feel better ğŸ™"] },
    "ğŸ¯": { meaning: "On point", origin: "Target emoji", era: "2020s", examples: ["That's so accurate ğŸ¯"] },
    
    // Reverse translations (Normal to Internet)
    "that's amazing": { meaning: "That's fire/ğŸ”¥", origin: "Translation", era: "reverse" },
    "that's embarrassing": { meaning: "That's so cringe", origin: "Translation", era: "reverse" },
    "i agree completely": { meaning: "Facts/Facts only", origin: "Translation", era: "reverse" },
    "you're lying": { meaning: "Cap/ğŸ§¢", origin: "Translation", era: "reverse" },
    "very funny": { meaning: "I'm dead/ğŸ’€", origin: "Translation", era: "reverse" },
    "i love this": { meaning: "This slaps", origin: "Translation", era: "reverse" },
    "let's go": { meaning: "LFG!", origin: "Translation", era: "reverse" },
  };
  
  // State management
  let mtTrendingPhrases = [];
  let mtRecentTranslations = [];
  let mtIsTranslating = false;
  
  // Initialize function
  function mtInit() {
    console.log('Meme Translator initializing...');
    
    // Load trending phrases
    mtLoadTrendingPhrases();
    
    // Load saved translations
    const savedTranslations = localStorage.getItem('mt-history');
    if (savedTranslations) {
      try {
        mtRecentTranslations = JSON.parse(savedTranslations).slice(0, 10);
      } catch (e) {
        console.log('Could not load translation history:', e);
      }
    }
    
    // Setup event listeners
    mtSetupEventListeners();
    
    // Show initial example
    mtShowRandomExample();
    
    // Update trending display
    mtUpdateTrendingDisplay();
  }
  
  // Load trending phrases from various sources
  function mtLoadTrendingPhrases() {
    // Popular phrases (in reality, would fetch from API)
    mtTrendingPhrases = [
      { phrase: "Skibidi Ohio Rizz", translation: "TikTok trend humor with charisma", popularity: 95 },
      { phrase: "Gyatt in Ohio", translation: "Expression of surprise in Ohio context", popularity: 88 },
      { phrase: "Touch Grass", translation: "Go outside, touch reality", popularity: 82 },
      { phrase: "Main Character Energy", translation: "Acting like the protagonist", popularity: 79 },
      { phrase: "Delulu", translation: "Delusional", popularity: 76 },
      { phrase: "Cheugy", translation: "Trying too hard to be trendy", popularity: 72 },
      { phrase: "Mid", translation: "Mediocre", popularity: 85 },
      { phrase: "Goated", translation: "Greatest of all time", popularity: 80 },
      { phrase: "Based", translation: "Authentic and true", popularity: 78 },
      { phrase: "Rizz", translation: "Charisma", popularity: 92 }
    ];
  }
  
  // Setup event listeners
  function mtSetupEventListeners() {
    // Auto-translate on enter
    card.querySelector('#mt-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && e.ctrlKey) {
        mtTranslate(this);
      }
    });
    
    // Auto-select trending phrase
    card.querySelector('#mt-trending').addEventListener('click', function(e) {
      if (e.target.classList.contains('trending-phrase')) {
        card.querySelector('#mt-input').value = e.target.dataset.phrase;
        mtTranslate();
      }
    });
  }
  
  // Main translation function
  function mtTranslate(btn) {
    if (mtIsTranslating) return;
    
    const input = card.querySelector('#mt-input').value.trim();
    if (!input) {
      mtShowHint('Enter some internet speak to translate!', 'warning');
      return;
    }
    
    mtIsTranslating = true;
    const translateBtn = card.querySelector('#mt-translate-btn');
    const originalText = translateBtn.textContent;
    translateBtn.textContent = 'ğŸ” Translating...';
    
    // Simulate translation delay
    setTimeout(() => {
      try {
        const direction = card.querySelector('#mt-direction').value;
        const era = card.querySelector('#mt-era').value;
        
        let translation = '';
        let breakdown = [];
        let context = '';
        let examples = [];
        
        if (direction === 'internet2normal' || direction === 'genz2boomer' || direction === 'meme2academic') {
          // Translate from internet to normal
          const result = mtTranslateInternetToNormal(input, era);
          translation = result.translation;
          breakdown = result.breakdown;
          context = result.context;
          examples = result.examples;
          
          card.querySelector('#mt-output').value = translation;
          mtShowTranslationBreakdown(breakdown);
          mtShowContext(context);
          mtShowExamples(examples);
          
        } else if (direction === 'normal2internet' || direction === 'boomer2genz' || direction === 'academic2meme') {
          // Translate from normal to internet
          const result = mtTranslateNormalToInternet(input);
          translation = result.translation;
          breakdown = result.breakdown;
          context = result.context;
          examples = result.examples;
          
          card.querySelector('#mt-output').value = translation;
          mtShowTranslationBreakdown(breakdown);
          mtShowContext(context);
          mtShowExamples(examples);
        }
        
        // Add to history
        mtAddToHistory(input, translation, direction);
        
        // Save to localStorage
        mtSaveHistory();
        
        mtShowHint('âœ… Translation complete!', 'success');
        
      } catch (error) {
        console.error('Translation error:', error);
        mtShowHint('âŒ Translation failed. Try different text.', 'error');
      } finally {
        mtIsTranslating = false;
        translateBtn.textContent = originalText;
      }
    }, 500);
  }
  
  // Translate internet speak to normal English
  function mtTranslateInternetToNormal(text, eraFilter) {
    const words = text.toLowerCase().split(/\s+/);
    let translation = text;
    const breakdown = [];
    const contextList = [];
    const examplesList = [];
    
    // Check for each word/phrase in dictionary
    for (const [term, data] of Object.entries(mtDictionary)) {
      if (eraFilter !== 'all' && data.era !== eraFilter && data.era !== 'reverse') continue;
      
      const regex = new RegExp(`\\b${term}\\b`, 'gi');
      if (regex.test(text.toLowerCase())) {
        // Replace in translation
        translation = translation.replace(regex, data.meaning);
        
        // Add to breakdown
        breakdown.push({
          term: term,
          meaning: data.meaning,
          origin: data.origin,
          era: data.era
        });
        
        // Add context if available
        if (data.origin) {
          contextList.push(`${term}: Originated from ${data.origin}`);
        }
        
        // Add examples if available
        if (data.examples && data.examples.length > 0) {
          examplesList.push(...data.examples.map(ex => `"${ex}"`));
        }
      }
    }
    
    // If no dictionary matches found, use AI-like pattern recognition
    if (breakdown.length === 0) {
      translation = mtGuessTranslation(text);
      breakdown.push({
        term: "AI Translation",
        meaning: "Pattern-based guess",
        origin: "Meme Translator AI",
        era: "present"
      });
    }
    
    return {
      translation: translation,
      breakdown: breakdown,
      context: contextList.join(' â€¢ '),
      examples: examplesList.slice(0, 3)
    };
  }
  
  // Translate normal English to internet speak
  function mtTranslateNormalToInternet(text) {
    const words = text.toLowerCase().split(/\s+/);
    let translation = text;
    const breakdown = [];
    const contextList = [];
    const examplesList = [];
    
    // Try to match whole phrases first
    for (const [normal, data] of Object.entries(mtDictionary)) {
      if (data.era === 'reverse') {
        const regex = new RegExp(normal, 'gi');
        if (regex.test(text.toLowerCase())) {
          translation = text.replace(regex, data.meaning);
          breakdown.push({
            term: normal,
            meaning: data.meaning,
            origin: data.origin || "Internet adaptation",
            era: "reverse"
          });
        }
      }
    }
    
    // If no reverse matches, generate internet-style translation
    if (translation === text) {
      translation = mtGenerateInternetStyle(text);
      breakdown.push({
        term: "Style Transfer",
        meaning: "Converted to internet style",
        origin: "Meme Translator AI",
        era: "present"
      });
    }
    
    return {
      translation: translation,
      breakdown: breakdown,
      context: "Converted to current internet slang style",
      examples: ["Try translating back to see the difference!"]
    };
  }
  
  // Guess translation using pattern recognition
  function mtGuessTranslation(text) {
    const lowerText = text.toLowerCase();
    
    // Pattern matching for common internet phrases
    if (lowerText.includes('fr') && lowerText.includes('cap')) {
      return "I'm telling the truth, no lies";
    } else if (lowerText.includes('sus')) {
      return "Suspicious or questionable";
    } else if (lowerText.includes('ğŸ”¥') || lowerText.includes('fire')) {
      return "Amazing or excellent";
    } else if (lowerText.includes('ğŸ’€')) {
      return "Dying of laughter";
    } else if (lowerText.includes('ğŸ§¢')) {
      return "That's a lie";
    } else if (lowerText.includes('ratio')) {
      return "Getting more attention than expected";
    } else if (lowerText.includes('based')) {
      return "Authentic and true to oneself";
    } else if (lowerText.includes('mid')) {
      return "Mediocre or average";
    } else if (lowerText.includes('rizz')) {
      return "Charisma or charm";
    }
    
    // Default: add explanation
    return `${text} (likely internet slang requiring context)`;
  }
  
  // Generate internet-style translation
  function mtGenerateInternetStyle(text) {
    const phrases = text.split('. ').filter(p => p.length > 0);
    const internetPhrases = phrases.map(phrase => {
      // Add internet flavor
      if (phrase.toLowerCase().includes('amazing') || phrase.toLowerCase().includes('great')) {
        return phrase.replace(/amazing|great/gi, 'fire ğŸ”¥');
      } else if (phrase.toLowerCase().includes('funny') || phrase.toLowerCase().includes('hilarious')) {
        return phrase.replace(/funny|hilarious/gi, 'ğŸ’€');
      } else if (phrase.toLowerCase().includes('suspicious') || phrase.toLowerCase().includes('questionable')) {
        return phrase.replace(/suspicious|questionable/gi, 'sus');
      } else if (phrase.toLowerCase().includes('agree') || phrase.toLowerCase().includes('true')) {
        return phrase + ' fr fr';
      } else if (phrase.toLowerCase().includes('lie') || phrase.toLowerCase().includes('false')) {
        return phrase.replace(/lie|false/gi, 'cap ğŸ§¢');
      }
      return phrase + ' (no cap)';
    });
    
    return internetPhrases.join('. ');
  }
  
  // Show translation breakdown
  function mtShowTranslationBreakdown(breakdown) {
    const breakdownEl = card.querySelector('#mt-breakdown');
    
    if (breakdown.length === 0) {
      breakdownEl.innerHTML = '<span style="color:var(--muted);">No specific terms identified</span>';
      return;
    }
    
    let html = '';
    breakdown.forEach(item => {
      html += `
        <div style="margin-bottom:6px;padding:4px;border-left:3px solid #ff69b4;padding-left:8px;">
          <div><span style="color:#ff69b4;font-weight:600;">${item.term}</span> â†’ ${item.meaning}</div>
          <div style="font-size:11px;color:var(--muted);margin-top:2px;">${item.origin} â€¢ ${item.era}</div>
        </div>
      `;
    });
    
    breakdownEl.innerHTML = html;
  }
  
  // Show context
  function mtShowContext(context) {
    card.querySelector('#mt-context').textContent = context || 'No specific context available';
  }
  
  // Show examples
  function mtShowExamples(examples) {
    const examplesEl = card.querySelector('#mt-examples');
    
    if (!examples || examples.length === 0) {
      examplesEl.innerHTML = '<div style="color:var(--muted);">No examples available for this translation</div>';
      return;
    }
    
    let html = '<div style="color:#9370db;margin-bottom:8px;font-weight:600;">Example Usage:</div>';
    examples.forEach(example => {
      html += `<div style="margin-bottom:6px;color:var(--muted);">â€¢ "${example}"</div>`;
    });
    
    examplesEl.innerHTML = html;
  }
  
  // Update trending display
  function mtUpdateTrendingDisplay() {
    const trendingEl = card.querySelector('#mt-trending');
    
    let html = '';
    mtTrendingPhrases.forEach(phrase => {
      const width = phrase.popularity;
      html += `
        <button class="trending-phrase" 
                data-phrase="${phrase.phrase}"
                style="padding:6px 10px;background:linear-gradient(90deg, rgba(255,105,180,0.2) ${width}%, rgba(255,105,180,0.05) ${width}%);border:1px solid rgba(255,105,180,0.3);border-radius:6px;color:#ff69b4;cursor:pointer;font-size:12px;white-space:nowrap;">
          ${phrase.phrase}
        </button>
      `;
    });
    
    trendingEl.innerHTML = html;
  }
  
  // Generate meme (simulated)
  function mtGenerateMeme(btn) {
    const input = card.querySelector('#mt-input').value.trim();
    const output = card.querySelector('#mt-output').value.trim();
    
    if (!input && !output) {
      mtShowHint('Generate some translation first!', 'warning');
      return;
    }
    
    const memeText = output || input;
    const memeUrl = mtCreateMemeImage(memeText);
    
    // Show meme preview
    mtShowHint('ğŸ–¼ï¸ Meme generated! (Simulated)', 'success');
    
    // In a real implementation, this would create an actual meme image
    // For now, show a preview
    const hint = card.querySelector('#mt-hint');
    hint.innerHTML = `
      <div style="display:flex;align-items:center;gap:8px;">
        <div>ğŸ–¼ï¸ Meme Preview: "${memeText.substring(0, 30)}..."</div>
        <button onclick="mtDownloadMeme()" style="padding:4px 8px;background:rgba(147,112,219,0.2);border:1px solid rgba(147,112,219,0.4);border-radius:4px;color:#9370db;cursor:pointer;font-size:11px;">
          Download
        </button>
      </div>
    `;
  }
  
  // Show random example
  function mtShowRandomExample() {
    const terms = Object.keys(mtDictionary).filter(t => t.length > 2);
    const randomTerm = terms[Math.floor(Math.random() * terms.length)];
    const data = mtDictionary[randomTerm];
    
    if (data) {
      card.querySelector('#mt-input').value = randomTerm;
      card.querySelector('#mt-output').value = data.meaning;
      
      mtShowTranslationBreakdown([{
        term: randomTerm,
        meaning: data.meaning,
        origin: data.origin || 'Unknown',
        era: data.era || 'Various'
      }]);
      
      mtShowContext(`Originated from ${data.origin || 'internet culture'}`);
      
      if (data.examples && data.examples.length > 0) {
        mtShowExamples(data.examples);
      }
    }
  }
  
  // Random example function
  function mtRandomExample(btn) {
    mtShowRandomExample();
    mtShowHint('ğŸ² Loaded random example', 'info');
  }
  
  // Copy translation
  function mtCopy(btn) {
    const output = card.querySelector('#mt-output').value;
    if (!output.trim()) {
      mtShowHint('Nothing to copy', 'warning');
      return;
    }
    
    navigator.clipboard.writeText(output).then(() => {
      mtShowHint('âœ… Translation copied!', 'success');
    }).catch(err => {
      console.error('Copy failed:', err);
      mtShowHint('âŒ Failed to copy', 'error');
    });
  }
  
  // Add to history
  function mtAddToHistory(input, output, direction) {
    mtRecentTranslations.unshift({
      input: input,
      output: output,
      direction: direction,
      timestamp: new Date().toISOString()
    });
    
    // Keep only last 50 translations
    mtRecentTranslations = mtRecentTranslations.slice(0, 50);
  }
  
  // Save history
  function mtSaveHistory() {
    localStorage.setItem('mt-history', JSON.stringify(mtRecentTranslations));
  }
  
  // Create meme image URL (simulated)
  function mtCreateMemeImage(text) {
    // In a real implementation, this would use a meme API
    // For simulation, return a data URL
    return `data:image/svg+xml,${encodeURIComponent(`
      <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#1a1a2e"/>
        <rect x="10" y="10" width="380" height="280" fill="#16213e" rx="10"/>
        <text x="200" y="100" font-family="Arial" font-size="24" fill="#ff69b4" text-anchor="middle">${text.substring(0, 50)}</text>
        <text x="200" y="200" font-family="Arial" font-size="16" fill="#9370db" text-anchor="middle">- Meme Translator -</text>
      </svg>
    `)}`;
  }
  
  // Download meme (simulated)
  function mtDownloadMeme() {
    mtShowHint('ğŸ“¥ Meme downloaded (simulated)', 'success');
  }
  
  // Show hint message
  function mtShowHint(message, type = 'info') {
    const hint = card.querySelector('#mt-hint');
    hint.textContent = message;
    hint.style.color = type === 'error' ? '#ff4d4d' : 
                      type === 'warning' ? '#ffcc00' : 
                      type === 'success' ? '#39ff14' : 
                      '#ff69b4';
    
    // Auto-clear after delay
    clearTimeout(hint.timeout);
    hint.timeout = setTimeout(() => {
      if (hint.textContent === message) {
        hint.textContent = '';
      }
    }, 3000);
  }
  
  // Expose functions globally (with prefix)
  window.mtTranslate = mtTranslate;
  window.mtGenerateMeme = mtGenerateMeme;
  window.mtRandomExample = mtRandomExample;
  window.mtCopy = mtCopy;
  window.mtDownloadMeme = mtDownloadMeme;
  
  // Initialize when ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', mtInit);
  } else {
    mtInit();
  }
  
})();
</script>

<style>
/* Meme Translator specific styles */
#meme-translator-title {
  color: var(--accent);
  margin-top: 0;
  text-shadow: 0 0 10px rgba(45,212,255,0.3);
}

/* Trending phrase hover effect */
.trending-phrase {
  transition: all 0.2s !important;
}

.trending-phrase:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(255,105,180,0.2) !important;
}

/* Scrollbar styling */
#mt-suggestions-container::-webkit-scrollbar {
  width: 8px;
}

#mt-suggestions-container::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 4px;
}

#mt-suggestions-container::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #ff69b4, #9370db);
  border-radius: 4px;
}

/* Animation for translation */
@keyframes mtPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.mt-translating {
  animation: mtPulse 0.5s ease-in-out infinite;
}

/* Responsive design */
@media (max-width: 768px) {
  div[style*="grid-template-columns:1fr 1fr"] {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  textarea {
    min-height: 100px !important;
  }
  
  #mt-trending {
    justify-content: center !important;
  }
  
  .trending-phrase {
    flex: 1 !important;
    min-width: 120px !important;
    text-align: center !important;
  }
}

@media (max-width: 480px) {
  .actions {
    flex-direction: column !important;
  }
  
  .actions button {
    width: 100% !important;
    margin-bottom: 8px;
  }
  
  #mt-trending {
    flex-direction: column !important;
  }
  
  .trending-phrase {
    width: 100% !important;
  }
}

/* Gradient borders */
#mt-input:focus {
  border-image: linear-gradient(45deg, #ff69b4, #9370db) 1 !important;
  animation: borderGlow 2s ease-in-out infinite;
}

@keyframes borderGlow {
  0%, 100% { border-color: rgba(255,105,180,0.3); }
  50% { border-color: rgba(147,112,219,0.6); }
}
</style>
