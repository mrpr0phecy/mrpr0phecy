<h2 id="ohms-law-title" style="margin-top:0;">Ohm's Law Calculator</h2>

<form aria-describedby="ohms-law-desc">
  <p id="ohms-law-desc" class="small">Calculate electrical values using Ohm's Law (V = I × R). Enter any two values.</p>

  <div class="row">
    <div class="field">
      <label for="ol-voltage">Voltage (V)</label>
      <input id="ol-voltage" type="number" step="any" placeholder="e.g. 230" />
    </div>
    <div class="field">
      <label for="ol-current">Current (A)</label>
      <input id="ol-current" type="number" step="any" placeholder="e.g. 5" />
    </div>
    <div class="field">
      <label for="ol-resistance">Resistance (Ω)</label>
      <input id="ol-resistance" type="number" step="any" placeholder="e.g. 46" />
    </div>
    <div class="field">
      <label for="ol-power">Power (W)</label>
      <input id="ol-power" type="number" step="any" placeholder="e.g. 1150" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="olCalc(this)">Calculate</button>
    <button type="button" class="secondary" onclick="olReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Voltage</div>
    <div class="value" id="ol-voltage-res">–</div>
  </div>
  <div class="result">
    <div class="label">Current</div>
    <div class="value" id="ol-current-res">–</div>
  </div>
  <div class="result">
    <div class="label">Resistance</div>
    <div class="value" id="ol-resistance-res">–</div>
  </div>
  <div class="result">
    <div class="label">Power</div>
    <div class="value" id="ol-power-res">–</div>
  </div>
</div>

<details class="small" style="margin-top:12px;">
  <summary>How it works</summary>
  <p>
    Ohm's Law formulas:<br>
    V = I × R (Voltage = Current × Resistance)<br>
    I = V ÷ R (Current = Voltage ÷ Resistance)<br>
    R = V ÷ I (Resistance = Voltage ÷ Current)<br>
    P = V × I (Power = Voltage × Current)<br>
    P = V² ÷ R = I² × R
  </p>
</details>

<script>
function olCalc(btn) {
  const card = btn.closest('.card');
  const voltage = parseFloat(card.querySelector('#ol-voltage').value) || 0;
  const current = parseFloat(card.querySelector('#ol-current').value) || 0;
  const resistance = parseFloat(card.querySelector('#ol-resistance').value) || 0;
  const power = parseFloat(card.querySelector('#ol-power').value) || 0;

  // Count filled fields
  const filledFields = [voltage, current, resistance, power].filter(val => val > 0).length;
  
  if (filledFields < 2) {
    // Not enough values to calculate
    card.querySelector('#ol-voltage-res').textContent = "–";
    card.querySelector('#ol-current-res').textContent = "–";
    card.querySelector('#ol-resistance-res').textContent = "–";
    card.querySelector('#ol-power-res').textContent = "–";
    return;
  }

  let calcVoltage = voltage;
  let calcCurrent = current;
  let calcResistance = resistance;
  let calcPower = power;

  // Calculate missing values based on what's provided
  if (voltage > 0 && current > 0) {
    // V and I provided: Calculate R and P
    calcResistance = voltage / current;
    calcPower = voltage * current;
  } else if (voltage > 0 && resistance > 0) {
    // V and R provided: Calculate I and P
    calcCurrent = voltage / resistance;
    calcPower = voltage * calcCurrent;
  } else if (current > 0 && resistance > 0) {
    // I and R provided: Calculate V and P
    calcVoltage = current * resistance;
    calcPower = calcVoltage * current;
  } else if (voltage > 0 && power > 0) {
    // V and P provided: Calculate I and R
    calcCurrent = power / voltage;
    calcResistance = voltage / calcCurrent;
  } else if (current > 0 && power > 0) {
    // I and P provided: Calculate V and R
    calcVoltage = power / current;
    calcResistance = calcVoltage / current;
  } else if (resistance > 0 && power > 0) {
    // R and P provided: Calculate V and I
    calcVoltage = Math.sqrt(power * resistance);
    calcCurrent = calcVoltage / resistance;
  }

  // Update results display
  card.querySelector('#ol-voltage-res').textContent = calcVoltage.toFixed(2) + " V";
  card.querySelector('#ol-current-res').textContent = calcCurrent.toFixed(2) + " A";
  card.querySelector('#ol-resistance-res').textContent = calcResistance.toFixed(2) + " Ω";
  card.querySelector('#ol-power-res').textContent = calcPower.toFixed(2) + " W";
}

function olReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#ol-voltage-res').textContent = "–";
  card.querySelector('#ol-current-res').textContent = "–";
  card.querySelector('#ol-resistance-res').textContent = "–";
  card.querySelector('#ol-power-res').textContent = "–";
}
</script>
