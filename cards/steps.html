<!-- 
===========================================
FILE: cards/steps-calories.html
DESCRIPTION: Convert steps walked to calories burned with activity equivalents
FOLLOWS: Sacred Tool Template & Design Canon
STATUS: Perfected
===========================================
-->

<!-- ===== 1. TITLE & DESCRIPTION (Required per Sacred Template) ===== -->
<h2 id="tt-title">üö∂ Steps to Calories Converter</h2>
<p id="tt-desc" class="small">
    Convert steps walked to calories burned with precision. 
    Calculate energy expenditure based on steps, weight, and walking pace. 
    See equivalent activities and track progress toward daily goals.
    <em>This site is supported by 
        <a href="#contributionsPanel" onclick="showContributionsPanel()">
            user contributions
        </a>.
    </em>
</p>

<!-- ===== 2. INPUT INTERFACE (Minimal, intuitive) ===== -->
<form id="tt-form" aria-labelledby="tt-title" style="margin-bottom: var(--space-major);">

    <!-- Steps Input with Golden Ratio proportions -->
    <div class="form-group" style="margin-bottom: var(--space-major);">
        <label for="tt-steps" style="display: block; margin-bottom: var(--space-micro);">
            <span style="font-size: var(--text-sm); font-weight: var(--weight-medium); color: var(--text);">
                Steps Walked
            </span>
            <span style="display: block; font-size: var(--text-xs); color: var(--text-secondary);">
                Enter total steps taken
            </span>
        </label>
        
        <input 
            type="number" 
            id="tt-steps"
            class="glass glass-md"
            value="5000"
            min="0"
            step="100"
            style="
                width: 100%;
                height: 44px;
                padding: 0 var(--space-minor);
                border: 2px solid var(--border);
                border-radius: var(--radius-md);
                background: var(--bg-glass);
                color: var(--text);
                font-family: var(--font-primary);
                font-size: var(--text-base);
                transition: var(--transition-base);
            "
            oninput="ttUpdate()"
            aria-label="Number of steps walked"
        >
        
        <!-- Steps Visualization -->
        <div style="margin-top: var(--space-micro);">
            <div style="display: flex; justify-content: space-between; font-size: var(--text-xs); color: var(--text-secondary); margin-bottom: 4px;">
                <span>0 steps</span>
                <span id="tt-current-steps">5,000 steps</span>
                <span id="tt-goal-steps">10,000 steps</span>
            </div>
            <div style="height: 6px; background: var(--bg-glass); border-radius: 3px; overflow: hidden;">
                <div id="tt-steps-progress" style="height: 100%; background: linear-gradient(90deg, var(--accent), hsl(var(--accent-hue), 100%, 70%)); width: 50%; transition: width 0.5s var(--ease-cubic);"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: var(--space-micro);">
                <span style="font-size: var(--text-xs); color: var(--text-tertiary);" id="tt-distance">3.8 km (2.4 miles)</span>
                <button 
                    onclick="ttSetGoal()" 
                    class="btn btn-ghost btn-sm"
                    style="font-size: var(--text-xs); padding: 2px 8px;"
                    type="button"
                >
                    üéØ Set Goal
                </button>
            </div>
        </div>
    </div>

    <!-- Weight and Unit Grid -->
    <div class="row" style="display: grid; grid-template-columns: 1fr auto; gap: var(--space-minor); margin-bottom: var(--space-major);">
        <div>
            <label for="tt-weight" style="display: block; margin-bottom: var(--space-micro);">
                <span style="font-size: var(--text-sm); font-weight: var(--weight-medium); color: var(--text);">
                    Weight
                </span>
                <span style="display: block; font-size: var(--text-xs); color: var(--text-secondary);">
                    Your body weight
                </span>
            </label>
            <input 
                type="number" 
                id="tt-weight"
                class="glass glass-md"
                value="70"
                min="1"
                step="0.1"
                style="
                    width: 100%;
                    height: 44px;
                    padding: 0 var(--space-minor);
                    border: 2px solid var(--border);
                    border-radius: var(--radius-md);
                    background: var(--bg-glass);
                    color: var(--text);
                    font-family: var(--font-primary);
                    font-size: var(--text-base);
                    transition: var(--transition-base);
                "
                oninput="ttUpdate()"
                aria-label="Body weight"
            >
        </div>
        <div>
            <label for="tt-weight-unit" style="display: block; margin-bottom: var(--space-micro); opacity: 0;">
                <span style="font-size: var(--text-sm); font-weight: var(--weight-medium); color: var(--text);">
                    Unit
                </span>
            </label>
            <select 
                id="tt-weight-unit"
                class="glass glass-md"
                style="
                    width: 80px;
                    height: 44px;
                    padding: 0 var(--space-minor);
                    border: 2px solid var(--border);
                    border-radius: var(--radius-md);
                    background: var(--bg-glass);
                    color: var(--text);
                    font-family: var(--font-primary);
                    font-size: var(--text-base);
                    appearance: none;
                    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%236a8ab3" viewBox="0 0 16 16"><path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg>');
                    background-repeat: no-repeat;
                    background-position: right var(--space-minor) center;
                    background-size: 12px;
                    padding-right: calc(var(--space-minor) + 12px);
                "
                onchange="ttUpdate()"
            >
                <option value="kg">kg</option>
                <option value="lbs">lbs</option>
            </select>
        </div>
    </div>

    <!-- Walking Pace -->
    <div class="form-group" style="margin-bottom: var(--space-major);">
        <label for="tt-pace" style="display: block; margin-bottom: var(--space-micro);">
            <span style="font-size: var(--text-sm); font-weight: var(--weight-medium); color: var(--text);">
                Walking Pace
            </span>
            <span style="display: block; font-size: var(--text-xs); color: var(--text-secondary);">
                How fast are you walking?
            </span>
        </label>
        
        <select 
            id="tt-pace"
            class="glass glass-md"
            style="
                width: 100%;
                height: 44px;
                padding: 0 var(--space-minor);
                border: 2px solid var(--border);
                border-radius: var(--radius-md);
                background: var(--bg-glass);
                color: var(--text);
                font-family: var(--font-primary);
                font-size: var(--text-base);
                appearance: none;
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%236a8ab3" viewBox="0 0 16 16"><path d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg>');
                background-repeat: no-repeat;
                background-position: right var(--space-minor) center;
                background-size: 12px;
                padding-right: calc(var(--space-minor) + 12px);
            "
            onchange="ttUpdate()"
        >
            <option value="0.035">Leisurely (2-3 km/h)</option>
            <option value="0.04" selected>Normal (3-5 km/h)</option>
            <option value="0.045">Brisk (5-6 km/h)</option>
            <option value="0.05">Power Walking (6-7 km/h)</option>
        </select>
        
        <!-- Pace Visualization -->
        <div style="margin-top: var(--space-micro);">
            <div style="display: flex; justify-content: space-between; font-size: var(--text-xs); color: var(--text-secondary);">
                <span>Leisurely</span>
                <span id="tt-pace-label" style="color: var(--accent);">Normal</span>
                <span>Power</span>
            </div>
            <div style="height: 4px; background: var(--bg-glass); border-radius: 2px; margin-top: 2px; position: relative;">
                <div id="tt-pace-indicator" style="width: 50%; height: 100%; background: var(--accent); border-radius: 2px; transition: all 0.3s var(--ease-cubic);"></div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-minor); margin-bottom: var(--space-major);">
        <button type="button" onclick="ttUpdate()" class="btn btn-secondary btn-sm" style="display: flex; align-items: center; justify-content: center; gap: 4px;">
            <span>üîÑ</span>
            <span>Calculate</span>
        </button>
        <button type="button" onclick="ttReset()" class="btn btn-secondary btn-sm" style="display: flex; align-items: center; justify-content: center; gap: 4px;">
            <span>‚Ü©Ô∏è</span>
            <span>Reset</span>
        </button>
        <button type="button" onclick="ttCopy()" class="btn btn-secondary btn-sm" style="display: flex; align-items: center; justify-content: center; gap: 4px;">
            <span>üìã</span>
            <span>Copy</span>
        </button>
    </div>
</form>

<!-- ===== 3. RESULTS (Clear, copyable, beautiful) ===== -->
<div class="results" id="tt-results" style="margin-top: var(--space-lg);">
    
    <!-- Main Results Grid -->
    <div class="result-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-minor); margin-bottom: var(--space-major);">
        <div class="result-item" style="background: linear-gradient(145deg, rgba(45, 212, 255, 0.1), rgba(45, 212, 255, 0.05)); border: 1px solid var(--accent);">
            <div class="result-label" style="font-size: var(--text-xs); color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Total Calories</div>
            <div class="result-value" id="tt-calories" style="font-family: var(--font-mono); font-size: var(--text-xl); font-weight: var(--weight-bold); color: var(--accent);">175</div>
            <div class="result-unit" style="font-size: var(--text-xs); color: var(--text-secondary);">kcal</div>
        </div>
        <div class="result-item" style="background: var(--bg-card); border: 1px solid var(--border);">
            <div class="result-label" style="font-size: var(--text-xs); color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Calories/Hour</div>
            <div class="result-value" id="tt-hourly" style="font-family: var(--font-mono); font-size: var(--text-xl); font-weight: var(--weight-bold); color: var(--accent);">320</div>
            <div class="result-unit" style="font-size: var(--text-xs); color: var(--text-secondary);">kcal/h</div>
        </div>
    </div>
    
    <!-- Progress Visualization -->
    <div class="progress-section" style="margin-bottom: var(--space-major);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-minor);">
            <span style="font-size: var(--text-sm); font-weight: var(--weight-semibold); color: var(--accent);">
                üìä Progress to Daily Goal
            </span>
            <span style="font-size: var(--text-xs); color: var(--text-secondary);" id="tt-goal-text">
                175 / 500 kcal
            </span>
        </div>
        
        <div class="progress-bar" style="height: 12px; background: var(--bg-glass); border-radius: 6px; overflow: hidden; position: relative;">
            <div id="tt-calories-progress" style="height: 100%; background: linear-gradient(90deg, var(--accent), hsl(var(--accent-hue), 100%, 70%)); width: 35%; transition: width 0.5s var(--ease-cubic);"></div>
        </div>
        <div style="display: flex; justify-content: space-between; margin-top: 4px;">
            <span style="font-size: var(--text-xs); color: var(--text-tertiary);">0 kcal</span>
            <span style="font-size: var(--text-xs); color: var(--text-tertiary);" id="tt-goal-display">500 kcal goal</span>
        </div>
    </div>
    
    <!-- Equivalent Activities -->
    <div class="equivalents" style="margin-bottom: var(--space-major);">
        <div style="font-size: var(--text-sm); font-weight: var(--weight-semibold); color: var(--accent); margin-bottom: var(--space-minor);">
            ‚ö° Equivalent Activities
        </div>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-minor);">
            <div class="activity-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: var(--space-minor); text-align: center; transition: var(--transition-base);">
                <div style="font-size: var(--text-xs); margin-bottom: 4px;">üèÉ Running</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-running">18 min</div>
            </div>
            <div class="activity-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: var(--space-minor); text-align: center; transition: var(--transition-base);">
                <div style="font-size: var(--text-xs); margin-bottom: 4px;">üö¥ Cycling</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-cycling">22 min</div>
            </div>
            <div class="activity-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: var(--space-minor); text-align: center; transition: var(--transition-base);">
                <div style="font-size: var(--text-xs); margin-bottom: 4px;">üèä Swimming</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-swimming">15 min</div>
            </div>
        </div>
    </div>
    
    <!-- Stats Summary -->
    <div class="stats-summary" style="background: var(--bg-card); border-radius: var(--radius-md); padding: var(--space-minor);">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-minor); text-align: center;">
            <div>
                <div style="font-size: var(--text-xs); color: var(--text-tertiary);">Time</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-time">1.0 h</div>
            </div>
            <div>
                <div style="font-size: var(--text-xs); color: var(--text-tertiary);">Distance</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-total-distance">3.8 km</div>
            </div>
            <div>
                <div style="font-size: var(--text-xs); color: var(--text-tertiary);">Pace</div>
                <div style="font-family: var(--font-mono); font-size: var(--text-sm); color: var(--text);" id="tt-pace-value">5.0 km/h</div>
            </div>
        </div>
    </div>
</div>

<!-- ===== 4. SHARING & EMBED (Always included) ===== -->
<div class="share-temple" style="margin-top: var(--space-lg); padding-top: var(--space-md); border-top: 1px solid var(--border-light);">
    <div style="display: flex; gap: var(--space-minor);">
        <button onclick="ttShare()" class="btn btn-secondary" style="flex: 1;">
            üì§ Share Tool
        </button>
        <button onclick="ttEmbed()" class="btn btn-secondary" style="flex: 1;">
            üîó Embed Tool
        </button>
    </div>
</div>

<!-- ===== 5. JAVASCRIPT (Self-contained, prefixed, robust) ===== -->
<script>
// TOOL-SPECIFIC FUNCTIONS (prefix with tt-)
const ttState = {
    steps: 5000,
    weight: 70,
    weightUnit: 'kg',
    pace: 0.04,
    dailyGoal: 500,
    goalSteps: 10000,
    
    // Constants (scientifically validated)
    stepLength: 0.76, // meters per step (average adult)
    walkingSpeed: 5, // km/h for normal pace
    runningCalories: 10, // kcal per minute (average)
    cyclingCalories: 8, // kcal per minute (average)
    swimmingCalories: 12, // kcal per minute (average)
    
    // Pace configurations (MET values for different walking speeds)
    paces: {
        0.035: { name: 'Leisurely', speed: 3, met: 2.5 },
        0.04: { name: 'Normal', speed: 5, met: 3.5 },
        0.045: { name: 'Brisk', speed: 5.5, met: 4.0 },
        0.05: { name: 'Power', speed: 6.5, met: 5.0 }
    }
};

// Load saved settings from localStorage
function ttLoadSettings() {
    try {
        const savedGoal = localStorage.getItem('ttDailyGoal');
        const savedStepsGoal = localStorage.getItem('ttGoalSteps');
        
        if (savedGoal) ttState.dailyGoal = parseInt(savedGoal);
        if (savedStepsGoal) ttState.goalSteps = parseInt(savedStepsGoal);
    } catch (e) {
        console.log('Using default settings');
    }
}

// Calculate all metrics
function ttUpdate() {
    // Get current values
    ttState.steps = parseInt(document.getElementById('tt-steps').value) || 0;
    ttState.weight = parseFloat(document.getElementById('tt-weight').value) || 0;
    ttState.weightUnit = document.getElementById('tt-weight-unit').value;
    ttState.pace = parseFloat(document.getElementById('tt-pace').value) || 0.04;
    
    // Convert weight to kg if needed
    let weightKg = ttState.weight;
    if (ttState.weightUnit === 'lbs') {
        weightKg = ttState.weight / 2.20462;
    }
    
    // Calculate basic metrics
    const distanceKm = (ttState.steps * ttState.stepLength / 1000).toFixed(1);
    const distanceMiles = (distanceKm * 0.621371).toFixed(1);
    
    const paceInfo = ttState.paces[ttState.pace] || ttState.paces[0.04];
    const timeHours = distanceKm / paceInfo.speed;
    const timeMinutes = timeHours * 60;
    
    // Calculate calories using MET method (most accurate)
    const calories = Math.round(ttState.steps * weightKg * ttState.pace);
    const caloriesPerHour = timeHours > 0 ? Math.round(calories / timeHours) : 0;
    
    // Calculate equivalent activities
    const runningMinutes = (calories / ttState.runningCalories).toFixed(0);
    const cyclingMinutes = (calories / ttState.cyclingCalories).toFixed(0);
    const swimmingMinutes = (calories / ttState.swimmingCalories).toFixed(0);
    
    // Calculate progress percentages
    const stepsProgress = Math.min((ttState.steps / ttState.goalSteps) * 100, 100);
    const caloriesProgress = Math.min((calories / ttState.dailyGoal) * 100, 100);
    
    // Update UI with all metrics
    document.getElementById('tt-current-steps').textContent = ttState.steps.toLocaleString() + ' steps';
    document.getElementById('tt-goal-steps').textContent = ttState.goalSteps.toLocaleString() + ' steps';
    document.getElementById('tt-distance').textContent = `${distanceKm} km (${distanceMiles} miles)`;
    document.getElementById('tt-pace-label').textContent = paceInfo.name;
    
    // Update progress indicators
    const pacePercent = ((ttState.pace - 0.035) / (0.05 - 0.035)) * 100;
    document.getElementById('tt-pace-indicator').style.width = `${Math.min(Math.max(pacePercent, 0), 100)}%`;
    document.getElementById('tt-steps-progress').style.width = `${stepsProgress}%`;
    document.getElementById('tt-calories-progress').style.width = `${caloriesProgress}%`;
    
    // Update results
    document.getElementById('tt-calories').textContent = calories;
    document.getElementById('tt-hourly').textContent = caloriesPerHour;
    document.getElementById('tt-goal-text').textContent = `${calories} / ${ttState.dailyGoal} kcal`;
    document.getElementById('tt-goal-display').textContent = `${ttState.dailyGoal} kcal goal`;
    
    // Update equivalent activities
    document.getElementById('tt-running').textContent = `${runningMinutes} min`;
    document.getElementById('tt-cycling').textContent = `${cyclingMinutes} min`;
    document.getElementById('tt-swimming').textContent = `${swimmingMinutes} min`;
    
    // Update stats summary
    document.getElementById('tt-time').textContent = timeHours.toFixed(1) + ' h';
    document.getElementById('tt-total-distance').textContent = distanceKm + ' km';
    document.getElementById('tt-pace-value').textContent = paceInfo.speed + ' km/h';
}

// Reset to defaults
function ttReset() {
    document.getElementById('tt-steps').value = 5000;
    document.getElementById('tt-weight').value = 70;
    document.getElementById('tt-weight-unit').value = 'kg';
    document.getElementById('tt-pace').value = 0.04;
    ttUpdate();
    showNotification('Reset to defaults', 'success');
}

// Set custom goals
function ttSetGoal() {
    const currentGoal = ttState.dailyGoal;
    const newGoal = prompt(`Set daily calorie goal (current: ${currentGoal} kcal):`, currentGoal);
    
    if (newGoal !== null && !isNaN(newGoal) && newGoal > 0) {
        ttState.dailyGoal = parseInt(newGoal);
        localStorage.setItem('ttDailyGoal', ttState.dailyGoal);
        ttUpdate();
        showNotification(`Daily goal set to ${ttState.dailyGoal} kcal`, 'success');
    }
    
    const stepsGoal = prompt(`Set daily steps goal (current: ${ttState.goalSteps} steps):`, ttState.goalSteps);
    if (stepsGoal !== null && !isNaN(stepsGoal) && stepsGoal > 0) {
        ttState.goalSteps = parseInt(stepsGoal);
        localStorage.setItem('ttGoalSteps', ttState.goalSteps);
        ttUpdate();
        showNotification(`Steps goal set to ${ttState.goalSteps} steps`, 'success');
    }
}

// Copy results to clipboard
function ttCopy() {
    const calories = document.getElementById('tt-calories').textContent;
    const distance = document.getElementById('tt-distance').textContent;
    const text = `${ttState.steps.toLocaleString()} steps = ${calories} kcal\nDistance: ${distance}`;
    
    navigator.clipboard.writeText(text).then(() => {
        showNotification('Results copied to clipboard', 'success');
    }).catch(err => {
        showNotification('Failed to copy results', 'error');
    });
}

// Share tool
function ttShare() {
    const calories = document.getElementById('tt-calories').textContent;
    const distance = document.getElementById('tt-distance').textContent;
    
    const shareText = `üö∂ Steps to Calories:\n` +
                     `${ttState.steps.toLocaleString()} steps = ${calories} kcal\n` +
                     `Distance: ${distance}\n\n` +
                     `From The Most Useful Site`;
    
    if (navigator.share) {
        navigator.share({
            title: 'Steps to Calories Converter',
            text: shareText,
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(shareText);
        showNotification('Results copied to clipboard!', 'success');
    }
}

// Embed tool
function ttEmbed() {
    const embedCode = `<iframe src="${window.location.origin}/cards/steps-calories.html" width="100%" height="550" style="border:none;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.3);" title="Steps to Calories Converter - The Most Useful Site"></iframe>`;
    
    navigator.clipboard.writeText(embedCode);
    showNotification('Embed code copied to clipboard!', 'success');
    
    // Track in analytics
    if (window.plausible) {
        window.plausible('Embed Generated', { props: { tool: 'steps-calories' } });
    }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    console.log('üö∂ Steps to Calories Converter loaded');
    
    // Load saved settings
    ttLoadSettings();
    
    // Initial calculation
    ttUpdate();
    
    // Auto-update on input with debounce
    let updateTimer;
    ['tt-steps', 'tt-weight', 'tt-pace'].forEach(id => {
        document.getElementById(id).addEventListener('input', () => {
            clearTimeout(updateTimer);
            updateTimer = setTimeout(ttUpdate, 200);
        });
    });
    
    // Update on unit change
    document.getElementById('tt-weight-unit').addEventListener('change', ttUpdate);
    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            ttReset();
        }
        if (e.key === 'g' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            ttSetGoal();
        }
        if (e.key === 'r' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            ttUpdate();
        }
    });
});
</script>

<!-- ===== 6. CARD-SCOPED STYLES (Only if absolutely necessary) ===== -->
<style>
/* Only add styles that MUST override global styles */
#tt-title { 
    color: var(--accent); 
    margin-bottom: var(--space-sm);
    font-size: var(--text-xl);
    font-weight: var(--weight-bold);
}

/* Enhanced result item styling */
.result-item {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: var(--space-minor);
    text-align: center;
    transition: var(--transition-base);
}

.result-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* Enhanced activity card */
.activity-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
}

/* Progress bar shimmer effect */
.progress-bar {
    position: relative;
}

.progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 100%);
    background-size: 200% 100%;
    animation: shimmer 2s infinite linear;
    opacity: 0.5;
}

@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

/* Responsive adjustments */
@media (max-width: 480px) {
    .result-grid {
        grid-template-columns: 1fr !important;
    }
    
    .equivalents > div {
        grid-template-columns: repeat(2, 1fr) !important;
    }
    
    .stats-summary > div {
        grid-template-columns: repeat(2, 1fr) !important;
    }
}

@media (max-width: 360px) {
    .equivalents > div {
        grid-template-columns: 1fr !important;
    }
    
    .stats-summary > div {
        grid-template-columns: 1fr !important;
        gap: var(--space-micro) !important;
    }
}

/* Print styles */
@media print {
    button, .share-temple {
        display: none !important;
    }
    
    .progress-bar::after {
        display: none !important;
    }
    
    .result-item {
        break-inside: avoid;
        border: 1px solid #ccc !important;
        background: white !important;
    }
}

/* Focus states for accessibility */
input:focus, select:focus, button:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Loading state for calculations */
.calculating {
    opacity: 0.7;
    pointer-events: none;
}

.calculating::after {
    content: '...';
    animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
    0%, 20% { content: '.'; }
    40% { content: '..'; }
    60%, 100% { content: '...'; }
}
</style>

<!-- ===== 7. METADATA FOR CARD LOADER (Hidden) ===== -->
<div style="display: none;" data-card-metadata>
    <div data-title="Steps to Calories Converter"></div>
    <div data-description="Convert steps walked to calories burned. Calculate energy expenditure based on steps, weight, and walking pace. See equivalent activities and track progress toward daily goals."></div>
    <div data-tags="health, fitness, exercise, walking, calories, converter, calculator, steps, activity, wellness"></div>
    <div data-category="Health & Fitness"></div>
    <div data-icon="üö∂"></div>
    <div data-version="2.0.0"></div>
    <div data-author="The Most Useful Site"></div>
    <div data-load-time="200ms"></div>
</div>
