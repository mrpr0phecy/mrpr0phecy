<h2>Smart Garden Task Planner</h2>
<p class="description">Plan, track, and grow your perfect garden with AI-powered suggestions and smart scheduling.</p>

<form class="tool-form">
  <!-- Dashboard Stats -->
  <div class="dashboard-section">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-icon">üìÖ</span>
          <span class="stat-label">Today</span>
        </div>
        <div class="stat-value" id="gtc-today-count">0</div>
        <div class="stat-trend">tasks due</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-icon">‚úÖ</span>
          <span class="stat-label">Completed</span>
        </div>
        <div class="stat-value" id="gtc-completed-count">0</div>
        <div class="stat-trend">tasks done</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-icon">‚ö†Ô∏è</span>
          <span class="stat-label">Urgent</span>
        </div>
        <div class="stat-value" id="gtc-urgent-count">0</div>
        <div class="stat-trend">needs attention</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-icon">üìä</span>
          <span class="stat-label">Progress</span>
        </div>
        <div class="stat-value" id="gtc-completion">0%</div>
        <div class="stat-trend">overall</div>
      </div>
    </div>
  </div>

  <!-- Task Input Form -->
  <div class="input-section">
    <h3 class="section-title">
      <span class="section-icon">‚ûï</span>
      Add New Garden Task
    </h3>
    
    <div class="form-grid">
      <div class="field full-width">
        <label for="gtc-task" class="field-label">Task Description</label>
        <input type="text" id="gtc-task" class="input" placeholder="e.g., Prune roses, Water tomatoes, Harvest basil..." />
      </div>
      
      <div class="field">
        <label for="gtc-category" class="field-label">Category</label>
        <select id="gtc-category" class="select">
          <option value="watering">üíß Watering</option>
          <option value="fertilizing">üå± Fertilizing</option>
          <option value="pruning">‚úÇÔ∏è Pruning</option>
          <option value="planting">ü™¥ Planting</option>
          <option value="harvesting">ü•ï Harvesting</option>
          <option value="weeding">üåø Weeding</option>
          <option value="pest-control">üêõ Pest Control</option>
          <option value="maintenance">üîß Maintenance</option>
          <option value="planning">üìã Planning</option>
        </select>
      </div>
      
      <div class="field">
        <label for="gtc-priority" class="field-label">Priority</label>
        <select id="gtc-priority" class="select">
          <option value="low">üü¢ Low (Within 2 weeks)</option>
          <option value="medium" selected>üü° Medium (This week)</option>
          <option value="high">üî¥ High (Today/Tomorrow)</option>
          <option value="urgent">‚ö†Ô∏è Urgent (Today!)</option>
        </select>
      </div>
      
      <div class="field">
        <label for="gtc-due-date" class="field-label">Due Date</label>
        <input type="date" id="gtc-due-date" class="input" />
      </div>
      
      <div class="field">
        <label for="gtc-plant" class="field-label">Plant/Area</label>
        <input type="text" id="gtc-plant" class="input" placeholder="Tomatoes, Roses, Lawn..." />
      </div>
    </div>
    
    <div class="field">
      <label for="gtc-notes" class="field-label">Notes & Details</label>
      <textarea id="gtc-notes" class="textarea" rows="2" placeholder="Special instructions, weather considerations, reminders..."></textarea>
    </div>
    
    <!-- Quick Presets -->
    <div class="presets-section">
      <div class="presets-title">Quick Add Common Tasks:</div>
      <div class="presets-grid">
        <button type="button" class="preset-btn" onclick="quickAdd('Water vegetable garden', 'watering', 'medium')">
          <span class="preset-icon">üíß</span>
          <span class="preset-text">Water Veggies</span>
        </button>
        <button type="button" class="preset-btn" onclick="quickAdd('Prune rose bushes', 'pruning', 'medium')">
          <span class="preset-icon">‚úÇÔ∏è</span>
          <span class="preset-text">Prune Roses</span>
        </button>
        <button type="button" class="preset-btn" onclick="quickAdd('Fertilize tomatoes', 'fertilizing', 'high')">
          <span class="preset-icon">üå±</span>
          <span class="preset-text">Fertilize</span>
        </button>
        <button type="button" class="preset-btn" onclick="quickAdd('Harvest fresh herbs', 'harvesting', 'low')">
          <span class="preset-icon">ü•ï</span>
          <span class="preset-text">Harvest Herbs</span>
        </button>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" class="btn primary" onclick="addTask()">
        <span class="btn-icon">üå±</span>
        Add Gardening Task
      </button>
    </div>
  </div>
</form>

<!-- Task Management Section -->
<div class="task-section">
  <div class="section-header">
    <h3 class="section-title">
      <span class="section-icon">üìã</span>
      Your Garden Tasks
    </h3>
    
    <div class="filter-controls">
      <select id="gtc-filter" onchange="filterTasks()" class="select small">
        <option value="all">All Tasks</option>
        <option value="today">Due Today</option>
        <option value="pending">Pending</option>
        <option value="completed">Completed</option>
        <option value="urgent">Urgent</option>
        <option value="overdue">Overdue</option>
      </select>
      
      <button type="button" class="btn secondary small" onclick="clearCompleted()">
        Clear Completed
      </button>
    </div>
  </div>
  
  <div class="task-list" id="gtc-output">
    <div class="empty-state">
      <div class="empty-icon">üåø</div>
      <div class="empty-title">No Gardening Tasks</div>
      <div class="empty-subtitle">Add your first task to get started!</div>
    </div>
  </div>
  
  <div class="task-stats">
    <div class="task-stat">
      <span class="stat-label">Total:</span>
      <span id="gtc-total-count" class="stat-value">0</span> tasks
    </div>
    <div class="task-stat">
      <span class="stat-label">Due today:</span>
      <span id="gtc-due-today" class="stat-value">0</span>
    </div>
    <div class="task-stat">
      <span class="stat-label">Overdue:</span>
      <span id="gtc-overdue-count" class="stat-value urgent">0</span>
    </div>
  </div>
</div>

<!-- Gardening Tips & AI Suggestions -->
<div class="ai-section">
  <div class="section-header">
    <h3 class="section-title">
      <span class="section-icon">ü§ñ</span>
      AI Garden Assistant
    </h3>
    <button type="button" class="btn secondary small" onclick="generateTip()">
      New Suggestion
    </button>
  </div>
  
  <div class="ai-suggestion" id="gtc-gardening-tip">
    <div class="suggestion-icon">üí°</div>
    <div class="suggestion-content">
      <div class="suggestion-title">Smart Watering Tip</div>
      <div class="suggestion-text">Water plants in the early morning to reduce evaporation and prevent fungal diseases.</div>
    </div>
  </div>
  
  <div class="seasonal-checklist">
    <div class="checklist-title">This Month's Checklist:</div>
    <div class="checklist-grid" id="gtc-seasonal-checklist">
      <!-- Will be populated by JS -->
    </div>
  </div>
</div>

<!-- Progress & Analytics -->
<div class="analytics-section">
  <h3 class="section-title">
    <span class="section-icon">üìä</span>
    Garden Analytics
  </h3>
  
  <div class="category-progress">
    <div class="progress-grid">
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Watering</span>
          <span class="progress-value" id="gtc-cat-watering">0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="gtc-bar-watering"></div>
        </div>
      </div>
      
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Pruning</span>
          <span class="progress-value" id="gtc-cat-pruning">0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="gtc-bar-pruning"></div>
        </div>
      </div>
      
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Fertilizing</span>
          <span class="progress-value" id="gtc-cat-fertilizing">0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="gtc-bar-fertilizing"></div>
        </div>
      </div>
      
      <div class="progress-item">
        <div class="progress-header">
          <span class="progress-label">Harvesting</span>
          <span class="progress-value" id="gtc-cat-harvesting">0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="gtc-bar-harvesting"></div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="monthly-summary">
    <div class="summary-item">
      <span class="summary-label">Tasks this month:</span>
      <span class="summary-value" id="gtc-month-tasks">0</span>
    </div>
    <div class="summary-item">
      <span class="summary-label">Completed:</span>
      <span class="summary-value" id="gtc-month-completed">0</span>
    </div>
    <div class="summary-item">
      <span class="summary-label">Efficiency:</span>
      <span class="summary-value" id="gtc-efficiency">0%</span>
    </div>
  </div>
</div>

<!-- Export & Share -->
<div class="export-section">
  <h3 class="section-title">
    <span class="section-icon">üì§</span>
    Export & Share
  </h3>
  
  <div class="export-buttons">
    <button type="button" class="btn" onclick="exportTasks()">
      <span class="btn-icon">üì•</span>
      Export Tasks
    </button>
    <button type="button" class="btn" onclick="shareProgress()">
      <span class="btn-icon">üì§</span>
      Share Progress
    </button>
    <button type="button" class="btn secondary" onclick="printTasks()">
      <span class="btn-icon">üñ®Ô∏è</span>
      Print List
    </button>
  </div>
</div>

<script>
/* Garden Task Planner - Enhanced Version */
class GardenPlanner {
  constructor() {
    this.tasks = [];
    this.currentFilter = 'all';
    this.gardeningTips = [
      "Water plants deeply but less frequently to encourage strong root growth.",
      "Companion planting: Grow basil with tomatoes to improve flavor and repel pests.",
      "Mulch your garden beds to retain moisture and suppress weeds.",
      "Rotate crops each year to prevent soil nutrient depletion and reduce pests.",
      "Test soil pH every 2-3 years; most vegetables prefer 6.0-7.0 pH.",
      "Use rainwater when possible - it's free of chlorine and better for plants.",
      "Prune fruit trees in late winter while they're dormant for best results.",
      "Attract pollinators by planting native flowers near your vegetable garden.",
      "Keep a garden journal to track what works and plan for next season.",
      "Use organic compost to improve soil structure and nutrient content.",
      "Stagger plantings of vegetables like lettuce and carrots for continuous harvest.",
      "Control slugs with beer traps or crushed eggshells around plants.",
      "Start seeds indoors 6-8 weeks before last frost date for early harvest.",
      "Use vertical space with trellises for cucumbers, beans, and peas.",
      "Harvest herbs in the morning when oil concentrations are highest."
    ];
    
    this.seasonalTasks = [
      ["Plan garden layout", "Order seeds", "Start indoor seeds", "Clean tools"],
      ["Prune fruit trees", "Start cool-season crops", "Prepare soil", "Test soil"],
      ["Plant peas & spinach", "Transplant seedlings", "Divide perennials", "Weed"],
      ["Plant tomatoes", "Direct sow beans", "Fertilize spring bulbs", "Mulch"],
      ["Stake tall plants", "Plant warm crops", "Thin seedlings", "Water regularly"],
      ["Harvest berries", "Monitor pests", "Weed consistently", "Deadhead flowers"],
      ["Harvest vegetables", "Water deeply", "Prune herbs", "Check for diseases"],
      ["Plant fall crops", "Harvest garlic", "Save seeds", "Fertilize"],
      ["Harvest pumpkins", "Plant cover crops", "Clean beds", "Divide irises"],
      ["Harvest root crops", "Plant garlic", "Rake leaves for compost", "Winterize"],
      ["Protect tender plants", "Clean tools", "Test soil pH", "Order catalogs"],
      ["Review garden notes", "Plan next year", "Maintain compost", "Prune grapes"]
    ];
    
    this.init();
  }
  
  init() {
    // Load saved tasks
    this.loadTasks();
    
    // Set up date picker
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('gtc-due-date').value = today;
    document.getElementById('gtc-due-date').min = today;
    
    // Load seasonal tips
    this.loadSeasonalTips();
    
    // Render tasks
    this.renderTasks();
    
    // Update stats
    this.updateStats();
    
    // Set up event listeners
    this.setupEventListeners();
    
    console.log('Garden Planner initialized');
  }
  
  setupEventListeners() {
    // Enter key to add task
    document.getElementById('gtc-task').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        this.addTask();
      }
    });
    
    // Due date change validation
    document.getElementById('gtc-due-date').addEventListener('change', function() {
      const today = new Date().toISOString().split('T')[0];
      if (this.value < today) {
        this.value = today;
      }
    });
    
    // Auto-suggest plant names
    document.getElementById('gtc-plant').addEventListener('input', function() {
      const commonPlants = ['Tomatoes', 'Roses', 'Basil', 'Lettuce', 'Carrots', 'Peppers', 'Cucumbers', 'Zucchini', 'Strawberries', 'Raspberries'];
      const value = this.value.toLowerCase();
      // Could add dropdown suggestions here
    });
  }
  
  loadTasks() {
    const saved = localStorage.getItem('gardenTasks');
    if (saved) {
      try {
        this.tasks = JSON.parse(saved);
        // Ensure all tasks have required fields
        this.tasks = this.tasks.map(task => ({
          id: task.id || Date.now().toString(),
          text: task.text || '',
          category: task.category || 'watering',
          priority: task.priority || 'medium',
          dueDate: task.dueDate || new Date().toISOString().split('T')[0],
          plant: task.plant || '',
          notes: task.notes || '',
          completed: task.completed || false,
          createdAt: task.createdAt || new Date().toISOString()
        }));
      } catch (e) {
        console.log('Failed to load tasks:', e);
        this.tasks = [];
      }
    }
  }
  
  saveTasks() {
    localStorage.setItem('gardenTasks', JSON.stringify(this.tasks));
  }
  
  loadSeasonalTips() {
    const currentMonth = new Date().getMonth();
    const seasonalTasks = this.seasonalTasks[currentMonth];
    const container = document.getElementById('gtc-seasonal-checklist');
    
    container.innerHTML = seasonalTasks.map(task => `
      <div class="checklist-item">
        <span class="checklist-icon">‚úì</span>
        <span class="checklist-text">${task}</span>
      </div>
    `).join('');
  }
  
  quickAdd(task, category, priority) {
    document.getElementById('gtc-task').value = task;
    document.getElementById('gtc-category').value = category;
    document.getElementById('gtc-priority').value = priority;
    document.getElementById('gtc-task').focus();
  }
  
  addTask() {
    const taskInput = document.getElementById('gtc-task');
    const taskText = taskInput.value.trim();
    
    if (!taskText) {
      // Show error animation
      taskInput.classList.add('error');
      setTimeout(() => taskInput.classList.remove('error'), 1000);
      return;
    }
    
    const newTask = {
      id: Date.now().toString(),
      text: taskText,
      category: document.getElementById('gtc-category').value,
      priority: document.getElementById('gtc-priority').value,
      dueDate: document.getElementById('gtc-due-date').value,
      plant: document.getElementById('gtc-plant').value.trim(),
      notes: document.getElementById('gtc-notes').value.trim(),
      completed: false,
      createdAt: new Date().toISOString()
    };
    
    this.tasks.unshift(newTask);
    this.saveTasks();
    this.renderTasks();
    this.updateStats();
    
    // Clear form
    taskInput.value = '';
    document.getElementById('gtc-plant').value = '';
    document.getElementById('gtc-notes').value = '';
    taskInput.focus();
    
    // Show success animation
    const addBtn = document.querySelector('[onclick="addTask()"]');
    addBtn.innerHTML = '<span class="btn-icon">‚úÖ</span> Task Added!';
    addBtn.classList.add('success');
    
    setTimeout(() => {
      addBtn.innerHTML = '<span class="btn-icon">üå±</span> Add Gardening Task';
      addBtn.classList.remove('success');
    }, 1500);
  }
  
  renderTasks() {
    const container = document.getElementById('gtc-output');
    
    if (this.tasks.length === 0) {
      container.innerHTML = `
        <div class="empty-state">
          <div class="empty-icon">üåø</div>
          <div class="empty-title">No Gardening Tasks</div>
          <div class="empty-subtitle">Add your first task to get started!</div>
        </div>
      `;
      return;
    }
    
    // Filter tasks
    let filteredTasks = this.tasks;
    const today = new Date().toISOString().split('T')[0];
    
    switch (this.currentFilter) {
      case 'today':
        filteredTasks = filteredTasks.filter(task => task.dueDate === today);
        break;
      case 'pending':
        filteredTasks = filteredTasks.filter(task => !task.completed);
        break;
      case 'completed':
        filteredTasks = filteredTasks.filter(task => task.completed);
        break;
      case 'urgent':
        filteredTasks = filteredTasks.filter(task => 
          !task.completed && (task.priority === 'urgent' || task.priority === 'high')
        );
        break;
      case 'overdue':
        filteredTasks = filteredTasks.filter(task => 
          !task.completed && task.dueDate && task.dueDate < today
        );
        break;
    }
    
    // Render tasks
    container.innerHTML = filteredTasks.map(task => {
      const isToday = task.dueDate === today;
      const isOverdue = !task.completed && task.dueDate && task.dueDate < today;
      
      const categoryIcons = {
        watering: 'üíß',
        fertilizing: 'üå±',
        pruning: '‚úÇÔ∏è',
        planting: 'ü™¥',
        harvesting: 'ü•ï',
        weeding: 'üåø',
        'pest-control': 'üêõ',
        maintenance: 'üîß',
        planning: 'üìã'
      };
      
      const priorityColors = {
        low: '#4caf50',
        medium: '#ff9800',
        high: '#f44336',
        urgent: '#d32f2f'
      };
      
      return `
        <div class="task-card ${task.completed ? 'completed' : ''} ${isOverdue ? 'overdue' : ''}">
          <div class="task-card-header">
            <div class="task-checkbox">
              <input type="checkbox" ${task.completed ? 'checked' : ''} 
                     onchange="toggleTask('${task.id}')" />
            </div>
            
            <div class="task-content">
              <div class="task-title ${task.completed ? 'completed' : ''}">
                <span class="task-category">${categoryIcons[task.category] || 'üå±'}</span>
                ${task.text}
              </div>
              
              ${task.plant || task.dueDate || task.notes ? `
                <div class="task-details">
                  ${task.plant ? `<div class="detail-item">
                    <span class="detail-icon">üåø</span>
                    <span class="detail-text">${task.plant}</span>
                  </div>` : ''}
                  
                  ${task.dueDate ? `<div class="detail-item ${isOverdue ? 'overdue' : isToday ? 'today' : ''}">
                    <span class="detail-icon">üìÖ</span>
                    <span class="detail-text">${this.formatDate(task.dueDate)} ${isOverdue ? '(Overdue)' : isToday ? '(Today)' : ''}</span>
                  </div>` : ''}
                  
                  ${task.notes ? `<div class="detail-item">
                    <span class="detail-icon">üìù</span>
                    <span class="detail-text" title="${task.notes}">${task.notes.substring(0, 30)}${task.notes.length > 30 ? '...' : ''}</span>
                  </div>` : ''}
                </div>
              ` : ''}
            </div>
            
            <div class="task-actions">
              <div class="priority-indicator" style="background: ${priorityColors[task.priority]}">
                ${task.priority}
              </div>
              <button onclick="deleteTask('${task.id}')" class="task-action-btn">
                üóëÔ∏è
              </button>
            </div>
          </div>
          
          <div class="task-card-footer">
            <div class="task-meta">
              <span class="meta-item">Created: ${this.formatDate(task.createdAt, true)}</span>
              ${task.completed ? `<span class="meta-item">‚úÖ Completed</span>` : ''}
            </div>
          </div>
        </div>
      `;
    }).join('');
  }
  
  formatDate(dateStr, includeTime = false) {
    const date = new Date(dateStr);
    if (includeTime) {
      return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    return date.toLocaleDateString();
  }
  
  toggleTask(taskId) {
    const task = this.tasks.find(t => t.id === taskId);
    if (task) {
      task.completed = !task.completed;
      this.saveTasks();
      this.renderTasks();
      this.updateStats();
    }
  }
  
  deleteTask(taskId) {
    if (confirm('Delete this task?')) {
      this.tasks = this.tasks.filter(t => t.id !== taskId);
      this.saveTasks();
      this.renderTasks();
      this.updateStats();
    }
  }
  
  filterTasks() {
    this.currentFilter = document.getElementById('gtc-filter').value;
    this.renderTasks();
  }
  
  clearCompleted() {
    if (confirm('Clear all completed tasks?')) {
      this.tasks = this.tasks.filter(task => !task.completed);
      this.saveTasks();
      this.renderTasks();
      this.updateStats();
    }
  }
  
  updateStats() {
    const today = new Date().toISOString().split('T')[0];
    const currentMonth = new Date().getMonth();
    const currentYear = new Date().getFullYear();
    
    const totalTasks = this.tasks.length;
    const completedTasks = this.tasks.filter(t => t.completed).length;
    const todayTasks = this.tasks.filter(t => t.dueDate === today && !t.completed).length;
    const urgentTasks = this.tasks.filter(t => 
      !t.completed && (t.priority === 'urgent' || (t.dueDate && t.dueDate <= today))
    ).length;
    const overdueTasks = this.tasks.filter(t => 
      !t.completed && t.dueDate && t.dueDate < today
    ).length;
    
    // Monthly stats
    const monthTasks = this.tasks.filter(t => {
      const taskDate = new Date(t.createdAt);
      return taskDate.getMonth() === currentMonth && taskDate.getFullYear() === currentYear;
    }).length;
    
    const monthCompleted = this.tasks.filter(t => {
      const taskDate = new Date(t.createdAt);
      return t.completed && taskDate.getMonth() === currentMonth && taskDate.getFullYear() === currentYear;
    }).length;
    
    // Update counts
    document.getElementById('gtc-today-count').textContent = todayTasks;
    document.getElementById('gtc-completed-count').textContent = completedTasks;
    document.getElementById('gtc-urgent-count').textContent = urgentTasks;
    document.getElementById('gtc-total-count').textContent = totalTasks;
    document.getElementById('gtc-due-today').textContent = todayTasks;
    document.getElementById('gtc-overdue-count').textContent = overdueTasks;
    document.getElementById('gtc-month-tasks').textContent = monthTasks;
    document.getElementById('gtc-month-completed').textContent = monthCompleted;
    
    // Completion percentage
    const completionPercent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
    document.getElementById('gtc-completion').textContent = completionPercent + '%';
    
    // Efficiency (tasks completed vs created this month)
    const efficiency = monthTasks > 0 ? Math.round((monthCompleted / monthTasks) * 100) : 0;
    document.getElementById('gtc-efficiency').textContent = efficiency + '%';
    
    // Category stats
    const categories = ['watering', 'pruning', 'fertilizing', 'harvesting'];
    let maxCount = 0;
    
    categories.forEach(cat => {
      const count = this.tasks.filter(t => t.category === cat).length;
      maxCount = Math.max(maxCount, count);
      
      document.getElementById(`gtc-cat-${cat}`).textContent = count;
      
      // Update progress bars
      const percentage = maxCount > 0 ? (count / maxCount) * 100 : 0;
      const bar = document.getElementById(`gtc-bar-${cat}`);
      if (bar) {
        bar.style.width = percentage + '%';
      }
    });
  }
  
  exportTasks() {
    const exportData = {
      exportedAt: new Date().toISOString(),
      version: '1.0',
      totalTasks: this.tasks.length,
      completedTasks: this.tasks.filter(t => t.completed).length,
      tasks: this.tasks
    };
    
    const dataStr = JSON.stringify(exportData, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
    
    const link = document.createElement('a');
    link.setAttribute('href', dataUri);
    link.setAttribute('download', `garden-tasks-${new Date().toISOString().split('T')[0]}.json`);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
  
  shareProgress() {
    const totalTasks = this.tasks.length;
    const completedTasks = this.tasks.filter(t => t.completed).length;
    const completionPercent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
    
    const shareText = `üå± My garden progress: ${completedTasks}/${totalTasks} tasks completed (${completionPercent}%)!`;
    
    if (navigator.share) {
      navigator.share({
        title: 'My Garden Progress',
        text: shareText,
        url: window.location.href
      });
    } else {
      navigator.clipboard.writeText(shareText).then(() => {
        // Show notification
        const originalTitle = document.title;
        document.title = '‚úÖ Copied to clipboard!';
        setTimeout(() => document.title = originalTitle, 2000);
      });
    }
  }
  
  printTasks() {
    const printWindow = window.open('', '_blank');
    const printContent = `
      <!DOCTYPE html>
      <html>
      <head>
        <title>My Garden Tasks</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { color: #2a5c2a; }
          .task { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
          .completed { background: #f0fff4; }
          .urgent { border-left: 4px solid red; }
          .meta { font-size: 12px; color: #666; }
        </style>
      </head>
      <body>
        <h1>üå± My Garden Tasks</h1>
        <p>Printed on ${new Date().toLocaleDateString()}</p>
        ${this.tasks.map(task => `
          <div class="task ${task.completed ? 'completed' : ''} ${task.priority === 'urgent' ? 'urgent' : ''}">
            <h3>${task.completed ? '‚úÖ ' : ''}${task.text}</h3>
            <div class="meta">
              Category: ${task.category} | 
              Priority: ${task.priority} | 
              Due: ${task.dueDate} | 
              Plant: ${task.plant || 'N/A'}
            </div>
            ${task.notes ? `<p><em>${task.notes}</em></p>` : ''}
          </div>
        `).join('')}
      </body>
      </html>
    `;
    
    printWindow.document.write(printContent);
    printWindow.document.close();
    printWindow.focus();
    setTimeout(() => printWindow.print(), 500);
  }
  
  generateTip() {
    const tipElement = document.querySelector('.suggestion-text');
    let newTip;
    const currentTip = tipElement.textContent;
    
    do {
      newTip = this.gardeningTips[Math.floor(Math.random() * this.gardeningTips.length)];
    } while (newTip === currentTip && this.gardeningTips.length > 1);
    
    tipElement.textContent = newTip;
    
    // Visual feedback
    const container = document.querySelector('.ai-suggestion');
    container.style.opacity = '0.5';
    setTimeout(() => container.style.opacity = '1', 300);
  }
}

// Global instance
let gardenPlanner;

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
  gardenPlanner = new GardenPlanner();
});

// Global helper functions for inline event handlers
function quickAdd(task, category, priority) {
  gardenPlanner.quickAdd(task, category, priority);
}

function addTask() {
  gardenPlanner.addTask();
}

function toggleTask(taskId) {
  gardenPlanner.toggleTask(taskId);
}

function deleteTask(taskId) {
  gardenPlanner.deleteTask(taskId);
}

function filterTasks() {
  gardenPlanner.filterTasks();
}

function clearCompleted() {
  gardenPlanner.clearCompleted();
}

function exportTasks() {
  gardenPlanner.exportTasks();
}

function shareProgress() {
  gardenPlanner.shareProgress();
}

function printTasks() {
  gardenPlanner.printTasks();
}

function generateTip() {
  gardenPlanner.generateTip();
}
</script>

<style>
/* Garden Planner Specific Styles */
.dashboard-section {
  background: linear-gradient(135deg, rgba(45, 212, 255, 0.1), rgba(57, 255, 20, 0.05));
  border-radius: 16px;
  padding: 20px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
}

.stat-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 20px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  text-align: center;
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-4px);
  border-color: rgba(45, 212, 255, 0.4);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.stat-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}

.stat-icon {
  font-size: 20px;
}

.stat-label {
  font-size: 14px;
  color: #9ccbe0;
  font-weight: 500;
}

.stat-value {
  font-size: 2.5em;
  font-weight: 700;
  color: #2dd4ff;
  margin: 8px 0;
  line-height: 1;
}

.stat-trend {
  font-size: 12px;
  color: #9ccbe0;
  opacity: 0.8;
}

/* Input Section */
.input-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.section-title {
  font-size: 1.2em;
  font-weight: 600;
  color: #e6faff;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.section-icon {
  font-size: 1.4em;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 20px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.field.full-width {
  grid-column: 1 / -1;
}

.field-label {
  font-size: 0.9em;
  font-weight: 500;
  color: #9ccbe0;
}

.input, .select, .textarea {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(45, 212, 255, 0.3);
  border-radius: 8px;
  padding: 12px;
  color: #e6faff;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.3s ease;
}

.input:focus, .select:focus, .textarea:focus {
  outline: none;
  border-color: #2dd4ff;
  box-shadow: 0 0 0 3px rgba(45, 212, 255, 0.2);
}

.input.error {
  border-color: #ff4444;
  animation: shake 0.5s ease;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.textarea {
  resize: vertical;
  min-height: 80px;
}

/* Presets Section */
.presets-section {
  margin: 20px 0;
}

.presets-title {
  font-size: 0.9em;
  color: #9ccbe0;
  margin-bottom: 12px;
  font-weight: 500;
}

.presets-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
}

.preset-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(45, 212, 255, 0.2);
  border-radius: 8px;
  padding: 12px;
  color: #e6faff;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.preset-btn:hover {
  background: rgba(45, 212, 255, 0.1);
  border-color: rgba(45, 212, 255, 0.4);
  transform: translateY(-2px);
}

.preset-icon {
  font-size: 20px;
}

.preset-text {
  font-weight: 500;
}

/* Buttons */
.form-actions {
  margin-top: 20px;
}

.btn {
  padding: 14px 24px;
  background: rgba(45, 212, 255, 0.1);
  border: 1px solid rgba(45, 212, 255, 0.3);
  border-radius: 8px;
  color: #2dd4ff;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.btn:hover {
  background: rgba(45, 212, 255, 0.2);
  border-color: rgba(45, 212, 255, 0.5);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn.primary {
  background: linear-gradient(135deg, #2dd4ff, #1ea7d8);
  color: #0b0f1a;
  width: 100%;
}

.btn.primary:hover {
  background: linear-gradient(135deg, #1ea7d8, #2dd4ff);
}

.btn.secondary {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.2);
  color: #e6faff;
}

.btn.small {
  padding: 8px 16px;
  font-size: 12px;
}

.btn.success {
  background: rgba(57, 255, 20, 0.2);
  border-color: rgba(57, 255, 20, 0.4);
  color: #39ff14;
}

.btn-icon {
  font-size: 16px;
}

/* Task Section */
.task-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.filter-controls {
  display: flex;
  gap: 12px;
  align-items: center;
}

.task-list {
  min-height: 200px;
  max-height: 400px;
  overflow-y: auto;
  margin-bottom: 20px;
}

.task-list::-webkit-scrollbar {
  width: 6px;
}

.task-list::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.task-list::-webkit-scrollbar-thumb {
  background: rgba(45, 212, 255, 0.3);
  border-radius: 3px;
}

.task-list::-webkit-scrollbar-thumb:hover {
  background: rgba(45, 212, 255, 0.5);
}

/* Task Cards */
.task-card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(45, 212, 255, 0.2);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 12px;
  transition: all 0.3s ease;
}

.task-card:hover {
  border-color: rgba(45, 212, 255, 0.4);
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.task-card.completed {
  background: rgba(57, 255, 20, 0.05);
  border-color: rgba(57, 255, 20, 0.2);
}

.task-card.overdue {
  border-left: 4px solid #ff4444;
}

.task-card-header {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.task-checkbox {
  margin-top: 4px;
}

.task-checkbox input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: #2dd4ff;
}

.task-content {
  flex: 1;
}

.task-title {
  font-size: 16px;
  font-weight: 600;
  color: #e6faff;
  margin-bottom: 8px;
  line-height: 1.4;
}

.task-title.completed {
  color: #9ccbe0;
  text-decoration: line-through;
}

.task-category {
  font-size: 18px;
  margin-right: 8px;
}

.task-details {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  font-size: 13px;
}

.detail-item {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #9ccbe0;
}

.detail-item.overdue {
  color: #ff4444;
}

.detail-item.today {
  color: #ffcc00;
}

.detail-icon {
  font-size: 14px;
  opacity: 0.8;
}

.task-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.priority-indicator {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.task-action-btn {
  background: rgba(255, 77, 77, 0.1);
  border: 1px solid rgba(255, 77, 77, 0.3);
  border-radius: 6px;
  color: #ff4d4d;
  padding: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s ease;
}

.task-action-btn:hover {
  background: rgba(255, 77, 77, 0.2);
  transform: scale(1.1);
}

.task-card-footer {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 12px;
}

.task-meta {
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: #9ccbe0;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: #9ccbe0;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.empty-title {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 8px;
  color: #e6faff;
}

.empty-subtitle {
  font-size: 14px;
  opacity: 0.8;
}

/* Task Stats */
.task-stats {
  display: flex;
  justify-content: space-between;
  padding-top: 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  font-size: 14px;
  color: #9ccbe0;
}

.task-stat {
  display: flex;
  align-items: center;
  gap: 6px;
}

.stat-value {
  font-weight: 600;
  color: #2dd4ff;
}

.stat-value.urgent {
  color: #ff4444;
}

/* AI Section */
.ai-section {
  background: linear-gradient(135deg, rgba(157, 78, 221, 0.05), rgba(45, 212, 255, 0.05));
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(157, 78, 221, 0.2);
  margin-bottom: 24px;
}

.ai-suggestion {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 20px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  display: flex;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 20px;
  transition: all 0.3s ease;
}

.ai-suggestion:hover {
  border-color: rgba(45, 212, 255, 0.4);
  transform: translateY(-2px);
}

.suggestion-icon {
  font-size: 24px;
  color: #2dd4ff;
  flex-shrink: 0;
}

.suggestion-content {
  flex: 1;
}

.suggestion-title {
  font-size: 16px;
  font-weight: 600;
  color: #e6faff;
  margin-bottom: 8px;
}

.suggestion-text {
  font-size: 14px;
  color: #9ccbe0;
  line-height: 1.5;
}

.seasonal-checklist {
  margin-top: 20px;
}

.checklist-title {
  font-size: 14px;
  font-weight: 500;
  color: #9ccbe0;
  margin-bottom: 12px;
}

.checklist-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.checklist-item {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #e6faff;
}

.checklist-icon {
  color: #39ff14;
  font-weight: bold;
}

/* Analytics Section */
.analytics-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
  margin-bottom: 24px;
}

.category-progress {
  margin: 20px 0;
}

.progress-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.progress-item {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.progress-label {
  font-size: 14px;
  font-weight: 500;
  color: #e6faff;
}

.progress-value {
  font-size: 24px;
  font-weight: 700;
  color: #2dd4ff;
}

.progress-bar {
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #2dd4ff, #39ff14);
  border-radius: 4px;
  transition: width 1s ease;
}

.monthly-summary {
  display: flex;
  justify-content: space-between;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  font-size: 14px;
  color: #9ccbe0;
}

.summary-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.summary-value {
  font-weight: 600;
  color: #2dd4ff;
}

/* Export Section */
.export-section {
  background: rgba(45, 212, 255, 0.05);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(45, 212, 255, 0.2);
}

.export-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .form-grid {
    grid-template-columns: 1fr;
  }
  
  .presets-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .filter-controls {
    width: 100%;
  }
  
  .task-stats, .monthly-summary {
    flex-direction: column;
    gap: 12px;
    align-items: flex-start;
  }
  
  .progress-grid {
    grid-template-columns: 1fr;
  }
  
  .export-buttons {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .presets-grid {
    grid-template-columns: 1fr;
  }
  
  .checklist-grid {
    grid-template-columns: 1fr;
  }
}
</style>
