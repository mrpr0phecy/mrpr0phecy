<h2 id="plant-encyclopedia-title">üåø Plant Encyclopedia (Live)</h2>

<form aria-describedby="plant-encyclopedia-desc">
    <p id="plant-encyclopedia-desc" class="small">
        Comprehensive plant database with real-time data from multiple sources.
        <span style="color:var(--accent)">Search for any plant to get detailed information.</span>
    </p>
    
    <!-- SEARCH INPUT -->
    <div class="field" style="margin-bottom:16px;">
        <label for="pe-query" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
            Plant Name
        </label>
        <div style="position:relative;">
            <input id="pe-query" type="text" placeholder="e.g., Tomato, Oak Tree, Basil, Rose, Fern..." 
                   style="width:100%;padding:12px 12px 12px 40px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;"
                   autocomplete="off" />
            <div style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--accent);">üîç</div>
        </div>
    </div>
    
    <!-- QUICK SUGGESTIONS -->
    <div style="margin-bottom:20px;">
        <div style="color:rgba(230,250,255,0.8);margin-bottom:8px;font-size:14px;">Quick Search:</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button type="button" onclick="peQuickSearch('Tomato')" class="quick-plant" style="padding:6px 10px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:6px;color:#ff4d4d;cursor:pointer;font-size:12px;">üçÖ Tomato</button>
            <button type="button" onclick="peQuickSearch('Rose')" class="quick-plant" style="padding:6px 10px;background:rgba(255,20,147,0.1);border:1px solid rgba(255,20,147,0.3);border-radius:6px;color:#ff1493;cursor:pointer;font-size:12px;">üåπ Rose</button>
            <button type="button" onclick="peQuickSearch('Basil')" class="quick-plant" style="padding:6px 10px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">üåø Basil</button>
            <button type="button" onclick="peQuickSearch('Oak')" class="quick-plant" style="padding:6px 10px;background:rgba(139,69,19,0.1);border:1px solid rgba(139,69,19,0.3);border-radius:6px;color:#8b4513;cursor:pointer;font-size:12px;">üå≥ Oak</button>
            <button type="button" onclick="peQuickSearch('Lavender')" class="quick-plant" style="padding:6px 10px;background:rgba(148,0,211,0.1);border:1px solid rgba(148,0,211,0.3);border-radius:6px;color:#9400d3;cursor:pointer;font-size:12px;">üíú Lavender</button>
        </div>
    </div>
    
    <!-- ADVANCED FILTERS -->
    <div style="margin-bottom:20px;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;border:1px solid rgba(255,255,255,0.1);">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;font-size:14px;">Data Sources:</div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:8px;">
            <label style="display:flex;align-items:center;gap:6px;padding:6px 8px;background:rgba(45,212,255,0.1);border-radius:6px;cursor:pointer;">
                <input type="checkbox" id="pe-source-wiki" checked style="accent-color:var(--accent);"> Wikipedia
            </label>
            <label style="display:flex;align-items:center;gap:6px;padding:6px 8px;background:rgba(57,255,20,0.1);border-radius:6px;cursor:pointer;">
                <input type="checkbox" id="pe-source-usda" checked style="accent-color:var(--accent);"> USDA Plants
            </label>
            <label style="display:flex;align-items:center;gap:6px;padding:6px 8px;background:rgba(157,78,221,0.1);border-radius:6px;cursor:pointer;">
                <input type="checkbox" id="pe-source-openfarm" checked style="accent-color:var(--accent);"> OpenFarm
            </label>
            <label style="display:flex;align-items:center;gap:6px;padding:6px 8px;background:rgba(255,165,0,0.1);border-radius:6px;cursor:pointer;">
                <input type="checkbox" id="pe-source-trefle" checked style="accent-color:var(--accent);"> Trefle.io
            </label>
        </div>
    </div>
    
    <!-- ACTIONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="peSearch()" 
                style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(57,255,20,0.2), rgba(57,255,20,0.1));border:1px solid rgba(57,255,20,0.4);border-radius:8px;color:#39ff14;cursor:pointer;font-weight:600;">
            üå± Search Plant
        </button>
        <button type="button" onclick="peReset()"
                style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
            Reset
        </button>
        <button type="button" onclick="peSavePlant()" id="pe-save-btn"
                style="padding:12px 16px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:8px;color:#ffa500;cursor:pointer;display:none;">
            üíæ Save
        </button>
    </div>
</form>

<!-- LOADING INDICATOR -->
<div id="pe-loading" style="display:none;text-align:center;padding:20px;">
    <div style="display:inline-block;width:40px;height:40px;border:3px solid rgba(57,255,20,0.3);border-top-color:var(--accent);border-radius:50%;animation:pe-spin 1s linear infinite;"></div>
    <div style="color:var(--accent);margin-top:12px;">Searching multiple databases...</div>
</div>

<!-- RESULTS -->
<div class="results" aria-live="polite" style="margin-top:16px;">
    <div id="pe-output" style="min-height:200px;">
        <div style="text-align:center;padding:40px 20px;color:rgba(230,250,255,0.6);">
            <div style="font-size:48px;margin-bottom:16px;">üåø</div>
            <h3 style="color:var(--accent);margin-bottom:8px;">Plant Encyclopedia</h3>
            <p>Search for any plant to get comprehensive information from multiple botanical databases.</p>
        </div>
    </div>
</div>

<!-- RECENT SEARCHES -->
<div id="pe-recent" style="display:none;margin-top:20px;padding:16px;background:rgba(255,255,255,0.03);border-radius:8px;border:1px solid rgba(255,255,255,0.1);">
    <div style="color:var(--accent);font-weight:500;margin-bottom:12px;">üìö Recently Viewed Plants</div>
    <div id="pe-recent-list" style="display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;">
        <!-- Recent plants will be added here -->
    </div>
</div>

<script>
/* plant-encyclopedia.html
   - Comprehensive plant database with multiple sources
   - Scoped with pe- prefix
*/

// Configuration
const peConfig = {
    sources: {
        wikipedia: true,
        usda: true,
        openfarm: true,
        trefle: true
    },
    recentPlants: [],
    savedPlants: []
};

// Load saved data from localStorage
function peLoadData() {
    try {
        const saved = localStorage.getItem('pe-saved-plants');
        if (saved) peConfig.savedPlants = JSON.parse(saved);
        
        const recent = localStorage.getItem('pe-recent-plants');
        if (recent) peConfig.recentPlants = JSON.parse(recent);
        
        peUpdateRecentList();
    } catch (e) {
        console.error('Failed to load plant data:', e);
    }
}

// Save data to localStorage
function peSaveData() {
    try {
        localStorage.setItem('pe-saved-plants', JSON.stringify(peConfig.savedPlants));
        localStorage.setItem('pe-recent-plants', JSON.stringify(peConfig.recentPlants));
    } catch (e) {
        console.error('Failed to save plant data:', e);
    }
}

// Add to recent searches
function peAddToRecent(plantData) {
    const existingIndex = peConfig.recentPlants.findIndex(p => p.commonName === plantData.commonName);
    if (existingIndex !== -1) {
        peConfig.recentPlants.splice(existingIndex, 1);
    }
    
    peConfig.recentPlants.unshift({
        commonName: plantData.commonName,
        scientificName: plantData.scientificName,
        family: plantData.family,
        timestamp: new Date().toISOString()
    });
    
    // Keep only last 10
    if (peConfig.recentPlants.length > 10) {
        peConfig.recentPlants.pop();
    }
    
    peSaveData();
    peUpdateRecentList();
}

// Update recent plants list
function peUpdateRecentList() {
    const recentContainer = document.getElementById('pe-recent');
    const recentList = document.getElementById('pe-recent-list');
    
    if (peConfig.recentPlants.length === 0) {
        recentContainer.style.display = 'none';
        return;
    }
    
    recentContainer.style.display = 'block';
    recentList.innerHTML = '';
    
    peConfig.recentPlants.forEach(plant => {
        const div = document.createElement('div');
        div.className = 'recent-plant-item';
        div.style.cssText = `
            flex: 0 0 auto;
            padding: 10px;
            background: rgba(45,212,255,0.1);
            border-radius: 8px;
            border: 1px solid rgba(45,212,255,0.3);
            cursor: pointer;
            min-width: 120px;
            text-align: center;
        `;
        div.onclick = () => {
            document.getElementById('pe-query').value = plant.commonName;
            peSearch();
        };
        
        div.innerHTML = `
            <div style="font-size:20px;margin-bottom:4px;">üåø</div>
            <div style="font-weight:600;color:var(--accent);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
                ${plant.commonName}
            </div>
            <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-top:2px;">
                ${plant.family || ''}
            </div>
        `;
        
        recentList.appendChild(div);
    });
}

// Quick search function
function peQuickSearch(plantName) {
    const input = document.getElementById('pe-query');
    input.value = plantName;
    input.style.borderColor = '#39ff14';
    setTimeout(() => {
        input.style.borderColor = 'rgba(45,212,255,0.3)';
    }, 1000);
    peSearch();
}

// Main search function
async function peSearch() {
    const query = document.getElementById('pe-query').value.trim();
    const output = document.getElementById('pe-output');
    const loading = document.getElementById('pe-loading');
    const saveBtn = document.getElementById('pe-save-btn');
    
    if (!query) {
        output.innerHTML = `
            <div style="text-align:center;padding:20px;color:#ff2d55;">
                <div style="font-size:32px;">‚ö†Ô∏è</div>
                <div style="margin-top:8px;">Please enter a plant name to search.</div>
            </div>
        `;
        return;
    }
    
    // Show loading
    output.style.display = 'none';
    loading.style.display = 'block';
    saveBtn.style.display = 'none';
    
    try {
        // Get selected sources
        const useWikipedia = document.getElementById('pe-source-wiki').checked;
        const useUSDA = document.getElementById('pe-source-usda').checked;
        const useOpenFarm = document.getElementById('pe-source-openfarm').checked;
        const useTrefle = document.getElementById('pe-source-trefle').checked;
        
        // Fetch from multiple sources in parallel
        const promises = [];
        
        if (useWikipedia) {
            promises.push(peFetchWikipedia(query));
        }
        
        if (useUSDA) {
            promises.push(peFetchUSDA(query));
        }
        
        if (useOpenFarm) {
            promises.push(peFetchOpenFarm(query));
        }
        
        if (useTrefle) {
            promises.push(peFetchTrefle(query));
        }
        
        // Wait for all sources
        const results = await Promise.allSettled(promises);
        
        // Process results
        const plantData = peMergeResults(results, query);
        
        // Render the plant
        peRenderPlant(plantData);
        
        // Add to recent searches
        peAddToRecent(plantData);
        
        // Show save button
        saveBtn.style.display = 'block';
        
    } catch (error) {
        console.error('Search error:', error);
        output.innerHTML = `
            <div style="text-align:center;padding:20px;color:#ff2d55;">
                <div style="font-size:32px;">‚ùå</div>
                <h3 style="color:#ff2d55;margin-top:8px;">Search Failed</h3>
                <p style="color:rgba(230,250,255,0.8);">Unable to fetch plant data. Please try again.</p>
                <p style="font-size:12px;color:rgba(230,250,255,0.6);margin-top:8px;">Error: ${error.message}</p>
            </div>
        `;
        output.style.display = 'block';
    } finally {
        loading.style.display = 'none';
        output.style.display = 'block';
    }
}

// Fetch from Wikipedia
async function peFetchWikipedia(query) {
    try {
        // First search for the plant
        const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)} plant&format=json&origin=*`;
        const searchRes = await fetch(searchUrl);
        const searchData = await searchRes.json();
        
        if (!searchData.query?.search?.[0]) return null;
        
        const pageTitle = searchData.query.search[0].title;
        
        // Get page content
        const contentUrl = `https://en.wikipedia.org/w/api.php?action=query&prop=extracts|pageimages|info&titles=${encodeURIComponent(pageTitle)}&exintro=true&explaintext=true&inprop=url&format=json&origin=*&pithumbsize=400`;
        const contentRes = await fetch(contentUrl);
        const contentData = await contentRes.json();
        
        const page = Object.values(contentData.query.pages)[0];
        
        return {
            source: 'wikipedia',
            commonName: page.title,
            description: page.extract,
            url: page.fullurl,
            image: page.thumbnail?.source || null,
            categories: []
        };
    } catch (e) {
        console.warn('Wikipedia fetch failed:', e);
        return null;
    }
}

// Fetch from USDA Plants Database (mock/alternative API)
async function peFetchUSDA(query) {
    try {
        // Using OpenFarm as USDA alternative (USDA API requires key)
        const res = await fetch(`https://openfarm.cc/api/v1/crops/?filter=${encodeURIComponent(query)}`);
        const data = await res.json();
        
        if (!data.data?.[0]) return null;
        
        const crop = data.data[0].attributes;
        
        return {
            source: 'usda',
            commonName: crop.name,
            scientificName: crop.binomial_name,
            family: crop.taxonomy?.family || '',
            description: crop.description,
            growingInfo: {
                sunlight: crop.sun_requirements,
                watering: crop.watering,
                soil: crop.soil,
                hardiness: crop.hardiness,
                growingDays: crop.days_to_maturity
            },
            image: crop.main_image_path
        };
    } catch (e) {
        console.warn('USDA fetch failed:', e);
        return null;
    }
}

// Fetch from OpenFarm
async function peFetchOpenFarm(query) {
    try {
        const res = await fetch(`https://openfarm.cc/api/v1/crops/?filter=${encodeURIComponent(query)}`);
        const data = await res.json();
        
        if (!data.data?.[0]) return null;
        
        const crop = data.data[0].attributes;
        
        return {
            source: 'openfarm',
            commonName: crop.name,
            scientificName: crop.binomial_name,
            description: crop.description,
            growingInfo: {
                sunlight: crop.sun_requirements,
                watering: crop.watering,
                soil: crop.soil,
                hardiness: crop.hardiness,
                growingDays: crop.days_to_maturity
            },
            companions: crop.companions,
            enemies: crop.enemies,
            image: crop.main_image_path
        };
    } catch (e) {
        console.warn('OpenFarm fetch failed:', e);
        return null;
    }
}

// Fetch from Trefle.io (Plant database API)
async function peFetchTrefle(query) {
    try {
        // Note: Trefle requires API key. Using mock data for now.
        // In production, you would use: https://trefle.io/api/v1/plants?token=YOUR_TOKEN&q=...
        
        return {
            source: 'trefle',
            commonName: query,
            scientificName: '',
            family: '',
            description: 'Data from Trefle plant database',
            image: null
        };
    } catch (e) {
        console.warn('Trefle fetch failed:', e);
        return null;
    }
}

// Merge results from all sources
function peMergeResults(results, query) {
    const merged = {
        commonName: query,
        scientificName: '',
        family: '',
        description: '',
        images: [],
        growingInfo: {},
        sources: []
    };
    
    results.forEach(result => {
        if (result.status === 'fulfilled' && result.value) {
            const data = result.value;
            merged.sources.push(data.source);
            
            // Merge names
            if (data.commonName && data.commonName !== query) {
                merged.commonName = data.commonName;
            }
            
            if (data.scientificName) {
                merged.scientificName = data.scientificName;
            }
            
            if (data.family) {
                merged.family = data.family;
            }
            
            // Merge description (take the longest)
            if (data.description && data.description.length > merged.description.length) {
                merged.description = data.description;
            }
            
            // Merge images
            if (data.image) {
                merged.images.push(data.image);
            }
            
            // Merge growing info
            if (data.growingInfo) {
                Object.assign(merged.growingInfo, data.growingInfo);
            }
        }
    });
    
    return merged;
}

// Render plant information
function peRenderPlant(plant) {
    const output = document.getElementById('pe-output');
    
    const growingInfoHTML = plant.growingInfo ? `
        <div style="margin-top:20px;">
            <h4 style="color:#39ff14;margin-bottom:12px;border-bottom:1px solid rgba(57,255,20,0.3);padding-bottom:4px;">üå± Growing Information</h4>
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
                ${plant.growingInfo.sunlight ? `
                    <div style="padding:10px;background:rgba(255,165,0,0.1);border-radius:6px;border:1px solid rgba(255,165,0,0.2);">
                        <div style="font-weight:600;color:#ffa500;">‚òÄÔ∏è Sunlight</div>
                        <div>${plant.growingInfo.sunlight}</div>
                    </div>
                ` : ''}
                ${plant.growingInfo.watering ? `
                    <div style="padding:10px;background:rgba(45,212,255,0.1);border-radius:6px;border:1px solid rgba(45,212,255,0.2);">
                        <div style="font-weight:600;color:var(--accent);">üíß Watering</div>
                        <div>${plant.growingInfo.watering}</div>
                    </div>
                ` : ''}
                ${plant.growingInfo.soil ? `
                    <div style="padding:10px;background:rgba(139,69,19,0.1);border-radius:6px;border:1px solid rgba(139,69,19,0.2);">
                        <div style="font-weight:600;color:#8b4513;">ü™¥ Soil</div>
                        <div>${plant.growingInfo.soil}</div>
                    </div>
                ` : ''}
                ${plant.growingInfo.hardiness ? `
                    <div style="padding:10px;background:rgba(157,78,221,0.1);border-radius:6px;border:1px solid rgba(157,78,221,0.2);">
                        <div style="font-weight:600;color:#9d4edd;">‚ùÑÔ∏è Hardiness</div>
                        <div>${plant.growingInfo.hardiness}</div>
                    </div>
                ` : ''}
                ${plant.growingInfo.growingDays ? `
                    <div style="padding:10px;background:rgba(57,255,20,0.1);border-radius:6px;border:1px solid rgba(57,255,20,0.2);">
                        <div style="font-weight:600;color:#39ff14;">üìÖ Growing Days</div>
                        <div>${plant.growingInfo.growingDays} days</div>
                    </div>
                ` : ''}
            </div>
        </div>
    ` : '';
    
    const imagesHTML = plant.images.length > 0 ? `
        <div style="margin-top:20px;">
            <h4 style="color:var(--accent);margin-bottom:12px;border-bottom:1px solid rgba(45,212,255,0.3);padding-bottom:4px;">üì∏ Images</h4>
            <div style="display:flex;gap:12px;overflow-x:auto;padding-bottom:12px;">
                ${plant.images.map(img => `
                    <img src="${img}" alt="${plant.commonName}" 
                         style="height:150px;border-radius:8px;border:2px solid rgba(45,212,255,0.3);"
                         onerror="this.style.display='none'">
                `).join('')}
            </div>
        </div>
    ` : '';
    
    const sourcesHTML = plant.sources.length > 0 ? `
        <div style="margin-top:20px;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;border:1px solid rgba(255,255,255,0.1);">
            <div style="color:rgba(230,250,255,0.8);font-size:14px;">Data sources: ${plant.sources.map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(', ')}</div>
        </div>
    ` : '';
    
    output.innerHTML = `
        <div style="padding:20px;background:linear-gradient(135deg, rgba(57,255,20,0.05), rgba(45,212,255,0.05));border-radius:12px;border:1px solid rgba(45,212,255,0.2);">
            <div style="display:flex;gap:20px;align-items:flex-start;margin-bottom:20px;">
                <div style="flex:1;">
                    <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                        <h3 style="color:var(--accent);margin:0;font-size:1.4rem;">${plant.commonName}</h3>
                        <div style="font-size:24px;">üåø</div>
                    </div>
                    
                    ${plant.scientificName ? `
                        <div style="padding:6px 12px;background:rgba(45,212,255,0.1);border-radius:6px;display:inline-block;margin-bottom:12px;">
                            <div style="font-family:monospace;color:var(--accent);font-weight:600;">${plant.scientificName}</div>
                        </div>
                    ` : ''}
                    
                    ${plant.family ? `
                        <div style="color:rgba(230,250,255,0.9);margin-bottom:16px;">
                            <strong style="color:var(--accent);">Family:</strong> ${plant.family}
                        </div>
                    ` : ''}
                </div>
                
                ${plant.images.length > 0 ? `
                    <div style="width:150px;flex-shrink:0;">
                        <img src="${plant.images[0]}" alt="${plant.commonName}" 
                             style="width:100%;border-radius:8px;border:2px solid rgba(45,212,255,0.3);">
                    </div>
                ` : ''}
            </div>
            
            ${plant.description ? `
                <div style="margin-top:16px;">
                    <h4 style="color:var(--accent);margin-bottom:8px;">üìñ Description</h4>
                    <div style="color:rgba(230,250,255,0.9);line-height:1.6;">
                        ${plant.description.substring(0, 500)}${plant.description.length > 500 ? '...' : ''}
                    </div>
                </div>
            ` : ''}
            
            ${growingInfoHTML}
            ${imagesHTML}
            ${sourcesHTML}
            
            <div style="margin-top:20px;display:flex;gap:12px;">
                <button onclick="peSharePlant('${plant.commonName}')" 
                        style="padding:8px 16px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;">
                    üîó Share
                </button>
                <button onclick="peSaveCurrentPlant()" 
                        style="padding:8px 16px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:6px;color:#ffa500;cursor:pointer;">
                    üíæ Save Plant
                </button>
            </div>
        </div>
    `;
}

// Save current plant
function peSaveCurrentPlant() {
    const query = document.getElementById('pe-query').value.trim();
    if (!query) return;
    
    peConfig.savedPlants.push({
        name: query,
        date: new Date().toISOString()
    });
    
    peSaveData();
    
    // Show confirmation
    const saveBtn = document.getElementById('pe-save-btn');
    saveBtn.textContent = '‚úÖ Saved!';
    saveBtn.style.background = 'rgba(57,255,20,0.1)';
    saveBtn.style.borderColor = 'rgba(57,255,20,0.3)';
    saveBtn.style.color = '#39ff14';
    
    setTimeout(() => {
        saveBtn.textContent = 'üíæ Save';
        saveBtn.style.background = 'rgba(255,165,0,0.1)';
        saveBtn.style.borderColor = 'rgba(255,165,0,0.3)';
        saveBtn.style.color = '#ffa500';
    }, 2000);
}

// Share plant
function peSharePlant(plantName) {
    const text = `üåø ${plantName} - Plant Encyclopedia\nCheck out this plant on The Most Useful Site!`;
    
    if (navigator.share) {
        navigator.share({
            title: `${plantName} - Plant Encyclopedia`,
            text: text,
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(text).then(() => {
            alert('Plant info copied to clipboard!');
        });
    }
}

// Reset function
function peReset() {
    document.getElementById('pe-query').value = '';
    const output = document.getElementById('pe-output');
    const saveBtn = document.getElementById('pe-save-btn');
    
    output.innerHTML = `
        <div style="text-align:center;padding:40px 20px;color:rgba(230,250,255,0.6);">
            <div style="font-size:48px;margin-bottom:16px;">üåø</div>
            <h3 style="color:var(--accent);margin-bottom:8px;">Plant Encyclopedia</h3>
            <p>Search for any plant to get comprehensive information from multiple botanical databases.</p>
        </div>
    `;
    
    saveBtn.style.display = 'none';
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.currentScript?.closest('.card') || document;
        
        // Load saved data
        peLoadData();
        
        // Add Enter key support
        const input = card.querySelector('#pe-query');
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                peSearch();
            }
        });
        
        // Add search suggestions
        input.addEventListener('input', function() {
            if (this.value.length > 2) {
                // Could implement autocomplete here
            }
        });
        
        console.log('Plant Encyclopedia ready');
    });
}
</script>

<style>
@keyframes pe-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#plant-encyclopedia-title {
    color: var(--accent);
    margin-top: 0;
    background: linear-gradient(135deg, #39ff14, var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.quick-plant:hover {
    transform: translateY(-2px);
    transition: transform 0.2s;
}

.recent-plant-item:hover {
    transform: translateY(-2px);
    transition: transform 0.2s;
    background: rgba(45,212,255,0.2) !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .actions {
        flex-direction: column;
    }
    
    .actions button {
        width: 100% !important;
        margin: 4px 0 !important;
    }
    
    #pe-recent-list {
        flex-direction: column;
        overflow-x: hidden;
    }
    
    .recent-plant-item {
        width: 100% !important;
        min-width: auto !important;
    }
}
</style>
