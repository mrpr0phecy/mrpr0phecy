<!-- 
===========================================
FILE: cards/christmas-card-maker.html
PURPOSE: Create & generate custom digital Christmas cards
TEMPLATE: Follows the Sacred Structure
===========================================
-->

<!-- ===== 1. TITLE & DESCRIPTION ===== -->
<h2 id="ccm-title">üéÑ Christmas Card Maker</h2>
<p id="ccm-desc" class="small">
    Design and generate beautiful, custom HTML Christmas cards in seconds. Perfect for emails, social media, or personal websites.
    <em>For professional printing and physical cards, consider 
        <a href="https://affiliate.example.com/print-service" 
           data-affiliate="print-service" 
           target="_blank" 
           rel="sponsored nofollow"
           onclick="trackAffiliateClick('print-service')">
           Premium Print Service
        </a>.
    </em>
</p>

<!-- ===== 2. DESIGN INTERFACE ===== -->
<div class="design-interface" style="display: grid; grid-template-columns: 300px 1fr; gap: var(--space-lg); margin-bottom: var(--space-xl);">
    
    <!-- Controls Panel -->
    <div class="controls-panel" style="background: rgba(255, 255, 255, 0.03); border-radius: var(--radius-md); padding: var(--space-lg); border: 1px solid var(--border-light);">
        <h4 style="color: var(--accent); margin-bottom: var(--space-lg);">Customize Your Card</h4>
        
        <!-- Recipient Name -->
        <div class="control-group" style="margin-bottom: var(--space-md);">
            <label style="display: block; color: var(--text-secondary); margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                üë§ Recipient's Name
            </label>
            <input type="text" id="ccm-recipient" placeholder="Enter name" 
                   style="width: 100%; padding: var(--space-sm); background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: var(--radius-sm); color: var(--text);">
        </div>
        
        <!-- Your Name -->
        <div class="control-group" style="margin-bottom: var(--space-md);">
            <label style="display: block; color: var(--text-secondary); margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                ‚úçÔ∏è Your Name
            </label>
            <input type="text" id="ccm-sender" placeholder="Your name" 
                   style="width: 100%; padding: var(--space-sm); background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: var(--radius-sm); color: var(--text);">
        </div>
        
        <!-- Message -->
        <div class="control-group" style="margin-bottom: var(--space-md);">
            <label style="display: block; color: var(--text-secondary); margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                üí¨ Holiday Message
            </label>
            <textarea id="ccm-message" rows="4" placeholder="Wishing you joy and peace this holiday season..."
                      style="width: 100%; padding: var(--space-sm); background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-light); border-radius: var(--radius-sm); color: var(--text); font-family: inherit; resize: vertical;"></textarea>
        </div>
        
        <!-- Design Theme -->
        <div class="control-group" style="margin-bottom: var(--space-lg);">
            <label style="display: block; color: var(--text-secondary); margin-bottom: var(--space-xs); font-size: var(--text-sm);">
                üé® Card Theme
            </label>
            <div class="theme-buttons" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-sm);">
                <button class="theme-btn active" data-theme="classic">Classic</button>
                <button class="theme-btn" data-theme="modern">Modern</button>
                <button class="theme-btn" data-theme="festive">Festive</button>
                <button class="theme-btn" data-theme="elegant">Elegant</button>
                <button class="theme-btn" data-theme="snowy">Snowy</button>
                <button class="theme-btn" data-theme="cozy">Cozy</button>
            </div>
        </div>
        
        <!-- Generate Button -->
        <button id="ccm-generate" class="generate-btn" style="width: 100%; padding: var(--space-md); background: linear-gradient(135deg, rgba(45, 212, 255, 0.2), rgba(45, 212, 255, 0.1)); border: 1px solid var(--border-accent); color: var(--accent); border-radius: var(--radius-md); cursor: pointer; font-weight: 600; transition: all var(--transition-fast);">
            üéÅ Generate Christmas Card
        </button>
    </div>
    
    <!-- Live Preview -->
    <div class="preview-panel" style="background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-md); padding: var(--space-xl); border: 2px dashed var(--border-light); display: flex; align-items: center; justify-content: center; min-height: 400px;">
        <div id="ccm-preview" class="card-preview classic" style="width: 100%; max-width: 500px; min-height: 300px; border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-md); position: relative;">
            <!-- Preview content will be generated here -->
            <div class="preview-placeholder" style="text-align: center; padding: var(--space-xl); color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: var(--space-md);">üéÑ</div>
                <h3 style="color: var(--accent); margin-bottom: var(--space-sm);">Christmas Card Preview</h3>
                <p>Your custom card will appear here</p>
            </div>
        </div>
    </div>
</div>

<!-- ===== 3. GENERATED OUTPUT ===== -->
<div class="output-section" style="margin-top: var(--space-xl); display: none;" id="ccm-output">
    <div class="output-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
        <h4 style="color: var(--accent); margin: 0;">‚ú® Your Christmas Card is Ready!</h4>
        <div class="output-actions" style="display: flex; gap: var(--space-sm);">
            <button id="ccm-copy-html" class="output-btn" style="padding: var(--space-sm) var(--space-md); background: rgba(45, 212, 255, 0.1); border: 1px solid var(--border-accent); color: var(--accent); border-radius: var(--radius-sm); cursor: pointer; font-size: var(--text-sm);">
                üìã Copy HTML Code
            </button>
            <button id="ccm-preview-full" class="output-btn" style="padding: var(--space-sm) var(--space-md); background: rgba(57, 255, 20, 0.1); border: 1px solid rgba(57, 255, 20, 0.3); color: var(--success); border-radius: var(--radius-sm); cursor: pointer; font-size: var(--text-sm);">
                üëÄ Preview Full Card
            </button>
            <button id="ccm-download" class="output-btn" style="padding: var(--space-sm) var(--space-md); background: rgba(255, 212, 45, 0.1); border: 1px solid rgba(255, 212, 45, 0.3); color: #ffd42d; border-radius: var(--radius-sm); cursor: pointer; font-size: var(--text-sm);">
                üíæ Download HTML File
            </button>
        </div>
    </div>
    
    <!-- Generated HTML Display -->
    <div class="code-container" style="background: rgba(0, 0, 0, 0.3); border-radius: var(--radius-md); padding: var(--space-md); border: 1px solid var(--border-light); margin-bottom: var(--space-lg);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm);">
            <small style="color: var(--text-tertiary);">Generated HTML Code:</small>
            <small style="color: var(--text-tertiary);" id="ccm-char-count">0 characters</small>
        </div>
        <pre id="ccm-generated-html" style="margin: 0; padding: var(--space-md); background: rgba(0, 0, 0, 0.5); border-radius: var(--radius-sm); overflow-x: auto; font-size: var(--text-sm); font-family: 'SF Mono', monospace; color: var(--text); max-height: 300px; overflow-y: auto;"></pre>
    </div>
    
    <!-- Usage Instructions -->
    <div class="instructions" style="background: rgba(45, 212, 255, 0.05); border-left: 3px solid var(--accent); padding: var(--space-md); border-radius: 0 var(--radius-md) var(--radius-md) 0; font-size: var(--text-sm);">
        <strong>üí° How to use your Christmas card:</strong>
        <ol style="margin: var(--space-sm) 0 var(--space-sm) var(--space-lg); color: var(--text-secondary);">
            <li>Copy the HTML code above</li>
            <li>Paste it into any webpage, email (that supports HTML), or CMS</li>
            <li>Customize further by editing the HTML directly if needed</li>
            <li>Share with friends, family, or on social media</li>
        </ol>
    </div>
</div>

<!-- ===== 4. AFFILIATE DISCLOSURE ===== -->
<div class="affiliate-disclosure" id="ccm-affiliate" style="margin-top: var(--space-xl);">
    <strong>üéÖ Want physical cards?</strong> For premium printed Christmas cards with foil accents, embossing, and high-quality paper, check out 
    <a href="https://affiliate.example.com/premium-cards" 
       data-affiliate="premium-cards" 
       target="_blank" 
       rel="sponsored nofollow"
       onclick="trackAffiliateClick('premium-cards')">
       Premium Card Service
    </a>. They offer professional printing with fast holiday delivery.
    <small>We may earn a commission. Supports free tools.</small>
</div>

<!-- ===== 5. JAVASCRIPT ===== -->
<script>
// ===== CONFIGURATION =====
const ccmConfig = {
    name: 'Christmas Card Maker',
    version: '1.0',
    themes: {
        classic: {
            bg: 'linear-gradient(135deg, #1a2b3c 0%, #2d4a5f 100%)',
            color: '#ffffff',
            accent: '#ff6b6b',
            pattern: 'üéÑ‚ùÑÔ∏èüéÅ'
        },
        modern: {
            bg: 'linear-gradient(135deg, #0a0f14 0%, #1a2a3a 100%)',
            color: '#e6faff',
            accent: '#2dd4ff',
            pattern: '‚ö´‚ö™üî∑'
        },
        festive: {
            bg: 'linear-gradient(135deg, #2c0b0e 0%, #5a1a1f 100%)',
            color: '#fff5e6',
            accent: '#ffcc00',
            pattern: 'üî¥üü¢üåü'
        },
        elegant: {
            bg: 'linear-gradient(135deg, #2d2d2d 0%, #4a4a4a 100%)',
            color: '#f0f0f0',
            accent: '#d4af37',
            pattern: '‚ú®üéÄüéµ'
        },
        snowy: {
            bg: 'linear-gradient(135deg, #1e3a5f 0%, #4a8fe7 100%)',
            color: '#ffffff',
            accent: '#a3d9ff',
            pattern: '‚ùÑÔ∏è‚õÑüå®Ô∏è'
        },
        cozy: {
            bg: 'linear-gradient(135deg, #3d2c2c 0%, #6d4c4c 100%)',
            color: '#ffe6cc',
            accent: '#ff9966',
            pattern: 'üïØÔ∏è‚òïüß£'
        }
    }
};

// ===== STATE =====
let currentTheme = 'classic';
let generatedHTML = '';

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', () => {
    // Theme selection
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentTheme = btn.dataset.theme;
            updatePreview();
        });
    });
    
    // Live preview updates
    const inputs = ['#ccm-recipient', '#ccm-sender', '#ccm-message'];
    inputs.forEach(selector => {
        document.querySelector(selector).addEventListener('input', updatePreview);
    });
    
    // Generate button
    document.getElementById('ccm-generate').addEventListener('click', generateCard);
    
    // Copy HTML button
    document.getElementById('ccm-copy-html').addEventListener('click', copyHTML);
    
    // Preview full card
    document.getElementById('ccm-preview-full').addEventListener('click', previewFullCard);
    
    // Download button
    document.getElementById('ccm-download').addEventListener('click', downloadHTML);
    
    console.log('üéÖ Christmas Card Maker loaded');
});

// ===== PREVIEW FUNCTIONS =====
function updatePreview() {
    const recipient = document.getElementById('ccm-recipient').value || 'Recipient';
    const sender = document.getElementById('ccm-sender').value || 'Sender';
    const message = document.getElementById('ccm-message').value || 'Wishing you joy and peace this holiday season!';
    const theme = ccmConfig.themes[currentTheme];
    
    const preview = document.getElementById('ccm-preview');
    preview.className = 'card-preview ' + currentTheme;
    preview.style.background = theme.bg;
    preview.style.color = theme.color;
    
    preview.innerHTML = `
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1; font-size: 24px; line-height: 1.5; padding: 20px; word-break: break-all;">${theme.pattern.repeat(50)}</div>
        <div style="position: relative; z-index: 2; padding: 40px; text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center;">
            <div style="font-size: 48px; margin-bottom: 20px;">${getThemeEmoji()}</div>
            <h2 style="color: ${theme.accent}; margin-bottom: 16px; font-size: 28px;">Merry Christmas, ${recipient}!</h2>
            <div style="font-size: 18px; line-height: 1.6; margin-bottom: 24px; max-width: 400px; margin-left: auto; margin-right: auto;">${message}</div>
            <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.2);">
                <div style="font-size: 16px; color: ${theme.accent};">With love,</div>
                <div style="font-size: 20px; font-weight: bold; margin-top: 8px;">${sender}</div>
                <div style="font-size: 14px; opacity: 0.8; margin-top: 8px;">üéÑ ${new Date().getFullYear()} üéÑ</div>
            </div>
        </div>
    `;
}

function getThemeEmoji() {
    const emojis = {
        classic: 'üéÑ',
        modern: 'üåü',
        festive: 'üéÅ',
        elegant: '‚ú®',
        snowy: '‚ùÑÔ∏è',
        cozy: 'üïØÔ∏è'
    };
    return emojis[currentTheme] || 'üéÑ';
}

// ===== GENERATION FUNCTIONS =====
function generateCard() {
    const recipient = document.getElementById('ccm-recipient').value || 'Friend';
    const sender = document.getElementById('ccm-sender').value || 'Santa';
    const message = document.getElementById('ccm-message').value || 'Wishing you a wonderful holiday season filled with joy and peace!';
    const theme = ccmConfig.themes[currentTheme];
    
    // Generate complete HTML for the card
    generatedHTML = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Card for ${recipient}</title>
    <style>
        body {
            margin: 0;
            padding: 40px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0f14 0%, #141e28 100%);
        }
        .christmas-card {
            width: 100%;
            max-width: 600px;
            min-height: 400px;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            background: ${theme.bg};
            color: ${theme.color};
            animation: fadeIn 1s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.1;
            font-size: 24px;
            line-height: 1.5;
            padding: 20px;
            word-break: break-all;
            pointer-events: none;
        }
        .card-content {
            position: relative;
            z-index: 2;
            padding: 60px 40px;
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .card-emoji {
            font-size: 64px;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .card-title {
            color: ${theme.accent};
            margin-bottom: 24px;
            font-size: 32px;
            font-weight: bold;
        }
        .card-message {
            font-size: 20px;
            line-height: 1.6;
            margin-bottom: 40px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .card-signature {
            margin-top: auto;
            padding-top: 30px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
        }
        .card-from {
            font-size: 18px;
            color: ${theme.accent};
            margin-bottom: 10px;
        }
        .card-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .card-footer {
            font-size: 16px;
            opacity: 0.8;
        }
        .card-note {
            margin-top: 30px;
            font-size: 14px;
            opacity: 0.6;
            color: ${theme.color};
        }
        .card-note a {
            color: ${theme.accent};
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="christmas-card">
        <div class="card-pattern">${theme.pattern.repeat(100)}</div>
        <div class="card-content">
            <div class="card-emoji">${getThemeEmoji()}</div>
            <h1 class="card-title">Merry Christmas, ${recipient}!</h1>
            <div class="card-message">${message.replace(/\n/g, '<br>')}</div>
            <div class="card-signature">
                <div class="card-from">With warm holiday wishes,</div>
                <div class="card-name">${sender}</div>
                <div class="card-footer">üéÑ Season's Greetings ${new Date().getFullYear()} üéÑ</div>
            </div>
            <div class="card-note">
                Card created with <a href="https://themostusefulsiteintheworld.com" target="_blank">The Most Useful Site in the World</a>
            </div>
        </div>
    </div>
</body>
</html>`;
    
    // Display the generated code
    const codeElement = document.getElementById('ccm-generated-html');
    codeElement.textContent = generatedHTML;
    document.getElementById('ccm-char-count').textContent = generatedHTML.length + ' characters';
    
    // Show the output section
    document.getElementById('ccm-output').style.display = 'block';
    
    // Scroll to output
    document.getElementById('ccm-output').scrollIntoView({ behavior: 'smooth' });
    
    // Show affiliate after generation
    document.getElementById('ccm-affiliate').classList.add('show');
    
    // Track generation
    if (window.plausible) {
        window.plausible('Card Generated', { props: { tool: 'christmas-card-maker', theme: currentTheme } });
    }
    
    // Update preview with final version
    updatePreview();
}

// ===== OUTPUT FUNCTIONS =====
function copyHTML() {
    navigator.clipboard.writeText(generatedHTML).then(() => {
        const btn = document.getElementById('ccm-copy-html');
        const original = btn.innerHTML;
        btn.innerHTML = '‚úÖ Copied!';
        btn.style.background = 'rgba(57, 255, 20, 0.2)';
        btn.style.borderColor = 'rgba(57, 255, 20, 0.4)';
        
        setTimeout(() => {
            btn.innerHTML = original;
            btn.style.background = '';
            btn.style.borderColor = '';
        }, 2000);
    }).catch(err => {
        console.error('Copy failed:', err);
        alert('Failed to copy to clipboard. Please select and copy manually.');
    });
}

function previewFullCard() {
    const previewWindow = window.open('', '_blank');
    previewWindow.document.write(generatedHTML);
    previewWindow.document.close();
}

function downloadHTML() {
    const recipient = document.getElementById('ccm-recipient').value || 'christmas_card';
    const filename = `christmas_card_for_${recipient.replace(/\s+/g, '_')}.html`;
    
    const blob = new Blob([generatedHTML], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

// ===== AFFILIATE FUNCTIONS =====
function trackAffiliateClick(product) {
    if (window.plausible) {
        window.plausible('Affiliate Click', { props: { tool: 'christmas-card-maker', product: product } });
    }
}
</script>

<!-- ===== 6. CARD-SCOPED STYLES ===== -->
<style>
/* Theme Buttons */
.theme-btn {
    padding: var(--space-sm) var(--space-xs);
    border: 1px solid var(--border-light);
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: var(--text-sm);
    text-align: center;
}

.theme-btn:hover {
    background: rgba(45, 212, 255, 0.1);
    border-color: var(--border-accent);
    color: var(--accent);
    transform: translateY(-2px);
}

.theme-btn.active {
    background: rgba(45, 212, 255, 0.15);
    border-color: var(--accent);
    color: var(--accent);
    font-weight: 600;
}

/* Generate Button */
.generate-btn:hover {
    background: linear-gradient(135deg, rgba(45, 212, 255, 0.3), rgba(45, 212, 255, 0.2));
    transform: translateY(-2px);
    box-shadow: var(--shadow-md), 0 0 0 2px rgba(45, 212, 255, 0.2);
}

/* Output Buttons */
.output-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* Preview Cards */
.card-preview.classic { --card-accent: #ff6b6b; }
.card-preview.modern { --card-accent: #2dd4ff; }
.card-preview.festive { --card-accent: #ffcc00; }
.card-preview.elegant { --card-accent: #d4af37; }
.card-preview.snowy { --card-accent: #a3d9ff; }
.card-preview.cozy { --card-accent: #ff9966; }

/* Responsive */
@media (max-width: 768px) {
    .design-interface {
        grid-template-columns: 1fr;
    }
    
    .theme-buttons {
        grid-template-columns: repeat(2, 1fr) !important;
    }
    
    .output-actions {
        flex-direction: column;
        width: 100%;
    }
    
    .output-btn {
        width: 100%;
        text-align: center;
    }
}
</style>
