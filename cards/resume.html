<h2 id="resume-builder-title">üìÑ Resume Builder</h2>

<form aria-describedby="resume-builder-desc">
    <p id="resume-builder-desc" class="small" style="margin-bottom:20px;color:var(--muted)">
        Create and preview a professional resume. 
        <span style="color:var(--accent)">Generates clean, printable format.</span>
    </p>
    
    <!-- BASIC INFO -->
    <div style="margin-bottom:20px;">
        <h3 style="color:var(--accent);margin-bottom:12px;font-size:16px;">üë§ Personal Information</h3>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;margin-bottom:12px;">
            <div>
                <label for="rb-name" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                    Full Name
                </label>
                <input id="rb-name" type="text" placeholder="Jane Doe" 
                       style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
            </div>
            
            <div>
                <label for="rb-title" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                    Job Title
                </label>
                <input id="rb-title" type="text" placeholder="Software Developer" 
                       style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
            </div>
        </div>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
            <div>
                <label for="rb-email" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                    Email
                </label>
                <input id="rb-email" type="email" placeholder="jane@example.com" 
                       style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
            </div>
            
            <div>
                <label for="rb-phone" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                    Phone
                </label>
                <input id="rb-phone" type="tel" placeholder="(123) 456-7890" 
                       style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
            </div>
        </div>
        
        <div style="margin-top:12px;">
            <label for="rb-location" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                Location
            </label>
            <input id="rb-location" type="text" placeholder="San Francisco, CA" 
                   style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;" />
        </div>
    </div>
    
    <!-- PROFILE SUMMARY -->
    <div style="margin-bottom:20px;">
        <label for="rb-summary" style="display:block;margin-bottom:8px;color:var(--accent);font-size:14px;">
            üëî Professional Summary
        </label>
        <textarea id="rb-summary" rows="3" placeholder="Experienced professional with expertise in..." 
                  style="width:100%;padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;resize:vertical;"></textarea>
    </div>
    
    <!-- EXPERIENCE -->
    <div style="margin-bottom:20px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <h3 style="color:var(--accent);margin:0;font-size:16px;">üíº Work Experience</h3>
            <button type="button" onclick="rbAddExperience()" 
                    style="padding:8px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">
                + Add Job
            </button>
        </div>
        
        <div id="rb-experience-container" style="display:flex;flex-direction:column;gap:12px;">
            <!-- Experience entries will be added here -->
        </div>
    </div>
    
    <!-- EDUCATION -->
    <div style="margin-bottom:20px;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <h3 style="color:var(--accent);margin:0;font-size:16px;">üéì Education</h3>
            <button type="button" onclick="rbAddEducation()" 
                    style="padding:8px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">
                + Add Degree
            </button>
        </div>
        
        <div id="rb-education-container" style="display:flex;flex-direction:column;gap:12px;">
            <!-- Education entries will be added here -->
        </div>
    </div>
    
    <!-- SKILLS -->
    <div style="margin-bottom:20px;">
        <label for="rb-skills" style="display:block;margin-bottom:8px;color:var(--accent);font-size:14px;">
            üõ†Ô∏è Skills
        </label>
        <textarea id="rb-skills" rows="3" placeholder="JavaScript, Python, Project Management, Leadership..." 
                  style="width:100%;padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;resize:vertical;"></textarea>
        <div style="font-size:12px;color:var(--muted);margin-top:4px;">Separate skills with commas</div>
    </div>
    
    <!-- TEMPLATE SELECTION -->
    <div style="margin-bottom:20px;">
        <label for="rb-template" style="display:block;margin-bottom:8px;color:var(--accent);font-size:14px;">
            üé® Resume Template
        </label>
        <select id="rb-template" 
                style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
            <option value="modern">Modern (Clean)</option>
            <option value="professional">Professional (Traditional)</option>
            <option value="creative">Creative (Design)</option>
            <option value="minimal">Minimal (Simple)</option>
        </select>
    </div>
    
    <!-- ACTION BUTTONS -->
    <div style="display:flex;gap:10px;">
        <button type="button" onclick="rbBuild()" 
                style="flex:1;padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.3), rgba(45,212,255,0.2));border:1px solid rgba(45,212,255,0.6);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
            üöÄ Build Resume
        </button>
        <button type="button" onclick="rbReset()"
                style="padding:14px 20px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
            üîÑ Reset
        </button>
    </div>
</form>

<!-- PREVIEW -->
<div id="rb-preview" style="margin-top:24px;display:none;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
        <h3 style="color:var(--accent);margin:0;font-size:16px;">üìÑ Resume Preview</h3>
        <div style="display:flex;gap:8px;">
            <button type="button" onclick="rbPrint()" 
                    style="padding:8px 12px;background:rgba(255,204,0,0.1);border:1px solid rgba(255,204,0,0.3);border-radius:6px;color:#ffcc00;cursor:pointer;font-size:12px;">
                üñ®Ô∏è Print
            </button>
            <button type="button" onclick="rbExport()"
                    style="padding:8px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:12px;">
                üì• Export
            </button>
        </div>
    </div>
    
    <!-- RESUME CONTENT -->
    <div id="rb-resume-content" 
         style="padding:24px;background:#ffffff;color:#000000;border-radius:12px;border:1px solid var(--border);font-family:'Segoe UI',Arial,sans-serif;">
        <!-- Resume will be generated here -->
    </div>
    
    <!-- TIPS -->
    <div style="margin-top:20px;padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;border-left:3px solid var(--accent);">
        <div style="color:var(--accent);font-weight:500;margin-bottom:8px;">üí° Resume Tips</div>
        <div style="font-size:13px;color:var(--muted);">
            ‚Ä¢ Use action verbs (Developed, Managed, Improved)<br>
            ‚Ä¢ Include quantifiable achievements<br>
            ‚Ä¢ Keep it to 1-2 pages maximum<br>
            ‚Ä¢ Tailor to the job you're applying for<br>
            ‚Ä¢ Proofread carefully for errors
        </div>
    </div>
</div>

<script>
/* resume-builder.html
   - Professional resume builder
   - Scoped with rb- prefix (Resume Builder)
*/

let rbExperiences = [];
let rbEducations = [];

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', rbInit);
} else {
    rbInit();
}

function rbInit() {
    console.log('Resume Builder initialized');
    
    // Load saved data if any
    const saved = localStorage.getItem('rb-data');
    if (saved) {
        try {
            const data = JSON.parse(saved);
            
            // Load basic info
            if (data.name) document.getElementById('rb-name').value = data.name;
            if (data.title) document.getElementById('rb-title').value = data.title;
            if (data.email) document.getElementById('rb-email').value = data.email;
            if (data.phone) document.getElementById('rb-phone').value = data.phone;
            if (data.location) document.getElementById('rb-location').value = data.location;
            if (data.summary) document.getElementById('rb-summary').value = data.summary;
            if (data.skills) document.getElementById('rb-skills').value = data.skills;
            if (data.template) document.getElementById('rb-template').value = data.template;
            
            // Load experiences
            if (data.experiences && Array.isArray(data.experiences)) {
                rbExperiences = data.experiences;
                rbRenderExperiences();
            }
            
            // Load education
            if (data.educations && Array.isArray(data.educations)) {
                rbEducations = data.educations;
                rbRenderEducation();
            }
            
        } catch (e) {
            console.error('Failed to load saved data:', e);
        }
    }
    
    // Add initial experience and education entries
    if (rbExperiences.length === 0) rbAddExperience();
    if (rbEducations.length === 0) rbAddEducation();
}

// Save data
function rbSaveData() {
    const data = {
        name: document.getElementById('rb-name').value,
        title: document.getElementById('rb-title').value,
        email: document.getElementById('rb-email').value,
        phone: document.getElementById('rb-phone').value,
        location: document.getElementById('rb-location').value,
        summary: document.getElementById('rb-summary').value,
        skills: document.getElementById('rb-skills').value,
        template: document.getElementById('rb-template').value,
        experiences: rbExperiences,
        educations: rbEducations,
        updated: new Date().toISOString()
    };
    
    localStorage.setItem('rb-data', JSON.stringify(data));
}

// Add experience entry
function rbAddExperience() {
    const container = document.getElementById('rb-experience-container');
    const id = 'exp-' + Date.now();
    
    const div = document.createElement('div');
    div.id = id;
    div.className = 'rb-experience';
    div.style.cssText = 'padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);';
    
    div.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:12px;">
            <div style="flex:1;">
                <input type="text" class="rb-exp-title" placeholder="Job Title" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;margin-bottom:8px;" />
                <input type="text" class="rb-exp-company" placeholder="Company Name" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
            </div>
            
            <div style="margin-left:12px;width:180px;">
                <input type="text" class="rb-exp-dates" placeholder="Dates (e.g., 2020 - Present)" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;margin-bottom:8px;" />
                <input type="text" class="rb-exp-location" placeholder="Location" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
            </div>
        </div>
        
        <textarea class="rb-exp-description" rows="2" placeholder="Responsibilities and achievements..." 
                  style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;resize:vertical;"></textarea>
        
        <div style="display:flex;justify-content:flex-end;margin-top:8px;">
            <button type="button" onclick="rbRemoveExperience('${id}')" 
                    style="padding:4px 8px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:4px;color:#ff4d4d;cursor:pointer;font-size:11px;">
                Remove
            </button>
        </div>
    `;
    
    container.appendChild(div);
}

// Remove experience entry
function rbRemoveExperience(id) {
    const element = document.getElementById(id);
    if (element) {
        element.remove();
    }
}

// Render experiences
function rbRenderExperiences() {
    const container = document.getElementById('rb-experience-container');
    container.innerHTML = '';
    
    rbExperiences.forEach(exp => {
        const id = 'exp-' + Date.now() + Math.random();
        const div = document.createElement('div');
        div.id = id;
        div.className = 'rb-experience';
        div.style.cssText = 'padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);margin-bottom:12px;';
        
        div.innerHTML = `
            <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:8px;">
                <div>
                    <div style="color:var(--accent);font-weight:500;">${exp.title}</div>
                    <div style="color:var(--muted);font-size:14px;">${exp.company}</div>
                </div>
                <div style="text-align:right;">
                    <div style="color:var(--accent);font-size:14px;">${exp.dates}</div>
                    <div style="color:var(--muted);font-size:12px;">${exp.location}</div>
                </div>
            </div>
            <div style="color:inherit;font-size:14px;line-height:1.4;">${exp.description}</div>
        `;
        
        container.appendChild(div);
    });
}

// Add education entry
function rbAddEducation() {
    const container = document.getElementById('rb-education-container');
    const id = 'edu-' + Date.now();
    
    const div = document.createElement('div');
    div.id = id;
    div.className = 'rb-education';
    div.style.cssText = 'padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);';
    
    div.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:12px;">
            <div style="flex:1;">
                <input type="text" class="rb-edu-degree" placeholder="Degree (e.g., Bachelor of Science)" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;margin-bottom:8px;" />
                <input type="text" class="rb-edu-school" placeholder="School/University" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
            </div>
            
            <div style="margin-left:12px;width:120px;">
                <input type="text" class="rb-edu-dates" placeholder="Graduation Year" 
                       style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;" />
            </div>
        </div>
        
        <textarea class="rb-edu-details" rows="2" placeholder="Details (GPA, honors, relevant coursework)..." 
                  style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;resize:vertical;"></textarea>
        
        <div style="display:flex;justify-content:flex-end;margin-top:8px;">
            <button type="button" onclick="rbRemoveEducation('${id}')" 
                    style="padding:4px 8px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:4px;color:#ff4d4d;cursor:pointer;font-size:11px;">
                Remove
            </button>
        </div>
    `;
    
    container.appendChild(div);
}

// Remove education entry
function rbRemoveEducation(id) {
    const element = document.getElementById(id);
    if (element) {
        element.remove();
    }
}

// Main build function
function rbBuild() {
    const name = document.getElementById('rb-name').value.trim();
    const title = document.getElementById('rb-title').value.trim();
    const email = document.getElementById('rb-email').value.trim();
    const phone = document.getElementById('rb-phone').value.trim();
    const location = document.getElementById('rb-location').value.trim();
    const summary = document.getElementById('rb-summary').value.trim();
    const skills = document.getElementById('rb-skills').value.trim();
    const template = document.getElementById('rb-template').value;
    
    if (!name) {
        rbShowMessage('Enter your name', 'warning');
        document.getElementById('rb-name').focus();
        return;
    }
    
    // Collect experiences
    const experiences = [];
    document.querySelectorAll('.rb-experience').forEach(expEl => {
        const title = expEl.querySelector('.rb-exp-title')?.value.trim();
        const company = expEl.querySelector('.rb-exp-company')?.value.trim();
        const dates = expEl.querySelector('.rb-exp-dates')?.value.trim();
        const location = expEl.querySelector('.rb-exp-location')?.value.trim();
        const description = expEl.querySelector('.rb-exp-description')?.value.trim();
        
        if (title && company) {
            experiences.push({ title, company, dates, location, description });
        }
    });
    
    // Collect education
    const educations = [];
    document.querySelectorAll('.rb-education').forEach(eduEl => {
        const degree = eduEl.querySelector('.rb-edu-degree')?.value.trim();
        const school = eduEl.querySelector('.rb-edu-school')?.value.trim();
        const dates = eduEl.querySelector('.rb-edu-dates')?.value.trim();
        const details = eduEl.querySelector('.rb-edu-details')?.value.trim();
        
        if (degree && school) {
            educations.push({ degree, school, dates, details });
        }
    });
    
    // Save data
    rbExperiences = experiences;
    rbEducations = educations;
    rbSaveData();
    
    // Generate resume
    rbGenerateResume(name, title, email, phone, location, summary, skills, experiences, educations, template);
    
    // Show preview
    document.getElementById('rb-preview').style.display = 'block';
    
    rbShowMessage('Resume built!', 'success');
}

// Generate resume HTML
function rbGenerateResume(name, title, email, phone, location, summary, skills, experiences, educations, template) {
    const container = document.getElementById('rb-resume-content');
    
    // Parse skills
    const skillList = skills.split(',').map(s => s.trim()).filter(s => s.length > 0);
    
    let html = `
        <div style="max-width:800px;margin:0 auto;line-height:1.6;font-size:14px;">
    `;
    
    // Header
    html += `
        <div style="border-bottom:2px solid #2dd4ff;padding-bottom:20px;margin-bottom:20px;">
            <h1 style="margin:0 0 5px 0;color:#000;font-size:32px;font-weight:bold;">${name}</h1>
            ${title ? `<div style="color:#2dd4ff;font-size:18px;font-weight:500;margin-bottom:10px;">${title}</div>` : ''}
            
            <div style="display:flex;flex-wrap:wrap;gap:12px;color:#666;font-size:14px;">
                ${email ? `<div>üìß ${email}</div>` : ''}
                ${phone ? `<div>üì± ${phone}</div>` : ''}
                ${location ? `<div>üìç ${location}</div>` : ''}
            </div>
        </div>
    `;
    
    // Summary
    if (summary) {
        html += `
            <div style="margin-bottom:20px;">
                <h2 style="color:#2dd4ff;border-bottom:1px solid #eee;padding-bottom:5px;margin-bottom:10px;font-size:18px;">PROFESSIONAL SUMMARY</h2>
                <div style="color:#333;">${summary.replace(/\n/g, '<br>')}</div>
            </div>
        `;
    }
    
    // Experience
    if (experiences.length > 0) {
        html += `
            <div style="margin-bottom:20px;">
                <h2 style="color:#2dd4ff;border-bottom:1px solid #eee;padding-bottom:5px;margin-bottom:10px;font-size:18px;">EXPERIENCE</h2>
        `;
        
        experiences.forEach(exp => {
            html += `
                <div style="margin-bottom:15px;">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:5px;">
                        <div>
                            <div style="font-weight:bold;color:#000;">${exp.title}</div>
                            <div style="color:#666;">${exp.company}</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-weight:500;color:#000;">${exp.dates || ''}</div>
                            <div style="color:#666;font-size:13px;">${exp.location || ''}</div>
                        </div>
                    </div>
                    ${exp.description ? `<div style="color:#444;margin-top:5px;">${exp.description.replace(/\n/g, '<br>')}</div>` : ''}
                </div>
            `;
        });
        
        html += `</div>`;
    }
    
    // Education
    if (educations.length > 0) {
        html += `
            <div style="margin-bottom:20px;">
                <h2 style="color:#2dd4ff;border-bottom:1px solid #eee;padding-bottom:5px;margin-bottom:10px;font-size:18px;">EDUCATION</h2>
        `;
        
        educations.forEach(edu => {
            html += `
                <div style="margin-bottom:15px;">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:5px;">
                        <div>
                            <div style="font-weight:bold;color:#000;">${edu.degree}</div>
                            <div style="color:#666;">${edu.school}</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-weight:500;color:#000;">${edu.dates || ''}</div>
                        </div>
                    </div>
                    ${edu.details ? `<div style="color:#444;margin-top:5px;">${edu.details.replace(/\n/g, '<br>')}</div>` : ''}
                </div>
            `;
        });
        
        html += `</div>`;
    }
    
    // Skills
    if (skillList.length > 0) {
        html += `
            <div style="margin-bottom:20px;">
                <h2 style="color:#2dd4ff;border-bottom:1px solid #eee;padding-bottom:5px;margin-bottom:10px;font-size:18px;">SKILLS</h2>
                <div style="display:flex;flex-wrap:wrap;gap:8px;">
        `;
        
        skillList.forEach(skill => {
            html += `
                <div style="background:#f0f0f0;padding:5px 12px;border-radius:20px;color:#333;font-size:13px;">
                    ${skill}
                </div>
            `;
        });
        
        html += `
                </div>
            </div>
        `;
    }
    
    // Footer
    html += `
        <div style="border-top:1px solid #eee;padding-top:20px;margin-top:20px;text-align:center;color:#999;font-size:12px;">
            Generated with Resume Builder ‚Ä¢ ${new Date().toLocaleDateString()}
        </div>
    `;
    
    html += `</div>`;
    
    container.innerHTML = html;
    
    // Apply template styles
    rbApplyTemplate(container, template);
}

// Apply template styles
function rbApplyTemplate(container, template) {
    // For now, just add template class
    container.className = 'rb-resume rb-template-' + template;
}

// Print resume
function rbPrint() {
    const content = document.getElementById('rb-resume-content').innerHTML;
    const originalContent = document.body.innerHTML;
    
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <title>Resume - ${document.getElementById('rb-name').value || 'Resume'}</title>
            <style>
                body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
                h1 { color: #000; margin-bottom: 5px; }
                h2 { color: #2dd4ff; border-bottom: 1px solid #eee; padding-bottom: 5px; }
                .contact-info { color: #666; margin-bottom: 20px; }
                .section { margin-bottom: 20px; }
                .skill-tag { background: #f0f0f0; padding: 4px 10px; border-radius: 15px; display: inline-block; margin: 2px 5px 2px 0; }
                @media print {
                    body { margin: 0; }
                    .no-print { display: none; }
                }
            </style>
        </head>
        <body>
            ${content}
            <div class="no-print" style="margin-top: 30px; text-align: center; color: #999; font-size: 12px;">
                <button onclick="window.print()" style="padding: 10px 20px; background: #2dd4ff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Resume</button>
            </div>
        </body>
        </html>
    `);
    printWindow.document.close();
}

// Export resume
function rbExport() {
    const name = document.getElementById('rb-name').value || 'resume';
    const content = document.getElementById('rb-resume-content').innerHTML;
    
    // Create text version
    let text = `${name.toUpperCase()} - RESUME\n`;
    text += '='.repeat(50) + '\n\n';
    
    const elements = document.querySelectorAll('#rb-resume-content div, #rb-resume-content h1, #rb-resume-content h2');
    elements.forEach(el => {
        if (el.tagName === 'H1') text += '\n' + el.textContent.toUpperCase() + '\n';
        else if (el.tagName === 'H2') text += '\n' + el.textContent.toUpperCase() + '\n';
        else if (el.textContent.trim()) text += el.textContent + '\n';
    });
    
    text += '\n' + '='.repeat(50) + '\n';
    text += `Generated: ${new Date().toLocaleDateString()}`;
    
    // Create download
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${name.toLowerCase().replace(/\s+/g, '-')}-resume.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    rbShowMessage('Resume exported!', 'success');
}

// Reset builder
function rbReset() {
    if (confirm('Reset all inputs? This will clear all data.')) {
        document.querySelector('form').reset();
        document.getElementById('rb-experience-container').innerHTML = '';
        document.getElementById('rb-education-container').innerHTML = '';
        document.getElementById('rb-preview').style.display = 'none';
        localStorage.removeItem('rb-data');
        
        rbExperiences = [];
        rbEducations = [];
        
        // Add fresh entries
        rbAddExperience();
        rbAddEducation();
        
        rbShowMessage('Resume builder reset', 'info');
    }
}

// Show message
function rbShowMessage(msg, type) {
    const colors = { success: '#39ff14', warning: '#ffcc00', error: '#ff2d55', info: '#2dd4ff' };
    
    // Remove existing
    const existing = document.querySelector('.rb-msg');
    if (existing) existing.remove();
    
    // Create new
    const div = document.createElement('div');
    div.className = 'rb-msg';
    div.textContent = msg;
    div.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        background: rgba(0,0,0,0.9);
        border: 1px solid ${colors[type]};
        border-radius: 8px;
        color: ${colors[type]};
        z-index: 10000;
        font-weight: 500;
        animation: rbSlideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(div);
    
    setTimeout(() => {
        div.style.animation = 'rbSlideOut 0.3s ease-out';
        setTimeout(() => div.remove(), 300);
    }, 3000);
}

// Add animation styles
if (!document.querySelector('#rb-styles')) {
    const style = document.createElement('style');
    style.id = 'rb-styles';
    style.textContent = `
        @keyframes rbSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes rbSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        .rb-experience, .rb-education {
            transition: all 0.2s ease;
        }
        
        .rb-experience:hover, .rb-education:hover {
            background: rgba(0,0,0,0.3) !important;
            transform: translateY(-2px);
        }
        
        #rb-resume-content {
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
    `;
    document.head.appendChild(style);
}
</script>

<style>
#resume-builder-title {
    color: var(--accent);
    margin-top: 0;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    #rb-resume-content {
        padding: 16px !important;
        font-size: 12px !important;
    }
    
    .rb-experience > div:first-child,
    .rb-education > div:first-child {
        flex-direction: column !important;
        gap: 8px !important;
    }
    
    .rb-experience > div:first-child > div:last-child,
    .rb-education > div:first-child > div:last-child {
        margin-left: 0 !important;
        width: 100% !important;
    }
    
    input, textarea, button, select {
        font-size: 16px !important; /* Prevents iOS zoom */
        min-height: 44px; /* Better touch target */
    }
    
    textarea {
        min-height: 80px;
    }
    
    button {
        padding: 12px !important;
    }
}
</style>
