<h2 id="science-quiz-title" style="margin-top:0;">Science Quiz Generator</h2>

<form aria-describedby="science-quiz-desc">
  <p id="science-quiz-desc" class="small">Generate science quiz questions and test your knowledge with fun facts.</p>

  <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
    <div class="field">
      <label for="quiz-topic">Topic</label>
      <select id="quiz-topic" style="width:100%;">
        <option value="physics" selected>Physics</option>
        <option value="chemistry">Chemistry</option>
        <option value="biology">Biology</option>
        <option value="earth-science">Earth Science</option>
        <option value="general">General Science</option>
      </select>
    </div>

    <div class="field">
      <label for="quiz-count">Number of Questions</label>
      <input id="quiz-count" type="number" min="1" max="10" value="5" style="width:100%;" />
    </div>

    <div class="field">
      <label for="quiz-show-facts">Show Science Facts</label>
      <select id="quiz-show-facts" style="width:100%;">
        <option value="yes" selected>Yes</option>
        <option value="no">No</option>
      </select>
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="quizGenerate(this)">Generate Quiz</button>
    <button type="button" class="secondary" onclick="quizReset(this)">Reset</button>
    <button type="button" onclick="quizCopy(this)">Copy Quiz</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Quiz Questions & Facts</h3>
  <textarea id="quiz-output" rows="12" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div id="quiz-facts-container" style="margin-top:16px;display:none;">
    <ul style="list-style:disc;padding-left:20px;font-size:0.95rem;line-height:1.5;">
      <li>Water expands when it freezes, unlike most substances.</li>
      <li>The speed of light is ~299,792 km/s.</li>
      <li>DNA carries genetic information in all living organisms.</li>
      <li>Earth's atmosphere is ~78% nitrogen.</li>
      <li>Energy cannot be created or destroyed, only transformed.</li>
      <li>Plants produce oxygen through photosynthesis.</li>
    </ul>
  </div>

  <div style="margin-top:8px;">
    <div id="quiz-hint" class="small" style="opacity:0.9;"></div>
  </div>
</div>

<script>
/* science-quiz.html
   - Science quiz generator card
   - Scoped with quiz- prefix
*/

// Quiz questions database
const quizQuestions = {
  physics: [
    {q: "What is the force that opposes motion between two surfaces?", a: "Friction"},
    {q: "What is the SI unit of electric current?", a: "Ampere"},
    {q: "What type of energy is stored in a stretched spring?", a: "Elastic potential energy"},
    {q: "What is the acceleration due to gravity on Earth?", a: "9.8 m/s²"},
    {q: "What is the name of the principle that states energy cannot be created or destroyed?", a: "Conservation of energy"}
  ],
  chemistry: [
    {q: "What is the smallest unit of an element?", a: "Atom"},
    {q: "What is the pH of a neutral solution?", a: "7"},
    {q: "What gas do plants absorb during photosynthesis?", a: "Carbon dioxide"},
    {q: "What is the chemical symbol for gold?", a: "Au"},
    {q: "What process turns a liquid into a gas?", a: "Evaporation"}
  ],
  biology: [
    {q: "What organ pumps blood throughout the body?", a: "Heart"},
    {q: "What is the basic unit of life?", a: "Cell"},
    {q: "What process do plants use to make food from sunlight?", a: "Photosynthesis"},
    {q: "What is the largest organ in the human body?", a: "Skin"},
    {q: "What molecule carries genetic information?", a: "DNA"}
  ],
  "earth-science": [
    {q: "What is the hardest natural substance on Earth?", a: "Diamond"},
    {q: "What layer of the atmosphere contains the ozone layer?", a: "Stratosphere"},
    {q: "What scale measures earthquake intensity?", a: "Richter scale"},
    {q: "What is the largest planet in our solar system?", a: "Jupiter"},
    {q: "What gas makes up about 78% of Earth's atmosphere?", a: "Nitrogen"}
  ],
  general: [
    {q: "How many bones are in the adult human body?", a: "206"},
    {q: "What planet is known as the Red Planet?", a: "Mars"},
    {q: "What is the freezing point of water in Celsius?", a: "0°C"},
    {q: "What is the chemical formula for water?", a: "H₂O"},
    {q: "What is the closest star to Earth?", a: "The Sun"}
  ]
};

function quizReset(btn){
  // Remove .card reference
  document.querySelector('form').reset();
  document.querySelector('#quiz-output').value = "";
  document.querySelector('#quiz-hint').textContent = "";
  document.querySelector('#quiz-facts-container').style.display = "none";
}

function quizCopy(btn){
  const out = document.querySelector('#quiz-output').value;
  if(!out.trim()) return;
  
  if(navigator.clipboard){
    navigator.clipboard.writeText(out).then(() => {
      const h = document.querySelector('#quiz-hint');
      h.textContent = "Copied to clipboard!";
      setTimeout(() => {
        if(h.textContent === "Copied to clipboard!") h.textContent = "";
      }, 2000);
    }).catch(err => {
      console.error('Failed to copy: ', err);
    });
  } else {
    // Fallback for older browsers
    const textArea = document.querySelector('#quiz-output');
    textArea.select();
    try {
      document.execCommand('copy');
      const h = document.querySelector('#quiz-hint');
      h.textContent = "Copied!";
      setTimeout(() => {
        if(h.textContent === "Copied!") h.textContent = "";
      }, 2000);
    } catch (err) {
      const h = document.querySelector('#quiz-hint');
      h.textContent = "Press Ctrl+C to copy";
    }
  }
}

function quizGenerate(btn){
  const topic = document.querySelector('#quiz-topic').value;
  const count = parseInt(document.querySelector('#quiz-count').value) || 5;
  const showFacts = document.querySelector('#quiz-show-facts').value === "yes";
  
  // Validate count
  const questionCount = Math.min(Math.max(count, 1), 10);
  
  // Get questions for selected topic
  const questions = quizQuestions[topic] || quizQuestions.general;
  
  // Select random questions
  const selectedQuestions = [];
  const availableQuestions = [...questions]; // Copy array
  
  for(let i = 0; i < questionCount && availableQuestions.length > 0; i++) {
    const randomIndex = Math.floor(Math.random() * availableQuestions.length);
    selectedQuestions.push(availableQuestions[randomIndex]);
    availableQuestions.splice(randomIndex, 1);
  }
  
  // Generate quiz text
  let output = `=== SCIENCE QUIZ ===\n`;
  output += `Topic: ${topic.charAt(0).toUpperCase() + topic.slice(1)}\n`;
  output += `Number of Questions: ${selectedQuestions.length}\n\n`;
  
  selectedQuestions.forEach((item, index) => {
    output += `${index + 1}. ${item.q}\n`;
    output += `   Answer: ${item.a}\n\n`;
  });
  
  output += `Good luck with your quiz!\n`;
  output += `Note: This is for educational purposes only.\n`;
  
  document.querySelector('#quiz-output').value = output;
  document.querySelector('#quiz-hint').textContent = `Generated ${selectedQuestions.length} questions on ${topic}.`;
  document.querySelector('#quiz-facts-container').style.display = showFacts ? "block" : "none";
}
</script>
