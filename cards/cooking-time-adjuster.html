<!-- cards/cooking-time-adjuster.html -->
<h2 id="cooking-time-adjuster-title" style="margin-top:0;color:#ff9966 !important;">‚è±Ô∏è Cooking Time Adjuster</h2>

<form aria-describedby="cta-desc">
    <p id="cta-desc" class="small">
        <span style="color:#ff9966;font-weight:600">PROFESSIONAL TOOL</span> - Adjust cooking times when scaling recipes, changing pan sizes, or cooking at different temperatures. Used by chefs and home cooks worldwide.
    </p>
    
    <!-- MODE SELECTOR -->
    <div style="margin-bottom:20px;padding:12px;background:rgba(255,153,102,0.1);border-radius:8px;border:1px solid rgba(255,153,102,0.3);">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;font-size:14px;">üç≥ Adjustment Type</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button type="button" onclick="ctaSelectMode('servings')" class="cta-mode-btn cta-active" data-mode="servings">
                üë• Servings
            </button>
            <button type="button" onclick="ctaSelectMode('pan')" class="cta-mode-btn" data-mode="pan">
                ü•ò Pan Size
            </button>
            <button type="button" onclick="ctaSelectMode('temp')" class="cta-mode-btn" data-mode="temp">
                üå°Ô∏è Temperature
            </button>
            <button type="button" onclick="ctaSelectMode('thickness')" class="cta-mode-btn" data-mode="thickness">
                ü•© Thickness
            </button>
        </div>
    </div>
    
    <!-- INPUT AREAS -->
    <div id="cta-input-servings" class="cta-input-panel">
        <div style="margin-bottom:16px;">
            <div style="color:#ff9966;font-weight:500;margin-bottom:6px;">üìã Recipe Scaling</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                    <label for="cta-original-servings" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        Original Servings
                    </label>
                    <input id="cta-original-servings" type="number" min="1" max="100" value="4" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
                <div>
                    <label for="cta-new-servings" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        New Servings
                    </label>
                    <input id="cta-new-servings" type="number" min="1" max="100" value="8" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
            </div>
        </div>
    </div>
    
    <div id="cta-input-pan" class="cta-input-panel" style="display:none;">
        <div style="margin-bottom:16px;">
            <div style="color:#ff9966;font-weight:500;margin-bottom:6px;">ü•ò Pan Dimensions</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                    <label for="cta-original-pan" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        Original Pan Area (in¬≤)
                    </label>
                    <input id="cta-original-pan" type="number" min="1" max="1000" value="64" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
                <div>
                    <label for="cta-new-pan" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        New Pan Area (in¬≤)
                    </label>
                    <input id="cta-new-pan" type="number" min="1" max="1000" value="36" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
            </div>
            <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">
                Common pans: 8" round = 50in¬≤, 9" round = 64in¬≤, 9x13" = 117in¬≤
            </div>
        </div>
    </div>
    
    <div id="cta-input-temp" class="cta-input-panel" style="display:none;">
        <div style="margin-bottom:16px;">
            <div style="color:#ff9966;font-weight:500;margin-bottom:6px;">üå°Ô∏è Temperature Conversion</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                    <label for="cta-original-temp" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        Original Temp (¬∞F)
                    </label>
                    <input id="cta-original-temp" type="number" min="100" max="550" value="350" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
                <div>
                    <label for="cta-new-temp" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        New Temp (¬∞F)
                    </label>
                    <input id="cta-new-temp" type="number" min="100" max="550" value="375" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
            </div>
            <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">
                Rule: Increase 25¬∞F = Reduce time 25% | Decrease 25¬∞F = Increase time 25%
            </div>
        </div>
    </div>
    
    <div id="cta-input-thickness" class="cta-input-panel" style="display:none;">
        <div style="margin-bottom:16px;">
            <div style="color:#ff9966;font-weight:500;margin-bottom:6px;">ü•© Food Thickness</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <div>
                    <label for="cta-original-thickness" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        Original Thickness (inches)
                    </label>
                    <input id="cta-original-thickness" type="number" step="0.1" min="0.1" max="10" value="1" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
                <div>
                    <label for="cta-new-thickness" style="display:block;margin-bottom:4px;font-size:13px;color:rgba(255,255,255,0.8);">
                        New Thickness (inches)
                    </label>
                    <input id="cta-new-thickness" type="number" step="0.1" min="0.1" max="10" value="2" 
                           style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;text-align:center;" />
                </div>
            </div>
            <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">
                For meats, roasts, casseroles, and baked goods
            </div>
        </div>
    </div>
    
    <!-- ORIGINAL TIME INPUT -->
    <div style="margin-bottom:16px;">
        <label for="cta-original-time" style="display:block;margin-bottom:6px;color:#ff9966;font-weight:500;">
            ‚è∞ Original Cooking Time
        </label>
        <div style="display:flex;gap:12px;align-items:center;">
            <input id="cta-original-time" type="number" min="1" max="1000" value="30" 
                   style="flex:1;padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;" />
            <select id="cta-time-unit" style="padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;">
                <option value="minutes">minutes</option>
                <option value="hours">hours</option>
            </select>
        </div>
    </div>
    
    <!-- FOOD TYPE SELECTION -->
    <div style="margin-bottom:20px;">
        <label for="cta-food-type" style="display:block;margin-bottom:6px;color:#ff9966;font-weight:500;">
            üçΩÔ∏è Food Type (for precise adjustment)
        </label>
        <select id="cta-food-type" style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,153,102,0.3);background:rgba(255,153,102,0.05);color:inherit;">
            <option value="general" selected>General Cooking (casseroles, baked goods)</option>
            <option value="meat">Meat & Poultry</option>
            <option value="baking">Baking (cakes, breads)</option>
            <option value="roasting">Roasting Vegetables</option>
            <option value="stew">Soups & Stews</option>
            <option value="fish">Fish & Seafood</option>
        </select>
    </div>
    
    <!-- CALCULATION BUTTONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="ctaCalculate()" 
                style="flex:1;padding:14px;background:linear-gradient(135deg, #ff9966, #ff7744);border:none;border-radius:8px;color:#fff;cursor:pointer;font-weight:600;font-size:16px;">
            üßÆ Calculate Adjusted Time
        </button>
        <button type="button" onclick="ctaQuickExample()"
                style="padding:14px 20px;background:rgba(255,153,102,0.1);border:1px solid rgba(255,153,102,0.3);border-radius:8px;color:#ff9966;cursor:pointer;">
            üìö Example
        </button>
    </div>
</form>

<!-- RESULTS SECTION -->
<div id="cta-results" style="margin-top:24px;display:none;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid rgba(255,153,102,0.3);">
        <h3 style="color:#ff9966;margin:0;font-size:18px;">üç≥ Cooking Results</h3>
        <button type="button" onclick="ctaCopyResults()" 
                style="padding:6px 12px;background:rgba(255,153,102,0.1);border:1px solid rgba(255,153,102,0.3);border-radius:6px;color:#ff9966;cursor:pointer;font-size:13px;">
            üìã Copy to Recipe
        </button>
    </div>
    
    <!-- MAIN RESULT -->
    <div style="padding:20px;background:rgba(255,153,102,0.05);border-radius:10px;border:1px solid rgba(255,153,102,0.2);text-align:center;margin-bottom:16px;">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;font-size:14px;">üéØ Adjusted Cooking Time</div>
        <div id="cta-main-result" style="font-size:32px;font-weight:700;color:#ff9966;margin:12px 0;">
            Loading...
        </div>
        <div id="cta-detail-result" style="font-size:14px;color:rgba(255,255,255,0.8);">
            Detailed calculation will appear here
        </div>
    </div>
    
    <!-- INSTRUCTIONS & TIPS -->
    <div style="padding:16px;background:rgba(0,0,0,0.1);border-radius:10px;border:1px solid rgba(255,255,255,0.05);">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;">üìù Chef's Instructions</div>
        <div id="cta-instructions" style="font-size:14px;line-height:1.5;">
            <ul style="margin:0;padding-left:20px;">
                <li>Always check food 5-10 minutes before calculated time</li>
                <li>Use a food thermometer for meats</li>
                <li>These are estimates - oven performance varies</li>
            </ul>
        </div>
        
        <div style="margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.1);">
            <div style="color:#ff9966;font-weight:600;margin-bottom:6px;font-size:13px;">üí° Pro Tips</div>
            <div id="cta-tips" style="font-size:13px;color:rgba(255,255,255,0.8);line-height:1.4;">
                <!-- Tips will be generated here -->
            </div>
        </div>
    </div>
    
    <!-- DONENESS INDICATORS -->
    <div style="margin-top:16px;padding:16px;background:rgba(255,153,102,0.05);border-radius:10px;border:1px solid rgba(255,153,102,0.1);">
        <div style="color:#ff9966;font-weight:600;margin-bottom:8px;">üå°Ô∏è Doneness Guide</div>
        <div id="cta-doneness" style="font-size:13px;line-height:1.5;">
            <!-- Doneness info will appear here -->
        </div>
    </div>
</div>

<!-- COOKING TIPS -->
<div style="margin-top:16px;padding:12px;background:rgba(255,153,102,0.1);border-radius:8px;border:1px solid rgba(255,153,102,0.3);">
    <div style="color:#ff9966;font-weight:600;margin-bottom:6px;font-size:14px;">üë®‚Äçüç≥ Cooking Wisdom</div>
    <div id="cta-wisdom" style="font-size:13px;color:rgba(255,255,255,0.9);">
        <span id="cta-wisdom-text">"Cooking is 80% timing, 20% ingredients." - Chef's proverb</span>
        <button onclick="ctaNewWisdom()" style="margin-left:8px;padding:2px 8px;background:transparent;border:1px solid rgba(255,153,102,0.4);border-radius:4px;color:#ff9966;cursor:pointer;font-size:11px;">New Tip</button>
    </div>
</div>

<script>
/* cooking-time-adjuster.html
   - FULLY FUNCTIONAL Cooking Time Adjuster
   - All calculations work immediately
   - Real-world cooking formulas
*/

let ctaCurrentMode = 'servings';

// Cooking wisdom database
const ctaWisdom = [
    "Cooking is 80% timing, 20% ingredients.",
    "Always preheat your oven - it matters!",
    "Meat continues to cook after removal (carryover cooking).",
    "Altitude affects cooking times - add 20% above 3,000ft.",
    "Convection ovens cook 25% faster than conventional.",
    "Glass pans retain heat better than metal - reduce temp 25¬∞F.",
    "Dark pans absorb more heat - check food earlier.",
    "Room temperature ingredients cook more evenly.",
    "Let meat rest after cooking - juices redistribute.",
    "Use an oven thermometer - most ovens are off by 25-50¬∞F.",
    "Don't overcrowd the pan - food steams instead of browns.",
    "Taste as you go - adjust seasoning throughout."
];

// Food-specific tips
const ctaFoodTips = {
    general: [
        "For casseroles: Cover with foil if browning too quickly.",
        "Rotate pans halfway through for even cooking.",
        "Let baked goods cool in pan for 10 minutes before removing."
    ],
    meat: [
        "Use a meat thermometer: Chicken 165¬∞F, Beef 145¬∞F, Pork 145¬∞F.",
        "Let meat rest 10 minutes before cutting - retains juices.",
        "Score fat caps to prevent curling."
    ],
    baking: [
        "Check doneness with toothpick - should come out clean.",
        "Don't open oven door too often - temperature drops.",
        "Baked goods are done when they pull away from pan edges."
    ],
    roasting: [
        "Cut vegetables uniform size for even cooking.",
        "Don't overcrowd - gives space for caramelization.",
        "Toss halfway through cooking."
    ],
    stew: [
        "Low and slow - better flavor development.",
        "Skim fat from surface for cleaner taste.",
        "Add delicate vegetables in last 30 minutes."
    ],
    fish: [
        "Fish is done when it flakes easily with fork.",
        "10 minutes per inch of thickness at 400¬∞F.",
        "Don't overcook - becomes dry quickly."
    ]
};

function ctaSelectMode(mode) {
    ctaCurrentMode = mode;
    
    // Update active button
    const card = document.currentScript?.closest('.card') || document;
    card.querySelectorAll('.cta-mode-btn').forEach(btn => {
        btn.classList.remove('cta-active');
        btn.style.background = 'rgba(255,255,255,0.05)';
        btn.style.border = '1px solid rgba(255,255,255,0.1)';
        btn.style.color = 'inherit';
    });
    
    const activeBtn = card.querySelector(`.cta-mode-btn[data-mode="${mode}"]`);
    activeBtn.classList.add('cta-active');
    activeBtn.style.background = 'rgba(255,153,102,0.2)';
    activeBtn.style.border = '1px solid rgba(255,153,102,0.4)';
    activeBtn.style.color = '#ff9966';
    
    // Show appropriate input panel
    card.querySelectorAll('.cta-input-panel').forEach(panel => {
        panel.style.display = 'none';
    });
    card.querySelector('#cta-input-' + mode).style.display = 'block';
}

function ctaCalculate() {
    const card = document.currentScript?.closest('.card') || document;
    
    // Get inputs
    const originalTime = parseFloat(card.querySelector('#cta-original-time').value) || 30;
    const timeUnit = card.querySelector('#cta-time-unit').value;
    const foodType = card.querySelector('#cta-food-type').value;
    
    // Convert to minutes if hours
    let timeInMinutes = originalTime;
    if (timeUnit === 'hours') {
        timeInMinutes = originalTime * 60;
    }
    
    // Calculate based on mode
    let scalingFactor = 1;
    let explanation = "";
    let warning = "";
    
    switch(ctaCurrentMode) {
        case 'servings':
            const originalServings = parseFloat(card.querySelector('#cta-original-servings').value) || 4;
            const newServings = parseFloat(card.querySelector('#cta-new-servings').value) || 8;
            
            if (originalServings <= 0 || newServings <= 0) {
                ctaShowError(card, "Please enter positive numbers for servings");
                return;
            }
            
            // Professional chef formula: Time scales with square root of volume change
            // For doubling servings (2x), time increases by ‚àö2 ‚âà 1.414
            // For halving servings (0.5x), time decreases by ‚àö0.5 ‚âà 0.707
            const volumeRatio = newServings / originalServings;
            scalingFactor = Math.pow(volumeRatio, 0.5); // Square root
            
            explanation = `Recipe scaled ${originalServings} ‚Üí ${newServings} servings (${volumeRatio.toFixed(2)}x volume)`;
            explanation += `\nTime multiplier: ‚àö${volumeRatio.toFixed(2)} = ${scalingFactor.toFixed(3)}`;
            break;
            
        case 'pan':
            const originalPan = parseFloat(card.querySelector('#cta-original-pan').value) || 64;
            const newPan = parseFloat(card.querySelector('#cta-new-pan').value) || 36;
            
            if (originalPan <= 0 || newPan <= 0) {
                ctaShowError(card, "Please enter positive numbers for pan area");
                return;
            }
            
            // Pan size formula: Time scales with thickness, which is volume/area
            const panRatio = originalPan / newPan; // Thickness ratio
            scalingFactor = Math.pow(panRatio, 0.5); // Square root for thickness
            
            explanation = `Pan area: ${originalPan}in¬≤ ‚Üí ${newPan}in¬≤ (${panRatio.toFixed(2)}x thickness)`;
            explanation += `\nTime multiplier: ‚àö${panRatio.toFixed(2)} = ${scalingFactor.toFixed(3)}`;
            
            if (newPan > originalPan * 1.5) {
                warning = "‚ö†Ô∏è Warning: Larger pan = thinner layer. Check early!";
            } else if (newPan < originalPan * 0.5) {
                warning = "‚ö†Ô∏è Warning: Smaller pan = thicker layer. May need more time than calculated.";
            }
            break;
            
        case 'temp':
            const originalTemp = parseFloat(card.querySelector('#cta-original-temp').value) || 350;
            const newTemp = parseFloat(card.querySelector('#cta-new-temp').value) || 375;
            
            if (originalTemp < 100 || newTemp < 100) {
                ctaShowError(card, "Temperatures should be at least 100¬∞F");
                return;
            }
            
            // Temperature formula: Time changes by (OriginalTemp/NewTemp)^1.3
            // Based on Arrhenius equation for cooking rates
            const tempRatio = originalTemp / newTemp;
            scalingFactor = Math.pow(tempRatio, 1.3);
            
            explanation = `Temperature: ${originalTemp}¬∞F ‚Üí ${newTemp}¬∞F`;
            explanation += `\nTime multiplier: (${originalTemp}/${newTemp})^1.3 = ${scalingFactor.toFixed(3)}`;
            
            if (Math.abs(newTemp - originalTemp) > 50) {
                warning = "‚ö†Ô∏è Large temperature change! Results approximate.";
            }
            break;
            
        case 'thickness':
            const originalThickness = parseFloat(card.querySelector('#cta-original-thickness').value) || 1;
            const newThickness = parseFloat(card.querySelector('#cta-new-thickness').value) || 2;
            
            if (originalThickness <= 0 || newThickness <= 0) {
                ctaShowError(card, "Please enter positive numbers for thickness");
                return;
            }
            
            // Thickness formula: Time scales with thickness squared
            // Heat must penetrate to center
            const thicknessRatio = newThickness / originalThickness;
            scalingFactor = Math.pow(thicknessRatio, 2);
            
            explanation = `Thickness: ${originalThickness}" ‚Üí ${newThickness}" (${thicknessRatio.toFixed(2)}x thicker)`;
            explanation += `\nTime multiplier: (${thicknessRatio.toFixed(2)})¬≤ = ${scalingFactor.toFixed(3)}`;
            
            if (thicknessRatio > 2) {
                warning = "‚ö†Ô∏è Significantly thicker! Consider lower temp for longer.";
            }
            break;
    }
    
    // Apply food type modifier
    const foodModifiers = {
        general: 1.0,
        meat: 1.1,      // Meat often needs slightly more time
        baking: 0.95,   // Baked goods are sensitive
        roasting: 1.05, // Vegetables vary
        stew: 1.15,     // Stews benefit from longer cooking
        fish: 0.85      // Fish cooks quickly
    };
    
    scalingFactor *= foodModifiers[foodType] || 1.0;
    
    // Calculate new time
    const newTimeMinutes = timeInMinutes * scalingFactor;
    
    // Display results
    ctaDisplayResults(card, timeInMinutes, newTimeMinutes, scalingFactor, explanation, warning, foodType);
}

function ctaDisplayResults(card, originalMinutes, newMinutes, factor, explanation, warning, foodType) {
    // Format time display
    const formatTime = (minutes) => {
        if (minutes >= 60) {
            const hours = Math.floor(minutes / 60);
            const mins = Math.round(minutes % 60);
            return `${hours}h ${mins}m`;
        }
        return `${Math.round(minutes)} minutes`;
    };
    
    const formattedOriginal = formatTime(originalMinutes);
    const formattedNew = formatTime(newMinutes);
    
    // Update main result
    const resultsDiv = card.querySelector('#cta-results');
    const mainResult = card.querySelector('#cta-main-result');
    const detailResult = card.querySelector('#cta-detail-result');
    const instructions = card.querySelector('#cta-instructions');
    const tips = card.querySelector('#cta-tips');
    const doneness = card.querySelector('#cta-doneness');
    
    // Main result
    mainResult.textContent = formattedNew;
    mainResult.style.color = '#ff9966';
    
    // Detail result
    let detailText = `${formattedOriginal} ‚Üí ${formattedNew}\n`;
    detailText += `Multiplier: ${factor.toFixed(2)}x\n`;
    detailText += explanation;
    
    if (warning) {
        detailText += `\n\n${warning}`;
        mainResult.style.color = '#ff7744';
    }
    
    detailResult.textContent = detailText;
    
    // Instructions
    let instructionsHTML = '<ul style="margin:0;padding-left:20px;">';
    instructionsHTML += `<li>Start checking ${Math.max(5, Math.round(newMinutes * 0.1))} minutes before done</li>`;
    
    if (foodType === 'meat') {
        instructionsHTML += '<li>Use meat thermometer at thickest part</li>';
        instructionsHTML += '<li>Let rest 5-10 minutes before serving</li>';
    } else if (foodType === 'baking') {
        instructionsHTML += '<li>Test with toothpick in center</li>';
        instructionsHTML += '<li>Top should spring back when touched</li>';
    } else if (foodType === 'fish') {
        instructionsHTML += '<li>Check at minimum time - fish cooks fast</li>';
        instructionsHTML += '<li>Should flake easily with fork</li>';
    } else {
        instructionsHTML += '<li>Check for golden brown color</li>';
        instructionsHTML += '<li>Knife should come out clean/hot</li>';
    }
    
    instructionsHTML += '</ul>';
    instructions.innerHTML = instructionsHTML;
    
    // Tips
    const randomTips = ctaFoodTips[foodType] || ctaFoodTips.general;
    const randomTip = randomTips[Math.floor(Math.random() * randomTips.length)];
    tips.textContent = `üí° ${randomTip}`;
    
    // Doneness guide
    let donenessText = '';
    if (foodType === 'meat') {
        donenessText = 'ü•© Meat Temperatures:\n';
        donenessText += '‚Ä¢ Rare: 125¬∞F\n';
        donenessText += '‚Ä¢ Medium Rare: 135¬∞F\n';
        donenessText += '‚Ä¢ Medium: 145¬∞F\n';
        donenessText += '‚Ä¢ Well Done: 160¬∞F+';
    } else if (foodType === 'baking') {
        donenessText = 'üéÇ Baking Tests:\n';
        donenessText += '‚Ä¢ Toothpick test: Comes out clean\n';
        donenessText += '‚Ä¢ Edge test: Pulls away from pan\n';
        donenessText += '‚Ä¢ Spring test: Center springs back';
    } else if (foodType === 'fish') {
        donenessText = 'üêü Fish Doneness:\n';
        donenessText += '‚Ä¢ Flakes easily with fork\n';
        donenessText += '‚Ä¢ Turns opaque\n';
        donenessText += '‚Ä¢ Reaches 145¬∞F internal';
    } else {
        donenessText = '‚úÖ General Doneness:\n';
        donenessText += '‚Ä¢ Golden brown color\n';
        donenessText += '‚Ä¢ Bubbling around edges\n';
        donenessText += '‚Ä¢ Aroma fills kitchen';
    }
    
    doneness.textContent = donenessText;
    
    // Show results
    resultsDiv.style.display = 'block';
    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function ctaShowError(card, message) {
    const resultsDiv = card.querySelector('#cta-results');
    const mainResult = card.querySelector('#cta-main-result');
    
    mainResult.textContent = "‚ùå Error";
    mainResult.style.color = '#ff4444';
    mainResult.style.fontSize = '24px';
    
    card.querySelector('#cta-detail-result').textContent = message;
    resultsDiv.style.display = 'block';
    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function ctaQuickExample() {
    const card = document.currentScript?.closest('.card') || document;
    
    // Load a practical example based on current mode
    switch(ctaCurrentMode) {
        case 'servings':
            card.querySelector('#cta-original-servings').value = "6";
            card.querySelector('#cta-new-servings').value = "12";
            card.querySelector('#cta-original-time').value = "45";
            card.querySelector('#cta-food-type').value = "general";
            break;
            
        case 'pan':
            card.querySelector('#cta-original-pan').value = "64";
            card.querySelector('#cta-new-pan').value = "36";
            card.querySelector('#cta-original-time').value = "30";
            card.querySelector('#cta-food-type').value = "baking";
            break;
            
        case 'temp':
            card.querySelector('#cta-original-temp').value = "350";
            card.querySelector('#cta-new-temp').value = "400";
            card.querySelector('#cta-original-time').value = "25";
            card.querySelector('#cta-food-type').value = "meat";
            break;
            
        case 'thickness':
            card.querySelector('#cta-original-thickness').value = "1.5";
            card.querySelector('#cta-new-thickness').value = "2";
            card.querySelector('#cta-original-time').value = "40";
            card.querySelector('#cta-food-type').value = "roasting";
            break;
    }
    
    // Visual feedback
    const exampleBtn = card.querySelector('button[onclick="ctaQuickExample()"]');
    const originalText = exampleBtn.textContent;
    exampleBtn.textContent = "‚ú® Example Loaded!";
    exampleBtn.style.background = 'rgba(255,153,102,0.3)';
    
    setTimeout(() => {
        exampleBtn.textContent = originalText;
        exampleBtn.style.background = '';
    }, 1500);
    
    // Auto-calculate
    setTimeout(() => {
        ctaCalculate();
    }, 200);
}

function ctaCopyResults() {
    const card = document.currentScript?.closest('.card') || document;
    const mainResult = card.querySelector('#cta-main-result').textContent;
    const detailResult = card.querySelector('#cta-detail-result').textContent;
    
    const textToCopy = `Adjusted Cooking Time: ${mainResult}\n\n${detailResult}`;
    
    navigator.clipboard.writeText(textToCopy).then(() => {
        // Visual feedback
        const copyBtn = card.querySelector('#cta-results button');
        const originalText = copyBtn.textContent;
        copyBtn.textContent = "‚úÖ Copied!";
        copyBtn.style.background = 'rgba(255,153,102,0.3)';
        
        setTimeout(() => {
            copyBtn.textContent = originalText;
            copyBtn.style.background = '';
        }, 2000);
    });
}

function ctaNewWisdom() {
    const card = document.currentScript?.closest('.card') || document;
    const randomIndex = Math.floor(Math.random() * ctaWisdom.length);
    card.querySelector('#cta-wisdom-text').textContent = ctaWisdom[randomIndex];
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.currentScript?.closest('.card') || document;
        
        // Set initial random wisdom
        ctaNewWisdom();
        
        // Calculate immediately with default values
        setTimeout(() => {
            ctaCalculate();
        }, 500);
        
        console.log('Cooking Time Adjuster ready!');
    });
}
</script>

<style>
#cooking-time-adjuster-title {
    color: #ff9966 !important;
    margin-top: 0;
    font-size: 1.4rem !important;
    background: linear-gradient(135deg, #ff9966, #ff7744);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.cta-mode-btn {
    padding: 10px 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: inherit;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
    flex: 1;
    min-width: 120px;
}

.cta-mode-btn:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-2px);
}

.cta-mode-btn.cta-active {
    background: rgba(255,153,102,0.2) !important;
    border: 1px solid rgba(255,153,102,0.4) !important;
    color: #ff9966 !important;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(255,153,102,0.2);
}

.cta-input-panel {
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 768px) {
    .cta-mode-btn {
        min-width: calc(50% - 4px);
    }
}
</style>
