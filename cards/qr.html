<h2 id="qr-title" style="margin-top:0;">QR Code Generator</h2>

<form aria-describedby="qr-desc">
  <p id="qr-desc" class="small">Enter text or a URL to generate a scannable QR code.</p>

  <div class="field">
    <label for="qr-input">Text / URL</label>
    <div class="input"><input id="qr-input" type="text" placeholder="https://example.com" /></div>
  </div>

  <div class="actions">
    <button type="button" onclick="qrGenerate(this)">Generate</button>
    <button type="button" class="secondary" onclick="qrReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite" style="text-align:center; margin-top:20px;">
  <canvas id="qr-canvas" width="200" height="200" aria-label="Generated QR code"></canvas>
</div>

<details class="small" style="margin-top:12px;">
  <summary>How it works</summary>
  <p>
    QR codes encode text into a grid of black and white squares.  
    Scan with any phone camera to open the link or read the text.
  </p>
</details>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
function qrGenerate(btn) {
  const card = btn.closest('.card');
  const text = card.querySelector('#qr-input').value.trim();
  const canvas = card.querySelector('#qr-canvas');

  if (!text) {
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = '#9ccbe0';
    ctx.font = '14px Inter, sans-serif';
    ctx.fillText('Enter text first', 40, 100);
    return;
  }

  QRCode.toCanvas(canvas, text, {
    width: 200,
    margin: 2,
    color: {
      dark: '#2dd4ff',
      light: '#0b0f1a'
    }
  }, function (error) {
    if (error) {
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#ff4444';
      ctx.font = '14px Inter, sans-serif';
      ctx.fillText('Error generating QR', 30, 100);
    }
  });
}

function qrReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  const canvas = card.querySelector('#qr-canvas');
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0,0,canvas.width,canvas.height);
}
</script>
