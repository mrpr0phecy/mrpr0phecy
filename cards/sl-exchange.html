<h2 id="linden-dollar-exchange-title">ğŸ’° Linden Dollar (L$) Exchange Calculator</h2>

<form aria-describedby="linden-dollar-exchange-desc">
    <p id="linden-dollar-exchange-desc" class="small">
        Convert Linden Dollars (Second Life virtual currency) to real-world currencies using market rates. 
        <span style="color:var(--accent)">Rates are estimates â€” actual exchange rates may vary.</span>
    </p>
    
    <!-- LINDEN DOLLARS INPUT -->
    <div class="field" style="margin-bottom:16px;">
        <label for="lde-linden" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
            Linden Dollars (L$)
        </label>
        <input id="lde-linden" type="number" placeholder="e.g. 1000" min="0" step="1"
               style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;" />
        <div class="small" style="margin-top:4px;color:rgba(230,250,255,0.7);">
            Common amounts: 250 L$ â‰ˆ $1 USD
        </div>
    </div>
    
    <!-- CURRENCY SELECTION -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
        <div>
            <label for="lde-from-currency" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                From Currency
            </label>
            <div style="display:flex;align-items:center;gap:8px;padding:10px;border-radius:8px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:#39ff14;">
                <div style="font-size:20px;">â“</div>
                <div style="flex:1;">
                    <div style="font-weight:600;">Linden Dollar (L$)</div>
                    <div class="small" style="color:rgba(57,255,20,0.8);">Second Life virtual currency</div>
                </div>
            </div>
        </div>
        
        <div>
            <label for="lde-to-currency" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                To Currency
            </label>
            <select id="lde-to-currency" 
                    style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;">
                <optgroup label="Major Currencies">
                    <option value="USD" selected>ğŸ‡ºğŸ‡¸ US Dollar (USD)</option>
                    <option value="EUR">ğŸ‡ªğŸ‡º Euro (EUR)</option>
                    <option value="GBP">ğŸ‡¬ğŸ‡§ British Pound (GBP)</option>
                    <option value="JPY">ğŸ‡¯ğŸ‡µ Japanese Yen (JPY)</option>
                </optgroup>
                <optgroup label="Other Currencies">
                    <option value="CAD">ğŸ‡¨ğŸ‡¦ Canadian Dollar (CAD)</option>
                    <option value="AUD">ğŸ‡¦ğŸ‡º Australian Dollar (AUD)</option>
                    <option value="CNY">ğŸ‡¨ğŸ‡³ Chinese Yuan (CNY)</option>
                    <option value="INR">ğŸ‡®ğŸ‡³ Indian Rupee (INR)</option>
                    <option value="BRL">ğŸ‡§ğŸ‡· Brazilian Real (BRL)</option>
                    <option value="MXN">ğŸ‡²ğŸ‡½ Mexican Peso (MXN)</option>
                    <option value="KRW">ğŸ‡°ğŸ‡· South Korean Won (KRW)</option>
                    <option value="RUB">ğŸ‡·ğŸ‡º Russian Ruble (RUB)</option>
                </optgroup>
            </select>
        </div>
    </div>
    
    <!-- RATE SETTINGS -->
    <div style="margin-bottom:20px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.08);padding:12px;">
        <label for="lde-exchange-rate" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
            ğŸ’± Exchange Rate (L$ per USD)
        </label>
        <div style="position:relative;">
            <input id="lde-exchange-rate" type="range" min="200" max="300" value="250" step="5"
                   style="width:100%;margin-bottom:8px;" />
            <div style="display:flex;justify-content:space-between;color:rgba(230,250,255,0.7);font-size:12px;">
                <span>200 L$/USD</span>
                <span id="lde-rate-value">250 L$/USD</span>
                <span>300 L$/USD</span>
            </div>
            <div class="small" style="text-align:center;color:rgba(230,250,255,0.7);margin-top:4px;">
                Current market rate: ~250 L$ per $1 USD
            </div>
        </div>
    </div>
    
    <!-- QUICK AMOUNT BUTTONS -->
    <div style="margin-bottom:20px;">
        <div style="color:rgba(230,250,255,0.8);margin-bottom:8px;font-size:14px;">Quick Amounts:</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button type="button" onclick="ldeSetAmount(250)" style="padding:6px 10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#e6faff;cursor:pointer;font-size:12px;">L$250 (~$1)</button>
            <button type="button" onclick="ldeSetAmount(500)" style="padding:6px 10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#e6faff;cursor:pointer;font-size:12px;">L$500 (~$2)</button>
            <button type="button" onclick="ldeSetAmount(1000)" style="padding:6px 10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#e6faff;cursor:pointer;font-size:12px;">L$1,000 (~$4)</button>
            <button type="button" onclick="ldeSetAmount(5000)" style="padding:6px 10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#e6faff;cursor:pointer;font-size:12px;">L$5,000 (~$20)</button>
            <button type="button" onclick="ldeSetAmount(10000)" style="padding:6px 10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:#e6faff;cursor:pointer;font-size:12px;">L$10,000 (~$40)</button>
        </div>
    </div>
    
    <!-- ACTIONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="ldeConvert(this)" 
                style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
            ğŸ’± Convert Currency
        </button>
        <button type="button" onclick="ldeReset(this)"
                style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
            Reset
        </button>
    </div>
</form>

<!-- RESULTS -->
<div class="results" aria-live="polite" style="margin-top:16px;">
    <h3 class="small" style="color:var(--accent);margin-bottom:8px;">ğŸ“Š Currency Conversion Results</h3>
    
    <!-- RESULTS DISPLAY -->
    <div id="lde-results" style="display:none;">
        <div style="background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(45,212,255,0.2);padding:16px;margin-bottom:12px;">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
                <div style="text-align:center;">
                    <div style="font-size:12px;color:rgba(230,250,255,0.8);margin-bottom:4px;">From</div>
                    <div id="lde-from-amount" style="font-size:32px;font-weight:600;color:#9d4edd;">-- L$</div>
                    <div style="font-size:12px;color:rgba(230,250,255,0.7);">Linden Dollars</div>
                </div>
                <div style="text-align:center;">
                    <div style="font-size:12px;color:rgba(230,250,255,0.8);margin-bottom:4px;">To</div>
                    <div id="lde-to-amount" style="font-size:32px;font-weight:600;color:#39ff14;">--</div>
                    <div id="lde-to-currency-display" style="font-size:12px;color:rgba(230,250,255,0.7);">Currency</div>
                </div>
            </div>
            
            <div style="margin-top:16px;padding-top:16px;border-top:1px solid rgba(255,255,255,0.08);">
                <div style="font-size:12px;color:rgba(230,250,255,0.8);margin-bottom:8px;">ğŸ“ Exchange Details</div>
                <div id="lde-breakdown" style="font-family:monospace;white-space:pre-line;font-size:13px;line-height:1.4;"></div>
            </div>
        </div>
        
        <!-- MARKET INFORMATION -->
        <div style="background:rgba(20,20,20,0.3);border-radius:8px;border:1px solid rgba(157,78,221,0.2);padding:12px;margin-bottom:16px;">
            <div style="color:#9d4edd;font-weight:500;margin-bottom:8px;font-size:14px;">â„¹ï¸ About Linden Dollars</div>
            <ul style="list-style:none;padding-left:0;margin:0;font-size:13px;line-height:1.5;">
                <li style="margin-bottom:6px;padding-left:16px;position:relative;">ğŸ¦ <strong>Linden Dollar (L$):</strong> Official virtual currency of Second Life</li>
                <li style="margin-bottom:6px;padding-left:16px;position:relative;">ğŸ’± <strong>Exchange Rate:</strong> Typically 200-300 L$ per 1 USD (varies)</li>
                <li style="margin-bottom:6px;padding-left:16px;position:relative;">ğŸ”„ <strong>Conversion:</strong> L$ to USD first, then to other currencies</li>
                <li style="margin-bottom:6px;padding-left:16px;position:relative;">âš ï¸ <strong>Disclaimer:</strong> This calculator provides estimates only</li>
            </ul>
        </div>
        
        <!-- ACTION BUTTONS -->
        <div style="display:flex;gap:8px;justify-content:flex-end;">
            <button type="button" onclick="ldeCopyResults()"
                    style="padding:8px 16px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:8px;color:var(--accent);cursor:pointer;font-size:13px;">
                ğŸ“‹ Copy Results
            </button>
            <button type="button" onclick="ldeShowAllCurrencies()"
                    style="padding:8px 16px;background:rgba(157,78,221,0.1);border:1px solid rgba(157,78,221,0.3);border-radius:8px;color:#9d4edd;cursor:pointer;font-size:13px;">
                ğŸŒ Show All Currencies
            </button>
        </div>
    </div>
    
    <!-- INITIAL STATE -->
    <div id="lde-initial-state" style="text-align:center;padding:24px;color:rgba(230,250,255,0.6);">
        <div style="font-size:48px;margin-bottom:16px;">ğŸ’°</div>
        <div style="font-weight:500;margin-bottom:8px;color:var(--accent);">Linden Dollar Exchange</div>
        <div>Enter L$ amount and select currency to convert.</div>
    </div>
</div>

<script>
/* linden-dollar-exchange.html
   - Linden Dollar to real-world currency converter
   - Scoped with lde- prefix (linden dollar exchange)
*/

// Currency exchange rates relative to USD
const ldeRates = {
    USD: 1.00,      // US Dollar
    EUR: 0.92,      // Euro
    GBP: 0.79,      // British Pound
    JPY: 150.0,     // Japanese Yen
    CAD: 1.35,      // Canadian Dollar
    AUD: 1.55,      // Australian Dollar
    CNY: 7.10,      // Chinese Yuan
    INR: 83.0,      // Indian Rupee
    BRL: 5.20,      // Brazilian Real
    MXN: 17.0,      // Mexican Peso
    KRW: 1320.0,    // South Korean Won
    RUB: 92.0       // Russian Ruble
};

// Currency symbols
const ldeSymbols = {
    USD: '$', EUR: 'â‚¬', GBP: 'Â£', JPY: 'Â¥', CAD: 'C$', AUD: 'A$',
    CNY: 'Â¥', INR: 'â‚¹', BRL: 'R$', MXN: '$', KRW: 'â‚©', RUB: 'â‚½'
};

// Currency names
const ldeNames = {
    USD: 'US Dollar', EUR: 'Euro', GBP: 'British Pound', JPY: 'Japanese Yen',
    CAD: 'Canadian Dollar', AUD: 'Australian Dollar', CNY: 'Chinese Yuan',
    INR: 'Indian Rupee', BRL: 'Brazilian Real', MXN: 'Mexican Peso',
    KRW: 'South Korean Won', RUB: 'Russian Ruble'
};

function ldeConvert(btn) {
    const card = btn.closest('.card') || document;
    
    // Get inputs
    const lindenAmount = parseFloat(card.querySelector('#lde-linden').value);
    const targetCurrency = card.querySelector('#lde-to-currency').value;
    const exchangeRate = parseFloat(card.querySelector('#lde-exchange-rate').value); // L$ per USD
    
    // Validate input
    if (isNaN(lindenAmount) || lindenAmount <= 0) {
        showError(card, 'Please enter a valid Linden Dollar amount');
        return;
    }
    
    if (!ldeRates[targetCurrency]) {
        showError(card, 'Selected currency not supported');
        return;
    }
    
    // Calculate conversion
    const usdAmount = lindenAmount / exchangeRate; // Convert L$ to USD
    const targetAmount = usdAmount * ldeRates[targetCurrency]; // Convert USD to target currency
    
    // Format numbers based on currency
    let formattedTarget;
    if (targetCurrency === 'JPY' || targetCurrency === 'KRW' || targetCurrency === 'INR') {
        formattedTarget = Math.round(targetAmount).toLocaleString();
    } else {
        formattedTarget = targetAmount.toFixed(2);
    }
    
    // Update display
    card.querySelector('#lde-from-amount').textContent = `${lindenAmount.toLocaleString()} L$`;
    card.querySelector('#lde-to-amount').textContent = `${ldeSymbols[targetCurrency] || ''}${formattedTarget}`;
    card.querySelector('#lde-to-currency-display').textContent = ldeNames[targetCurrency];
    
    // Create breakdown
    const breakdown = `Exchange Calculation:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Linden Dollars: ${lindenAmount.toLocaleString()} L$
Exchange Rate: ${exchangeRate} L$ = $1 USD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
In US Dollars: $${usdAmount.toFixed(2)} USD
Conversion Rate: 1 USD = ${ldeRates[targetCurrency]} ${targetCurrency}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Final Amount: ${ldeSymbols[targetCurrency] || ''}${formattedTarget} ${targetCurrency}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’¡ Tip: Exchange rates fluctuate.
   Always check current rates before trading.`;
    
    card.querySelector('#lde-breakdown').textContent = breakdown;
    
    // Show results, hide initial state
    card.querySelector('#lde-results').style.display = 'block';
    card.querySelector('#lde-initial-state').style.display = 'none';
}

function ldeSetAmount(amount) {
    const card = document.currentScript?.closest('.card') || document;
    card.querySelector('#lde-linden').value = amount;
    
    // Auto-convert if there's already a currency selected
    setTimeout(() => {
        const convertBtn = card.querySelector('button[onclick*="ldeConvert"]');
        if (convertBtn) {
            ldeConvert(convertBtn);
        }
    }, 100);
}

function ldeReset(btn) {
    const card = btn.closest('.card') || document;
    card.querySelector('form').reset();
    card.querySelector('#lde-exchange-rate').value = 250;
    card.querySelector('#lde-rate-value').textContent = '250 L$/USD';
    card.querySelector('#lde-results').style.display = 'none';
    card.querySelector('#lde-initial-state').style.display = 'block';
}

function ldeCopyResults() {
    const card = document.currentScript?.closest('.card') || document;
    const breakdown = card.querySelector('#lde-breakdown').textContent;
    
    if (!breakdown.trim()) return;
    
    const copyText = `ğŸ’° Linden Dollar Exchange Results\n\n${breakdown}`;
    
    navigator.clipboard.writeText(copyText).then(() => {
        // Visual feedback
        const btn = card.querySelector('button[onclick="ldeCopyResults()"]');
        if (btn) {
            const original = btn.textContent;
            btn.textContent = 'âœ… Copied!';
            btn.style.background = 'rgba(57,255,20,0.1)';
            btn.style.borderColor = 'rgba(57,255,20,0.3)';
            btn.style.color = '#39ff14';
            
            setTimeout(() => {
                btn.textContent = original;
                btn.style.background = 'rgba(45,212,255,0.1)';
                btn.style.borderColor = 'rgba(45,212,255,0.3)';
                btn.style.color = 'var(--accent)';
            }, 2000);
        }
    }).catch(err => {
        console.error('Copy failed:', err);
    });
}

function ldeShowAllCurrencies() {
    const card = document.currentScript?.closest('.card') || document;
    const lindenAmount = parseFloat(card.querySelector('#lde-linden').value);
    const exchangeRate = parseFloat(card.querySelector('#lde-exchange-rate').value);
    
    if (isNaN(lindenAmount) || lindenAmount <= 0) {
        showError(card, 'Please enter L$ amount first');
        return;
    }
    
    const usdAmount = lindenAmount / exchangeRate;
    let allCurrencies = `ğŸ“Š ${lindenAmount.toLocaleString()} L$ in All Currencies:\n`;
    allCurrencies += '='.repeat(40) + '\n\n';
    
    // Sort currencies for better display
    const sortedCurrencies = Object.keys(ldeRates).sort();
    
    sortedCurrencies.forEach(currency => {
        const amount = usdAmount * ldeRates[currency];
        let formatted;
        
        if (currency === 'JPY' || currency === 'KRW' || currency === 'INR') {
            formatted = Math.round(amount).toLocaleString();
        } else {
            formatted = amount.toFixed(2);
        }
        
        allCurrencies += `${ldeSymbols[currency] || ''}${formatted.padEnd(12)} ${currency.padEnd(5)} ${ldeNames[currency]}\n`;
    });
    
    allCurrencies += '\n' + '='.repeat(40) + '\n';
    allCurrencies += `Based on: ${exchangeRate} L$ = $1 USD\n`;
    allCurrencies += `Equivalent to: $${usdAmount.toFixed(2)} USD`;
    
    card.querySelector('#lde-breakdown').textContent = allCurrencies;
}

function showError(card, message) {
    // Simple error display
    const results = card.querySelector('#lde-results');
    results.style.display = 'block';
    card.querySelector('#lde-initial-state').style.display = 'none';
    
    card.querySelector('#lde-breakdown').textContent = `âŒ Error: ${message}\n\nPlease check your inputs and try again.`;
    card.querySelector('#lde-from-amount').textContent = '-- L$';
    card.querySelector('#lde-to-amount').textContent = '--';
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.currentScript?.closest('.card') || document;
        
        // Exchange rate slider value display
        const rateSlider = card.querySelector('#lde-exchange-rate');
        const rateValue = card.querySelector('#lde-rate-value');
        
        rateSlider.addEventListener('input', function() {
            rateValue.textContent = `${this.value} L$/USD`;
        });
        
        // Auto-convert on input change
        const lindenInput = card.querySelector('#lde-linden');
        const currencySelect = card.querySelector('#lde-to-currency');
        
        let convertTimeout;
        
        function scheduleConvert() {
            clearTimeout(convertTimeout);
            convertTimeout = setTimeout(() => {
                if (lindenInput.value && lindenInput.value.length > 0) {
                    const convertBtn = card.querySelector('button[onclick*="ldeConvert"]');
                    if (convertBtn) {
                        ldeConvert(convertBtn);
                    }
                }
            }, 800);
        }
        
        lindenInput.addEventListener('input', scheduleConvert);
        currencySelect.addEventListener('change', scheduleConvert);
        rateSlider.addEventListener('input', scheduleConvert);
        
        // Load last used amount from localStorage
        try {
            const savedAmount = localStorage.getItem('lde-last-amount');
            if (savedAmount) {
                lindenInput.value = savedAmount;
            }
            
            // Save amount on change
            lindenInput.addEventListener('change', function() {
                if (this.value) {
                    localStorage.setItem('lde-last-amount', this.value);
                }
            });
        } catch (e) {
            console.log('LocalStorage not available');
        }
        
        console.log('Linden Dollar Exchange initialized');
    });
}
</script>

<style>
/* Linden Dollar Exchange specific styles */
#linden-dollar-exchange-title {
    color: #9d4edd !important; /* Purple for currency theme */
    margin-top: 0;
}

#lde-exchange-rate {
    -webkit-appearance: none;
    height: 6px;
    background: linear-gradient(90deg, #2dd4ff, #9d4edd);
    border-radius: 3px;
    outline: none;
}

#lde-exchange-rate::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #9d4edd;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

#lde-exchange-rate::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #9d4edd;
    cursor: pointer;
    border: 2px solid white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Currency option styling */
#lde-to-currency option {
    padding: 8px;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .actions {
        flex-direction: column;
    }
    
    .actions button {
        width: 100%;
        margin: 4px 0 !important;
    }
    
    .row {
        grid-template-columns: 1fr !important;
    }
    
    /* Stack currency display on mobile */
    #lde-results > div > div:first-child {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
    }
}

/* Animation for currency conversion */
@keyframes currencyPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.lde-converting {
    animation: currencyPulse 0.5s ease-in-out;
}

/* Print styles */
@media print {
    #linden-dollar-exchange-title {
        color: #000 !important;
    }
    
    .actions {
        display: none !important;
    }
}
</style>
