<h2 id="focus-title" style="margin-top:0;">Focus Timer</h2>

<form aria-describedby="focus-desc">
  <p id="focus-desc" class="small">Run a Pomodoro‑style focus session with work and break intervals.</p>

  <div class="row">
    <div class="field">
      <label for="focus-work">Work duration (minutes)</label>
      <input id="focus-work" type="number" min="1" value="25" />
    </div>
    <div class="field">
      <label for="focus-break">Break duration (minutes)</label>
      <input id="focus-break" type="number" min="1" value="5" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="focusStart(this)">Start</button>
    <button type="button" class="secondary" onclick="focusReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Timer status</div>
    <div class="value" id="focus-status">–</div>
  </div>
  <div class="result">
    <div class="label">Time remaining</div>
    <div class="value" id="focus-remaining">–</div>
  </div>
</div>

<script>
let focusInterval;

function focusStart(btn) {
  const card = btn.closest('.card');
  const work = parseInt(card.querySelector('#focus-work').value) || 25;
  const brk = parseInt(card.querySelector('#focus-break').value) || 5;

  let phase = "work";
  let remaining = work * 60;

  clearInterval(focusInterval);

  card.querySelector('#focus-status').textContent = "Work phase";
  updateRemaining(card, remaining);

  focusInterval = setInterval(() => {
    remaining--;
    updateRemaining(card, remaining);

    if (remaining <= 0) {
      if (phase === "work") {
        phase = "break";
        remaining = brk * 60;
        card.querySelector('#focus-status').textContent = "Break phase";
      } else {
        clearInterval(focusInterval);
        card.querySelector('#focus-status').textContent = "Session complete!";
        card.querySelector('#focus-remaining').textContent = "–";
      }
    }
  }, 1000);
}

function updateRemaining(card, seconds) {
  const m = Math.floor(seconds / 60);
  const s = seconds % 60;
  card.querySelector('#focus-remaining').textContent = m + "m " + s + "s";
}

function focusReset(btn) {
  const card = btn.closest('.card');
  clearInterval(focusInterval);
  card.querySelector('form').reset();
  card.querySelector('#focus-status').textContent = '–';
  card.querySelector('#focus-remaining').textContent = '–';
}
</script>
