<h2 id="gifthelper-title" style="margin-top:0;">Gift Helper</h2>

<form aria-describedby="gifthelper-desc">
  <p id="gifthelper-desc" class="small">Find the perfect gift with smart suggestions, reminders, and inspiration.</p>

  <div class="row">
    <div class="field">
      <label for="gifthelper-recipient">Recipient</label>
      <input id="gifthelper-recipient" type="text" placeholder="e.g. Mum, Best Friend" />
    </div>
    <div class="field">
      <label for="gifthelper-occasion">Occasion</label>
      <select id="gifthelper-occasion">
        <option value="Birthday">Birthday</option>
        <option value="Anniversary">Anniversary</option>
        <option value="Graduation">Graduation</option>
        <option value="Holiday">Holiday</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div class="field">
      <label for="gifthelper-year">Anniversary Year (if applicable)</label>
      <input id="gifthelper-year" type="number" min="1" placeholder="e.g. 20" />
    </div>
    <div class="field">
      <label for="gifthelper-budget">Budget (Â£)</label>
      <input id="gifthelper-budget" type="number" min="0" step="0.01" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="gifthelperAdd(this)">Add Gift</button>
    <button type="button" class="secondary" onclick="gifthelperReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <h3 class="small">Gift Ideas</h3>
  <ul id="gifthelper-list" class="small"></ul>
</div>

<script>
// Anniversary themes lookup
const anniversaryThemes = {
  1: { traditional: "Paper", modern: "Clocks", gemstone: "Gold" },
  5: { traditional: "Wood", modern: "Silverware", gemstone: "Sapphire" },
  10: { traditional: "Tin/Aluminium", modern: "Diamond Jewelry", gemstone: "Silver" },
  15: { traditional: "Crystal", modern: "Watches", gemstone: "Ruby" },
  20: { traditional: "China", modern: "Platinum", gemstone: "Emerald" },
  25: { traditional: "Silver", modern: "Silver", gemstone: "Silver" },
  30: { traditional: "Pearl", modern: "Diamond", gemstone: "Pearl" },
  40: { traditional: "Ruby", modern: "Ruby", gemstone: "Ruby" },
  50: { traditional: "Gold", modern: "Gold", gemstone: "Gold" },
  60: { traditional: "Diamond", modern: "Diamond", gemstone: "Diamond" }
};

let giftPlans = [];

function gifthelperAdd(btn) {
  const card = btn.closest('.card');
  const recipient = card.querySelector('#gifthelper-recipient').value.trim();
  const occasion = card.querySelector('#gifthelper-occasion').value;
  const year = parseInt(card.querySelector('#gifthelper-year').value) || null;
  const budget = card.querySelector('#gifthelper-budget').value;

  if (!recipient || !occasion) return;

  giftPlans.push({ recipient, occasion, year, budget });
  renderGiftHelper(card);
  card.querySelector('form').reset();
}

function renderGiftHelper(card) {
  const list = card.querySelector('#gifthelper-list');
  list.innerHTML = "";
  giftPlans.forEach(g => {
    let li = document.createElement('li');
    li.innerHTML = `<strong>${g.recipient}</strong> â€” ${g.occasion}` +
      (g.budget ? ` (Budget Â£${parseFloat(g.budget).toFixed(2)})` : "");

    // Anniversary guidance
    if (g.occasion === "Anniversary" && g.year) {
      const theme = anniversaryThemes[g.year];
      if (theme) {
        li.innerHTML += `<br/><span class='small'>ðŸ’¡ ${g.year}th Anniversary: Traditional = ${theme.traditional}, Modern = ${theme.modern}, Gemstone = ${theme.gemstone}</span>`;
      }
    }

    // Smart inspiration
    if (g.occasion === "Birthday") {
      li.innerHTML += `<br/><span class='small'>ðŸŽ‚ Tip: Personalized gifts (photo books, custom jewelry) make birthdays unforgettable.</span>`;
    }
    if (g.occasion === "Graduation") {
      li.innerHTML += `<br/><span class='small'>ðŸŽ“ Tip: Practical gifts like laptops, watches, or travel vouchers are perfect for graduates.</span>`;
    }
    if (g.occasion === "Holiday") {
      li.innerHTML += `<br/><span class='small'>ðŸŽ„ Tip: Cozy gifts (blankets, candles, hampers) spread festive cheer.</span>`;
    }

    list.appendChild(li);
  });
}

function gifthelperReset(btn) {
  const card = btn.closest('.card');
  giftPlans = [];
  card.querySelector('form').reset();
  card.querySelector('#gifthelper-list').innerHTML = "";
}
</script>
