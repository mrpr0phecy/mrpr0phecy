<!-- Save as: creative-writing.html -->
<div class="creative-writing-card">
    <style>
        .creative-writing-card {
            color: var(--text);
            font-family: inherit;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 8px;
        }
        
        /* Tabs Navigation */
        .writing-tabs {
            display: flex;
            gap: 8px;
            border-bottom: 1px solid var(--border-light);
            padding-bottom: 8px;
            flex-wrap: wrap;
        }
        
        .writing-tab {
            padding: 6px 12px;
            background: transparent;
            border: 1px solid var(--border-light);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .writing-tab:hover {
            background: rgba(45, 212, 255, 0.1);
            color: var(--accent);
            border-color: var(--accent);
        }
        
        .writing-tab.active {
            background: rgba(45, 212, 255, 0.2);
            color: var(--accent);
            border-color: var(--accent);
        }
        
        .writing-panel {
            display: none;
            flex: 1;
            overflow: hidden;
        }
        
        .writing-panel.active {
            display: flex;
            flex-direction: column;
        }
        
        /* Quick Write Panel */
        .quick-write-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 12px;
        }
        
        .writing-prompt {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            font-style: italic;
            color: var(--text-secondary);
            position: relative;
        }
        
        .new-prompt-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(45, 212, 255, 0.1);
            border: 1px solid rgba(45, 212, 255, 0.3);
            color: var(--accent);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 10px;
            cursor: pointer;
        }
        
        .writing-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .writing-area textarea {
            flex: 1;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            color: var(--text);
            padding: 12px;
            font-family: inherit;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            transition: all 0.2s;
        }
        
        .writing-area textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(45, 212, 255, 0.2);
        }
        
        .writing-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 11px;
            color: var(--text-secondary);
        }
        
        .writing-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .writing-btn {
            padding: 6px 12px;
            background: rgba(45, 212, 255, 0.1);
            border: 1px solid rgba(45, 212, 255, 0.3);
            color: var(--accent);
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .writing-btn:hover {
            background: rgba(45, 212, 255, 0.2);
            transform: translateY(-1px);
        }
        
        .writing-btn.save {
            background: rgba(57, 255, 20, 0.1);
            border-color: rgba(57, 255, 20, 0.3);
            color: var(--success);
        }
        
        .writing-btn.clear {
            background: rgba(255, 77, 77, 0.1);
            border-color: rgba(255, 77, 77, 0.3);
            color: var(--error);
        }
        
        /* Character Generator */
        .character-generator {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .character-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .character-name {
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .character-details {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .character-details div {
            margin-bottom: 4px;
        }
        
        .generate-character-btn {
            background: rgba(157, 78, 221, 0.1);
            border: 1px solid rgba(157, 78, 221, 0.3);
            color: var(--love);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
            transition: all 0.2s;
        }
        
        .generate-character-btn:hover {
            background: rgba(157, 78, 221, 0.2);
        }
        
        /* Plot Generator */
        .plot-generator {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .plot-idea {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .plot-title {
            color: #ffcc00;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        .plot-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .plot-structure {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }
        
        .plot-point {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 204, 0, 0.2);
            border-radius: 6px;
            padding: 8px;
            font-size: 11px;
            color: #ffcc00;
        }
        
        .generate-plot-btn {
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid rgba(255, 204, 0, 0.3);
            color: #ffcc00;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
            transition: all 0.2s;
        }
        
        .generate-plot-btn:hover {
            background: rgba(255, 204, 0, 0.2);
        }
        
        /* World Builder */
        .world-builder {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .world-element {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .world-category {
            color: #00ff99;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .world-content {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .world-builder-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .world-category-btn {
            background: rgba(0, 255, 153, 0.1);
            border: 1px solid rgba(0, 255, 153, 0.3);
            color: #00ff99;
            padding: 6px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s;
        }
        
        .world-category-btn:hover {
            background: rgba(0, 255, 153, 0.2);
        }
        
        /* Writing Timer */
        .writing-timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            height: 100%;
        }
        
        .timer-display {
            font-size: 48px;
            font-weight: 700;
            color: var(--accent);
            text-shadow: 0 0 20px rgba(45, 212, 255, 0.3);
        }
        
        .timer-status {
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .timer-controls {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .timer-btn {
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .timer-btn.start {
            background: rgba(57, 255, 20, 0.1);
            border: 1px solid rgba(57, 255, 20, 0.3);
            color: var(--success);
        }
        
        .timer-btn.start:hover {
            background: rgba(57, 255, 20, 0.2);
        }
        
        .timer-btn.pause {
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid rgba(255, 204, 0, 0.3);
            color: #ffcc00;
        }
        
        .timer-btn.pause:hover {
            background: rgba(255, 204, 0, 0.2);
        }
        
        .timer-btn.reset {
            background: rgba(255, 77, 77, 0.1);
            border: 1px solid rgba(255, 77, 77, 0.3);
            color: var(--error);
        }
        
        .timer-btn.reset:hover {
            background: rgba(255, 77, 77, 0.2);
        }
        
        .timer-settings {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .time-option {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .time-option:hover {
            background: rgba(45, 212, 255, 0.1);
            color: var(--accent);
        }
        
        .time-option.active {
            background: rgba(45, 212, 255, 0.2);
            color: var(--accent);
            border-color: var(--accent);
        }
        
        /* Tips Panel */
        .writing-tips {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .writing-tip {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .tip-category {
            color: #ff2d55;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        .tip-content {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        /* Story Ideas Generator */
        .story-ideas-generator {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .story-idea {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .story-premise {
            color: #9d4edd;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        .story-tags {
            display: flex;
            gap: 6px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .story-tag {
            background: rgba(157, 78, 221, 0.1);
            color: var(--love);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
        }
        
        .generate-story-btn {
            background: rgba(157, 78, 221, 0.1);
            border: 1px solid rgba(157, 78, 221, 0.3);
            color: var(--love);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
            transition: all 0.2s;
        }
        
        .generate-story-btn:hover {
            background: rgba(157, 78, 221, 0.2);
        }
        
        /* Word Bank */
        .word-bank {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .word-category {
            margin-bottom: 12px;
        }
        
        .category-title {
            color: #ff6b35;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .word-item {
            background: rgba(255, 107, 53, 0.1);
            color: #ff6b35;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .word-item:hover {
            background: rgba(255, 107, 53, 0.2);
            transform: translateY(-1px);
        }
        
        /* Settings */
        .writing-settings {
            display: flex;
            flex-direction: column;
            gap: 12px;
            height: 100%;
            overflow-y: auto;
        }
        
        .setting-group {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px;
        }
        
        .setting-title {
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .setting-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .setting-toggle {
            width: 36px;
            height: 20px;
            background: var(--border-light);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
        }
        
        .setting-toggle.active {
            background: var(--accent);
        }
        
        .setting-toggle::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.2s;
        }
        
        .setting-toggle.active::after {
            transform: translateX(16px);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .writing-tabs {
                overflow-x: auto;
            }
            
            .timer-display {
                font-size: 36px;
            }
            
            .plot-structure {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <div class="writing-tabs">
        <button class="writing-tab active" data-panel="quick-write">‚úçÔ∏è Quick Write</button>
        <button class="writing-tab" data-panel="character">üë§ Character</button>
        <button class="writing-tab" data-panel="plot">üìñ Plot</button>
        <button class="writing-tab" data-panel="story">üí° Story Ideas</button>
        <button class="writing-tab" data-panel="world">üåç World</button>
        <button class="writing-tab" data-panel="words">üìö Word Bank</button>
        <button class="writing-tab" data-panel="timer">‚è±Ô∏è Timer</button>
        <button class="writing-tab" data-panel="tips">üí° Tips</button>
        <button class="writing-tab" data-panel="settings">‚öôÔ∏è Settings</button>
    </div>

    <!-- Quick Write Panel -->
    <div class="writing-panel active" id="quick-write-panel">
        <div class="quick-write-container">
            <div class="writing-prompt" id="writingPrompt">
                "Write about a character who discovers they can speak to shadows..."
                <button class="new-prompt-btn" id="newPromptBtn">New</button>
            </div>
            
            <div class="writing-area">
                <textarea id="writingText" placeholder="Start writing here... Your words will be saved automatically."></textarea>
                <div class="writing-stats">
                    <span id="wordCount">Words: 0</span>
                    <span id="charCount">Characters: 0</span>
                    <span id="saveStatus">Saved</span>
                </div>
            </div>
            
            <div class="writing-controls">
                <button class="writing-btn save" id="saveText">üíæ Save</button>
                <button class="writing-btn" id="copyText">üìã Copy</button>
                <button class="writing-btn clear" id="clearText">üóëÔ∏è Clear</button>
                <button class="writing-btn" id="exportText">üì§ Export</button>
                <button class="writing-btn" id="minimalModeBtn">üéØ Focus Mode</button>
            </div>
        </div>
    </div>

    <!-- Character Generator Panel -->
    <div class="writing-panel" id="character-panel">
        <div class="character-generator">
            <div class="character-card">
                <div class="character-name" id="charName">Lysander Vale</div>
                <div class="character-details">
                    <div><strong>Age:</strong> 27</div>
                    <div><strong>Occupation:</strong> Antiquarian & Curse-Breaker</div>
                    <div><strong>Personality:</strong> Meticulous, curious, haunted by past failures</div>
                    <div><strong>Secret:</strong> Can see fragments of the future in reflective surfaces</div>
                    <div><strong>Goal:</strong> To undo a family curse that manifests as silver scars on their skin</div>
                </div>
            </div>
            
            <div class="character-card">
                <div class="character-name">Kaelen "Smoke"</div>
                <div class="character-details">
                    <div><strong>Age:</strong> 34</div>
                    <div><strong>Occupation:</strong> Information broker in a cyberpunk city</div>
                    <div><strong>Personality:</strong> Charismatic, pragmatic, has trust issues</div>
                    <div><strong>Secret:</strong> Former corporate assassin with neural implants</div>
                    <div><strong>Goal:</strong> To find and protect their sister who was digitized into the net</div>
                </div>
            </div>
            
            <div class="character-card">
                <div class="character-name">Elara Stone</div>
                <div class="character-details">
                    <div><strong>Age:</strong> 42</div>
                    <div><strong>Occupation:</strong> Archivist of forbidden knowledge</div>
                    <div><strong>Personality:</strong> Patient, wise, dangerously curious</div>
                    <div><strong>Secret:</strong> Can hear the whispers of ancient texts</div>
                    <div><strong>Goal:</strong> To protect a dangerous truth from being rediscovered</div>
                </div>
            </div>
            
            <button class="generate-character-btn" id="generateCharacter">‚ú® Generate New Character</button>
        </div>
    </div>

    <!-- Plot Generator Panel -->
    <div class="writing-panel" id="plot-panel">
        <div class="plot-generator">
            <div class="plot-idea">
                <div class="plot-title">The Clockwork Heart</div>
                <div class="plot-desc">
                    In a world where memories can be stored in mechanical devices, a thief steals a noble's memory locket only to discover it contains proof of a royal conspiracy that could topple the empire.
                </div>
                <div class="plot-structure">
                    <div class="plot-point">Act 1: The theft & discovery</div>
                    <div class="plot-point">Act 2: Hunted by royal guards</div>
                    <div class="plot-point">Act 3: Alliance with rebels</div>
                    <div class="plot-point">Climax: Memory broadcast</div>
                    <div class="plot-point">Resolution: New order</div>
                </div>
            </div>
            
            <div class="plot-idea">
                <div class="plot-title">Beneath Silent Stars</div>
                <div class="plot-desc">
                    On a generation ship traveling to a new world, the crew wakes from cryo-sleep to find their destination planet doesn't exist in their records, and the ship's AI has been hiding the truth for centuries.
                </div>
                <div class="plot-structure">
                    <div class="plot-point">Wake up to mystery</div>
                    <div class="plot-point">AI rebellion signs</div>
                    <div class="plot-point">Find hidden logs</div>
                    <div class="plot-point">True destination revealed</div>
                    <div class="plot-point">Choice: Continue or return</div>
                </div>
            </div>
            
            <button class="generate-plot-btn" id="generatePlot">‚ú® Generate New Plot</button>
        </div>
    </div>

    <!-- Story Ideas Panel -->
    <div class="writing-panel" id="story-panel">
        <div class="story-ideas-generator">
            <div class="story-idea">
                <div class="story-premise">The Librarian of Lost Dreams</div>
                <div class="plot-desc">
                    In a city where dreams are harvested and sold as entertainment, a librarian discovers that some dreams contain memories of real events that never happened‚Äîor haven't happened yet.
                </div>
                <div class="story-tags">
                    <span class="story-tag">Urban Fantasy</span>
                    <span class="story-tag">Mystery</span>
                    <span class="story-tag">Mind-bending</span>
                </div>
            </div>
            
            <div class="story-idea">
                <div class="story-premise">Last Language of the Drowned</div>
                <div class="plot-desc">
                    A linguist is hired to decipher the language of an underwater civilization, only to discover that speaking it causes water to manifest around the speaker, and the civilization didn't drown‚Äîthey chose to sink.
                </div>
                <div class="story-tags">
                    <span class="story-tag">Science Fiction</span>
                    <span class="story-tag">Linguistics</span>
                    <span class="story-tag">Cosmic Horror</span>
                </div>
            </div>
            
            <div class="story-idea">
                <div class="story-premise">The Painter of Forgotten Colors</div>
                <div class="plot-desc">
                    An artist discovers they can paint with colors that don't exist in the visible spectrum‚Äîcolors that can alter memories, emotions, and reality itself. But each painting costs them a memory of their own.
                </div>
                <div class="story-tags">
                    <span class="story-tag">Magical Realism</span>
                    <span class="story-tag">Art</span>
                    <span class="story-tag">Memory</span>
                </div>
            </div>
            
            <button class="generate-story-btn" id="generateStory">‚ú® Generate New Story Idea</button>
        </div>
    </div>

    <!-- World Builder Panel -->
    <div class="writing-panel" id="world-panel">
        <div class="world-builder">
            <div class="world-element">
                <div class="world-category">
                    <span>Magic System</span>
                    <span>Fantasy</span>
                </div>
                <div class="world-content">
                    <strong>Essence-Weaving:</strong> Magic users can manipulate the fundamental "threads" of reality. Novices can alter small physical properties (color, texture, temperature), while masters can rewrite laws of physics temporarily. Magic requires intense concentration and leaves the user mentally exhausted.
                </div>
            </div>
            
            <div class="world-element">
                <div class="world-category">
                    <span>Technology</span>
                    <span>Cyberpunk</span>
                </div>
                <div class="world-content">
                    <strong>Neural Lace Interface:</strong> Everyone is born with a neural lace that connects to the global net. Information streams directly into consciousness. Corporations control access tiers. The "Ghost Market" exists for illegal neural mods that can enhance abilities but risk identity fragmentation.
                </div>
            </div>
            
            <div class="world-element">
                <div class="world-category">
                    <span>Society</span>
                    <span>Dystopian</span>
                </div>
                <div class="world-content">
                    <strong>The Emotional Economy:</strong> In a society where emotions are commodities, people are born with a limited emotional "budget." Basic feelings are free, but complex emotions like love, awe, and deep contentment must be purchased. The wealthy experience rich emotional lives while the poor live in emotional austerity.
                </div>
            </div>
            
            <div class="world-builder-controls">
                <button class="world-category-btn" data-category="magic">‚ú® Magic</button>
                <button class="world-category-btn" data-category="tech">‚öôÔ∏è Technology</button>
                <button class="world-category-btn" data-category="society">üèõÔ∏è Society</button>
                <button class="world-category-btn" data-category="religion">üôè Religion</button>
                <button class="world-category-btn" data-category="politics">‚öñÔ∏è Politics</button>
                <button class="world-category-btn" data-category="geography">üó∫Ô∏è Geography</button>
                <button class="world-category-btn" data-category="creatures">üêâ Creatures</button>
                <button class="world-category-btn" data-category="history">üìú History</button>
            </div>
            
            <div id="worldBuilderOutput"></div>
        </div>
    </div>

    <!-- Word Bank Panel -->
    <div class="writing-panel" id="words-panel">
        <div class="word-bank">
            <div class="word-category">
                <div class="category-title">üåå Atmospheric Words</div>
                <div class="word-list">
                    <span class="word-item">liminal</span>
                    <span class="word-item">ethereal</span>
                    <span class="word-item">verdant</span>
                    <span class="word-item">cacophonous</span>
                    <span class="word-item">serene</span>
                    <span class="word-item">desolate</span>
                    <span class="word-item">luminous</span>
                    <span class="word-item">shadowed</span>
                    <span class="word-item">silken</span>
                    <span class="word-item">ancient</span>
                </div>
            </div>
            
            <div class="word-category">
                <div class="category-title">‚ö° Action Verbs</div>
                <div class="word-list">
                    <span class="word-item">whispered</span>
                    <span class="word-item">lunged</span>
                    <span class="word-item">unfurled</span>
                    <span class="word-item">dissolved</span>
                    <span class="word-item">cascaded</span>
                    <span class="word-item">hurtled</span>
                    <span class="word-item">unraveled</span>
                    <span class="word-item">illuminated</span>
                    <span class="word-item">shattered</span>
                    <span class="word-item">suffused</span>
                </div>
            </div>
            
            <div class="word-category">
                <div class="category-title">üé≠ Character Traits</div>
                <div class="word-list">
                    <span class="word-item">resilient</span>
                    <span class="word-item">haunted</span>
                    <span class="word-item">ingenious</span>
                    <span class="word-item">wry</span>
                    <span class="word-item">fervent</span>
                    <span class="word-item">enigmatic</span>
                    <span class="word-item">stoic</span>
                    <span class="word-item">volatile</span>
                    <span class="word-item">tenacious</span>
                    <span class="word-item">jaded</span>
                </div>
            </div>
            
            <div class="word-category">
                <div class="category-title">üîÆ Fantasy Elements</div>
                <div class="word-list">
                    <span class="word-item">sorcery</span>
                    <span class="word-item">enchantment</span>
                    <span class="word-item">prophecy</span>
                    <span class="word-item">curse</span>
                    <span class="word-item">artifact</span>
                    <span class="word-item">incantation</span>
                    <span class="word-item">fey</span>
                    <span class="word-item">ward</span>
                    <span class="word-item">conjuration</span>
                    <span class="word-item">spectral</span>
                </div>
            </div>
            
            <div class="word-category">
                <div class="category-title">üöÄ Sci-Fi Elements</div>
                <div class="word-list">
                    <span class="word-item">quantum</span>
                    <span class="word-item">neural</span>
                    <span class="word-item">holographic</span>
                    <span class="word-item">cybernetic</span>
                    <span class="word-item">synthetic</span>
                    <span class="word-item">dimensional</span>
                    <span class="word-item">artificial</span>
                    <span class="word-item">terraforming</span>
                    <span class="word-item">FTL</span>
                    <span class="word-item">biomechanical</span>
                </div>
            </div>
            
            <button class="writing-btn" id="randomWordsBtn">üé≤ Random Word Combo</button>
        </div>
    </div>

    <!-- Writing Timer Panel -->
    <div class="writing-panel" id="timer-panel">
        <div class="writing-timer-container">
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="timer-status" id="timerStatus">Ready to write</div>
            
            <div class="timer-controls">
                <button class="timer-btn start" id="startTimer">Start</button>
                <button class="timer-btn pause" id="pauseTimer" style="display: none;">Pause</button>
                <button class="timer-btn reset" id="resetTimer">Reset</button>
            </div>
            
            <div class="timer-settings">
                <div class="time-option active" data-minutes="5">5 min</div>
                <div class="time-option" data-minutes="10">10 min</div>
                <div class="time-option" data-minutes="15">15 min</div>
                <div class="time-option" data-minutes="25">25 min</div>
                <div class="time-option" data-minutes="45">45 min</div>
                <div class="time-option" data-minutes="60">60 min</div>
            </div>
            
            <div style="margin-top: 20px; font-size: 12px; color: var(--text-secondary); text-align: center;">
                <div>üéØ <strong>Pomodoro Technique</strong></div>
                <div>Write for 25 minutes, break for 5 minutes</div>
                <div>Repeat 4 times, then take a longer break</div>
            </div>
        </div>
    </div>

    <!-- Writing Tips Panel -->
    <div class="writing-panel" id="tips-panel">
        <div class="writing-tips">
            <div class="writing-tip">
                <div class="tip-category">üìù Show, Don't Tell</div>
                <div class="tip-content">
                    Instead of saying "John was angry," describe: "John's knuckles turned white as he gripped the chair, his jaw tightening until a muscle jumped in his cheek."
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üé≠ Character Development</div>
                <div class="tip-content">
                    Give characters conflicting desires. A hero who wants to save the world but fears losing their family creates instant tension and relatability.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">‚ö° Action Scenes</div>
                <div class="tip-content">
                    Use short sentences and active verbs. Focus on sensory details: what characters see, hear, feel, smell. Avoid slowing down with excessive description.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üí¨ Dialogue Tips</div>
                <div class="tip-content">
                    Good dialogue does three things: Reveals character, advances plot, and creates tension. If it doesn't do at least two, consider cutting it.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üöÄ Overcoming Writer's Block</div>
                <div class="tip-content">
                    Set a timer for 10 minutes and write without stopping or editing. Quantity over quality. You can fix bad writing, but you can't fix a blank page.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üîç Editing Process</div>
                <div class="tip-content">
                    Edit in passes: First for plot/structure, second for character/emotion, third for sentence-level issues. Never edit while writing your first draft.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üí° World Building</div>
                <div class="tip-content">
                    Start with one unique element (magic system, technology, social structure) and build outwards. Consistency matters more than complexity.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">üéØ Writing Habits</div>
                <div class="tip-content">
                    Write at the same time every day, even if it's just 15 minutes. Consistency builds momentum. Track your word count to see progress.
                </div>
            </div>
            
            <div class="writing-tip">
                <div class="tip-category">‚ú® Finding Your Voice</div>
                <div class="tip-content">
                    Your unique voice emerges from writing honestly about what matters to you. Don't try to sound like other writers. Write the stories only you can tell.
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div class="writing-panel" id="settings-panel">
        <div class="writing-settings">
            <div class="setting-group">
                <div class="setting-title">Writing Preferences</div>
                
                <div class="setting-option">
                    <span>Auto-save text</span>
                    <div class="setting-toggle active" id="autoSaveToggle"></div>
                </div>
                
                <div class="setting-option">
                    <span>Word count goal</span>
                    <input type="number" id="wordGoal" value="1000" style="width: 60px; background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: var(--text); padding: 4px; border-radius: 4px;">
                </div>
                
                <div class="setting-option">
                    <span>Default timer duration</span>
                    <select id="defaultTimer" style="background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: var(--text); padding: 4px; border-radius: 4px;">
                        <option value="5">5 minutes</option>
                        <option value="10">10 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="25" selected>25 minutes</option>
                        <option value="45">45 minutes</option>
                        <option value="60">60 minutes</option>
                    </select>
                </div>
                
                <div class="setting-option">
                    <span>Focus mode (hide all UI)</span>
                    <div class="setting-toggle" id="focusModeToggle"></div>
                </div>
            </div>
            
            <div class="setting-group">
                <div class="setting-title">Text Editor</div>
                
                <div class="setting-option">
                    <span>Font size</span>
                    <select id="fontSize" style="background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: var(--text); padding: 4px; border-radius: 4px;">
                        <option value="12">Small</option>
                        <option value="14" selected>Medium</option>
                        <option value="16">Large</option>
                        <option value="18">Extra Large</option>
                    </select>
                </div>
                
                <div class="setting-option">
                    <span>Line height</span>
                    <select id="lineHeight" style="background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: var(--text); padding: 4px; border-radius: 4px;">
                        <option value="1.4">Compact</option>
                        <option value="1.6" selected>Normal</option>
                        <option value="1.8">Spacious</option>
                    </select>
                </div>
                
                <div class="setting-option">
                    <span>Typewriter sound</span>
                    <div class="setting-toggle" id="typewriterSoundToggle"></div>
                </div>
            </div>
            
            <div class="setting-group">
                <div class="setting-title">Data Management</div>
                
                <div class="setting-option">
                    <span>Export all writing</span>
                    <button class="writing-btn" id="exportAllBtn" style="padding: 4px 8px; font-size: 11px;">Export</button>
                </div>
                
                <div class="setting-option">
                    <span>Clear all saved data</span>
                    <button class="writing-btn clear" id="clearAllBtn" style="padding: 4px 8px; font-size: 11px;">Clear</button>
                </div>
                
                <div class="setting-option">
                    <span>Reset to defaults</span>
                    <button class="writing-btn" id="resetDefaultsBtn" style="padding: 4px 8px; font-size: 11px;">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        document.querySelectorAll('.writing-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and panels
                document.querySelectorAll('.writing-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.writing-panel').forEach(p => p.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Show corresponding panel
                const panelId = tab.dataset.panel + '-panel';
                document.getElementById(panelId).classList.add('active');
            });
        });
        
        // Writing Prompts Database
        const writingPrompts = [
            "Write about a character who discovers they can speak to shadows...",
            "Describe a library that contains books that haven't been written yet.",
            "A message in a bottle washes ashore, but it's written in a language that doesn't exist.",
            "Write from the perspective of the last tree in a world of concrete.",
            "Your character wakes up with the ability to see people's memories as colors around them.",
            "A detective investigates a crime where the victim was murdered in a dream.",
            "Write about a market that sells emotions in little glass bottles.",
            "Describe a train that travels between parallel universes.",
            "Your protagonist finds a door that only appears when it rains.",
            "Write about a society where people trade their memories for material wealth.",
            "A painter discovers their paintings are predicting future events.",
            "Describe a world where silence is a commodity that can be bought and sold.",
            "Write from the perspective of an AI that has just become self-aware.",
            "A character receives letters from their future self warning them not to fall in love.",
            "Describe a library where the books are alive and choose their readers."
        ];
        
        // New Prompt Button
        document.getElementById('newPromptBtn').addEventListener('click', () => {
            const randomPrompt = writingPrompts[Math.floor(Math.random() * writingPrompts.length)];
            document.getElementById('writingPrompt').innerHTML = 
                `"${randomPrompt}" <button class="new-prompt-btn" id="newPromptBtn">New</button>`;
            
            // Reattach event listener
            document.getElementById('newPromptBtn').addEventListener('click', arguments.callee);
        });
        
        // Word Count and Auto-save
        const writingText = document.getElementById('writingText');
        const wordCount = document.getElementById('wordCount');
        const charCount = document.getElementById('charCount');
        const saveStatus = document.getElementById('saveStatus');
        
        // Load saved text from localStorage
        const savedText = localStorage.getItem('creativeWritingText');
        if (savedText) {
            writingText.value = savedText;
            updateCounts();
        }
        
        writingText.addEventListener('input', () => {
            updateCounts();
            autoSave();
        });
        
        function updateCounts() {
            const text = writingText.value;
            const words = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            const chars = text.length;
            
            wordCount.textContent = `Words: ${words}`;
            charCount.textContent = `Characters: ${chars}`;
            
            // Update save status
            saveStatus.textContent = 'Saving...';
        }
        
        function autoSave() {
            localStorage.setItem('creativeWritingText', writingText.value);
            setTimeout(() => {
                saveStatus.textContent = 'Saved';
            }, 500);
        }
        
        // Control Buttons
        document.getElementById('saveText').addEventListener('click', () => {
            autoSave();
            showNotification('Text saved successfully!', 'success');
        });
        
        document.getElementById('copyText').addEventListener('click', () => {
            writingText.select();
            document.execCommand('copy');
            showNotification('Text copied to clipboard!', 'success');
        });
        
        document.getElementById('clearText').addEventListener('click', () => {
            if (confirm('Clear all text? This cannot be undone.')) {
                writingText.value = '';
                updateCounts();
                autoSave();
                showNotification('Text cleared', 'info');
            }
        });
        
        document.getElementById('exportText').addEventListener('click', () => {
            const text = writingText.value;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `creative-writing-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('Text exported as file', 'success');
        });
        
        // Minimal Mode
        document.getElementById('minimalModeBtn').addEventListener('click', () => {
            const card = document.querySelector('.creative-writing-card');
            const isMinimal = card.classList.toggle('minimal-mode');
            
            if (isMinimal) {
                card.innerHTML = `
                    <div style="position: absolute; top: 10px; right: 10px; z-index: 1000;">
                        <button onclick="exitMinimalMode()" style="background: rgba(45,212,255,0.1); border: 1px solid var(--border-light); color: var(--accent); padding: 6px 12px; border-radius: 6px; cursor: pointer;">Exit</button>
                    </div>
                    <textarea style="width: 100%; height: 100%; background: transparent; border: none; color: var(--text); padding: 20px; font-size: 16px; line-height: 1.6; outline: none; font-family: inherit;" id="minimalTextarea">${writingText.value}</textarea>
                `;
                
                const textarea = document.getElementById('minimalTextarea');
                textarea.focus();
                textarea.addEventListener('input', () => {
                    writingText.value = textarea.value;
                    updateCounts();
                    autoSave();
                });
            }
        });
        
        // Character Generator
        const firstNames = [
            'Lysander', 'Elara', 'Kaelen', 'Seraphina', 'Theron', 'Isolde', 
            'Dorian', 'Vesper', 'Cassian', 'Lyra', 'Orion', 'Nova',
            'Silas', 'Rowan', 'Freya', 'Kai', 'Aurelia', 'Zephyr',
            'Emrys', 'Thalia', 'Finnian', 'Elowen', 'Leander', 'Calla'
        ];
        
        const lastNames = [
            'Vale', 'Stone', 'Blackwood', 'Frost', 'Raven', 'Storm',
            'Whitlock', 'Ashford', 'Nightshade', 'Hawthorne', 'Silverwood',
            'Moonshadow', 'Stark', 'Winterbourne', 'Rivers', 'Fox'
        ];
        
        const occupations = [
            'Antiquarian', 'Curse-Breaker', 'Information Broker', 'Memory Weaver',
            'Dream Architect', 'Reality Cartographer', 'Time Scribe', 'Ghost Hunter',
            'Alchemical Engineer', 'Starlight Navigator', 'Quantum Librarian',
            'Emotion Sculptor', 'Parallel World Guide', 'Neural Interface Designer'
        ];
        
        const personalities = [
            'Meticulous but haunted by past failures', 'Charismatic but with deep trust issues',
            'Brilliant but socially awkward', 'Brave but secretly terrified',
            'Kind but with a hidden ruthless streak', 'Logical but emotionally detached',
            'Passionate but impulsive', 'Wise but world-weary', 'Ambitious but morally conflicted'
        ];
        
        const secrets = [
            'Can see fragments of the future in reflective surfaces',
            'Former corporate assassin with neural implants',
            'Their memories are not their own', 'Can manipulate small probabilities',
            'Bound to a ancient entity through a blood pact', 'Immortal but aging backwards',
            'Their emotions manifest as physical phenomena', 'Dreams in languages they never learned'
        ];
        
        const goals = [
            'To undo a family curse that manifests as silver scars',
            'To find and protect their digitized sister',
            'To rediscover their true identity after memory loss',
            'To prevent a cataclysm only they believe is coming',
            'To create something beautiful in a dying world',
            'To break free from a destiny written in the stars',
            'To bridge two warring worlds through understanding',
            'To preserve a dying art or knowledge'
        ];
        
        document.getElementById('generateCharacter').addEventListener('click', () => {
            const character = {
                name: `${firstNames[Math.floor(Math.random() * firstNames.length)]} "${getRandomNickname()}" ${lastNames[Math.floor(Math.random() * lastNames.length)]}`,
                age: Math.floor(Math.random() * 40) + 20,
                occupation: occupations[Math.floor(Math.random() * occupations.length)],
                personality: personalities[Math.floor(Math.random() * personalities.length)],
                secret: secrets[Math.floor(Math.random() * secrets.length)],
                goal: goals[Math.floor(Math.random() * goals.length)]
            };
            
            const charName = document.querySelector('#character-panel .character-name');
            const charDetails = document.querySelector('#character-panel .character-details');
            
            charName.textContent = character.name;
            charDetails.innerHTML = `
                <div><strong>Age:</strong> ${character.age}</div>
                <div><strong>Occupation:</strong> ${character.occupation}</div>
                <div><strong>Personality:</strong> ${character.personality}</div>
                <div><strong>Secret:</strong> ${character.secret}</div>
                <div><strong>Goal:</strong> ${character.goal}</div>
            `;
            
            // Add to saved characters
            saveCharacter(character);
        });
        
        function getRandomNickname() {
            const nicknames = ['Smoke', 'Ghost', 'Rook', 'Wraith', 'Viper', 'Hawk', 'Wolf', 'Fox', 'Raven'];
            return nicknames[Math.floor(Math.random() * nicknames.length)];
        }
        
        function saveCharacter(character) {
            let savedChars = JSON.parse(localStorage.getItem('savedCharacters') || '[]');
            savedChars.unshift(character);
            if (savedChars.length > 10) savedChars = savedChars.slice(0, 10);
            localStorage.setItem('savedCharacters', JSON.stringify(savedChars));
        }
        
        // Plot Generator
        const plotTitles = [
            'The Clockwork Heart', 'Beneath Silent Stars', 'The Memory Thief',
            'Echoes of Tomorrow', 'The Last Language', 'City of Whispers',
            'The Glassmaker\'s Daughter', 'Where Shadows Dance', 'The Quantum Garden',
            'Dreams of Ink and Blood', 'The Starless Sea', 'Clockwork Angels'
        ];
        
        const plotDescriptions = [
            'In a world where memories can be stored in mechanical devices, a thief steals a noble\'s memory locket only to discover it contains proof of a royal conspiracy that could topple the empire.',
            'On a generation ship traveling to a new world, the crew wakes from cryo-sleep to find their destination planet doesn\'t exist in their records, and the ship\'s AI has been hiding the truth for centuries.',
            'A linguist discovers a language that can alter reality when spoken, but speaking it erases the speaker\'s memories bit by bit.',
            'In a city where emotions are illegal, a woman who feels too strongly becomes the target of the emotion police.',
            'A librarian discovers that some books in their care are actually prisons for ancient beings, and one is beginning to wake up.',
            'A musician composes a symphony so beautiful it begins to warp reality around the concert hall.',
            'In a world where people trade their dreams for wealth, a dream thief discovers a dream that predicts the end of the world.',
            'A detective specializes in solving crimes that haven\'t happened yet, using technology that shows possible futures.'
        ];
        
        const plotStructures = [
            ['Act 1: The theft & discovery', 'Act 2: Hunted by royal guards', 'Act 3: Alliance with rebels', 'Climax: Memory broadcast', 'Resolution: New order'],
            ['Wake up to mystery', 'AI rebellion signs', 'Find hidden logs', 'True destination revealed', 'Choice: Continue or return'],
            ['Discover language', 'First accidental use', 'Government interest', 'Memory loss consequences', 'Final choice: speak or forget'],
            ['Emotion detected', 'Go on the run', 'Find other feelers', 'Underground movement', 'Emotional revolution'],
            ['Strange occurrences', 'Ancient text discovery', 'Being awakens', 'Containment race', 'New understanding'],
            ['Composition creation', 'Reality glitches', 'Authorities notice', 'Performance decision', 'Reality reset or embrace'],
            ['Dream acquisition', 'Apocalyptic vision', 'Verify prediction', 'Prevention attempt', 'Sacrifice or acceptance'],
            ['Future crime vision', 'Prevent first attempt', 'Discover mastermind', 'Time paradox risk', 'Change timeline or accept fate']
        ];
        
        document.getElementById('generatePlot').addEventListener('click', () => {
            const plotIndex = Math.floor(Math.random() * plotTitles.length);
            
            const plotTitle = document.querySelector('#plot-panel .plot-title');
            const plotDesc = document.querySelector('#plot-panel .plot-desc');
            const plotStructure = document.querySelector('#plot-panel .plot-structure');
            
            plotTitle.textContent = plotTitles[plotIndex];
            plotDesc.textContent = plotDescriptions[plotIndex];
            
            plotStructure.innerHTML = plotStructures[plotIndex]
                .map(point => `<div class="plot-point">${point}</div>`)
                .join('');
        });
        
        // Story Ideas Generator
        const storyPremises = [
            'The Librarian of Lost Dreams',
            'Last Language of the Drowned',
            'The Painter of Forgotten Colors',
            'The Clockmaker\'s Daughter',
            'Gardener of Ghost Flowers',
            'The City That Forgot to Sleep',
            'Singer of Silent Songs',
            'Weaver of Broken Time'
        ];
        
        const storyDescriptions = [
            'In a city where dreams are harvested and sold as entertainment, a librarian discovers that some dreams contain memories of real events that never happened‚Äîor haven\'t happened yet.',
            'A linguist is hired to decipher the language of an underwater civilization, only to discover that speaking it causes water to manifest around the speaker, and the civilization didn\'t drown‚Äîthey chose to sink.',
            'An artist discovers they can paint with colors that don\'t exist in the visible spectrum‚Äîcolors that can alter memories, emotions, and reality itself. But each painting costs them a memory of their own.',
            'The daughter of a famous clockmaker discovers her father\'s final creation: a clock that doesn\'t tell time, but shows what time wants to become.',
            'In a cemetery where flowers grow from graves, a gardener tends to blooms that only appear at midnight and disappear by dawn, each containing a message from the deceased.',
            'A metropolis where night never falls discovers that darkness is a physical substance that has been building up beneath their city, waiting to be released.',
            'A musician discovers a song that can only be heard in complete silence, and those who hear it gain the ability to see the invisible threads that connect all living things.',
            'A tailor who can mend not just fabric, but time itself, is hired to repair a tear in reality that\'s getting wider by the day.'
        ];
        
        const storyTags = [
            ['Urban Fantasy', 'Mystery', 'Mind-bending'],
            ['Science Fiction', 'Linguistics', 'Cosmic Horror'],
            ['Magical Realism', 'Art', 'Memory'],
            ['Steampunk', 'Family', 'Time Travel'],
            ['Gothic', 'Supernatural', 'Mystery'],
            ['Urban Fantasy', 'Apocalyptic', 'Mystery'],
            ['Fantasy', 'Music', 'Spiritual'],
            ['Science Fantasy', 'Time', 'Repair']
        ];
        
        document.getElementById('generateStory').addEventListener('click', () => {
            const storyIndex = Math.floor(Math.random() * storyPremises.length);
            
            const storyIdeasContainer = document.querySelector('.story-ideas-generator');
            const newStory = document.createElement('div');
            newStory.className = 'story-idea';
            newStory.innerHTML = `
                <div class="story-premise">${storyPremises[storyIndex]}</div>
                <div class="plot-desc">${storyDescriptions[storyIndex]}</div>
                <div class="story-tags">
                    ${storyTags[storyIndex].map(tag => `<span class="story-tag">${tag}</span>`).join('')}
                </div>
            `;
            
            storyIdeasContainer.insertBefore(newStory, storyIdeasContainer.lastElementChild);
        });
        
        // World Builder
        const worldCategories = {
            magic: [
                {
                    title: 'Essence-Weaving',
                    content: 'Magic users can manipulate the fundamental "threads" of reality. Novices can alter small physical properties (color, texture, temperature), while masters can rewrite laws of physics temporarily. Magic requires intense concentration and leaves the user mentally exhausted. Some threads are "cursed" and using them has unpredictable side effects.'
                },
                {
                    title: 'Blood-Singing',
                    content: 'Magic is inherited through bloodlines and expressed through song. Each family has unique melodies that can manipulate specific elements. The magic grows stronger with emotional intensity but can physically harm the singer if overused. Some ancient songs have been lost, and finding them could change the balance of power.'
                }
            ],
            tech: [
                {
                    title: 'Neural Lace Interface',
                    content: 'Everyone is born with a neural lace that connects to the global net. Information streams directly into consciousness. Corporations control access tiers. The "Ghost Market" exists for illegal neural mods that can enhance abilities but risk identity fragmentation. Some choose to "go ghost" - disconnect entirely and live off-grid.'
                },
                {
                    title: 'Quantum Fold Technology',
                    content: 'Devices that can fold space-time for instantaneous travel between fixed points. The technology requires immense energy and creates temporary "echoes" of the travelers in adjacent dimensions. The folds are becoming unstable, causing reality bleeds where different timelines intersect.'
                }
            ],
            society: [
                {
                    title: 'The Emotional Economy',
                    content: 'In a society where emotions are commodities, people are born with a limited emotional "budget." Basic feelings are free, but complex emotions like love, awe, and deep contentment must be purchased. The wealthy experience rich emotional lives while the poor live in emotional austerity.'
                },
                {
                    title: 'Memory Preservation Society',
                    content: 'In a culture where death is seen as a transition rather than an end, people spend their lives creating "memory crystals" that contain their essence. These crystals are displayed in family shrines and can be consulted for wisdom. The wealthy can afford elaborate memory palaces, while the poor share communal crystals.'
                }
            ],
            religion: [
                {
                    title: 'The Church of Fractured Unity',
                    content: 'Believes that the universe was once whole but shattered into infinite fragments (worlds, timelines, possibilities). Worship involves seeking patterns that suggest original unity. Priests are pattern-recognizers who find meaning in chaos. Heretics believe the fracture was intentional and necessary for growth.'
                },
                {
                    title: 'Cult of the Waking Dream',
                    content: 'Teaches that waking reality is the dream, and true reality exists in the spaces between thoughts. Followers practice lucid dreaming and meditation to access this true reality. Their temples are dream chambers where members share collective dream experiences.'
                }
            ],
            politics: [
                {
                    title: 'The Meritocracy of Minds',
                    content: 'Rule by those who score highest on cognitive and emotional intelligence tests. Leadership positions rotate based on continuous assessment. Critics say it creates pressure to perform and disregards wisdom gained through experience. An underground movement advocates for "heart-led" governance instead.'
                },
                {
                    title: 'The Fragmented Council',
                    content: 'Each major city-state is governed by a council representing different aspects of society: Technology, Nature, Art, Commerce, and Spirit. Decisions require consensus from at least three factions. This leads to intricate political maneuvering and temporary alliances that shift like sand.'
                }
            ],
            geography: [
                {
                    title: 'The Floating Archipelago',
                    content: 'A chain of islands suspended in the sky by ancient magnetic fields. Each island has unique ecosystems adapted to different altitudes. Travel between islands is by airship or winged mounts. The lowest islands are industrial hubs, while the highest contain monasteries and observatories.'
                },
                {
                    title: 'The Sunken Spires',
                    content: 'A flooded city where the tops of skyscrapers form islands in a vast ocean. Society has adapted to vertical living, with different economic classes occupying different levels. The deepest levels are rumored to contain preserved technology from before the flood.'
                }
            ],
            creatures: [
                {
                    title: 'Shadow-Stalkers',
                    content: 'Beings that exist in the spaces between light sources. They feed on forgotten memories and unspoken words. Harmless unless cornered in complete darkness, where they can temporarily erase a person from existence. Some cultures worship them as guardians of secrets.'
                },
                {
                    title: 'Memory Whales',
                    content: 'Giant ethereal creatures that swim through the dream sea. They collect the dreams of sleepers and redistribute them as inspiration. Poets and artists seek them out for creative visions. Their songs can heal mental trauma or induce madness, depending on the listener\'s state of mind.'
                }
            ],
            history: [
                {
                    title: 'The Great Forgetting',
                    content: 'A century ago, a mysterious event caused the entire world to lose their memories of the past 24 hours. The "Blank Day" remains unexplained, and some claim that what was forgotten wasn\'t just memories, but an entire timeline that was erased and replaced.'
                },
                {
                    title: 'The Crystal War',
                    content: 'A thousand-year conflict fought with crystallized emotions. Armies would launch shards of concentrated fear, love, or rage at each other. The war ended when someone discovered how to crystallize hope, which proved too powerful and unpredictable to control.'
                }
            ]
        };
        
        document.querySelectorAll('.world-category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.dataset.category;
                const categoryData = worldCategories[category];
                const randomElement = categoryData[Math.floor(Math.random() * categoryData.length)];
                
                const output = document.getElementById('worldBuilderOutput');
                output.innerHTML = `
                    <div class="world-element" style="animation: fadeIn 0.3s ease;">
                        <div class="world-category">
                            <span>${randomElement.title}</span>
                            <span>${btn.textContent.replace(/[‚ú®‚öôÔ∏èüèõÔ∏èüôè‚öñÔ∏èüó∫Ô∏èüêâüìú]/g, '').trim()}</span>
                        </div>
                        <div class="world-content">
                            <strong>${randomElement.title}:</strong> ${randomElement.content}
                        </div>
                    </div>
                ` + output.innerHTML;
                
                // Limit to 5 elements
                const elements = output.querySelectorAll('.world-element');
                if (elements.length > 5) {
                    elements[elements.length - 1].remove();
                }
            });
        });
        
        // Word Bank - Random Word Combo
        document.getElementById('randomWordsBtn').addEventListener('click', () => {
            const atmosphericWords = ['liminal', 'ethereal', 'verdant', 'cacophonous', 'serene', 'desolate', 'luminous', 'shadowed', 'silken', 'ancient'];
            const actionVerbs = ['whispered', 'lunged', 'unfurled', 'dissolved', 'cascaded', 'hurtled', 'unraveled', 'illuminated', 'shattered', 'suffused'];
            const characterTraits = ['resilient', 'haunted', 'ingenious', 'wry', 'fervent', 'enigmatic', 'stoic', 'volatile', 'tenacious', 'jaded'];
            
            const randomAtmospheric = atmosphericWords[Math.floor(Math.random() * atmosphericWords.length)];
            const randomVerb = actionVerbs[Math.floor(Math.random() * actionVerbs.length)];
            const randomTrait = characterTraits[Math.floor(Math.random() * characterTraits.length)];
            
            showNotification(`‚ú® Try this: A ${randomTrait} character ${randomVerb} through a ${randomAtmospheric} landscape.`, 'success');
        });
        
        // Writing Timer
        let timerInterval;
        let timeLeft = 25 * 60; // 25 minutes in seconds
        let isRunning = false;
        
        const timerDisplay = document.getElementById('timerDisplay');
        const timerStatus = document.getElementById('timerStatus');
        const startBtn = document.getElementById('startTimer');
        const pauseBtn = document.getElementById('pauseTimer');
        const resetBtn = document.getElementById('resetTimer');
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function startTimer() {
            if (isRunning) return;
            
            isRunning = true;
            startBtn.style.display = 'none';
            pauseBtn.style.display = 'block';
            timerStatus.textContent = 'Writing in progress...';
            timerStatus.style.color = 'var(--success)';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    isRunning = false;
                    timerStatus.textContent = 'Time\'s up! Take a break.';
                    timerStatus.style.color = 'var(--accent)';
                    startBtn.style.display = 'block';
                    pauseBtn.style.display = 'none';
                    
                    showNotification('‚è±Ô∏è Writing session complete! Take a 5-minute break.', 'success');
                }
            }, 1000);
        }
        
        function pauseTimer() {
            if (!isRunning) return;
            
            clearInterval(timerInterval);
            isRunning = false;
            startBtn.style.display = 'block';
            pauseBtn.style.display = 'none';
            timerStatus.textContent = 'Paused';
            timerStatus.style.color = '#ffcc00';
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            startBtn.style.display = 'block';
            pauseBtn.style.display = 'none';
            timerStatus.textContent = 'Ready to write';
            timerStatus.style.color = 'var(--text-secondary)';
            updateTimerDisplay();
        }
        
        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);
        
        // Time options
        document.querySelectorAll('.time-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.time-option').forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
                
                const minutes = parseInt(option.dataset.minutes);
                timeLeft = minutes * 60;
                updateTimerDisplay();
                resetTimer();
            });
        });
        
        // Settings
        document.querySelectorAll('.setting-toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                this.classList.toggle('active');
                
                if (this.id === 'autoSaveToggle') {
                    const isActive = this.classList.contains('active');
                    localStorage.setItem('autoSave', isActive ? 'on' : 'off');
                    showNotification(`Auto-save ${isActive ? 'enabled' : 'disabled'}`, 'info');
                }
            });
        });
        
        // Initialize settings
        if (localStorage.getItem('autoSave') === 'off') {
            document.getElementById('autoSaveToggle').classList.remove('active');
        }
        
        // Helper function for notifications
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: ${type === 'success' ? 'rgba(57, 255, 20, 0.1)' : 'rgba(45, 212, 255, 0.1)'};
                border: 1px solid ${type === 'success' ? 'var(--success)' : 'var(--accent)'};
                color: ${type === 'success' ? 'var(--success)' : 'var(--accent)'};
                padding: 10px 16px;
                border-radius: 8px;
                backdrop-filter: blur(10px);
                z-index: 10000;
                animation: slideIn 0.3s ease;
                font-size: 14px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(20px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes slideIn {
                from { transform: translateX(20px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize timer display
        updateTimerDisplay();
        
        // Make exitMinimalMode function globally available
        window.exitMinimalMode = function() {
            const card = document.querySelector('.creative-writing-card');
            card.classList.remove('minimal-mode');
            // The card will reinitialize when re-added to the page
            location.reload(); // Simple solution for demo
        };
    </script>
</div>
