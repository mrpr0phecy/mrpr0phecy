<h2 id="datecalc-title" style="margin-top:0;">Date Calculator</h2>

<form aria-describedby="datecalc-desc">
  <p id="datecalc-desc" class="small">Add or subtract days, or find the difference between two dates.</p>

  <div class="row">
    <div class="field">
      <label for="datecalc-start">Start date</label>
      <input id="datecalc-start" type="date" />
    </div>
    <div class="field">
      <label for="datecalc-end">End date</label>
      <input id="datecalc-end" type="date" />
    </div>
  </div>

  <div class="field">
    <label for="datecalc-offset">Add/Subtract days</label>
    <input id="datecalc-offset" type="number" value="0" />
  </div>

  <div class="actions">
    <button type="button" onclick="datecalcCalc(this)">Calculate</button>
    <button type="button" class="secondary" onclick="datecalcReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Result</div>
    <div class="value" id="datecalc-res">–</div>
  </div>
</div>

<details class="small" style="margin-top:12px;">
  <summary>How it works</summary>
  <p>
    • If both dates are entered → shows difference in days.<br/>
    • If offset is entered → adds/subtracts days from start date.<br/>
    • Flexible: supports either mode.
  </p>
</details>

<script>
function datecalcCalc(btn) {
  const card = btn.closest('.card');
  const start = card.querySelector('#datecalc-start').value;
  const end = card.querySelector('#datecalc-end').value;
  const offset = parseInt(card.querySelector('#datecalc-offset').value) || 0;

  let result = "–";

  if (start && end) {
    const d1 = new Date(start);
    const d2 = new Date(end);
    const diff = Math.round((d2 - d1) / (1000 * 60 * 60 * 24));
    result = diff + " days between";
  } else if (start && offset !== 0) {
    const d1 = new Date(start);
    d1.setDate(d1.getDate() + offset);
    result = d1.toDateString();
  }

  card.querySelector('#datecalc-res').textContent = result;
}

function datecalcReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#datecalc-res').textContent = '–';
}
</script>
