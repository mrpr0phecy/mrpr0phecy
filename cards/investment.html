<h2 id="investment-title" style="margin-top:0;color:var(--accent);border-bottom:2px solid var(--accent);padding-bottom:8px;">
  ğŸ“ˆ Investment Growth Calculator
  <span style="font-size:14px;color:var(--muted);display:block;margin-top:4px;">
    See your wealth grow with the power of compound interest!
  </span>
</h2>

<form aria-describedby="investment-desc">
  <p id="investment-desc" class="small" style="color:var(--muted);margin-bottom:20px;">
    <strong style="color:var(--accent)">Watch your money multiply:</strong> Calculate how small investments today can grow into significant wealth over time through compounding.
  </p>

  <!-- VISUAL SLIDER CONTROLS -->
  <div class="field-group" style="margin-bottom:24px;">
    <div class="slider-header" style="display:flex;justify-content:space-between;margin-bottom:8px;">
      <label for="inv-principal" style="color:var(--accent);font-weight:500;display:flex;align-items:center;gap:6px;">
        ğŸ’° Initial Investment
      </label>
      <span id="principal-value" style="background:rgba(45,212,255,0.1);color:var(--accent);padding:4px 12px;border-radius:12px;font-weight:600;">
        Â£5,000
      </span>
    </div>
    <input type="range" id="inv-principal" min="0" max="100000" step="100" value="5000" 
           style="width:100%;height:6px;background:linear-gradient(90deg, rgba(45,212,255,0.3), rgba(45,212,255,0.8));border-radius:3px;"
           oninput="updateSliderValue(this, 'principal-value', 'Â£', true)">
    <div class="slider-labels" style="display:flex;justify-content:space-between;margin-top:4px;font-size:12px;color:var(--muted);">
      <span>Â£0</span>
      <span>Â£50k</span>
      <span>Â£100k</span>
    </div>
  </div>

  <div class="field-group" style="margin-bottom:24px;">
    <div class="slider-header" style="display:flex;justify-content:space-between;margin-bottom:8px;">
      <label for="inv-monthly" style="color:var(--accent);font-weight:500;display:flex;align-items:center;gap:6px;">
        ğŸ’¸ Monthly Contribution
      </label>
      <span id="monthly-value" style="background:rgba(57,255,20,0.1);color:#39ff14;padding:4px 12px;border-radius:12px;font-weight:600;">
        Â£200
      </span>
    </div>
    <input type="range" id="inv-monthly" min="0" max="5000" step="10" value="200" 
           style="width:100%;height:6px;background:linear-gradient(90deg, rgba(57,255,20,0.3), rgba(57,255,20,0.8));border-radius:3px;"
           oninput="updateSliderValue(this, 'monthly-value', 'Â£', true)">
    <div class="slider-labels" style="display:flex;justify-content:space-between;margin-top:4px;font-size:12px;color:var(--muted);">
      <span>Â£0</span>
      <span>Â£2.5k</span>
      <span>Â£5k</span>
    </div>
  </div>

  <div class="field-group" style="margin-bottom:24px;">
    <div class="slider-header" style="display:flex;justify-content:space-between;margin-bottom:8px;">
      <label for="inv-rate" style="color:var(--accent);font-weight:500;display:flex;align-items:center;gap:6px;">
        ğŸ“ˆ Annual Return
      </label>
      <span id="rate-value" style="background:rgba(255,165,0,0.1);color:#ffa500;padding:4px 12px;border-radius:12px;font-weight:600;">
        7%
      </span>
    </div>
    <input type="range" id="inv-rate" min="0" max="20" step="0.1" value="7" 
           style="width:100%;height:6px;background:linear-gradient(90deg, rgba(255,165,0,0.3), rgba(255,165,0,0.8));border-radius:3px;"
           oninput="updateSliderValue(this, 'rate-value', '%', false)">
    <div class="slider-labels" style="display:flex;justify-content:space-between;margin-top:4px;font-size:12px;color:var(--muted);">
      <span>0%</span>
      <span>10%</span>
      <span>20%</span>
    </div>
  </div>

  <div class="field-group" style="margin-bottom:24px;">
    <div class="slider-header" style="display:flex;justify-content:space-between;margin-bottom:8px;">
      <label for="inv-years" style="color:var(--accent);font-weight:500;display:flex;align-items:center;gap:6px;">
        â³ Investment Period
      </label>
      <span id="years-value" style="background:rgba(157,78,221,0.1);color:#9d4edd;padding:4px 12px;border-radius:12px;font-weight:600;">
        20 years
      </span>
    </div>
    <input type="range" id="inv-years" min="1" max="50" step="1" value="20" 
           style="width:100%;height:6px;background:linear-gradient(90deg, rgba(157,78,221,0.3), rgba(157,78,221,0.8));border-radius:3px;"
           oninput="updateSliderValue(this, 'years-value', ' years', false)">
    <div class="slider-labels" style="display:flex;justify-content:space-between;margin-top:4px;font-size:12px;color:var(--muted);">
      <span>1 year</span>
      <span>25 years</span>
      <span>50 years</span>
    </div>
  </div>

  <!-- INVESTMENT STRATEGY PRESETS -->
  <div style="margin-bottom:20px;">
    <div style="color:var(--accent);font-weight:500;margin-bottom:8px;display:flex;align-items:center;gap:6px;">
      ğŸ¯ Investment Strategies
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;">
      <button type="button" onclick="setStrategy('conservative')" 
              style="padding:8px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:8px;color:var(--accent);cursor:pointer;font-size:12px;">
        ğŸ›¡ï¸ Conservative (4%)
      </button>
      <button type="button" onclick="setStrategy('balanced')" 
              style="padding:8px 12px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;font-size:12px;">
        âš–ï¸ Balanced (7%)
      </button>
      <button type="button" onclick="setStrategy('aggressive')" 
              style="padding:8px 12px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:8px;color:#ffa500;cursor:pointer;font-size:12px;">
        ğŸš€ Aggressive (10%)
      </button>
      <button type="button" onclick="setStrategy('retirement')" 
              style="padding:8px 12px;background:rgba(157,78,221,0.1);border:1px solid rgba(157,78,221,0.3);border-radius:8px;color:#9d4edd;cursor:pointer;font-size:12px;">
        ğŸ–ï¸ Retirement Plan
      </button>
    </div>
  </div>

  <!-- COMPOUNDING FREQUENCY -->
  <div style="margin-bottom:20px;">
    <div style="color:var(--accent);font-weight:500;margin-bottom:8px;display:flex;align-items:center;gap:6px;">
      ğŸ”„ Compounding Frequency
    </div>
    <div style="display:flex;background:rgba(255,255,255,0.05);border-radius:10px;padding:4px;">
      <button type="button" onclick="setCompounding('annual')" id="annual-btn"
              style="flex:1;padding:8px;border:none;background:rgba(45,212,255,0.3);color:var(--accent);border-radius:6px;cursor:pointer;font-weight:500;">
        Annually
      </button>
      <button type="button" onclick="setCompounding('quarterly')" id="quarterly-btn"
              style="flex:1;padding:8px;border:none;background:transparent;color:var(--muted);border-radius:6px;cursor:pointer;font-weight:500;">
        Quarterly
      </button>
      <button type="button" onclick="setCompounding('monthly')" id="monthly-btn"
              style="flex:1;padding:8px;border:none;background:transparent;color:var(--muted);border-radius:6px;cursor:pointer;font-weight:500;">
        Monthly
      </button>
      <button type="button" onclick="setCompounding('daily')" id="daily-btn"
              style="flex:1;padding:8px;border:none;background:transparent;color:var(--muted);border-radius:6px;cursor:pointer;font-weight:500;">
        Daily
      </button>
    </div>
  </div>
</form>

<!-- VISUAL RESULTS -->
<div class="results" aria-live="polite" style="background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(57,255,20,0.05));border-radius:12px;padding:20px;border:1px solid rgba(45,212,255,0.2);margin-bottom:20px;">
  <div style="text-align:center;margin-bottom:20px;">
    <div style="color:var(--muted);font-size:14px;margin-bottom:4px;">Your investment grows to</div>
    <div id="inv-future" style="font-size:48px;font-weight:700;color:#39ff14;margin:8px 0;">Â£133,734</div>
    <div style="color:var(--muted);font-size:14px;">
      in <span id="years-display" style="color:var(--accent);font-weight:600;">20 years</span>
    </div>
  </div>
  
  <!-- BREAKDOWN VISUAL -->
  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:20px;">
    <div style="text-align:center;padding:12px;background:rgba(45,212,255,0.1);border-radius:8px;">
      <div style="color:var(--muted);font-size:12px;margin-bottom:4px;">Total Invested</div>
      <div id="inv-total" style="color:var(--accent);font-size:20px;font-weight:600;">Â£53,000</div>
    </div>
    
    <div style="text-align:center;padding:12px;background:rgba(57,255,20,0.1);border-radius:8px;">
      <div style="color:var(--muted);font-size:12px;margin-bottom:4px;">Growth</div>
      <div id="inv-growth" style="color:#39ff14;font-size:20px;font-weight:600;">Â£80,734</div>
    </div>
    
    <div style="text-align:center;padding:12px;background:rgba(157,78,221,0.1);border-radius:8px;">
      <div style="color:var(--muted);font-size:12px;margin-bottom:4px;">Growth %</div>
      <div id="inv-growth-pct" style="color:#9d4edd;font-size:20px;font-weight:600;">152%</div>
    </div>
  </div>
  
  <!-- VISUAL GROWTH CHART -->
  <div style="margin:20px 0;">
    <div style="display:flex;justify-content:space-between;margin-bottom:6px;font-size:12px;color:var(--muted);">
      <span>Your Money</span>
      <span>Growth</span>
    </div>
    <div style="height:12px;background:rgba(255,255,255,0.1);border-radius:6px;overflow:hidden;display:flex;">
      <div id="principal-bar" style="height:100%;background:var(--accent);width:40%;"></div>
      <div id="growth-bar" style="height:100%;background:#39ff14;width:60%;"></div>
    </div>
    <div style="display:flex;justify-content:space-between;margin-top:4px;font-size:11px;color:var(--muted);">
      <span id="principal-amount">Â£53k</span>
      <span id="growth-amount">Â£81k</span>
    </div>
  </div>
  
  <!-- MONTHLY INCOME PROJECTION -->
  <div style="margin-top:16px;padding:12px;background:rgba(255,165,0,0.1);border-radius:8px;border-left:3px solid #ffa500;">
    <div style="color:#ffa500;font-weight:500;margin-bottom:4px;">ğŸ’° Monthly Passive Income</div>
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <div style="color:var(--muted);font-size:12px;">With 4% withdrawal rate</div>
        <div id="monthly-income" style="color:white;font-size:20px;font-weight:600;">Â£446/month</div>
      </div>
      <div style="color:var(--muted);font-size:12px;text-align:right;">
        That's like getting <br><span style="color:#39ff14;font-weight:600;">Â£5,349/year</span> forever!
      </div>
    </div>
  </div>
</div>

<!-- YEAR-BY-YEAR GROWTH TABLE -->
<details style="margin-bottom:16px;">
  <summary style="color:var(--accent);font-weight:500;cursor:pointer;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;display:flex;align-items:center;gap:8px;">
    ğŸ“Š View Year-by-Year Growth
  </summary>
  <div id="yearly-growth" style="margin-top:12px;max-height:300px;overflow-y:auto;">
    <table style="width:100%;border-collapse:collapse;font-size:13px;">
      <thead style="background:rgba(45,212,255,0.1);position:sticky;top:0;">
        <tr>
          <th style="padding:10px;text-align:left;color:var(--accent);">Year</th>
          <th style="padding:10px;text-align:right;color:var(--accent);">Contributions</th>
          <th style="padding:10px;text-align:right;color:var(--accent);">Growth</th>
          <th style="padding:10px;text-align:right;color:var(--accent);">Total</th>
          <th style="padding:10px;text-align:center;color:var(--accent);">ğŸ“ˆ</th>
        </tr>
      </thead>
      <tbody id="growth-tbody">
        <!-- Filled by JavaScript -->
      </tbody>
    </table>
  </div>
</details>

<!-- COMPARISON: START EARLY VS START LATE -->
<div style="margin-bottom:20px;background:rgba(20,20,20,0.6);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.1);">
  <h3 style="color:var(--accent);margin-top:0;margin-bottom:12px;font-size:16px;display:flex;align-items:center;gap:8px;">
    â° The Power of Starting Early
  </h3>
  
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
    <div style="text-align:center;padding:12px;background:rgba(57,255,20,0.1);border-radius:8px;">
      <div style="color:var(--muted);font-size:12px;margin-bottom:4px;">Start at 25 (40 years)</div>
      <div id="early-start" style="color:#39ff14;font-size:20px;font-weight:600;">Â£1.2M</div>
    </div>
    
    <div style="text-align:center;padding:12px;background:rgba(255,45,85,0.1);border-radius:8px;">
      <div style="color:var(--muted);font-size:12px;margin-bottom:4px;">Start at 45 (20 years)</div>
      <div id="late-start" style="color:#ff2d55;font-size:20px;font-weight:600;">Â£133k</div>
    </div>
  </div>
  
  <div style="height:4px;background:rgba(255,255,255,0.1);border-radius:2px;margin:12px 0;overflow:hidden;">
    <div id="comparison-bar" style="height:100%;background:linear-gradient(90deg, #39ff14, #ff2d55);width:90%;"></div>
  </div>
  
  <div style="text-align:center;color:var(--muted);font-size:12px;">
    Starting 20 years earlier yields <span id="comparison-amount" style="color:#39ff14;font-weight:600;">Â£1.1M more!</span>
  </div>
</div>

<!-- ACTION BUTTONS -->
<div style="display:flex;gap:10px;margin-top:20px;">
  <button type="button" onclick="calculateInvestment()" 
          style="flex:1;padding:14px;background:linear-gradient(135deg, var(--accent), rgba(57,255,20,0.8));border:none;border-radius:10px;color:white;cursor:pointer;font-weight:600;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px;">
    ğŸ”„ Calculate Growth
  </button>
  <button type="button" onclick="shareResults()" 
          style="padding:14px 20px;background:linear-gradient(135deg, #9d4edd, rgba(255,45,85,0.8));border:none;border-radius:10px;color:white;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:6px;">
    ğŸ“¤ Share
  </button>
</div>

<!-- SAVINGS TIPS -->
<div style="margin-top:24px;padding:16px;background:linear-gradient(135deg, rgba(157,78,221,0.1), rgba(255,165,0,0.1));border-radius:12px;border:1px solid rgba(157,78,221,0.3);">
  <h3 style="color:var(--accent);margin-top:0;margin-bottom:12px;font-size:16px;display:flex;align-items:center;gap:8px;">
    ğŸ’¡ Smart Investing Tips
  </h3>
  
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
    <div>
      <div style="color:#39ff14;font-weight:600;margin-bottom:4px;">1. Automate Savings</div>
      <div style="color:var(--muted);font-size:13px;">Set up automatic monthly transfers to make investing effortless.</div>
    </div>
    
    <div>
      <div style="color:#39ff14;font-weight:600;margin-bottom:4px;">2. Diversify</div>
      <div style="color:var(--muted);font-size:13px;">Spread investments across stocks, bonds, and real estate.</div>
    </div>
    
    <div>
      <div style="color:#39ff14;font-weight:600;margin-bottom:4px;">3. Tax-Advantaged Accounts</div>
      <div style="color:var(--muted);font-size:13px;">Use ISAs, SIPPs, or 401(k)s to grow tax-free.</div>
    </div>
    
    <div>
      <div style="color:#39ff14;font-weight:600;margin-bottom:4px;">4. Reinvest Dividends</div>
      <div style="color:var(--muted);font-size:13px;">Let your earnings generate more earnings through compounding.</div>
    </div>
  </div>
</div>

<script>
// Scoped functions with 'ig' prefix (Investment Growth)
let igCompounding = 'annual';
let igCompoundingPeriods = {
  annual: 1,
  quarterly: 4,
  monthly: 12,
  daily: 365
};

// Initialize
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', igInitialize);
} else {
  igInitialize();
}

function igInitialize() {
  console.log('Investment Growth Calculator loaded');
  
  // Initialize sliders
  updateSliderValue(document.querySelector('#inv-principal'), 'principal-value', 'Â£', true);
  updateSliderValue(document.querySelector('#inv-monthly'), 'monthly-value', 'Â£', true);
  updateSliderValue(document.querySelector('#inv-rate'), 'rate-value', '%', false);
  updateSliderValue(document.querySelector('#inv-years'), 'years-value', ' years', false);
  
  // Set default compounding
  setCompounding('annual');
  
  // Calculate initial results
  calculateInvestment();
}

function updateSliderValue(slider, targetId, suffix, isCurrency) {
  const value = slider.value;
  const target = document.getElementById(targetId);
  
  let displayValue = value;
  if (isCurrency && value >= 1000) {
    displayValue = 'Â£' + formatNumber(value);
  } else if (isCurrency) {
    displayValue = 'Â£' + value;
  } else if (suffix === ' years') {
    displayValue = value + suffix;
  } else {
    displayValue = value + suffix;
  }
  
  target.textContent = displayValue;
}

function setStrategy(strategy) {
  const rateSlider = document.querySelector('#inv-rate');
  const principalSlider = document.querySelector('#inv-principal');
  const monthlySlider = document.querySelector('#inv-monthly');
  const yearsSlider = document.querySelector('#inv-years');
  
  switch(strategy) {
    case 'conservative':
      rateSlider.value = 4;
      principalSlider.value = 3000;
      monthlySlider.value = 100;
      yearsSlider.value = 30;
      break;
    case 'balanced':
      rateSlider.value = 7;
      principalSlider.value = 5000;
      monthlySlider.value = 200;
      yearsSlider.value = 20;
      break;
    case 'aggressive':
      rateSlider.value = 10;
      principalSlider.value = 10000;
      monthlySlider.value = 500;
      yearsSlider.value = 15;
      break;
    case 'retirement':
      rateSlider.value = 6;
      principalSlider.value = 10000;
      monthlySlider.value = 500;
      yearsSlider.value = 30;
      break;
  }
  
  // Update slider displays
  updateSliderValue(rateSlider, 'rate-value', '%', false);
  updateSliderValue(principalSlider, 'principal-value', 'Â£', true);
  updateSliderValue(monthlySlider, 'monthly-value', 'Â£', true);
  updateSliderValue(yearsSlider, 'years-value', ' years', false);
  
  // Calculate results
  calculateInvestment();
}

function setCompounding(frequency) {
  igCompounding = frequency;
  
  // Update button states
  document.querySelectorAll('#annual-btn, #quarterly-btn, #monthly-btn, #daily-btn').forEach(btn => {
    btn.style.background = 'transparent';
    btn.style.color = 'var(--muted)';
  });
  
  const activeBtn = document.getElementById(frequency + '-btn');
  if (activeBtn) {
    activeBtn.style.background = 'rgba(45,212,255,0.3)';
    activeBtn.style.color = 'var(--accent)';
  }
  
  // Calculate results
  calculateInvestment();
}

function calculateInvestment() {
  const principal = parseFloat(document.querySelector('#inv-principal').value) || 0;
  const monthly = parseFloat(document.querySelector('#inv-monthly').value) || 0;
  const annualRate = parseFloat(document.querySelector('#inv-rate').value) || 0;
  const years = parseInt(document.querySelector('#inv-years').value) || 0;
  
  // Convert annual rate to periodic rate based on compounding frequency
  const periodsPerYear = igCompoundingPeriods[igCompounding];
  const periodicRate = annualRate / 100 / periodsPerYear;
  const totalPeriods = years * periodsPerYear;
  
  // Calculate future value with different compounding formulas
  let futureValue;
  
  if (igCompounding === 'daily') {
    // Use continuous compounding approximation for daily
    futureValue = principal * Math.pow(1 + periodicRate, totalPeriods) + 
                 monthly * periodsPerYear / 12 * ((Math.pow(1 + periodicRate, totalPeriods) - 1) / periodicRate);
  } else {
    futureValue = principal * Math.pow(1 + periodicRate, totalPeriods) + 
                 monthly * periodsPerYear / 12 * ((Math.pow(1 + periodicRate, totalPeriods) - 1) / periodicRate);
  }
  
  // Calculate totals
  const totalInvested = principal + (monthly * 12 * years);
  const growth = futureValue - totalInvested;
  const growthPercent = totalInvested > 0 ? (growth / totalInvested * 100) : 0;
  
  // Update display
  document.querySelector('#inv-future').textContent = formatCurrency(futureValue);
  document.querySelector('#inv-total').textContent = formatCurrency(totalInvested);
  document.querySelector('#inv-growth').textContent = formatCurrency(growth);
  document.querySelector('#inv-growth-pct').textContent = Math.round(growthPercent) + '%';
  document.querySelector('#years-display').textContent = years + ' years';
  
  // Update visual bars
  const principalPercent = totalInvested > 0 ? (totalInvested / futureValue * 100) : 0;
  const growthPercentVis = 100 - principalPercent;
  
  document.querySelector('#principal-bar').style.width = principalPercent + '%';
  document.querySelector('#growth-bar').style.width = growthPercentVis + '%';
  document.querySelector('#principal-amount').textContent = formatCurrencyShort(totalInvested);
  document.querySelector('#growth-amount').textContent = formatCurrencyShort(growth);
  
  // Calculate monthly passive income (4% rule)
  const monthlyIncome = futureValue * 0.04 / 12;
  document.querySelector('#monthly-income').textContent = formatCurrency(monthlyIncome) + '/month';
  
  // Update comparison section
  updateComparison(principal, monthly, annualRate, years);
  
  // Update yearly growth table
  updateYearlyGrowth(principal, monthly, annualRate, years);
}

function updateComparison(principal, monthly, rate, years) {
  // Early start: same person starting 20 years earlier
  const earlyYears = years + 20;
  const earlyFuture = calculateFutureValue(principal, monthly, rate, earlyYears);
  
  // Late start: starting 20 years later with same end age
  const lateFuture = calculateFutureValue(principal, monthly, rate, years);
  
  const difference = earlyFuture - lateFuture;
  const differencePercent = lateFuture > 0 ? (difference / lateFuture * 100) : 0;
  
  document.querySelector('#early-start').textContent = formatCurrencyShort(earlyFuture);
  document.querySelector('#late-start').textContent = formatCurrencyShort(lateFuture);
  document.querySelector('#comparison-amount').textContent = formatCurrency(difference) + ' more!';
  document.querySelector('#comparison-bar').style.width = Math.min(100, differencePercent) + '%';
}

function calculateFutureValue(principal, monthly, annualRate, years) {
  const monthlyRate = annualRate / 100 / 12;
  const months = years * 12;
  
  return principal * Math.pow(1 + monthlyRate, months) + 
         monthly * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate);
}

function updateYearlyGrowth(principal, monthly, annualRate, years) {
  const tbody = document.querySelector('#growth-tbody');
  tbody.innerHTML = '';
  
  let currentValue = principal;
  const monthlyRate = annualRate / 100 / 12;
  
  for (let year = 1; year <= years; year++) {
    // Calculate value at end of year
    for (let month = 1; month <= 12; month++) {
      currentValue = currentValue * (1 + monthlyRate) + monthly;
    }
    
    const yearlyContributions = principal + (monthly * 12 * year);
    const growth = currentValue - yearlyContributions;
    
    const row = document.createElement('tr');
    row.style.borderBottom = '1px solid rgba(255,255,255,0.05)';
    
    // Determine growth indicator
    let indicator = 'ğŸ“ˆ';
    if (year <= 5) indicator = 'ğŸŒ±';
    if (year > 15) indicator = 'ğŸ’°';
    if (year > 30) indicator = 'ğŸ¦';
    
    row.innerHTML = `
      <td style="padding:10px;color:var(--muted);">Year ${year}</td>
      <td style="padding:10px;text-align:right;color:var(--accent);font-weight:500;">${formatCurrency(yearlyContributions)}</td>
      <td style="padding:10px;text-align:right;color:#39ff14;font-weight:500;">${formatCurrency(growth)}</td>
      <td style="padding:10px;text-align:right;color:white;font-weight:600;">${formatCurrency(currentValue)}</td>
      <td style="padding:10px;text-align:center;font-size:16px;">${indicator}</td>
    `;
    
    tbody.appendChild(row);
    
    // Highlight milestone years
    if ([5, 10, 15, 20, 25, 30].includes(year)) {
      row.style.background = 'rgba(45,212,255,0.05)';
    }
  }
}

function shareResults() {
  const principal = document.querySelector('#inv-principal').value;
  const monthly = document.querySelector('#inv-monthly').value;
  const rate = document.querySelector('#inv-rate').value;
  const years = document.querySelector('#inv-years').value;
  const future = document.querySelector('#inv-future').textContent;
  
  const shareText = `ğŸ’° My investment growth projection:
  
Initial: Â£${principal}
Monthly: Â£${monthly}
Return: ${rate}%
Years: ${years}

Projected Value: ${future}

Calculate yours at The Most Useful Site!`;

  if (navigator.share) {
    navigator.share({
      title: 'Investment Growth Results',
      text: shareText,
      url: window.location.href
    });
  } else {
    navigator.clipboard.writeText(shareText).then(() => {
      alert('ğŸ“‹ Results copied to clipboard! Share your financial goals!');
    });
  }
}

// Helper functions
function formatCurrency(amount) {
  if (amount >= 1000000) {
    return 'Â£' + (amount / 1000000).toFixed(2) + 'M';
  } else if (amount >= 1000) {
    return 'Â£' + (amount / 1000).toFixed(1) + 'k';
  } else {
    return 'Â£' + Math.round(amount).toLocaleString();
  }
}

function formatCurrencyShort(amount) {
  if (amount >= 1000000) {
    return 'Â£' + (amount / 1000000).toFixed(1) + 'M';
  } else if (amount >= 1000) {
    return 'Â£' + Math.round(amount / 1000) + 'k';
  } else {
    return 'Â£' + Math.round(amount);
  }
}

function formatNumber(num) {
  return parseInt(num).toLocaleString('en-GB');
}
</script>

<style>
/* Card-specific styles */
.field-group {
  margin-bottom: 20px;
}

input[type="range"] {
  -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

input[type="range"]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

#growth-tbody tr:hover {
  background: rgba(255,255,255,0.03) !important;
}

@media (max-width: 768px) {
  #inv-future {
    font-size: 36px !important;
  }
  
  .slider-labels span {
    font-size: 10px !important;
  }
}
</style>
