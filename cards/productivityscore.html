<h2 id="productivityscore-title" style="margin-top:0;">Productivity Score</h2>

<form aria-describedby="productivityscore-desc">
  <p id="productivityscore-desc" class="small">Estimate your daily productivity score (0–100).</p>

  <div class="row">
    <div class="field">
      <label for="productivityscore-tasks">Tasks completed</label>
      <input id="productivityscore-tasks" type="number" min="0" value="5" />
    </div>
    <div class="field">
      <label for="productivityscore-focus">Focus time (hours)</label>
      <input id="productivityscore-focus" type="number" min="0" step="0.5" value="4" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label for="productivityscore-distractions">Distractions (count)</label>
      <input id="productivityscore-distractions" type="number" min="0" value="3" />
    </div>
    <div class="field">
      <label for="productivityscore-goals">Goals achieved (%)</label>
      <input id="productivityscore-goals" type="number" min="0" max="100" value="80" />
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="productivityscoreCalc(this)">Calculate</button>
    <button type="button" class="secondary" onclick="productivityscoreReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Productivity score</div>
    <div class="value" id="productivityscore-res">–</div>
  </div>
</div>

<details class="small" style="margin-top:12px;">
  <summary>How it works</summary>
  <p>
    Score combines:  
    • More tasks & focus hours → higher score  
    • Fewer distractions → higher score  
    • Higher goal completion → higher score  
    Final score scaled to 0–100.
  </p>
</details>

<script>
function productivityscoreCalc(btn) {
  const card = btn.closest('.card');
  const tasks = parseFloat(card.querySelector('#productivityscore-tasks').value) || 0;
  const focus = parseFloat(card.querySelector('#productivityscore-focus').value) || 0;
  const distractions = parseFloat(card.querySelector('#productivityscore-distractions').value) || 0;
  const goals = parseFloat(card.querySelector('#productivityscore-goals').value) || 0;

  // Base score from tasks and focus
  let score = (tasks * 5) + (focus * 10);

  // Goal contribution
  score += goals * 0.5;

  // Distraction penalty
  score -= distractions * 2;

  // Clamp between 0–100
  score = Math.max(0, Math.min(100, score));

  card.querySelector('#productivityscore-res').textContent = score.toFixed(0) + " / 100";
}

function productivityscoreReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#productivityscore-res').textContent = '–';
}
</script>
