<h2 id="hash-checker-title" style="margin-top:0;">File Hash Checker</h2>

<form aria-describedby="hash-checker-desc">
  <p id="hash-checker-desc" class="small">Upload a file to calculate its MD5 and SHAâ€‘256 hashes.</p>

  <div class="row" style="display:grid;grid-template-columns:1fr;gap:10px;">
    <div class="field">
      <label for="hash-file">File</label>
      <input id="hash-file" type="file" style="width:100%;" />
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="hashCheck(this)">Check Hash</button>
    <button type="button" class="secondary" onclick="hashReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Hash Results</h3>
  <textarea id="hash-output" rows="6" style="width:100%;padding:10px;border-radius:8px;"></textarea>
</div>

<script>
async function hashCheck(btn){
  const card=btn.closest('.card')||document;
  const file=card.querySelector('#hash-file').files[0];
  if(!file){
    card.querySelector('#hash-output').value="Please select a file.";
    return;
  }
  const buffer=await file.arrayBuffer();
  const md5=await crypto.subtle.digest("MD5",buffer).catch(()=>null);
  const sha=await crypto.subtle.digest("SHA-256",buffer);
  const md5Hex=md5?buf2hex(md5):"(MD5 not supported in all browsers)";
  const shaHex=buf2hex(sha);
  card.querySelector('#hash-output').value=`MD5: ${md5Hex}\nSHA-256: ${shaHex}`;
}

function hashReset(btn){
  const card=btn.closest('.card')||document;
  card.querySelector('form').reset();
  card.querySelector('#hash-output').value="";
}

function buf2hex(buffer){
  return [...new Uint8Array(buffer)].map(x=>x.toString(16).padStart(2,'0')).join('');
}
</script>
