  <h2 id="astronomy-title">Astronomy Tools & Planet Explorer</h2>

<div style="color: rgba(230,250,255,0.8); margin: 10px 0 20px 0; font-size: 15px;">
  Calculate orbital physics and explore our solar system's planets.
</div>

<!-- üåå TOOL SELECTOR -->
<div style="background: rgba(30,30,30,0.5); border-radius: 10px; padding: 20px; margin-bottom: 25px;">
  <div style="color: #2dd4ff; font-weight: 600; margin-bottom: 15px;">Choose an Astronomy Tool:</div>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 20px;">
    <button id="orbit-btn" class="astro-tool-btn active" data-tool="orbit" 
            style="background: rgba(45,212,255,0.2); border: 2px solid #2dd4ff; padding: 15px; border-radius: 8px; cursor: pointer; text-align: center;">
      <div style="font-weight: 600; color: #2dd4ff;">üåç Orbital Period</div>
      <div style="font-size: 13px; color: rgba(230,250,255,0.8); margin-top: 4px;">Kepler's Law</div>
    </button>
    
    <button id="escape-btn" class="astro-tool-btn" data-tool="escape"
            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; cursor: pointer; text-align: center;">
      <div style="font-weight: 600; color: #e6faff;">üöÄ Escape Velocity</div>
      <div style="font-size: 13px; color: rgba(230,250,255,0.8); margin-top: 4px;">Leave a Planet</div>
    </button>
    
    <button id="light-btn" class="astro-tool-btn" data-tool="light"
            style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; cursor: pointer; text-align: center;">
      <div style="font-weight: 600; color: #e6faff;">‚ú® Light Years</div>
      <div style="font-size: 13px; color: rgba(230,250,255,0.8); margin-top: 4px;">Distance Converter</div>
    </button>
  </div>
  
  <!-- üìù ORBITAL PERIOD INPUTS -->
  <div id="orbit-inputs" class="astro-inputs" style="display: block;">
    <div style="color: #e6faff; margin-bottom: 12px; font-size: 15px;">Orbital Period Calculator (Kepler's Law):</div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
      <div>
        <label style="display: block; margin-bottom: 6px; color: rgba(230,250,255,0.8); font-size: 14px;">Semi-major Axis (AU)</label>
        <input type="number" id="orbit-axis" placeholder="e.g., 1 (Earth=1)" step="0.01"
               style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #e6faff;">
      </div>
      
      <div>
        <label style="display: block; margin-bottom: 6px; color: rgba(230,250,255,0.8); font-size: 14px;">Central Mass (Sun=1)</label>
        <input type="number" id="orbit-mass" placeholder="e.g., 1 (Sun=1)" step="0.01"
               style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #e6faff;">
      </div>
    </div>
    
    <div style="margin-top: 10px; color: rgba(230,250,255,0.6); font-size: 13px;">
      Formula: T¬≤ = a¬≥/M (where T in years, a in AU, M in solar masses)
    </div>
  </div>
  
  <!-- üöÄ ESCAPE VELOCITY INPUTS -->
  <div id="escape-inputs" class="astro-inputs" style="display: none;">
    <div style="color: #e6faff; margin-bottom: 12px; font-size: 15px;">Escape Velocity Calculator:</div>
    
    <div style="margin-bottom: 15px;">
      <div style="color: rgba(230,250,255,0.8); margin-bottom: 8px; font-size: 14px;">Select a Planet:</div>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); gap: 8px;">
        <button class="planet-btn" data-planet="earth" style="background: rgba(30,144,255,0.2); border: 1px solid #1e90ff; padding: 8px; border-radius: 6px; cursor: pointer; color: #87ceeb;">üåç Earth</button>
        <button class="planet-btn" data-planet="mars" style="background: rgba(255,69,0,0.2); border: 1px solid #ff4500; padding: 8px; border-radius: 6px; cursor: pointer; color: #ffa07a;">‚ôÇÔ∏è Mars</button>
        <button class="planet-btn" data-planet="jupiter" style="background: rgba(218,165,32,0.2); border: 1px solid #daa520; padding: 8px; border-radius: 6px; cursor: pointer; color: #f0e68c;">‚ôÉ Jupiter</button>
        <button class="planet-btn" data-planet="moon" style="background: rgba(169,169,169,0.2); border: 1px solid #a9a9a9; padding: 8px; border-radius: 6px; cursor: pointer; color: #d3d3d3;">üåô Moon</button>
      </div>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
      <div>
        <label style="display: block; margin-bottom: 6px; color: rgba(230,250,255,0.8); font-size: 14px;">Mass (kg √ó 10¬≤‚Å¥)</label>
        <input type="number" id="escape-mass" placeholder="e.g., 5.97 (Earth)"
               style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #e6faff;">
      </div>
      
      <div>
        <label style="display: block; margin-bottom: 6px; color: rgba(230,250,255,0.8); font-size: 14px;">Radius (km √ó 1000)</label>
        <input type="number" id="escape-radius" placeholder="e.g., 6.371 (Earth)"
               style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #e6faff;">
      </div>
    </div>
  </div>
  
  <!-- ‚ú® LIGHT YEARS INPUTS -->
  <div id="light-inputs" class="astro-inputs" style="display: none;">
    <div style="color: #e6faff; margin-bottom: 12px; font-size: 15px;">Light Year Distance Converter:</div>
    
    <div>
      <label style="display: block; margin-bottom: 6px; color: rgba(230,250,255,0.8); font-size: 14px;">Light Years</label>
      <input type="number" id="light-years" placeholder="e.g., 1" step="0.01"
             style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #e6faff;">
    </div>
    
    <div style="margin-top: 10px; color: rgba(230,250,255,0.6); font-size: 13px;">
      1 light year = 9.461 √ó 10¬π¬≤ kilometers
    </div>
  </div>
  
  <!-- üîò PLANET TABLE TOGGLE -->
  <div style="margin-top: 20px; display: flex; align-items: center; gap: 10px;">
    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; color: rgba(230,250,255,0.8);">
      <input type="checkbox" id="astro-table-toggle" checked style="cursor: pointer;">
      <span>Show Planet Comparison Table</span>
    </label>
  </div>
</div>

<!-- üöÄ CALCULATE BUTTON -->
<div style="text-align: center; margin: 25px 0;">
  <button id="astro-calculate-btn" 
          style="background: #2dd4ff; color: #000; border: none; padding: 14px 32px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; box-shadow: 0 4px 15px rgba(45,212,255,0.3);">
    CALCULATE
  </button>
  
  <button id="astro-reset-btn" 
          style="background: rgba(255,255,255,0.08); color: #e6faff; border: 1px solid rgba(255,255,255,0.2); padding: 14px 24px; border-radius: 10px; cursor: pointer; font-size: 16px; margin-left: 12px;">
    Reset
  </button>
</div>

<!-- üìä RESULTS DISPLAY -->
<div id="astro-results" style="display: none;">
  <div style="background: rgba(20,20,20,0.7); border-radius: 10px; padding: 25px; border: 1px solid rgba(57,255,20,0.2); margin-bottom: 25px;">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
      <div style="color: #39ff14; font-size: 18px; font-weight: 600;">üöÄ Astronomy Result</div>
      <button id="astro-copy-btn" 
              style="background: rgba(57,255,20,0.1); color: #39ff14; border: 1px solid rgba(57,255,20,0.3); padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px;">
        Copy Result
      </button>
    </div>
    
    <div id="astro-result-display" style="font-size: 20px; color: #39ff14; text-align: center; margin-bottom: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
      <!-- Results appear here -->
    </div>
    
    <div id="astro-interpretation" style="color: #e6faff; font-size: 15px; line-height: 1.6; padding: 15px; background: rgba(30,30,30,0.5); border-radius: 8px;">
      <!-- Interpretation appears here -->
    </div>
  </div>
</div>

<!-- ü™ê PLANET COMPARISON TABLE -->
<div id="astro-table" style="margin-top: 20px; display: block;">
  <div style="background: rgba(30,30,30,0.5); border-radius: 10px; padding: 20px; border: 1px solid rgba(45,212,255,0.2); overflow-x: auto;">
    <div style="color: #2dd4ff; font-weight: 600; margin-bottom: 15px; font-size: 16px;">
      ü™ê Solar System Planet Comparison
    </div>
    
    <table style="width: 100%; border-collapse: collapse; font-size: 14px; min-width: 800px;">
      <thead>
        <tr style="background: rgba(255,255,255,0.06);">
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1); color: #2dd4ff;">Planet</th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Distance<br><span style="color: rgba(230,250,255,0.6); font-size: 12px;">(AU)</span></th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Mass<br><span style="color: rgba(230,250,255,0.6); font-size: 12px;">(Earth=1)</span></th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Diameter<br><span style="color: rgba(230,250,255,0.6); font-size: 12px;">(km)</span></th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Moons</th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Avg Temp<br><span style="color: rgba(230,250,255,0.6); font-size: 12px;">(¬∞C)</span></th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1);">Type</th>
          <th style="padding: 10px; text-align: left; border-bottom: 2px solid rgba(255,255,255,0.1); color: rgba(230,250,255,0.6); font-size: 13px;">Interesting Fact</th>
        </tr>
      </thead>
      <tbody>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(139,69,19,0.1), transparent); border-left: 4px solid #8b4513; font-weight: 600; color: #d2b48c;">Mercury</td>
          <td style="padding: 10px;">0.39</td>
          <td style="padding: 10px;">0.055</td>
          <td style="padding: 10px;">4,879</td>
          <td style="padding: 10px;">0</td>
          <td style="padding: 10px;">167</td>
          <td style="padding: 10px; color: #d2b48c;">Rocky</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Extreme day/night temperature swing</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(218,165,32,0.1), transparent); border-left: 4px solid #daa520; font-weight: 600; color: #f0e68c;">Venus</td>
          <td style="padding: 10px;">0.72</td>
          <td style="padding: 10px;">0.815</td>
          <td style="padding: 10px;">12,104</td>
          <td style="padding: 10px;">0</td>
          <td style="padding: 10px;">464</td>
          <td style="padding: 10px; color: #f0e68c;">Rocky</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Runaway greenhouse effect</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(30,144,255,0.1), transparent); border-left: 4px solid #1e90ff; font-weight: 600; color: #87ceeb;">Earth</td>
          <td style="padding: 10px;">1.00</td>
          <td style="padding: 10px;">1.000</td>
          <td style="padding: 10px;">12,742</td>
          <td style="padding: 10px;">1</td>
          <td style="padding: 10px;">15</td>
          <td style="padding: 10px; color: #87ceeb;">Rocky</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Only known planet with life</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(255,69,0,0.1), transparent); border-left: 4px solid #ff4500; font-weight: 600; color: #ffa07a;">Mars</td>
          <td style="padding: 10px;">1.52</td>
          <td style="padding: 10px;">0.107</td>
          <td style="padding: 10px;">6,779</td>
          <td style="padding: 10px;">2</td>
          <td style="padding: 10px;">-63</td>
          <td style="padding: 10px; color: #ffa07a;">Rocky</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Home to Olympus Mons, largest volcano</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(218,165,32,0.1), transparent); border-left: 4px solid #daa520; font-weight: 600; color: #f0e68c;">Jupiter</td>
          <td style="padding: 10px;">5.20</td>
          <td style="padding: 10px;">318</td>
          <td style="padding: 10px;">139,820</td>
          <td style="padding: 10px;">95+</td>
          <td style="padding: 10px;">-110</td>
          <td style="padding: 10px; color: #f0e68c;">Gas Giant</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Great Red Spot (400-year storm)</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(210,180,140,0.1), transparent); border-left: 4px solid #d2b48c; font-weight: 600; color: #f5deb3;">Saturn</td>
          <td style="padding: 10px;">9.54</td>
          <td style="padding: 10px;">95</td>
          <td style="padding: 10px;">116,460</td>
          <td style="padding: 10px;">146+</td>
          <td style="padding: 10px;">-140</td>
          <td style="padding: 10px; color: #f5deb3;">Gas Giant</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Most prominent ring system</td>
        </tr>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.08);">
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(175,238,238,0.1), transparent); border-left: 4px solid #afeeee; font-weight: 600; color: #e0ffff;">Uranus</td>
          <td style="padding: 10px;">19.2</td>
          <td style="padding: 10px;">14.5</td>
          <td style="padding: 10px;">50,724</td>
          <td style="padding: 10px;">27</td>
          <td style="padding: 10px;">-195</td>
          <td style="padding: 10px; color: #e0ffff;">Ice Giant</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Rotates on its side (98¬∞ tilt)</td>
        </tr>
        <tr>
          <td style="padding: 10px; background: linear-gradient(90deg, rgba(65,105,225,0.1), transparent); border-left: 4px solid #4169e1; font-weight: 600; color: #add8e6;">Neptune</td>
          <td style="padding: 10px;">30.1</td>
          <td style="padding: 10px;">17.1</td>
          <td style="padding: 10px;">49,244</td>
          <td style="padding: 10px;">14</td>
          <td style="padding: 10px;">-200</td>
          <td style="padding: 10px; color: #add8e6;">Ice Giant</td>
          <td style="padding: 10px; color: rgba(230,250,255,0.7); font-size: 13px;">Fastest winds in solar system</td>
        </tr>
      </tbody>
    </table>
    
    <div style="margin-top: 15px; color: rgba(230,250,255,0.6); font-size: 13px; display: flex; gap: 15px; flex-wrap: wrap;">
      <div style="display: flex; align-items: center; gap: 6px;">
        <div style="width: 12px; height: 12px; background: #8b4513; border-radius: 2px;"></div>
        <span>Rocky Planets</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <div style="width: 12px; height: 12px; background: #daa520; border-radius: 2px;"></div>
        <span>Gas Giants</span>
      </div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <div style="width: 12px; height: 12px; background: #4169e1; border-radius: 2px;"></div>
        <span>Ice Giants</span>
      </div>
    </div>
  </div>
</div>

<!-- üö® ERROR MESSAGE -->
<div id="astro-error" style="margin-top: 20px; padding: 15px; background: rgba(255,77,77,0.1); border-radius: 8px; border: 1px solid rgba(255,77,77,0.3); display: none;">
  <div style="color: #ff4d4d; font-weight: 600; margin-bottom: 5px;">‚ö†Ô∏è Please check your inputs</div>
  <div id="astro-error-text" style="color: rgba(255,77,77,0.9);"></div>
</div>

<script>
// ============================================
// ASTRONOMY TOOLS - SUPER USER FRIENDLY
// ============================================

// Wait for DOM to be ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initAstronomyTools);
} else {
    setTimeout(initAstronomyTools, 100);
}

function initAstronomyTools() {
    console.log("Astronomy Tools: Initializing...");
    
    // Tool buttons
    const toolBtns = document.querySelectorAll('.astro-tool-btn');
    toolBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // Update active button
            toolBtns.forEach(b => {
                b.style.background = 'rgba(255,255,255,0.05)';
                b.style.border = '1px solid rgba(255,255,255,0.1)';
                b.style.color = '#e6faff';
                b.querySelector('div:first-child').style.color = '#e6faff';
                b.classList.remove('active');
            });
            
            this.style.background = 'rgba(45,212,255,0.2)';
            this.style.border = '2px solid #2dd4ff';
            this.style.color = '#2dd4ff';
            this.querySelector('div:first-child').style.color = '#2dd4ff';
            this.classList.add('active');
            
            // Show corresponding inputs
            const tool = this.dataset.tool;
            document.querySelectorAll('.astro-inputs').forEach(input => {
                input.style.display = 'none';
            });
            
            if (tool === 'orbit') {
                document.getElementById('orbit-inputs').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('orbit-axis').focus();
                }, 50);
            } else if (tool === 'escape') {
                document.getElementById('escape-inputs').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('escape-mass').focus();
                }, 50);
            } else if (tool === 'light') {
                document.getElementById('light-inputs').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('light-years').focus();
                }, 50);
            }
            
            // Clear results
            clearAstronomyResults();
        });
    });
    
    // Planet buttons for escape velocity
    const planetBtns = document.querySelectorAll('.planet-btn');
    planetBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const planet = this.dataset.planet;
            const planets = {
                earth: { mass: 5.972, radius: 6.371 },
                mars: { mass: 0.642, radius: 3.390 },
                jupiter: { mass: 1898, radius: 69.911 },
                moon: { mass: 0.073, radius: 1.737 }
            };
            
            const data = planets[planet];
            if (data) {
                document.getElementById('escape-mass').value = data.mass;
                document.getElementById('escape-radius').value = data.radius;
                
                // Visual feedback
                planetBtns.forEach(b => {
                    b.style.opacity = '0.6';
                    b.style.transform = 'scale(0.95)';
                });
                this.style.opacity = '1';
                this.style.transform = 'scale(1.05)';
                
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 200);
            }
        });
    });
    
    // Calculate button
    document.getElementById('astro-calculate-btn').addEventListener('click', calculateAstronomy);
    
    // Reset button
    document.getElementById('astro-reset-btn').addEventListener('click', resetAstronomy);
    
    // Copy button
    document.getElementById('astro-copy-btn').addEventListener('click', copyAstronomyResult);
    
    // Table toggle
    document.getElementById('astro-table-toggle').addEventListener('change', function() {
        document.getElementById('astro-table').style.display = this.checked ? 'block' : 'none';
    });
    
    // Enter key support for all inputs
    const allInputs = document.querySelectorAll('input[type="number"]');
    allInputs.forEach(input => {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateAstronomy();
            }
        });
    });
    
    // Set default values for easy testing
    setDefaultAstroValues();
    
    console.log("‚úÖ Astronomy Tools ready!");
}

function setDefaultAstroValues() {
    // Set some default values for quick testing
    document.getElementById('orbit-axis').value = '1';
    document.getElementById('orbit-mass').value = '1';
    document.getElementById('escape-mass').value = '5.972';
    document.getElementById('escape-radius').value = '6.371';
    document.getElementById('light-years').value = '1';
}

function calculateAstronomy() {
    console.log("Calculating astronomy...");
    
    // Hide previous results/errors
    document.getElementById('astro-results').style.display = 'none';
    document.getElementById('astro-error').style.display = 'none';
    
    // Get active tool
    const activeTool = document.querySelector('.astro-tool-btn.active').dataset.tool;
    let result = '';
    let interpretation = '';
    
    try {
        if (activeTool === 'orbit') {
            const a = parseFloat(document.getElementById('orbit-axis').value);
            const M = parseFloat(document.getElementById('orbit-mass').value);
            
            if (!a || !M || a <= 0 || M <= 0) {
                showAstronomyError('Please enter valid semi-major axis and mass');
                return;
            }
            
            // Kepler's Third Law: T¬≤ = a¬≥/M
            const T = Math.sqrt(Math.pow(a, 3) / M);
            
            result = `Orbital Period: ${T.toFixed(2)} years`;
            interpretation = `Using Kepler's Third Law: T¬≤ = a¬≥/M\n\n`;
            interpretation += `‚Ä¢ Semi-major axis (a): ${a} AU\n`;
            interpretation += `‚Ä¢ Central mass (M): ${M} solar masses\n`;
            interpretation += `‚Ä¢ Calculation: ‚àö(${a}¬≥ / ${M}) = ‚àö(${Math.pow(a, 3).toFixed(2)} / ${M}) = ${T.toFixed(2)} years\n\n`;
            
            if (a === 1 && M === 1) {
                interpretation += `This is Earth's orbit around the Sun!`;
            } else if (a < 1) {
                interpretation += `This orbit is inside Earth's orbit (closer to Sun)`;
            } else if (a > 1) {
                interpretation += `This orbit is outside Earth's orbit (further from Sun)`;
            }
            
        } else if (activeTool === 'escape') {
            const M = parseFloat(document.getElementById('escape-mass').value);
            const R = parseFloat(document.getElementById('escape-radius').value);
            
            if (!M || !R || M <= 0 || R <= 0) {
                showAstronomyError('Please enter valid mass and radius');
                return;
            }
            
            // Convert to SI units (M in kg, R in meters)
            const M_kg = M * 1e24; // Convert from 10¬≤‚Å¥ kg to kg
            const R_m = R * 1e3;   // Convert from km to meters
            
            // Escape velocity formula: v = ‚àö(2GM/R)
            const G = 6.67430e-11; // Gravitational constant
            const v_escape = Math.sqrt((2 * G * M_kg) / R_m);
            
            result = `Escape Velocity: ${(v_escape / 1000).toFixed(2)} km/s`;
            interpretation = `Formula: v = ‚àö(2GM/R)\n\n`;
            interpretation += `‚Ä¢ Mass: ${M} √ó 10¬≤‚Å¥ kg\n`;
            interpretation += `‚Ä¢ Radius: ${R} √ó 10¬≥ m\n`;
            interpretation += `‚Ä¢ Gravitational constant (G): 6.674 √ó 10‚Åª¬π¬π N¬∑m¬≤/kg¬≤\n`;
            interpretation += `‚Ä¢ Calculation: ‚àö(2 √ó 6.674e-11 √ó ${M_kg.toExponential(1)} / ${R_m.toExponential(1)}) = ${v_escape.toExponential(2)} m/s\n\n`;
            
            // Comparison to Earth
            const earthEscape = 11.186; // km/s
            const comparison = (v_escape / 1000) / earthEscape;
            
            if (comparison < 0.5) {
                interpretation += `Easier to escape than Earth (${comparison.toFixed(2)}√ó Earth's escape velocity)`;
            } else if (comparison > 2) {
                interpretation += `Much harder to escape than Earth (${comparison.toFixed(2)}√ó Earth's escape velocity)`;
            } else {
                interpretation += `Similar escape velocity to Earth (${comparison.toFixed(2)}√ó Earth's escape velocity)`;
            }
            
        } else if (activeTool === 'light') {
            const ly = parseFloat(document.getElementById('light-years').value);
            
            if (!ly || ly <= 0) {
                showAstronomyError('Please enter valid light years');
                return;
            }
            
            // 1 light year = 9.461 √ó 10¬π¬≤ km
            const km = ly * 9.461e12;
            const au = ly * 63241; // 1 light year = 63,241 AU
            const pc = ly * 0.3066; // 1 light year = 0.3066 parsecs
            
            result = `${ly} light year${ly !== 1 ? 's' : ''}`;
            interpretation = `Distance Conversions:\n\n`;
            interpretation += `‚Ä¢ Kilometers: ${km.toExponential(3)} km\n`;
            interpretation += `‚Ä¢ Astronomical Units: ${au.toLocaleString()} AU\n`;
            interpretation += `‚Ä¢ Parsecs: ${pc.toFixed(4)} pc\n\n`;
            interpretation += `Interesting facts:\n`;
            interpretation += `‚Ä¢ Light from Sun reaches Earth in 8.3 minutes (0.0000158 ly)\n`;
            interpretation += `‚Ä¢ Nearest star (Proxima Centauri): 4.24 light years\n`;
            interpretation += `‚Ä¢ Milky Way diameter: ~100,000 light years`;
        }
        
        // Display results
        document.getElementById('astro-result-display').textContent = result;
        document.getElementById('astro-interpretation').innerHTML = interpretation.replace(/\n/g, '<br>');
        document.getElementById('astro-results').style.display = 'block';
        
        // Scroll to results
        setTimeout(() => {
            document.getElementById('astro-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
        
    } catch (error) {
        console.error('Calculation error:', error);
        showAstronomyError('Unable to calculate. Please check your inputs.');
    }
}

function resetAstronomy() {
    // Reset all inputs to defaults
    setDefaultAstroValues();
    
    // Reset to orbital period tool
    document.querySelectorAll('.astro-tool-btn').forEach(btn => {
        btn.style.background = 'rgba(255,255,255,0.05)';
        btn.style.border = '1px solid rgba(255,255,255,0.1)';
        btn.style.color = '#e6faff';
        btn.querySelector('div:first-child').style.color = '#e6faff';
        btn.classList.remove('active');
    });
    
    const orbitBtn = document.getElementById('orbit-btn');
    orbitBtn.style.background = 'rgba(45,212,255,0.2)';
    orbitBtn.style.border = '2px solid #2dd4ff';
    orbitBtn.style.color = '#2dd4ff';
    orbitBtn.querySelector('div:first-child').style.color = '#2dd4ff';
    orbitBtn.classList.add('active');
    
    // Show orbital inputs
    document.querySelectorAll('.astro-inputs').forEach(input => {
        input.style.display = 'none';
    });
    document.getElementById('orbit-inputs').style.display = 'block';
    
    // Reset planet buttons
    document.querySelectorAll('.planet-btn').forEach(btn => {
        btn.style.opacity = '1';
        btn.style.transform = 'scale(1)';
    });
    
    // Clear results and errors
    clearAstronomyResults();
    
    // Focus on first input
    setTimeout(() => {
        document.getElementById('orbit-axis').focus();
        document.getElementById('orbit-axis').select();
    }, 50);
    
    console.log("Astronomy tools reset");
}

function clearAstronomyResults() {
    document.getElementById('astro-results').style.display = 'none';
    document.getElementById('astro-error').style.display = 'none';
}

function copyAstronomyResult() {
    const result = document.getElementById('astro-result-display').textContent;
    const interpretation = document.getElementById('astro-interpretation').textContent;
    const text = `${result}\n\n${interpretation}`;
    
    navigator.clipboard.writeText(text).then(() => {
        // Visual feedback
        const copyBtn = document.getElementById('astro-copy-btn');
        const originalText = copyBtn.textContent;
        copyBtn.textContent = '‚úÖ Copied!';
        copyBtn.style.background = 'rgba(57,255,20,0.2)';
        
        setTimeout(() => {
            copyBtn.textContent = originalText;
            copyBtn.style.background = '';
        }, 2000);
    }).catch(err => {
        console.error('Copy failed:', err);
        alert('Failed to copy. Please select and copy manually.');
    });
}

function showAstronomyError(message) {
    document.getElementById('astro-error-text').textContent = message;
    document.getElementById('astro-error').style.display = 'block';
    
    // Scroll to error
    setTimeout(() => {
        document.getElementById('astro-error').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 100);
}

// Auto-initialize on load
setTimeout(initAstronomyTools, 100);
</script>