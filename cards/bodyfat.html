<!-- cards/body-fat-calculator.html -->
<h2 id="body-fat-calculator-title" style="margin-top:0;color:var(--accent);position:relative;">
  ğŸ‹ï¸ Body Fat Percentage Calculator
  <span style="position:absolute;right:0;top:0;font-size:0.7rem;color:rgba(45,212,255,0.7);font-weight:normal;">
    Health & Fitness
  </span>
</h2>

<form aria-describedby="body-fat-calculator-desc">
  <p id="body-fat-calculator-desc" class="small" style="margin-bottom:20px;color:rgba(230,250,255,0.9);">
    Estimate your body fat percentage using the U.S. Navy method and understand your fitness level.
  </p>

  <!-- Gender Selection with Visual Indicators -->
  <div style="margin-bottom:20px;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
      <label style="color:var(--accent);font-weight:500;">ğŸ‘¤ Select Gender</label>
      <span id="bf-gender-indicator" style="font-size:0.9rem;color:#2dd4ff;font-weight:500;">Male</span>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <button type="button" onclick="bfSetGender('male')" 
              style="padding:14px;border-radius:10px;background:rgba(45,212,255,0.2);border:2px solid var(--accent);color:var(--accent);cursor:pointer;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px;">
        ğŸ‘¨ Male
      </button>
      <button type="button" onclick="bfSetGender('female')"
              style="padding:14px;border-radius:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);color:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;">
        ğŸ‘© Female
      </button>
    </div>
  </div>

  <!-- Measurement Inputs -->
  <div style="background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(45,212,255,0.02));border-radius:12px;padding:20px;border:1px solid rgba(45,212,255,0.1);margin-bottom:20px;">
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin-bottom:16px;">
      <!-- Weight -->
      <div class="field" style="position:relative;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label for="bf-weight" style="color:var(--accent);font-weight:500;">âš–ï¸ Weight</label>
          <span id="bf-weight-unit" style="font-size:0.9rem;color:rgba(230,250,255,0.7);">kg</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="bf-weight" type="number" min="30" max="200" value="70" 
                 style="flex:1;padding:14px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="bfAdjustValue('weight', 1)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+1</button>
            <button type="button" onclick="bfAdjustValue('weight', -1)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-1</button>
          </div>
        </div>
        <div class="small" style="margin-top:6px;color:rgba(230,250,255,0.7);display:flex;justify-content:space-between;">
          <span>30kg</span>
          <span>200kg</span>
        </div>
      </div>

      <!-- Height -->
      <div class="field" style="position:relative;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label for="bf-height" style="color:var(--accent);font-weight:500;">ğŸ“ Height</label>
          <span id="bf-height-unit" style="font-size:0.9rem;color:rgba(230,250,255,0.7);">cm</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="bf-height" type="number" min="100" max="250" value="175" 
                 style="flex:1;padding:14px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="bfAdjustValue('height', 1)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+1</button>
            <button type="button" onclick="bfAdjustValue('height', -1)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-1</button>
          </div>
        </div>
        <div class="small" style="margin-top:6px;color:rgba(230,250,255,0.7);display:flex;justify-content:space-between;">
          <span>100cm</span>
          <span>250cm</span>
        </div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;">
      <!-- Waist -->
      <div class="field" style="position:relative;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label for="bf-waist" style="color:var(--accent);font-weight:500;">ğŸ“ Waist</label>
          <span id="bf-waist-unit" style="font-size:0.9rem;color:rgba(230,250,255,0.7);">cm</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="bf-waist" type="number" min="50" max="150" value="80" 
                 style="flex:1;padding:14px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="bfAdjustValue('waist', 0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+0.5</button>
            <button type="button" onclick="bfAdjustValue('waist', -0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-0.5</button>
          </div>
        </div>
        <div class="small" style="margin-top:6px;color:rgba(230,250,255,0.7);display:flex;justify-content:space-between;">
          <span>50cm</span>
          <span>150cm</span>
        </div>
      </div>

      <!-- Neck -->
      <div class="field" style="position:relative;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label for="bf-neck" style="color:var(--accent);font-weight:500;">ğŸ“ Neck</label>
          <span id="bf-neck-unit" style="font-size:0.9rem;color:rgba(230,250,255,0.7);">cm</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="bf-neck" type="number" min="25" max="60" value="38" 
                 style="flex:1;padding:14px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="bfAdjustValue('neck', 0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+0.5</button>
            <button type="button" onclick="bfAdjustValue('neck', -0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-0.5</button>
          </div>
        </div>
        <div class="small" style="margin-top:6px;color:rgba(230,250,255,0.7);display:flex;justify-content:space-between;">
          <span>25cm</span>
          <span>60cm</span>
        </div>
      </div>

      <!-- Hip (Female Only) -->
      <div class="field" id="bf-hip-section" style="position:relative;display:none;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
          <label for="bf-hip" style="color:var(--accent);font-weight:500;">ğŸ€ Hip</label>
          <span style="font-size:0.9rem;color:rgba(230,250,255,0.7);">cm (females only)</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="bf-hip" type="number" min="60" max="150" value="90" 
                 style="flex:1;padding:14px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;font-size:1.1rem;" />
          <div style="display:flex;flex-direction:column;gap:4px;">
            <button type="button" onclick="bfAdjustValue('hip', 0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">+0.5</button>
            <button type="button" onclick="bfAdjustValue('hip', -0.5)" style="padding:6px 12px;border-radius:6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);cursor:pointer;">-0.5</button>
          </div>
        </div>
        <div class="small" style="margin-top:6px;color:rgba(230,250,255,0.7);display:flex;justify-content:space-between;">
          <span>60cm</span>
          <span>150cm</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Measurement Help -->
  <div style="margin-bottom:20px;padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;border:1px solid rgba(45,212,255,0.1);">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
      <span style="color:var(--accent);font-weight:500;">ğŸ“ Measurement Guide</span>
      <button onclick="bfToggleGuide()" style="margin-left:auto;padding:4px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:0.85rem;">
        Show Guide
      </button>
    </div>
    <div id="bf-measurement-guide" style="display:none;">
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:12px;">
        <div>
          <div style="color:#39ff14;font-weight:600;margin-bottom:4px;">Waist</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">At narrowest point, relax</div>
        </div>
        <div>
          <div style="color:#ffcc00;font-weight:600;margin-bottom:4px;">Neck</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Below Adam's apple</div>
        </div>
        <div>
          <div style="color:#9d4edd;font-weight:600;margin-bottom:4px;">Hip</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Widest point for females</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="actions" style="display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:10px;margin-top:20px;">
    <button type="button" onclick="bfCalculate(this)" 
            style="padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;transition:all 0.2s;">
      ğŸ§® Calculate
    </button>
    <button type="button" onclick="bfSetDefaults()"
            style="padding:14px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);color:#39ff14;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ“Š Set Averages
    </button>
    <button type="button" onclick="bfCopyResults()"
            style="padding:14px;background:rgba(255,204,0,0.1);border:1px solid rgba(255,204,0,0.3);color:#ffcc00;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ“‹ Copy Results
    </button>
    <button type="button" onclick="bfReset(this)"
            style="padding:14px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);color:#ff4d4d;border-radius:8px;cursor:pointer;transition:all 0.2s;">
      ğŸ”„ Reset All
    </button>
  </div>
</form>

<!-- Results Display -->
<div class="results" aria-live="polite" style="margin-top:20px;">
  <!-- Main Results Card -->
  <div id="bf-results-section" style="display:none;background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(45,212,255,0.02));border-radius:8px;padding:24px;border:1px solid rgba(45,212,255,0.1);margin-bottom:20px;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
      <h3 style="color:var(--accent);margin:0;font-size:1.1rem;">ğŸ“Š Your Body Composition</h3>
      <button onclick="bfSaveResults()" style="padding:6px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:0.9rem;">
        ğŸ’¾ Save Results
      </button>
    </div>
    
    <!-- Body Fat Percentage with Visual Scale -->
    <div style="margin-bottom:24px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);">Body Fat Percentage</div>
          <div id="bf-percentage" style="font-size:2.5rem;font-weight:800;color:#39ff14;line-height:1;">0.0%</div>
        </div>
        <div id="bf-category" style="padding:8px 16px;border-radius:20px;background:rgba(45,212,255,0.1);color:var(--accent);font-weight:600;font-size:0.9rem;">
          Category
        </div>
      </div>
      
      <!-- Body Fat Scale Visualization -->
      <div style="margin-bottom:12px;">
        <div style="height:24px;background:linear-gradient(90deg, #39ff14, #ffcc00, #ff2d55);border-radius:12px;position:relative;margin-bottom:8px;">
          <div id="bf-scale-marker" style="position:absolute;top:-4px;width:4px;height:32px;background:white;border-radius:2px;box-shadow:0 0 8px rgba(255,255,255,0.8);"></div>
        </div>
        <div style="display:flex;justify-content:space-between;font-size:0.8rem;color:rgba(230,250,255,0.7);">
          <span>Essential</span>
          <span>Athlete</span>
          <span>Fitness</span>
          <span>Average</span>
          <span>Obese</span>
        </div>
      </div>
      
      <!-- Category Description -->
      <div id="bf-category-desc" style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;font-size:0.9rem;color:rgba(230,250,255,0.9);">
        Enter your measurements to see category description.
      </div>
    </div>
    
    <!-- Detailed Metrics -->
    <div style="margin-bottom:24px;">
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:12px;">ğŸ“ˆ Detailed Analysis</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(160px, 1fr));gap:16px;">
        <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">Fat Mass</div>
          <div id="bf-fat-mass" style="font-size:1.8rem;font-weight:700;color:#ff2d55;">0.0 kg</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Total body fat</div>
        </div>
        
        <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">Lean Mass</div>
          <div id="bf-lean-mass" style="font-size:1.8rem;font-weight:700;color:#39ff14;">0.0 kg</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Muscle & bone</div>
        </div>
        
        <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">BMI</div>
          <div id="bf-bmi" style="font-size:1.8rem;font-weight:700;color:#ffcc00;">0.0</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Body Mass Index</div>
        </div>
        
        <div style="text-align:center;padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;">
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:8px;">W/H Ratio</div>
          <div id="bf-wh-ratio" style="font-size:1.8rem;font-weight:700;color:#9d4edd;">0.0</div>
          <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-top:4px;">Waist to Height</div>
        </div>
      </div>
    </div>
    
    <!-- Health Recommendations -->
    <div>
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.7);margin-bottom:12px;">ğŸ’¡ Health Recommendations</div>
      <div id="bf-recommendations" style="padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;border-left:4px solid var(--accent);">
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);line-height:1.5;">
          Enter your measurements to receive personalized health recommendations.
        </div>
      </div>
    </div>
  </div>

  <!-- Body Fat Categories Guide -->
  <div style="background:rgba(0,0,0,0.1);border-radius:8px;padding:24px;border:1px solid rgba(255,255,255,0.05);margin-bottom:20px;">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:20px;font-size:1.1rem;">ğŸ“‹ Body Fat Categories</h3>
    
    <div style="overflow-x:auto;">
      <table style="width:100%;border-collapse:collapse;font-size:0.9rem;">
        <thead>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.1);">
            <th style="text-align:left;padding:12px;color:var(--accent);">Category</th>
            <th style="text-align:center;padding:12px;color:var(--accent);">Men</th>
            <th style="text-align:center;padding:12px;color:var(--accent);">Women</th>
            <th style="text-align:left;padding:12px;color:var(--accent);">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;"><span style="color:#39ff14;font-weight:600;">Essential Fat</span></td>
            <td style="padding:12px;text-align:center;color:#39ff14;">2-5%</td>
            <td style="padding:12px;text-align:center;color:#39ff14;">10-13%</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Minimum for basic physiological function</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;"><span style="color:#2dd4ff;font-weight:600;">Athletes</span></td>
            <td style="padding:12px;text-align:center;color:#2dd4ff;">6-13%</td>
            <td style="padding:12px;text-align:center;color:#2dd4ff;">14-20%</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Typical for athletes, very fit individuals</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;"><span style="color:#ffcc00;font-weight:600;">Fitness</span></td>
            <td style="padding:12px;text-align:center;color:#ffcc00;">14-17%</td>
            <td style="padding:12px;text-align:center;color:#ffcc00;">21-24%</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Fit and healthy, moderate fitness level</td>
          </tr>
          <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
            <td style="padding:12px;"><span style="color:#ffa500;font-weight:600;">Average</span></td>
            <td style="padding:12px;text-align:center;color:#ffa500;">18-24%</td>
            <td style="padding:12px;text-align:center;color:#ffa500;">25-31%</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Average for general population</td>
          </tr>
          <tr>
            <td style="padding:12px;"><span style="color:#ff2d55;font-weight:600;">Obese</span></td>
            <td style="padding:12px;text-align:center;color:#ff2d55;">25%+</td>
            <td style="padding:12px;text-align:center;color:#ff2d55;">32%+</td>
            <td style="padding:12px;color:rgba(230,250,255,0.9);">Increased health risks, consider reduction</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Health Tips & Information -->
  <div style="background:rgba(0,0,0,0.1);border-radius:8px;padding:24px;border:1px solid rgba(255,255,255,0.05);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:20px;font-size:1.1rem;">ğŸ’¡ Health & Fitness Tips</h3>
    
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin-bottom:20px;">
      <div style="padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;">
        <div style="color:#39ff14;font-weight:600;margin-bottom:8px;">ğŸƒâ€â™‚ï¸ Exercise Regularly</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">150 minutes of moderate exercise or 75 minutes of vigorous exercise weekly</div>
      </div>
      <div style="padding:16px;background:rgba(57,255,20,0.05);border-radius:8px;">
        <div style="color:#ffcc00;font-weight:600;margin-bottom:8px;">ğŸ¥— Balanced Nutrition</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Focus on whole foods, lean proteins, healthy fats, and complex carbs</div>
      </div>
      <div style="padding:16px;background:rgba(255,204,0,0.05);border-radius:8px;">
        <div style="color:#9d4edd;font-weight:600;margin-bottom:8px;">ğŸ’¤ Sleep Well</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">7-9 hours of quality sleep supports metabolism and recovery</div>
      </div>
      <div style="padding:16px;background:rgba(157,78,221,0.05);border-radius:8px;">
        <div style="color:#2dd4ff;font-weight:600;margin-bottom:8px;">ğŸ’§ Stay Hydrated</div>
        <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">Drink at least 2 liters of water daily for optimal metabolic function</div>
      </div>
    </div>
    
    <!-- Important Disclaimer -->
    <div style="padding:16px;background:rgba(255,45,85,0.1);border-radius:8px;border-left:4px solid #ff2d55;">
      <div style="color:#ff2d55;font-weight:600;margin-bottom:8px;">âš ï¸ Important Disclaimer</div>
      <div style="font-size:0.9rem;color:rgba(230,250,255,0.9);">
        This calculator provides estimates using the U.S. Navy method. For accurate body composition analysis, 
        consult with a healthcare professional or use more precise methods like DEXA scans, hydrostatic weighing, 
        or professional calipers. Individual results may vary based on factors like age, muscle mass, and ethnicity.
      </div>
    </div>
  </div>
</div>

<script>
/* body-fat-calculator.html - Enhanced version
   - Advanced body fat percentage calculator
   - Scoped with bf- prefix
*/

let currentGender = 'male';
let measurementHistory = [];

// Body fat categories with descriptions
const bfCategories = {
  male: {
    essential: { min: 2, max: 5, name: 'Essential Fat', color: '#39ff14', desc: 'Minimum fat required for basic physiological function. Extremely lean, typical for bodybuilders in competition.' },
    athlete: { min: 6, max: 13, name: 'Athlete', color: '#2dd4ff', desc: 'Very fit and athletic. Excellent muscle definition, typical for most athletes.' },
    fitness: { min: 14, max: 17, name: 'Fitness', color: '#ffcc00', desc: 'Fit and healthy. Good muscle tone, visible abs when flexed.' },
    average: { min: 18, max: 24, name: 'Average', color: '#ffa500', desc: 'Average for general population. Some muscle definition, slight abdominal outline.' },
    obese: { min: 25, max: 100, name: 'Obese', color: '#ff2d55', desc: 'Above average body fat. Consider reducing for better health and fitness.' }
  },
  female: {
    essential: { min: 10, max: 13, name: 'Essential Fat', color: '#39ff14', desc: 'Minimum fat required for basic physiological function and hormonal balance.' },
    athlete: { min: 14, max: 20, name: 'Athlete', color: '#2dd4ff', desc: 'Very fit and athletic. Lean with good muscle definition.' },
    fitness: { min: 21, max: 24, name: 'Fitness', color: '#ffcc00', desc: 'Fit and healthy. Toned physique with some muscle definition.' },
    average: { min: 25, max: 31, name: 'Average', color: '#ffa500', desc: 'Average for general population. Healthy weight range.' },
    obese: { min: 32, max: 100, name: 'Obese', color: '#ff2d55', desc: 'Above average body fat. Consider reduction for improved health.' }
  }
};

// Initialize
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    // Set default gender
    bfSetGender('male');
    
    // Set up input event listeners for auto-calculate
    bfSetupInputListeners();
    
    // Load history from localStorage
    const savedHistory = localStorage.getItem('bf-measurement-history');
    if (savedHistory) {
      measurementHistory = JSON.parse(savedHistory);
    }
    
    // Auto-calculate on load
