<h2 id="maths-flashcards-title">Maths Flashcards</h2>

<form aria-describedby="maths-flashcards-desc">
  <p id="maths-flashcards-desc" class="small">
    Generate random maths flashcards for quick practice. 
    <span style="color:var(--accent)">Perfect for studying, teaching, or quick mental math practice!</span>
  </p>

  <!-- CONTROLS - NO EXTRA WRAPPERS -->
  <div style="display:grid;grid-template-columns:repeat(3, 1fr);gap:12px;margin-bottom:16px;">
    <div class="field">
      <label for="mf-topic" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Topic
      </label>
      <select id="mf-topic" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="arithmetic" selected>Arithmetic (+ - √ó √∑)</option>
        <option value="algebra">Algebra (equations)</option>
        <option value="geometry">Geometry (shapes)</option>
        <option value="fractions">Fractions</option>
        <option value="percentages">Percentages</option>
        <option value="exponents">Exponents & Roots</option>
        <option value="word-problems">Word Problems</option>
        <option value="mental-math">Mental Math</option>
        <option value="order-ops">Order of Operations</option>
        <option value="all">All Topics (Mixed)</option>
      </select>
    </div>

    <div class="field">
      <label for="mf-difficulty" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Difficulty
      </label>
      <select id="mf-difficulty" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="easy" selected>Easy (Grades 1-3)</option>
        <option value="medium">Medium (Grades 4-6)</option>
        <option value="hard">Hard (Grades 7-9)</option>
        <option value="advanced">Advanced (Grades 10+)</option>
      </select>
    </div>

    <div class="field">
      <label for="mf-count" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Flashcards
      </label>
      <select id="mf-count" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;">
        <option value="1">1 Card</option>
        <option value="3" selected>3 Cards</option>
        <option value="5">5 Cards</option>
        <option value="10">10 Cards</option>
      </select>
    </div>
  </div>

  <!-- QUICK TOPIC BUTTONS -->
  <div style="margin-bottom:20px;">
    <div style="color:rgba(230,250,255,0.8);margin-bottom:8px;font-size:14px;">Quick Topics:</div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;">
      <button type="button" onclick="mfQuickTopic('arithmetic')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Arithmetic</button>
      <button type="button" onclick="mfQuickTopic('algebra')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Algebra</button>
      <button type="button" onclick="mfQuickTopic('geometry')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Geometry</button>
      <button type="button" onclick="mfQuickTopic('fractions')" style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">Fractions</button>
      <button type="button" onclick="mfQuickTopic('all')" style="padding:6px 10px;background:rgba(45,212,255,0.2);border:1px solid rgba(45,212,255,0.4);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;font-weight:600;">Mixed All</button>
    </div>
  </div>

  <!-- ACTIONS - USING THEME COLORS -->
  <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
    <button type="button" onclick="mfGenerate(this)" 
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
      üîÑ Generate New Set
    </button>
    <button type="button" onclick="mfReset(this)"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      Reset
    </button>
    <button type="button" onclick="mfCopy(this)"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
      Copy Set
    </button>
  </div>

  <!-- STUDY OPTIONS -->
  <div style="margin-top:12px;display:flex;flex-wrap:wrap;gap:16px;align-items:center;">
    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
      <input type="checkbox" id="mf-show-answer" checked style="cursor:pointer;">
      <span style="color:rgba(230,250,255,0.9);font-size:14px;">Show answers immediately</span>
    </label>
    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
      <input type="checkbox" id="mf-show-steps" checked style="cursor:pointer;">
      <span style="color:rgba(230,250,255,0.9);font-size:14px;">Show solution steps</span>
    </label>
    <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
      <input type="checkbox" id="mf-random-order" style="cursor:pointer;">
      <span style="color:rgba(230,250,255,0.9);font-size:14px;">Randomize order</span>
    </label>
  </div>
</form>

<!-- FLASHCARDS DISPLAY -->
<div class="results" aria-live="polite" style="margin-top:16px;">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
    <h3 class="small" style="color:var(--accent);margin:0;">üìö Generated Flashcards</h3>
    <div id="mf-progress" style="color:rgba(230,250,255,0.7);font-size:13px;"></div>
  </div>

  <!-- FLASHCARDS CONTAINER -->
  <div id="mf-flashcards-container" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:12px;">
    <!-- Flashcards will be inserted here -->
  </div>

  <!-- HINT AND STATUS -->
  <div style="margin-top:12px;display:flex;gap:12px;align-items:center;">
    <div id="mf-hint" class="small" style="color:#39ff14;font-size:13px;flex:1;"></div>
    <div id="mf-timer" style="color:rgba(230,250,255,0.7);font-size:13px;font-family:monospace;"></div>
  </div>

  <!-- STUDY STATS -->
  <div id="mf-stats-container" style="display:none;margin-top:16px;padding:12px;background:rgba(0,0,0,0.15);border-radius:8px;border:1px solid rgba(45,212,255,0.1);">
    <div style="color:rgba(230,250,255,0.9);font-size:14px;margin-bottom:6px;">üìä Study Statistics:</div>
    <div style="display:grid;grid-template-columns:repeat(3, 1fr);gap:12px;font-size:13px;">
      <div>Cards generated: <span id="mf-stats-count" style="color:var(--accent);font-weight:600;">0</span></div>
      <div>Topic: <span id="mf-stats-topic" style="color:var(--accent);font-weight:600;">-</span></div>
      <div>Difficulty: <span id="mf-stats-diff" style="color:var(--accent);font-weight:600;">-</span></div>
    </div>
  </div>
</div>

<script>
/* maths-flashcards.html
   - Generates random maths flashcards
   - Scoped with mf- prefix (maths flashcards)
   - Multiple difficulty levels and topics
*/

// FLASHCARD GENERATOR FUNCTIONS
class FlashcardGenerator {
  static generateArithmetic(difficulty) {
    const ops = ['+', '-', '√ó', '√∑'];
    let maxNum, decimals;
    
    switch(difficulty) {
      case 'easy': maxNum = 20; decimals = 0; break;
      case 'medium': maxNum = 100; decimals = 0; break;
      case 'hard': maxNum = 500; decimals = Math.random() > 0.7 ? 1 : 0; break;
      case 'advanced': maxNum = 1000; decimals = Math.random() > 0.5 ? 1 : 0; break;
    }
    
    const op = ops[Math.floor(Math.random() * ops.length)];
    let num1 = this.randomNumber(maxNum, decimals);
    let num2 = this.randomNumber(maxNum, decimals);
    
    // Ensure whole numbers for division in easy/medium
    if (op === '√∑' && difficulty !== 'hard' && difficulty !== 'advanced') {
      num1 = num1 * num2; // Make sure it divides evenly
    }
    
    // Make sure subtraction doesn't give negative in easy mode
    if (op === '-' && difficulty === 'easy' && num1 < num2) {
      [num1, num2] = [num2, num1];
    }
    
    const question = `What is ${num1} ${op} ${num2}?`;
    let answer;
    switch(op) {
      case '+': answer = num1 + num2; break;
      case '-': answer = num1 - num2; break;
      case '√ó': answer = num1 * num2; break;
      case '√∑': answer = num1 / num2; break;
    }
    
    const steps = op === '√∑' 
      ? `${num1} √∑ ${num2} = ${answer} (${num2} √ó ${answer} = ${num1})`
      : `${num1} ${op} ${num2} = ${answer}`;
    
    return { question, answer, steps, topic: 'arithmetic' };
  }
  
  static generateAlgebra(difficulty) {
    let question, answer, steps;
    
    switch(difficulty) {
      case 'easy':
        const a = Math.floor(Math.random() * 5) + 1;
        const b = Math.floor(Math.random() * 10) + 1;
        const c = a + b;
        question = `Solve for x: ${a}x + ${b} = ${c}`;
        answer = `x = 1`;
        steps = `${a}x + ${b} = ${c} ‚Üí ${a}x = ${c - b} ‚Üí x = ${(c - b)/a}`;
        break;
        
      case 'medium':
        const coef = Math.floor(Math.random() * 6) + 2;
        const constant = Math.floor(Math.random() * 15) + 5;
        const rhs = coef * 3 + constant; // Ensure integer solution
        question = `Solve: ${coef}x + ${constant} = ${rhs}`;
        answer = `x = 3`;
        steps = `${coef}x + ${constant} = ${rhs} ‚Üí ${coef}x = ${rhs - constant} ‚Üí x = ${(rhs - constant)/coef}`;
        break;
        
      case 'hard':
        const x1 = Math.floor(Math.random() * 5) + 1;
        const x2 = Math.floor(Math.random() * 5) + 1;
        const sum = x1 + x2;
        const prod = x1 * x2;
        question = `Solve: x¬≤ - ${sum}x + ${prod} = 0`;
        answer = `x = ${x1} or x = ${x2}`;
        steps = `Factoring: (x - ${x1})(x - ${x2}) = 0 ‚Üí x = ${x1}, ${x2}`;
        break;
        
      case 'advanced':
        const base = Math.floor(Math.random() * 3) + 2;
        const exp = Math.floor(Math.random() * 3) + 2;
        const value = Math.pow(base, exp);
        question = `Solve for x: ${base}^x = ${value}`;
        answer = `x = ${exp}`;
        steps = `${base}^x = ${value} = ${base}^${exp} ‚Üí x = ${exp}`;
        break;
    }
    
    return { question, answer, steps, topic: 'algebra' };
  }
  
  static generateGeometry(difficulty) {
    const shapes = ['rectangle', 'triangle', 'circle', 'square'];
    const shape = shapes[Math.floor(Math.random() * shapes.length)];
    let question, answer, steps;
    
    switch(difficulty) {
      case 'easy':
        if (shape === 'rectangle') {
          const l = Math.floor(Math.random() * 10) + 2;
          const w = Math.floor(Math.random() * 8) + 2;
          question = `Area of rectangle: length = ${l}, width = ${w}`;
          answer = l * w;
          steps = `Area = length √ó width = ${l} √ó ${w} = ${l * w}`;
        }
        break;
        
      case 'medium':
        if (shape === 'circle') {
          const r = Math.floor(Math.random() * 7) + 2;
          question = `Area of circle with radius ${r}`;
          answer = (Math.PI * r * r).toFixed(2);
          steps = `Area = œÄr¬≤ = 3.14 √ó ${r}¬≤ = ${answer}`;
        }
        break;
        
      case 'hard':
        if (shape === 'triangle') {
          const b = Math.floor(Math.random() * 12) + 4;
          const h = Math.floor(Math.random() * 10) + 3;
          question = `Area of triangle: base = ${b}, height = ${h}`;
          answer = (0.5 * b * h).toFixed(1);
          steps = `Area = ¬Ω √ó base √ó height = 0.5 √ó ${b} √ó ${h} = ${answer}`;
        }
        break;
        
      case 'advanced':
        const a = Math.floor(Math.random() * 8) + 3;
        const b = Math.floor(Math.random() * 8) + 3;
        question = `Find hypotenuse of right triangle with legs ${a} and ${b}`;
        answer = Math.sqrt(a*a + b*b).toFixed(2);
        steps = `c = ‚àö(a¬≤ + b¬≤) = ‚àö(${a}¬≤ + ${b}¬≤) = ‚àö(${a*a} + ${b*b}) = ${answer}`;
        break;
    }
    
    return { question, answer, steps, topic: 'geometry' };
  }
  
  static generateFractions(difficulty) {
    let question, answer, steps;
    
    switch(difficulty) {
      case 'easy':
        const num = Math.floor(Math.random() * 8) + 2;
        const den = num * (Math.floor(Math.random() * 3) + 2);
        question = `Simplify ${den}/${num}`;
        answer = `${den/num}`;
        steps = `Divide numerator and denominator by ${num}: ${den}/${num} = ${den/num}`;
        break;
        
      case 'medium':
        const f1 = `${Math.floor(Math.random() * 3)+2}/${Math.floor(Math.random() * 4)+3}`;
        const f2 = `${Math.floor(Math.random() * 3)+2}/${Math.floor(Math.random() * 4)+3}`;
        question = `Add: ${f1} + ${f2}`;
        // For simplicity, using common denominator
        answer = "Find common denominator";
        steps = `${f1} + ${f2} = ? (Hint: Find LCD)`;
        break;
        
      case 'hard':
        const whole = Math.floor(Math.random() * 3) + 2;
        const frac = `${Math.floor(Math.random() * 2)+1}/${Math.floor(Math.random() * 3)+2}`;
        question = `Convert ${whole} ${frac} to improper fraction`;
        const impNum = whole * parseInt(frac.split('/')[1]) + parseInt(frac.split('/')[0]);
        answer = `${impNum}/${frac.split('/')[1]}`;
        steps = `${whole} √ó ${frac.split('/')[1]} + ${frac.split('/')[0]} = ${impNum} ‚Üí ${answer}`;
        break;
    }
    
    return { question, answer, steps, topic: 'fractions' };
  }
  
  static randomNumber(max, decimals = 0) {
    const num = Math.random() * max;
    return decimals === 0 ? Math.floor(num) + 1 : parseFloat(num.toFixed(decimals)) + 0.1;
  }
  
  static generate(topic, difficulty) {
    const generators = {
      'arithmetic': this.generateArithmetic,
      'algebra': this.generateAlgebra,
      'geometry': this.generateGeometry,
      'fractions': this.generateFractions,
      'percentages': this.generatePercentage,
      'exponents': this.generateExponents,
      'word-problems': this.generateWordProblem,
      'mental-math': this.generateMentalMath,
      'order-ops': this.generateOrderOps
    };
    
    // If topic is 'all', pick random topic
    const actualTopic = topic === 'all' 
      ? Object.keys(generators)[Math.floor(Math.random() * (Object.keys(generators).length - 1))]
      : topic;
    
    const generator = generators[actualTopic];
    return generator ? generator.call(this, difficulty) : this.generateArithmetic(difficulty);
  }
  
  // Additional generator methods would go here...
  static generatePercentage(difficulty) {
    const percent = Math.floor(Math.random() * 50) + 10;
    const number = Math.floor(Math.random() * 200) + 50;
    const question = `What is ${percent}% of ${number}?`;
    const answer = number * percent / 100;
    const steps = `${percent}% √ó ${number} = ${percent/100} √ó ${number} = ${answer}`;
    return { question, answer, steps, topic: 'percentages' };
  }
  
  static generateExponents(difficulty) {
    const base = Math.floor(Math.random() * 5) + 2;
    const exp = Math.floor(Math.random() * 4) + 2;
    const question = `Calculate: ${base}^${exp}`;
    const answer = Math.pow(base, exp);
    const steps = `${base} √ó ${base} `.repeat(exp-1).trim() + ` = ${answer}`;
    return { question, answer, steps, topic: 'exponents' };
  }
}

// MAIN FUNCTIONS
function mfGenerate(btn) {
  const card = btn.closest('.card') || document;
  const topic = card.querySelector('#mf-topic').value;
  const difficulty = card.querySelector('#mf-difficulty').value;
  const count = parseInt(card.querySelector('#mf-count').value);
  const showAnswer = card.querySelector('#mf-show-answer').checked;
  const showSteps = card.querySelector('#mf-show-steps').checked;
  const randomOrder = card.querySelector('#mf-random-order').checked;
  
  const container = card.querySelector('#mf-flashcards-container');
  container.innerHTML = '';
  
  let flashcards = [];
  
  // Generate requested number of flashcards
  for (let i = 0; i < count; i++) {
    const flashcard = FlashcardGenerator.generate(topic, difficulty);
    flashcards.push({
      ...flashcard,
      id: i + 1,
      revealed: showAnswer
    });
  }
  
  // Randomize order if requested
  if (randomOrder) {
    flashcards = flashcards.sort(() => Math.random() - 0.5);
  }
  
  // Display flashcards
  flashcards.forEach((fc, index) => {
    const cardEl = document.createElement('div');
    cardEl.className = 'flashcard';
    cardEl.style.cssText = `
      background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04));
      border: 1px solid rgba(45,212,255,0.15);
      border-radius: 10px;
      padding: 16px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      min-height: 120px;
    `;
    
    cardEl.innerHTML = `
      <div style="position:absolute;top:8px;right:8px;font-size:11px;color:rgba(45,212,255,0.7);">
        #${fc.id} ‚Ä¢ ${fc.topic}
      </div>
      <div style="font-weight:600;color:var(--accent);margin-bottom:12px;font-size:15px;">
        ${fc.question}
      </div>
      <div id="mf-answer-${index}" style="${fc.revealed ? '' : 'display:none;'}margin-top:12px;">
        <div style="color:#39ff14;font-weight:600;margin-bottom:6px;">Answer: ${fc.answer}</div>
        ${showSteps ? `<div style="font-size:13px;color:rgba(230,250,255,0.8);margin-top:4px;">${fc.steps}</div>` : ''}
      </div>
      ${!fc.revealed ? `
        <div style="text-align:center;margin-top:12px;">
          <button onclick="mfRevealAnswer(${index})" 
                  style="padding:8px 16px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:13px;">
            üëÅÔ∏è Reveal Answer
          </button>
        </div>
      ` : ''}
    `;
    
    // Add hover effect
    cardEl.addEventListener('mouseenter', () => {
      cardEl.style.transform = 'translateY(-2px)';
      cardEl.style.boxShadow = '0 6px 12px rgba(0,0,0,0.2)';
      cardEl.style.borderColor = 'rgba(45,212,255,0.3)';
    });
    
    cardEl.addEventListener('mouseleave', () => {
      cardEl.style.transform = '';
      cardEl.style.boxShadow = '';
      cardEl.style.borderColor = 'rgba(45,212,255,0.15)';
    });
    
    container.appendChild(cardEl);
  });
  
  // Update progress
  card.querySelector('#mf-progress').textContent = `${count} card${count !== 1 ? 's' : ''} generated`;
  
  // Update stats
  const statsContainer = card.querySelector('#mf-stats-container');
  statsContainer.style.display = 'block';
  card.querySelector('#mf-stats-count').textContent = count;
  card.querySelector('#mf-stats-topic').textContent = topic;
  card.querySelector('#mf-stats-diff').textContent = difficulty;
  
  // Update hint
  card.querySelector('#mf-hint').textContent = '‚úÖ Flashcard set generated! Click cards to reveal answers.';
  
  // Start timer for study session
  mfStartTimer(card);
}

function mfRevealAnswer(index) {
  const card = document.currentScript?.closest('.card') || document;
  const answerEl = card.querySelector(`#mf-answer-${index}`);
  if (answerEl) {
    answerEl.style.display = 'block';
    // Remove the reveal button
    const revealBtn = answerEl.parentElement.querySelector('button');
    if (revealBtn) revealBtn.remove();
  }
}

function mfStartTimer(card) {
  let seconds = 0;
  const timerEl = card.querySelector('#mf-timer');
  timerEl.textContent = '00:00';
  
  const timer = setInterval(() => {
    seconds++;
    const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
    const secs = (seconds % 60).toString().padStart(2, '0');
    timerEl.textContent = `${mins}:${secs}`;
    
    // Stop if new set is generated
    if (!card.contains(timerEl)) {
      clearInterval(timer);
    }
  }, 1000);
}

function mfReset(btn) {
  const card = btn.closest('.card') || document;
  card.querySelector('#mf-flashcards-container').innerHTML = '';
  card.querySelector('#mf-hint').textContent = '';
  card.querySelector('#mf-timer').textContent = '';
  card.querySelector('#mf-progress').textContent = '';
  card.querySelector('#mf-stats-container').style.display = 'none';
  card.querySelector('#mf-topic').selectedIndex = 0;
  card.querySelector('#mf-difficulty').selectedIndex = 0;
  card.querySelector('#mf-count').selectedIndex = 1;
  card.querySelector('#mf-show-answer').checked = true;
  card.querySelector('#mf-show-steps').checked = true;
  card.querySelector('#mf-random-order').checked = false;
}

function mfCopy(btn) {
  const card = btn.closest('.card') || document;
  const flashcards = card.querySelectorAll('.flashcard');
  if (flashcards.length === 0) return;
  
  let text = 'Maths Flashcards\n\n';
  flashcards.forEach((fc, idx) => {
    const question = fc.querySelector('[style*="font-weight:600;color:var(--accent)"]')?.textContent || '';
    const answer = fc.querySelector('[style*="color:#39ff14"]')?.textContent || '';
    text += `Card ${idx + 1}:\n`;
    text += `Q: ${question}\n`;
    text += `A: ${answer.replace('Answer: ', '')}\n\n`;
  });
  
  navigator.clipboard.writeText(text).then(() => {
    const hint = card.querySelector('#mf-hint');
    hint.textContent = '‚úÖ Flashcard set copied to clipboard!';
    hint.style.color = '#39ff14';
    setTimeout(() => {
      if (hint.textContent === '‚úÖ Flashcard set copied to clipboard!') {
        hint.textContent = '';
      }
    }, 2000);
  }).catch(() => {
    // Fallback
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    try {
      document.execCommand('copy');
      const hint = card.querySelector('#mf-hint');
      hint.textContent = '‚úÖ Copied!';
      setTimeout(() => { hint.textContent = ''; }, 2000);
    } catch (err) {
      alert('Copy failed. Please select and copy manually.');
    }
    document.body.removeChild(textArea);
  });
}

function mfQuickTopic(topic) {
  const card = document.currentScript?.closest('.card') || document;
  card.querySelector('#mf-topic').value = topic;
  
  // Update hint
  const hint = card.querySelector('#mf-hint');
  hint.textContent = `Topic set to: ${topic}. Click "Generate New Set" to create flashcards.`;
  hint.style.color = 'var(--accent)';
  
  // Auto-generate if there are already cards
  const hasCards = card.querySelector('#mf-flashcards-container').children.length > 0;
  if (hasCards) {
    setTimeout(() => mfGenerate(card.querySelector('[onclick="mfGenerate(this)"]')), 300);
  }
}

// Initialize
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    const card = document.currentScript?.closest('.card') || document;
    
    // Generate initial example set
    setTimeout(() => {
      if (card.querySelector('#mf-flashcards-container').children.length === 0) {
        mfGenerate(card.querySelector('[onclick="mfGenerate(this)"]'));
      }
    }, 500);
    
    console.log('Maths Flashcards tool initialized');
  });
}
</script>

<!-- CARD-SPECIFIC STYLES -->
<style>
#maths-flashcards-title {
  color: var(--accent);
  margin-top: 0;
}

/* Flashcard animations */
@keyframes cardAppear {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.flashcard {
  animation: cardAppear 0.4s ease-out;
}

.flashcard:nth-child(odd) {
  animation-delay: 0.1s;
}

.flashcard:nth-child(even) {
  animation-delay: 0.2s;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .row {
    grid-template-columns: 1fr !important;
  }
  
  #mf-flashcards-container {
    grid-template-columns: 1fr !important;
  }
  
  .actions {
    flex-direction: column !important;
  }
  
  .actions button {
    width: 100% !important;
    margin: 4px 0 !important;
  }
  
  #mf-stats-container > div {
    grid-template-columns: 1fr !important;
    gap: 8px !important;
  }
}

/* Dark mode enhancements */
@media (prefers-color-scheme: dark) {
  .flashcard {
    background: rgba(0, 0, 0, 0.2) !important;
  }
  
  #mf-stats-container {
    background: rgba(0, 0, 0, 0.25) !important;
  }
}

/* Print styles for flashcards */
@media print {
  .flashcard {
    break-inside: avoid;
    border: 2px solid #000 !important;
    color: #000 !important;
    background: white !important;
  }
  
  .actions, #mf-hint, #mf-timer, #mf-progress, #mf-stats-container {
    display: none !important;
  }
}
</style>
