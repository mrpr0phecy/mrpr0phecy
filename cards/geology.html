<!-- cards/geology-tools-facts.html -->

<h2 id="geology-tools-facts-title">Geology Tools & Facts</h2>

<form aria-describedby="geology-desc">
  <p id="geology-desc" class="small">Explore geology concepts and discover fascinating facts about Earth's structure and processes.</p>

  <div style="display:grid;grid-template-columns:1fr;gap:12px;margin-bottom:16px;">
    <div>
      <label for="geo-topic" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">Topic</label>
      <select id="geo-topic" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;">
        <option value="rock-cycle" selected>Rock Cycle</option>
        <option value="plate-tectonics">Plate Tectonics</option>
        <option value="earthquakes">Earthquakes</option>
        <option value="volcanoes">Volcanoes</option>
        <option value="minerals">Minerals</option>
        <option value="fossils">Fossils</option>
        <option value="geologic-time">Geologic Time Scale</option>
      </select>
    </div>

    <div>
      <label for="geo-show-facts" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">Show Geology Facts</label>
      <select id="geo-show-facts" 
              style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;">
        <option value="yes" selected>Yes</option>
        <option value="no">No</option>
      </select>
    </div>
  </div>

  <div style="margin-top:20px;display:flex;gap:10px;">
    <button type="button" onclick="geoGenerate(this)" 
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
      Generate Info
    </button>
    <button type="button" onclick="geoReset(this)"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      Reset
    </button>
    <button type="button" onclick="geoCopy(this)"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
      Copy Info
    </button>
  </div>
</form>

<div aria-live="polite" style="margin-top:20px;">
  <h3 class="small" style="color:var(--accent);margin-bottom:8px;">Geology Info & Facts</h3>
  <textarea id="geo-output" rows="8" 
            style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.2);background:rgba(0,0,0,0.2);color:inherit;font-family:monospace;resize:vertical;"></textarea>

  <div id="geo-facts-container" style="margin-top:16px;display:none;">
    <div style="padding:16px;background:rgba(45,212,255,0.05);border-radius:8px;border:1px solid rgba(45,212,255,0.2);">
      <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;">üåç Fascinating Geology Facts:</h4>
      <div style="display:grid;grid-template-columns:1fr;gap:8px;">
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">The Earth is about <b style="color:var(--accent);">4.54 billion years old</b>, and geology helps us uncover that history.</div>
        </div>
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">Mount Everest grows about <b style="color:var(--accent);">4 mm taller each year</b> due to tectonic activity.</div>
        </div>
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">The Grand Canyon reveals nearly <b style="color:var(--accent);">2 billion years of Earth's history</b> in its rock layers.</div>
        </div>
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">Diamonds form deep in the mantle under extreme pressure, then rise via volcanic pipes.</div>
        </div>
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">The Sahara's "Eye of Africa" (Richat Structure) is a 40 km wide geological wonder visible from space.</div>
        </div>
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <div style="color:var(--accent);font-size:14px;margin-top:2px;">‚Ä¢</div>
          <div style="flex:1;">Earthquakes can trigger other faults hundreds of miles away through dynamic stress transfer.</div>
        </div>
      </div>
    </div>
  </div>

  <div style="margin-top:12px;">
    <div id="geo-hint" style="font-size:13px;color:rgba(230,250,255,0.7);min-height:20px;"></div>
  </div>
</div>

<script>
/* geology-tools-facts.html
   - Geology information generator with facts
   - Scoped with geo- prefix (but note: geo is already used by geography-helper)
   - Using 'geot' prefix for geology-tools to avoid conflict
*/

// More detailed geology information
const geologyData = {
  'rock-cycle': {
    title: 'Rock Cycle',
    description: 'The continuous process by which rocks are transformed from one type to another.',
    details: 'Igneous ‚Üí Sedimentary ‚Üí Metamorphic ‚Üí Magma ‚Üí Igneous (repeats)\n\nKey Processes:\n‚Ä¢ Weathering & Erosion\n‚Ä¢ Compaction & Cementation\n‚Ä¢ Melting & Crystallization\n‚Ä¢ Heat & Pressure\n\nTime Scale: Millions of years',
    emoji: 'üîÑ'
  },
  'plate-tectonics': {
    title: 'Plate Tectonics',
    description: 'Earth\'s lithosphere is divided into tectonic plates that move relative to each other.',
    details: 'Plate Boundaries:\n1. Divergent: Plates move apart (mid-ocean ridges)\n2. Convergent: Plates collide (mountains, volcanoes)\n3. Transform: Plates slide past (earthquakes)\n\nSpeed: 1-10 cm/year\nDriving Force: Mantle convection',
    emoji: 'üåã'
  },
  'earthquakes': {
    title: 'Earthquakes',
    description: 'Sudden release of energy in Earth\'s crust that creates seismic waves.',
    details: 'Measurement:\n‚Ä¢ Richter Scale (magnitude)\n‚Ä¢ Mercalli Scale (intensity)\n\nEpicenter: Point on surface above focus\nFocus/Hypocenter: Where rupture begins\n\nNotable:\n‚Ä¢ 1960 Chile: M9.5 (largest recorded)\n‚Ä¢ 2004 Indian Ocean: M9.1-9.3',
    emoji: 'üåä'
  },
  'volcanoes': {
    title: 'Volcanoes',
    description: 'Openings in Earth\'s crust where magma, ash, and gases erupt.',
    details: 'Types:\n‚Ä¢ Shield (Hawaii): Fluid lava, gentle slopes\n‚Ä¢ Composite/Stratovolcano (Fuji): Explosive\n‚Ä¢ Cinder Cone: Small, steep\n‚Ä¢ Caldera: Collapsed, large\n\nEruption Factors:\n‚Ä¢ Magma viscosity\n‚Ä¢ Gas content\n‚Ä¢ Tectonic setting',
    emoji: 'üåã'
  },
  'minerals': {
    title: 'Minerals',
    description: 'Naturally occurring, inorganic solids with definite chemical composition and crystalline structure.',
    details: 'Properties for Identification:\n1. Color\n2. Streak\n3. Hardness (Mohs scale)\n4. Cleavage\n5. Luster\n6. Specific Gravity\n\nCommon Minerals:\n‚Ä¢ Quartz (SiO‚ÇÇ)\n‚Ä¢ Feldspar (most abundant)\n‚Ä¢ Calcite (CaCO‚ÇÉ)\n‚Ä¢ Mica (sheet silicate)',
    emoji: 'üíé'
  },
  'fossils': {
    title: 'Fossils',
    description: 'Preserved remains or traces of ancient organisms.',
    details: 'Types:\n‚Ä¢ Body Fossils: Bones, shells, teeth\n‚Ä¢ Trace Fossils: Footprints, burrows\n‚Ä¢ Mold & Cast\n‚Ä¢ Petrified/Permineralized\n\nFormation Conditions:\n‚Ä¢ Rapid burial\n‚Ä¢ Low oxygen\n‚Ä¢ Hard parts\n‚Ä¢ Stable environment',
    emoji: 'ü¶¥'
  },
  'geologic-time': {
    title: 'Geologic Time Scale',
    description: 'System of chronological dating that relates geological strata to time.',
    details: 'Eons ‚Üí Eras ‚Üí Periods ‚Üí Epochs\n\nMajor Divisions:\n‚Ä¢ Precambrian: 88% of Earth history\n‚Ä¢ Paleozoic: First complex life\n‚Ä¢ Mesozoic: Age of Dinosaurs\n‚Ä¢ Cenozoic: Age of Mammals\n\nDating Methods: Radiometric, Stratigraphy',
    emoji: '‚è≥'
  }
};

// Quick facts database
const quickFacts = [
  "Earth's inner core temperature: ~5,700¬∞C (hotter than the Sun's surface!)",
  "The deepest hole ever drilled: Kola Superdeep Borehole (12,262 m)",
  "Continents move about as fast as fingernails grow (2-5 cm/year)",
  "There are more than 5,000 known minerals, but only about 30 are common",
  "The San Andreas Fault moves about 5 cm per year",
  "Diamonds can form at depths of 150-200 km below Earth's surface",
  "The largest volcano on Earth: Mauna Loa (Hawaii) - 17 km from base to peak",
  "The Ring of Fire contains 75% of Earth's volcanoes",
  "Earth loses about 50,000 tons of mass to space each year",
  "The oldest rocks on Earth: ~4.28 billion years old (Canada)",
  "A magnitude 9.0 earthquake releases energy equal to 32 gigatons of TNT",
  "The magnetic poles reverse every 200,000-300,000 years on average"
];

function geotReset(btn) {
  const card = document.currentScript?.closest('.card') || document;
  card.querySelector('#geo-topic').value = 'rock-cycle';
  card.querySelector('#geo-show-facts').value = 'yes';
  card.querySelector('#geo-output').value = '';
  card.querySelector('#geo-hint').textContent = '';
  card.querySelector('#geo-facts-container').style.display = 'none';
}

function geotCopy(btn) {
  const card = document.currentScript?.closest('.card') || document;
  const output = card.querySelector('#geo-output').value;
  if (!output.trim()) {
    geotShowHint(card, 'No content to copy', '#ff4d4d');
    return;
  }
  
  navigator.clipboard.writeText(output).then(() => {
    geotShowHint(card, '‚úÖ Copied to clipboard!', '#39ff14');
  }).catch(err => {
    console.error('Copy failed:', err);
    geotShowHint(card, 'Copy failed. Try selecting and copying manually.', '#ff4d4d');
  });
}

function geotGenerate(btn) {
  const card = document.currentScript?.closest('.card') || document;
  const topic = card.querySelector('#geo-topic').value;
  const showFacts = card.querySelector('#geo-show-facts').value === 'yes';
  
  const data = geologyData[topic];
  if (!data) {
    geotShowHint(card, 'Topic not found', '#ff4d4d');
    return;
  }
  
  // Build output
  let output = `${data.emoji} ${data.title}\n`;
  output += '='.repeat(data.title.length + 3) + '\n\n';
  output += `${data.description}\n\n`;
  output += `${data.details}\n\n`;
  
  // Add a random quick fact
  const randomFact = quickFacts[Math.floor(Math.random() * quickFacts.length)];
  output += `üí° Quick Fact: ${randomFact}`;
  
  // Set output
  card.querySelector('#geo-output').value = output;
  
  // Show/hide facts container
  card.querySelector('#geo-facts-container').style.display = showFacts ? 'block' : 'none';
  
  // Show hint
  geotShowHint(card, `Generated ${data.title} information`, '#39ff14');
}

function geotShowHint(card, message, color = '#2dd4ff') {
  const hint = card.querySelector('#geo-hint');
  hint.textContent = message;
  hint.style.color = color;
  
  // Clear hint after 3 seconds
  setTimeout(() => {
    if (hint.textContent === message) {
      hint.textContent = '';
    }
  }, 3000);
}

// Auto-generate on topic change
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    const card = document.currentScript?.closest('.card') || document;
    const topicSelect = card.querySelector('#geo-topic');
    const factsSelect = card.querySelector('#geo-show-facts');
    
    // Generate initial content
    setTimeout(() => geotGenerate({closest: () => card}), 100);
    
    // Auto-generate when selections change
    topicSelect.addEventListener('change', () => geotGenerate({closest: () => card}));
    factsSelect.addEventListener('change', () => geotGenerate({closest: () => card}));
    
    console.log('Geology Tools & Facts ready');
  });
} else {
  setTimeout(() => {
    const card = document.currentScript?.closest('.card') || document;
    geotGenerate({closest: () => card});
  }, 100);
}
</script>

<style>
#geology-tools-facts-title {
  color: var(--accent);
  margin-top: 0;
  border-bottom: 1px solid rgba(45,212,255,0.2);
  padding-bottom: 10px;
  margin-bottom: 16px;
}

#geo-output {
  font-family: 'Courier New', Monaco, monospace !important;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
}

#geo-output:focus {
  outline: none;
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px rgba(45,212,255,0.1);
}

@media (max-width: 768px) {
  .actions {
    flex-direction: column !important;
  }
  
  .actions button {
    width: 100% !important;
    margin-bottom: 8px;
  }
}
</style>
