<h2 id="fitnessscore-title" style="margin-top:0;">Fitness Score Calculator</h2>

<form aria-describedby="fitnessscore-desc">
  <p id="fitnessscore-desc" class="small">Estimate your overall fitness score (0–100).</p>

  <div class="row">
    <div class="field">
      <label for="fitnessscore-age">Age (years)</label>
      <input id="fitnessscore-age" type="number" min="1" value="30" />
    </div>
    <div class="field">
      <label for="fitnessscore-resting">Resting heart rate (bpm)</label>
      <input id="fitnessscore-resting" type="number" min="30" value="70" />
    </div>
  </div>

  <div class="row">
    <div class="field">
      <label for="fitnessscore-vo2">VO₂ Max (ml/kg/min)</label>
      <input id="fitnessscore-vo2" type="number" min="0" value="40" />
    </div>
    <div class="field">
      <label for="fitnessscore-activity">Activity level</label>
      <select id="fitnessscore-activity">
        <option value="sedentary" selected>Sedentary</option>
        <option value="moderate">Moderate</option>
        <option value="active">Active</option>
      </select>
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="fitnessscoreCalc(this)">Calculate</button>
    <button type="button" class="secondary" onclick="fitnessscoreReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Fitness score</div>
    <div class="value" id="fitnessscore-res">–</div>
  </div>
</div>

<details class="small" style="margin-top:12px;">
  <summary>How it works</summary>
  <p>
    Score combines:  
    • Lower resting HR → higher score  
    • Higher VO₂ Max → higher score  
    • Younger age → higher score  
    • Activity level adds a multiplier  
    Final score scaled to 0–100.
  </p>
</details>

<script>
function fitnessscoreCalc(btn) {
  const card = btn.closest('.card');
  const age = parseFloat(card.querySelector('#fitnessscore-age').value) || 0;
  const resting = parseFloat(card.querySelector('#fitnessscore-resting').value) || 0;
  const vo2 = parseFloat(card.querySelector('#fitnessscore-vo2').value) || 0;
  const activity = card.querySelector('#fitnessscore-activity').value;

  // Base score from VO2 and resting HR
  let score = (vo2 * 2) - (resting / 2);

  // Age adjustment
  score -= (age - 30) * 0.2;

  // Activity multiplier
  let multiplier = 1.0;
  if (activity === "moderate") multiplier = 1.1;
  if (activity === "active") multiplier = 1.25;

  score *= multiplier;

  // Clamp between 0–100
  score = Math.max(0, Math.min(100, score));

  card.querySelector('#fitnessscore-res').textContent = score.toFixed(0) + " / 100";
}

function fitnessscoreReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#fitnessscore-res').textContent = '–';
}
</script>
