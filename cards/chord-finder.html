<h2 id="chord-finder-title" style="margin-top:0;">Chord Finder (General Advice)</h2>

<form aria-describedby="chord-finder-desc">
  <p id="chord-finder-desc" class="small">
    Identify chords from selected notes. ⚠️ Educational only — always verify with a music teacher or professional resource.
  </p>

  <div class="field" style="margin-bottom:12px;">
    <label for="chord-notes">Enter Notes (comma separated)</label>
    <input id="chord-notes" type="text" placeholder="e.g. C,E,G" style="width:100%;" />
  </div>

  <div class="field" style="margin-bottom:12px;">
    <label for="chord-show-facts">Show Chord Facts</label>
    <select id="chord-show-facts" style="width:100%;">
      <option value="yes" selected>Yes</option>
      <option value="no">No</option>
    </select>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="chordFind(this)">Find Chord</button>
    <button type="button" class="secondary" onclick="chordReset(this)">Reset</button>
    <button type="button" onclick="chordCopy(this)">Copy Result</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Chord Results & Facts</h3>
  <textarea id="chord-output" rows="6" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div id="chord-facts-container" style="margin-top:16px;display:none;">
    <ul style="list-style:disc;padding-left:20px;font-size:0.95rem;line-height:1.5;">
      <li>Major chords use root, major third, and perfect fifth (e.g. C–E–G).</li>
      <li>Minor chords use root, minor third, and perfect fifth (e.g. A–C–E).</li>
      <li>Seventh chords add a minor or major seventh to the triad.</li>
      <li>⚠️ Always confirm chord names with a teacher or professional resource.</li>
    </ul>
  </div>

  <div style="margin-top:8px;">
    <div id="chord-hint" class="small" style="opacity:0.9;"></div>
  </div>
</div>

<script>
/* chord-finder.html
   - Educational chord finder card
   - Scoped with chord- prefix
*/

function chordReset(btn){
  const card=btn.closest('.card')||document;
  card.querySelector('form').reset();
  card.querySelector('#chord-output').value="";
  card.querySelector('#chord-hint').textContent="";
  card.querySelector('#chord-facts-container').style.display="none";
}

function chordCopy(btn){
  const card=btn.closest('.card')||document;
  const out=card.querySelector('#chord-output').value;
  if(!out.trim())return;
  navigator.clipboard?.writeText(out).then(()=>{
    const h=card.querySelector('#chord-hint');
    h.textContent="Copied.";
    setTimeout(()=>{if(h.textContent==="Copied.")h.textContent="";},1600);
  });
}

function chordFind(btn){
  const card=btn.closest('.card')||document;
  const notesStr=card.querySelector('#chord-notes').value.trim();
  const showFacts=card.querySelector('#chord-show-facts').value==="yes";
  let out="";
  if(notesStr){
    const notes=notesStr.split(',').map(n=>n.trim().toUpperCase());
    // Simplified recognition
    if(notes.includes("C") && notes.includes("E") && notes.includes("G")){
      out="Chord identified: C Major (C–E–G).";
    } else if(notes.includes("A") && notes.includes("C") && notes.includes("E")){
      out="Chord identified: A Minor (A–C–E).";
    } else if(notes.includes("D") && notes.includes("F") && notes.includes("A")){
      out="Chord identified: D Minor (D–F–A).";
    } else {
      out="Chord not recognized in this simplified set. ⚠️ Verify with teacher or resource.";
    }
  } else {
    out="Please enter notes separated by commas.";
  }
  card.querySelector('#chord-output').value=out;
  card.querySelector('#chord-hint').textContent="Result generated.";
  card.querySelector('#chord-facts-container').style.display=showFacts?"block":"none";
}
</script>
