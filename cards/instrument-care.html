<h2 id="instrument-care-title" style="margin-top:0;color:var(--accent);text-align:center;position:relative;">
  ğŸ¶ <span style="color:#ffa500">Pro</span> Instrument Care Guide
  <div style="font-size:14px;color:rgba(230,250,255,0.7);font-weight:400;margin-top:4px;">
    Complete care routines for every instrument
  </div>
</h2>

<!-- Instrument Dashboard -->
<div style="background:linear-gradient(135deg, rgba(255,165,0,0.08), rgba(45,212,255,0.05));border-radius:12px;padding:16px;margin-bottom:20px;border:1px solid rgba(255,165,0,0.2);box-shadow:0 4px 20px rgba(0,0,0,0.2);">
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;text-align:center;">
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Recommended Tools</div>
      <div id="care-tools-count" style="font-size:24px;font-weight:700;color:#ffa500;">5</div>
    </div>
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Weekly Tasks</div>
      <div id="care-weekly-tasks" style="font-size:24px;font-weight:700;color:#39ff14;">3</div>
    </div>
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Skill Level</div>
      <div id="care-skill-level" style="font-size:14px;font-weight:700;color:#2dd4ff;padding:4px 8px;background:rgba(45,212,255,0.1);border-radius:6px;border:1px solid rgba(45,212,255,0.3);">
        Beginner
      </div>
    </div>
  </div>
</div>

<form aria-describedby="instrument-care-desc" style="margin-top:16px;">
  <p id="instrument-care-desc" class="small" style="text-align:center;color:rgba(230,250,255,0.9);line-height:1.5;">
    Get <span style="color:#ffa500;font-weight:600">detailed care instructions</span> with maintenance schedules, 
    required tools, and professional tips for your specific instrument.
  </p>

  <!-- INSTRUMENT SELECTION -->
  <div style="background:rgba(255,165,0,0.05);border-radius:10px;padding:16px;margin-bottom:20px;border:1px solid rgba(255,165,0,0.15);">
    <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;display:flex;align-items:center;gap:8px;">
      <span style="font-size:18px">ğŸµ</span> Select Your Instrument
    </h4>
    
    <!-- Instrument Categories -->
    <div style="margin-bottom:16px;">
      <label style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Instrument Category
      </label>
      <div style="display:flex;gap:8px;margin-bottom:12px;">
        <button type="button" onclick="careSetCategory('strings')" id="care-cat-strings" 
                style="flex:1;padding:10px;background:linear-gradient(135deg, rgba(255,165,0,0.2), rgba(255,165,0,0.1));border:2px solid rgba(255,165,0,0.4);border-radius:8px;color:#ffa500;cursor:pointer;font-weight:600;">
          ğŸ¸ Strings
        </button>
        <button type="button" onclick="careSetCategory('woodwinds')" id="care-cat-woodwinds"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸ· Woodwinds
        </button>
        <button type="button" onclick="careSetCategory('brass')" id="care-cat-brass"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸº Brass
        </button>
        <button type="button" onclick="careSetCategory('percussion')" id="care-cat-percussion"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸ¥ Percussion
        </button>
        <button type="button" onclick="careSetCategory('keyboard')" id="care-cat-keyboard"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸ¹ Keyboard
        </button>
      </div>
    </div>
    
    <!-- Specific Instrument Selection -->
    <div>
      <label for="care-instrument" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Specific Instrument
      </label>
      <select id="care-instrument" 
              style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,165,0,0.3);background:rgba(255,165,0,0.05);color:inherit;cursor:pointer;font-size:14px;"
              onchange="careGenerate()">
        <option value="acoustic_guitar" selected>ğŸ¸ Acoustic Guitar</option>
        <option value="electric_guitar">ğŸ¸ Electric Guitar</option>
        <option value="violin">ğŸ» Violin</option>
        <option value="viola">ğŸ» Viola</option>
        <option value="cello">ğŸ» Cello</option>
        <option value="bass_guitar">ğŸ¸ Bass Guitar</option>
        <option value="ukulele">ğŸ¸ Ukulele</option>
      </select>
    </div>
    
    <!-- Experience Level -->
    <div style="margin-top:12px;">
      <label style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Your Experience Level
      </label>
      <div style="display:flex;gap:8px;">
        <button type="button" onclick="careSetExperience('beginner')" id="care-exp-beginner" 
                style="flex:1;padding:10px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:2px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
          ğŸŸ¢ Beginner
        </button>
        <button type="button" onclick="careSetExperience('intermediate')" id="care-exp-intermediate"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸŸ¡ Intermediate
        </button>
        <button type="button" onclick="careSetExperience('advanced')" id="care-exp-advanced"
                style="flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;font-weight:500;">
          ğŸ”´ Advanced
        </button>
      </div>
    </div>
  </div>

  <!-- CARE SCHEDULE -->
  <div style="background:rgba(57,255,20,0.05);border-radius:10px;padding:16px;margin-bottom:20px;border:1px solid rgba(57,255,20,0.15);">
    <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;display:flex;align-items:center;gap:8px;">
      <span style="font-size:18px">ğŸ“…</span> Maintenance Schedule
    </h4>
    
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:16px;">
      <div style="text-align:center;padding:10px;background:rgba(255,165,0,0.08);border-radius:6px;">
        <div style="font-size:10px;color:rgba(230,250,255,0.7);margin-bottom:2px;">After Playing</div>
        <div id="care-after-playing" style="font-size:16px;font-weight:600;color:#ffa500;">2 tasks</div>
      </div>
      <div style="text-align:center;padding:10px;background:rgba(57,255,20,0.08);border-radius:6px;">
        <div style="font-size:10px;color:rgba(230,250,255,0.7);margin-bottom:2px;">Weekly</div>
        <div id="care-weekly" style="font-size:16px;font-weight:600;color:#39ff14;">3 tasks</div>
      </div>
      <div style="text-align:center;padding:10px;background:rgba(45,212,255,0.08);border-radius:6px;">
        <div style="font-size:10px;color:rgba(230,250,255,0.7);margin-bottom:2px;">Monthly</div>
        <div id="care-monthly" style="font-size:16px;font-weight:600;color:var(--accent);">2 tasks</div>
      </div>
      <div style="text-align:center;padding:10px;background:rgba(255,77,77,0.08);border-radius:6px;">
        <div style="font-size:10px;color:rgba(230,250,255,0.7);margin-bottom:2px;">Yearly</div>
        <div id="care-yearly" style="font-size:16px;font-weight:600;color:#ff4d4d;">1 task</div>
      </div>
    </div>
    
    <!-- Temperature/Humidity Warning -->
    <div style="background:rgba(255,77,77,0.05);border-radius:8px;padding:10px;border-left:3px solid #ff4d4d;">
      <div style="display:flex;align-items:center;gap:8px;">
        <span style="color:#ff4d4d;font-size:16px;">âš ï¸</span>
        <div style="font-size:12px;color:rgba(230,250,255,0.9);">
          <span style="color:#ffa500;font-weight:600;">Climate Alert:</span> Maintain 40-60% humidity and 18-24Â°C (65-75Â°F) for wood instruments
        </div>
      </div>
    </div>
  </div>

  <!-- ACTIONS -->
  <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
    <button type="button" onclick="careGenerate()" 
            style="flex:1;padding:14px;background:linear-gradient(135deg, rgba(255,165,0,0.2), rgba(255,165,0,0.1));border:1px solid rgba(255,165,0,0.4);border-radius:10px;color:#ffa500;cursor:pointer;font-weight:600;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px;">
      <span>ğŸ”§</span> Generate Care Guide
    </button>
    <button type="button" onclick="carePrintGuide()"
            style="padding:14px 20px;background:linear-gradient(135deg, rgba(57,255,20,0.2), rgba(57,255,20,0.1));border:1px solid rgba(57,255,20,0.4);border-radius:10px;color:#39ff14;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:6px;">
      ğŸ–¨ï¸ Print
    </button>
    <button type="button" onclick="careShareGuide()"
            style="padding:14px 20px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:10px;color:var(--accent);cursor:pointer;font-weight:600;display:flex;align-items:center;gap:6px;">
      ğŸ“¤ Share
    </button>
  </div>
</form>

<!-- COMPREHENSIVE CARE GUIDE -->
<div class="results" aria-live="polite" style="margin-top:20px;">
  <div style="background:linear-gradient(135deg, rgba(20,20,20,0.8), rgba(10,15,20,0.9));border-radius:12px;padding:20px;border:1px solid rgba(255,165,0,0.2);box-shadow:0 8px 32px rgba(0,0,0,0.3);">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
      <h3 style="color:var(--accent);margin:0;font-size:18px;display:flex;align-items:center;gap:8px;">
        <span>ğŸ“‹</span> Complete Care Guide
      </h3>
      <div style="display:flex;gap:6px;align-items:center;">
        <div style="font-size:12px;color:rgba(230,250,255,0.7);">
          <span id="care-instrument-display">Acoustic Guitar</span>
        </div>
        <div id="care-experience-display" style="font-size:11px;padding:2px 6px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:4px;color:var(--accent);">
          Beginner
        </div>
      </div>
    </div>
    
    <!-- Guide Content -->
    <div id="care-output" 
         style="background:rgba(0,0,0,0.3);border-radius:8px;padding:16px;border:1px solid rgba(255,255,255,0.1);min-height:100px;max-height:600px;overflow-y:auto;font-size:14px;line-height:1.6;">
      <div style="text-align:center;padding:40px;color:rgba(230,250,255,0.5);">
        <div style="font-size:48px;margin-bottom:12px;">ğŸµ</div>
        <div>Select your instrument above and click "Generate Care Guide"</div>
        <div style="font-size:12px;margin-top:6px;">Your personalized care guide will appear here</div>
      </div>
    </div>
    
    <!-- Required Tools -->
    <div id="care-tools-section" style="margin-top:20px;display:none;">
      <h4 style="color:rgba(230,250,255,0.9);margin-bottom:8px;font-size:14px;">ğŸ”§ Required Tools & Supplies</h4>
      <div id="care-tools-content" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:8px;font-size:12px;"></div>
    </div>
    
    <!-- Pro Tips -->
    <div id="care-tips-section" style="margin-top:20px;display:none;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <h4 style="color:rgba(230,250,255,0.9);margin:0;font-size:14px;">ğŸ’¡ Professional Tips</h4>
        <button type="button" onclick="careNewTip()" 
                style="padding:4px 8px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;font-size:11px;">
          New Tip
        </button>
      </div>
      <div id="care-tips-content" style="font-size:13px;color:rgba(230,250,255,0.9);line-height:1.5;padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;border-left:4px solid #ffa500;"></div>
    </div>
  </div>
</div>

<!-- INSTRUMENT DATABASE -->
<details class="small" style="margin-top:20px;background:rgba(20,20,20,0.6);border-radius:10px;border:1px solid rgba(255,255,255,0.1);padding:8px;">
  <summary style="color:var(--accent);font-weight:600;cursor:pointer;padding:8px;font-size:14px;">
    ğŸ“š Instrument Care Database
  </summary>
  <div style="padding:12px 8px 8px;border-top:1px solid rgba(255,255,255,0.1);">
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
      <div>
        <h5 style="color:var(--accent);margin-top:0;margin-bottom:6px;font-size:13px;">Common Issues</h5>
        <ul style="font-size:12px;color:rgba(230,250,255,0.8);padding-left:16px;margin:0;">
          <li><strong>String Instruments:</strong> Fret buzz, action too high/low</li>
          <li><strong>Woodwinds:</strong> Sticky pads, cracked reeds</li>
          <li><strong>Brass:</strong> Stuck valves/slides, dents</li>
          <li><strong>Pianos:</strong> Out of tune, sticky keys</li>
          <li><strong>Drums:</strong> Worn heads, loose hardware</li>
        </ul>
      </div>
      <div>
        <h5 style="color:var(--accent);margin-top:0;margin-bottom:6px;font-size:13px;">Environmental Factors</h5>
        <ul style="font-size:12px;color:rgba(230,250,255,0.8);padding-left:16px;margin:0;">
          <li>Ideal humidity: 40-60% RH</li>
          <li>Temperature: 18-24Â°C (65-75Â°F)</li>
          <li>Avoid direct sunlight</li>
          <li>Keep away from vents/radiators</li>
          <li>Use humidifiers in dry climates</li>
          <li>Use dehumidifiers in humid climates</li>
        </ul>
      </div>
    </div>
    
    <!-- Quick Reference Table -->
    <div style="background:rgba(45,212,255,0.05);border-radius:8px;padding:10px;margin-top:10px;border:1px solid rgba(45,212,255,0.1);">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">â° Maintenance Frequency Guide</div>
      <div style="overflow-x:auto;">
        <table style="width:100%;border-collapse:collapse;font-size:11px;">
          <thead>
            <tr style="background:rgba(255,255,255,0.05);">
              <th style="padding:6px;text-align:left;color:var(--accent);border-bottom:1px solid rgba(255,255,255,0.1);">Task</th>
              <th style="padding:6px;text-align:left;color:var(--accent);border-bottom:1px solid rgba(255,255,255,0.1);">Beginner</th>
              <th style="padding:6px;text-align:left;color:var(--accent);border-bottom:1px solid rgba(255,255,255,0.1);">Intermediate</th>
              <th style="padding:6px;text-align:left;color:var(--accent);border-bottom:1px solid rgba(255,255,255,0.1);">Advanced</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);">Clean after playing</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">âœ… Required</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">âœ… Required</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">âœ… Required</td>
            </tr>
            <tr>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);">Change strings/reeds</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#ffa500;">Every 3-6 months</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">Every 1-3 months</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">Monthly</td>
            </tr>
            <tr>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);">Professional setup</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#ffa500;">Yearly</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#ffa500;">Every 6 months</td>
              <td style="padding:6px;border-bottom:1px solid rgba(255,255,255,0.05);color:#39ff14;">Quarterly</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.6);">
        âš ï¸ Always consult a professional for major repairs
      </div>
      <button type="button" onclick="careSaveGuide()"
              style="padding:6px 12px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:6px;color:#ffa500;cursor:pointer;font-size:11px;">
        ğŸ’¾ Save This Guide
      </button>
    </div>
  </div>
</details>

<!-- MAINTENANCE TRACKER -->
<div style="margin-top:20px;background:rgba(20,20,20,0.6);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.1);">
  <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;text-align:center;font-size:16px;">
    ğŸ“Š Maintenance Tracker
  </h4>
  
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
    <div style="text-align:center;padding:12px;background:rgba(57,255,20,0.08);border-radius:8px;">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Last Maintenance</div>
      <input id="care-last-maintenance" type="date" 
             style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:#39ff14;text-align:center;font-size:14px;" />
    </div>
    <div style="text-align:center;padding:12px;background:rgba(45,212,255,0.08);border-radius:8px;">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Next Due</div>
      <div id="care-next-due" style="font-size:16px;font-weight:600;color:var(--accent);">In 30 days</div>
      <div style="font-size:10px;color:rgba(230,250,255,0.6);margin-top:4px;">Based on schedule</div>
    </div>
  </div>
  
  <div style="text-align:center;">
    <button type="button" onclick="careResetTracker()"
            style="padding:10px 20px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:6px;">
      ğŸ”„ Reset Tracker
    </button>
  </div>
  
  <!-- Tracker Status -->
  <div id="care-tracker-status" style="margin-top:16px;padding:12px;background:rgba(45,212,255,0.05);border-radius:8px;border:1px solid rgba(45,212,255,0.2);display:none;">
    <div style="font-size:13px;color:rgba(230,250,255,0.9);text-align:center;">
      ğŸ“… Maintenance is <span id="care-status-text" style="color:#39ff14;font-weight:600;">up to date</span>. 
      Next check in <span id="care-days-remaining" style="color:var(--accent);font-weight:600;">30 days</span>.
    </div>
  </div>
</div>

<script>
/* instrument-care.html - VIRAL MUSICIAN EDITION
   - Comprehensive instrument care database
   - Maintenance scheduling
   - Professional tips and advice
   - Maintenance tracker
   - Tool recommendations
*/

// Configuration
let careConfig = {
  category: 'strings',
  instrument: 'acoustic_guitar',
  experience: 'beginner',
  lastMaintenance: null,
  nextMaintenance: null
};

// Instrument database
const careInstruments = {
  // String instruments
  'acoustic_guitar': {
    name: 'Acoustic Guitar',
    category: 'strings',
    skillLevel: { beginner: 1, intermediate: 2, advanced: 3 },
    tools: [
      { name: 'Microfiber cloth', purpose: 'Cleaning body and strings', essential: true },
      { name: 'String winder', purpose: 'Changing strings quickly', essential: true },
      { name: 'Capo', purpose: 'Changing keys, not really maintenance', essential: false },
      { name: 'Humidifier', purpose: 'Maintaining proper humidity', essential: true },
      { name: 'Polish', purpose: 'Cleaning finish', essential: false },
      { name: 'Fretboard conditioner', purpose: 'Moisturizing wood', essential: true }
    ],
    afterPlaying: [
      'Wipe down strings with dry cloth to remove oils and moisture',
      'Wipe body and neck with microfiber cloth',
      'Loosen strings slightly if storing for extended period',
      'Store in case with humidifier'
    ],
    weekly: [
      'Check tuning stability',
      'Inspect for any new scratches or dings',
      'Clean fretboard with appropriate conditioner',
      'Check humidity levels in case/storage area'
    ],
    monthly: [
      'Clean and condition fretboard',
      'Polish body (if using polish)',
      'Check action and intonation',
      'Inspect bridge and nut for cracks'
    ],
    yearly: [
      'Professional setup and adjustment',
      'Deep cleaning of entire instrument',
      'Fret inspection and possible dressing',
      'Nut and saddle inspection'
    ],
    tips: [
      'Store guitar in its case when not in use to protect from humidity changes',
      'Use a humidifier in dry climates to prevent cracking',
      'Change strings every 1-3 months depending on play frequency',
      'Avoid leaning guitar against walls or furniture',
      'Clean hands before playing to extend string life'
    ]
  },
  
  'electric_guitar': {
    name: 'Electric Guitar',
    category: 'strings',
    skillLevel: { beginner: 2, intermediate: 3, advanced: 3 },
    tools: [
      { name: 'Microfiber cloth', purpose: 'Cleaning body and strings', essential: true },
      { name: 'String winder', purpose: 'Changing strings', essential: true },
      { name: 'Screwdrivers', purpose: 'Adjusting pickup height', essential: true },
      { name: 'Contact cleaner', purpose: 'Cleaning electronics', essential: true },
      { name: 'Polish', purpose: 'Cleaning finish', essential: false }
    ],
    afterPlaying: [
      'Wipe down strings with dry cloth',
      'Clean body and pickguard',
      'Check battery if active electronics',
      'Store in case or on stand'
    ],
    weekly: [
      'Check tuning stability',
      'Clean control knobs and switches',
      'Inspect cable input',
      'Check pickup height'
    ],
    monthly: [
      'Clean fretboard',
      'Polish body',
      'Check electronics for crackles',
      'Lubricate tuning machines if needed'
    ],
    yearly: [
      'Professional setup',
      'Deep cleaning of electronics',
      'Fret inspection',
      'Nut and bridge inspection'
    ],
    tips: [
      'Use contact cleaner on pots and switches if they become noisy',
      'Keep away from strong magnetic fields',
      'Store with strings slightly detuned to relieve tension',
      'Clean input jack regularly to prevent crackling',
      'Check grounding if experiencing hum issues'
    ]
  },
  
  'violin': {
    name: 'Violin',
    category: 'strings',
    skillLevel: { beginner: 3, intermediate: 3, advanced: 3 },
    tools: [
      { name: 'Soft cloth', purpose: 'Removing rosin dust', essential: true },
      { name: 'Rosin', purpose: 'For bow maintenance', essential: true },
      { name: 'Humidifier', purpose: 'Maintaining humidity', essential: true },
      { name: 'Bow rehair kit', purpose: 'Replacing bow hair', essential: false }
    ],
    afterPlaying: [
      'Remove rosin dust from strings and body',
      'Loosen bow hair',
      'Wipe fingerboard clean',
      'Store in case with humidifier'
    ],
    weekly: [
      'Check bridge alignment',
      'Inspect for open seams',
      'Clean bow stick',
      'Check soundpost position'
    ],
    monthly: [
      'Apply peg compound if pegs slip/stick',
      'Clean entire instrument gently',
      'Check bow hair condition',
      'Inspect tailpiece and fine tuners'
    ],
    yearly: [
      'Professional setup and adjustment',
      'Bow rehair if needed',
      'Soundpost adjustment',
      'Fingerboard planing if needed'
    ],
    tips: [
      'Never touch the bow hair with fingers',
      'Keep violin away from extreme temperatures',
      'Use proper violin polish, not furniture polish',
      'Check bridge is straight after every tuning',
      'Store with silica gel packets in humid climates'
    ]
  },
  
  // Add more instruments as needed...
};

// Professional tips database
const careProTips = [
  "Clean your instrument after every playing session - sweat and oils cause corrosion and damage.",
  "Invest in a good case - it's cheaper than repairing damage from accidents.",
  "Humidity control is more important than temperature for wood instruments.",
  "Learn to change your own strings/reeds - it saves money and helps you understand your instrument.",
  "Never use household cleaners on your instrument - use products designed for musical instruments.",
  "Regular playing is actually good for instruments - it keeps mechanisms moving and wood conditioned.",
  "Keep a maintenance log - note when you change strings, clean, or notice issues.",
  "When traveling, always carry your instrument with you - never check it as luggage.",
  "Different seasons require different care - winter needs humidification, summer needs dehumidification.",
  "A well-maintained instrument sounds better and is easier to play."
];

// Initialize
function careInit() {
  console.log("Instrument Care Guide initialized");
  
  // Load saved guide
  const savedGuide = localStorage.getItem('careGuide');
  if (savedGuide) {
    try {
      const guide = JSON.parse(savedGuide);
      
      // Apply saved values
      if (guide.category) careSetCategory(guide.category);
      if (guide.instrument) {
        document.getElementById('care-instrument').value = guide.instrument;
        careConfig.instrument = guide.instrument;
      }
      if (guide.experience) careSetExperience(guide.experience);
      
      // Load maintenance tracker
      if (guide.lastMaintenance) {
        document.getElementById('care-last-maintenance').value = guide.lastMaintenance;
        careConfig.lastMaintenance = guide.lastMaintenance;
        careUpdateTracker();
      }
      
    } catch (e) {
      console.log("Failed to load guide:", e);
    }
  }
  
  // Set default date for maintenance tracker
  if (!careConfig.lastMaintenance) {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('care-last-maintenance').value = today;
    careConfig.lastMaintenance = today;
    careUpdateTracker();
  }
  
  // Set up event listeners
  document.getElementById('care-last-maintenance').addEventListener('change', function() {
    careConfig.lastMaintenance = this.value;
    careUpdateTracker();
    careSaveGuide();
  });
  
  // Initial generation
  careGenerate();
}

// Set instrument category
function careSetCategory(category) {
  careConfig.category = category;
  
  // Update button styles
  ['strings', 'woodwinds', 'brass', 'percussion', 'keyboard'].forEach(cat => {
    const btn = document.getElementById(`care-cat-${cat}`);
    if (cat === category) {
      btn.style.background = 'linear-gradient(135deg, rgba(255,165,0,0.2), rgba(255,165,0,0.1))';
      btn.style.border = '2px solid rgba(255,165,0,0.4)';
      btn.style.color = '#ffa500';
      btn.style.fontWeight = '600';
    } else {
      btn.style.background = 'rgba(255,255,255,0.05)';
      btn.style.border = '1px solid rgba(255,255,255,0.1)';
      btn.style.color = 'inherit';
      btn.style.fontWeight = '500';
    }
  });
  
  // Update instrument dropdown based on category
  const instrumentSelect = document.getElementById('care-instrument');
  instrumentSelect.innerHTML = '';
  
  let instruments = [];
  switch (category) {
    case 'strings':
      instruments = [
        { value: 'acoustic_guitar', name: 'ğŸ¸ Acoustic Guitar' },
        { value: 'electric_guitar', name: 'ğŸ¸ Electric Guitar' },
        { value: 'violin', name: 'ğŸ» Violin' },
        { value: 'viola', name: 'ğŸ» Viola' },
        { value: 'cello', name: 'ğŸ» Cello' },
        { value: 'bass_guitar', name: 'ğŸ¸ Bass Guitar' },
        { value: 'ukulele', name: 'ğŸ¸ Ukulele' }
      ];
      break;
    case 'woodwinds':
      instruments = [
        { value: 'flute', name: 'ğŸµ Flute' },
        { value: 'clarinet', name: 'ğŸµ Clarinet' },
        { value: 'saxophone', name: 'ğŸ· Saxophone' },
        { value: 'oboe', name: 'ğŸµ Oboe' },
        { value: 'bassoon', name: 'ğŸµ Bassoon' }
      ];
      break;
    case 'brass':
      instruments = [
        { value: 'trumpet', name: 'ğŸº Trumpet' },
        { value: 'trombone', name: 'ğŸº Trombone' },
        { value: 'french_horn', name: 'ğŸº French Horn' },
        { value: 'tuba', name: 'ğŸº Tuba' },
        { value: 'cornet', name: 'ğŸº Cornet' }
      ];
      break;
    case 'percussion':
      instruments = [
        { value: 'drum_kit', name: 'ğŸ¥ Drum Kit' },
        { value: 'snare_drum', name: 'ğŸ¥ Snare Drum' },
        { value: 'cajon', name: 'ğŸ¥ Cajon' },
        { value: 'xylophone', name: 'ğŸµ Xylophone' },
        { value: 'marimba', name: 'ğŸµ Marimba' }
      ];
      break;
    case 'keyboard':
      instruments = [
        { value: 'piano', name: 'ğŸ¹ Piano' },
        { value: 'keyboard', name: 'ğŸ¹ Keyboard' },
        { value: 'organ', name: 'ğŸ¹ Organ' },
        { value: 'synthesizer', name: 'ğŸ¹ Synthesizer' },
        { value: 'accordion', name: 'ğŸ¹ Accordion' }
      ];
      break;
  }
  
  instruments.forEach(instr => {
    const option = document.createElement('option');
    option.value = instr.value;
    option.textContent = instr.name;
    instrumentSelect.appendChild(option);
  });
  
  // Set first instrument as default
  if (instruments.length > 0) {
    instrumentSelect.value = instruments[0].value;
    careConfig.instrument = instruments[0].value;
  }
  
  // Regenerate guide
  careGenerate();
}

// Set experience level
function careSetExperience(level) {
  careConfig.experience = level;
  
  // Update button styles
  ['beginner', 'intermediate', 'advanced'].forEach(lvl => {
    const btn = document.getElementById(`care-exp-${lvl}`);
    if (lvl === level) {
      const color = lvl === 'beginner' ? 'var(--accent)' : lvl === 'intermediate' ? '#ffa500' : '#ff2d55';
      btn.style.background = `linear-gradient(135deg, ${color}20, ${color}10)`;
      btn.style.border = `2px solid ${color}40`;
      btn.style.color = color;
      btn.style.fontWeight = '600';
    } else {
      btn.style.background = 'rgba(255,255,255,0.05)';
      btn.style.border = '1px solid rgba(255,255,255,0.1)';
      btn.style.color = 'inherit';
      btn.style.fontWeight = '500';
    }
  });
  
  // Update display
  document.getElementById('care-experience-display').textContent = level.charAt(0).toUpperCase() + level.slice(1);
  document.getElementById('care-skill-level').textContent = level.charAt(0).toUpperCase() + level.slice(1);
  
  // Regenerate guide
  careGenerate();
}

// Main generation function
function careGenerate() {
  const instrument = document.getElementById('care-instrument').value;
  careConfig.instrument = instrument;
  
  const instrumentData = careInstruments[instrument];
  if (!instrumentData) {
    careShowError("Instrument data not available. Please select a different instrument.");
    return;
  }
  
  // Update dashboard
  document.getElementById('care-tools-count').textContent = instrumentData.tools.filter(t => t.essential).length;
  document.getElementById('care-weekly-tasks').textContent = instrumentData.weekly.length;
  document.getElementById('care-instrument-display').textContent = instrumentData.name;
  
  // Update schedule counts
  document.getElementById('care-after-playing').textContent = instrumentData.afterPlaying.length + ' tasks';
  document.getElementById('care-weekly').textContent = instrumentData.weekly.length + ' tasks';
  document.getElementById('care-monthly').textContent = instrumentData.monthly.length + ' tasks';
  document.getElementById('care-yearly').textContent = instrumentData.yearly.length + ' tasks';
  
  // Generate guide content
  let output = `ğŸµ ${instrumentData.name.toUpperCase()} CARE GUIDE\n`;
  output += 'â•'.repeat(50) + '\n\n';
  
  output += 'ğŸ“‹ QUICK REFERENCE\n';
  output += 'â€¢ Skill Level: ' + (careConfig.experience === 'beginner' ? 'ğŸŸ¢ Beginner' : 
                                careConfig.experience === 'intermediate' ? 'ğŸŸ¡ Intermediate' : 'ğŸ”´ Advanced') + '\n';
  output += 'â€¢ Essential Tools: ' + instrumentData.tools.filter(t => t.essential).length + '\n';
  output += 'â€¢ Weekly Tasks: ' + instrumentData.weekly.length + '\n';
  output += 'â€¢ Yearly Professional Service: Recommended\n\n';
  
  output += 'ğŸ”„ AFTER EVERY PLAYING SESSION\n';
  instrumentData.afterPlaying.forEach(task => {
    output += '  âœ“ ' + task + '\n';
  });
  output += '\n';
  
  output += 'ğŸ“… WEEKLY MAINTENANCE\n';
  instrumentData.weekly.forEach(task => {
    output += '  âœ“ ' + task + '\n';
  });
  output += '\n';
  
  output += 'ğŸ“† MONTHLY MAINTENANCE\n';
  instrumentData.monthly.forEach(task => {
    output += '  âœ“ ' + task + '\n';
  });
  output += '\n';
  
  output += 'ğŸ“Š YEARLY MAINTENANCE\n';
  instrumentData.yearly.forEach(task => {
    output += '  âœ“ ' + task + '\n';
  });
  output += '\n';
  
  output += 'âš ï¸ IMPORTANT WARNINGS\n';
  output += 'â€¢ Always consult a professional for major repairs\n';
  output += 'â€¢ Never use household cleaners on your instrument\n';
  output += 'â€¢ Maintain 40-60% humidity for wood instruments\n';
  output += 'â€¢ Store in case when not in use\n';
  
  // Update output
  document.getElementById('care-output').textContent = output;
  
  // Update tools section
  const toolsSection = document.getElementById('care-tools-section');
  const toolsContent = document.getElementById('care-tools-content');
  
  toolsContent.innerHTML = '';
  instrumentData.tools.forEach(tool => {
    const toolDiv = document.createElement('div');
    toolDiv.style.padding = '8px';
    toolDiv.style.background = 'rgba(255,255,255,0.03)';
    toolDiv.style.borderRadius = '6px';
    toolDiv.style.border = '1px solid rgba(255,255,255,0.1)';
    
    toolDiv.innerHTML = `
      <div style="color:${tool.essential ? '#ffa500' : 'rgba(230,250,255,0.7)'};font-weight:${tool.essential ? '600' : '500'};margin-bottom:4px;">
        ${tool.essential ? 'ğŸ”§ ' : 'âš™ï¸ '}${tool.name}
      </div>
      <div style="font-size:10px;color:rgba(230,250,255,0.6);">
        ${tool.purpose}
      </div>
    `;
    
    toolsContent.appendChild(toolDiv);
  });
  
  toolsSection.style.display = 'block';
  
  // Update tips section
  const tipsSection = document.getElementById('care-tips-section');
  const tipsContent = document.getElementById('care-tips-content');
  
  tipsContent.innerHTML = '';
  tipsContent.innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:8px;">
      <span style="color:#ffa500;flex-shrink:0;font-size:16px;">ğŸ’¡</span>
      <span>${instrumentData.tips[0]}</span>
    </div>
  `;
  
  tipsSection.style.display = 'block';
  
  // Update tracker
  careUpdateTracker();
  
  // Save guide
  careSaveGuide();
}

// Update maintenance tracker
function careUpdateTracker() {
  if (!careConfig.lastMaintenance) return;
  
  const lastDate = new Date(careConfig.lastMaintenance);
  const today = new Date();
  const daysSince = Math.floor((today - lastDate) / (1000 * 60 * 60 * 24));
  
  let nextDue = '';
  let statusText = '';
  let statusColor = '#39ff14';
  
  if (daysSince <= 7) {
    nextDue = 'Soon';
    statusText = 'up to date';
    statusColor = '#39ff14';
  } else if (daysSince <= 30) {
    nextDue = 'In ' + (30 - daysSince) + ' days';
    statusText = 'maintenance due soon';
    statusColor = '#ffa500';
  } else {
    nextDue = 'Overdue!';
    statusText = 'maintenance overdue';
    statusColor = '#ff2d55';
  }
  
  document.getElementById('care-next-due').textContent = nextDue;
  document.getElementById('care-status-text').style.color = statusColor;
  document.getElementById('care-status-text').textContent = statusText;
  document.getElementById('care-days-remaining').textContent = Math.max(0, 30 - daysSince);
  
  const trackerStatus = document.getElementById('care-tracker-status');
  trackerStatus.style.display = 'block';
}

// Reset tracker
function careResetTracker() {
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('care-last-maintenance').value = today;
  careConfig.lastMaintenance = today;
  careUpdateTracker();
  careSaveGuide();
  
  // Visual feedback
  const resetBtn = document.querySelector('[onclick="careResetTracker()"]');
  const originalText = resetBtn.textContent;
  resetBtn.textContent = 'âœ… Reset!';
  resetBtn.style.background = 'rgba(57,255,20,0.2)';
  
  setTimeout(() => {
    resetBtn.textContent = originalText;
    resetBtn.style.background = '';
  }, 1500);
}

// Show new tip
function careNewTip() {
  const tipsContent = document.getElementById('care-tips-content');
  const instrumentData = careInstruments[careConfig.instrument];
  
  if (!instrumentData || !instrumentData.tips) return;
  
  // Get random tip that's not the current one
  let newTip;
  const currentTip = tipsContent.querySelector('span:nth-child(2)').textContent;
  const availableTips = [...instrumentData.tips, ...careProTips];
  
  do {
    newTip = availableTips[Math.floor(Math.random() * availableTips.length)];
  } while (newTip === currentTip && availableTips.length > 1);
  
  tipsContent.innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:8px;">
      <span style="color:#ffa500;flex-shrink:0;font-size:16px;">ğŸ’¡</span>
      <span>${newTip}</span>
    </div>
  `;
  
  // Visual feedback
  tipsContent.style.opacity = '0.5';
  setTimeout(() => {
    tipsContent.style.opacity = '1';
    tipsContent.style.transition = 'opacity 0.3s';
  }, 10);
}

// Print guide
function carePrintGuide() {
  const printContent = document.getElementById('care-output').textContent;
  const instrumentName = document.getElementById('care-instrument-display').textContent;
  
  const printWindow = window.open('', '_blank');
  printWindow.document.write(`
    <html>
      <head>
        <title>${instrumentName} Care Guide</title>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
          h1 { color: #333; border-bottom: 2px solid #333; }
          pre { white-space: pre-wrap; font-family: monospace; }
          .footer { margin-top: 40px; font-size: 12px; color: #666; }
        </style>
      </head>
      <body>
        <h1>${instrumentName} Care Guide</h1>
        <pre>${printContent}</pre>
        <div class="footer">
          Generated by The Most Useful Site in the World - Instrument Care Guide<br>
          Date: ${new Date().toLocaleDateString()}<br>
          âš ï¸ Always consult a professional for major repairs
        </div>
      </body>
    </html>
  `);
  printWindow.document.close();
  printWindow.focus();
  printWindow.print();
}

// Share guide
function careShareGuide() {
  const instrumentName = document.getElementById('care-instrument-display').textContent;
  const experience = careConfig.experience.charAt(0).toUpperCase() + careConfig.experience.slice(1);
  
  const shareText = `ğŸµ I found this amazing ${instrumentName} care guide for ${experience} players! Check out the Instrument Care Guide at The Most Useful Site in the World!`;
  
  // Try Web Share API first
  if (navigator.share) {
    navigator.share({
      title: `${instrumentName} Care Guide`,
      text: shareText,
      url: window.location.href
    }).catch(err => {
      console.log('Share cancelled:', err);
      // Fallback to clipboard
      navigator.clipboard.writeText(shareText).then(() => {
        alert('Guide link copied to clipboard! ğŸ“‹');
      });
    });
  } else {
    // Fallback to clipboard
    navigator.clipboard.writeText(shareText).then(() => {
      alert('Guide link copied to clipboard! ğŸ“‹ Share with fellow musicians!');
    });
  }
}

// Save guide
function careSaveGuide() {
  const guide = {
    category: careConfig.category,
    instrument: careConfig.instrument,
    experience: careConfig.experience,
    lastMaintenance: careConfig.lastMaintenance,
    timestamp: new Date().toISOString()
  };
  
  localStorage.setItem('careGuide', JSON.stringify(guide));
}

// Show error message
function careShowError(message) {
  const outputDiv = document.getElementById('care-output');
  outputDiv.innerHTML = `
    <div style="text-align:center;padding:40px;color:#ff2d55;">
      <div style="font-size:48px;margin-bottom:12px;">âš ï¸</div>
      <div>${message}</div>
      <div style="font-size:12px;margin-top:12px;">Try selecting a different instrument</div>
    </div>
  `;
  
  // Hide other sections
  document.getElementById('care-tools-section').style.display = 'none';
  document.getElementById('care-tips-section').style.display = 'none';
}

// Copy tips (legacy function)
function careCopy(btn) {
  const output = document.getElementById('care-output').textContent;
  if (!output.trim() || output.includes('Select your instrument')) {
    return;
  }
  
  navigator.clipboard.writeText(output).then(() => {
    // Visual feedback
    const copyBtn = document.querySelector('[onclick="careCopy(this)"]');
    const originalText = copyBtn.textContent;
    copyBtn.textContent = 'âœ… Copied!';
    copyBtn.style.background = 'rgba(57,255,20,0.2)';
    
    setTimeout(() => {
      copyBtn.textContent = originalText;
      copyBtn.style.background = '';
    }, 1500);
  });
}

// Reset (legacy function)
function careReset(btn) {
  if (confirm("Reset all selections to defaults?")) {
    careSetCategory('strings');
    document.getElementById('care-instrument').value = 'acoustic_guitar';
    careSetExperience('beginner');
    careResetTracker();
    
    const outputDiv = document.getElementById('care-output');
    outputDiv.innerHTML = `
      <div style="text-align:center;padding:40px;color:rgba(230,250,255,0.5);">
        <div style="font-size:48px;margin-bottom:12px;">ğŸµ</div>
        <div>Select your instrument above and click "Generate Care Guide"</div>
        <div style="font-size:12px;margin-top:6px;">Your personalized care guide will appear here</div>
      </div>
    `;
    
    document.getElementById('care-tools-section').style.display = 'none';
    document.getElementById('care-tips-section').style.display = 'none';
    document.getElementById('care-tracker-status').style.display = 'none';
    
    careGenerate();
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', careInit);
} else {
  careInit();
}
</script>

<style>
@keyframes instrumentGlow {
  0% { box-shadow: 0 0 5px rgba(255,165,0,0.3); }
  50% { box-shadow: 0 0 20px rgba(255,165,0,0.5); }
  100% { box-shadow: 0 0 5px rgba(255,165,0,0.3); }
}

#instrument-care-title {
  position: relative;
  overflow: hidden;
}

#instrument-care-title::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 25%;
  width: 50%;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--accent), transparent);
  border-radius: 2px;
}

/* Instrument category buttons glow */
#care-cat-strings, #care-cat-woodwinds, #care-cat-brass, #care-cat-percussion, #care-cat-keyboard {
  transition: all 0.3s ease;
}

#care-cat-strings:hover, #care-cat-woodwinds:hover, #care-cat-brass:hover, #care-cat-percussion:hover, #care-cat-keyboard:hover {
  animation: instrumentGlow 2s infinite;
}

/* Button hover effects */
button {
  transition: all 0.2s ease;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

/* Input focus effects */
input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px rgba(45,212,255,0.2);
}

/* Custom scrollbar for guide */
#care-output::-webkit-scrollbar {
  width: 6px;
}

#care-output::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 3px;
}

#care-output::-webkit-scrollbar-thumb {
  background: rgba(255,165,0,0.3);
  border-radius: 3px;
}

#care-output::-webkit-scrollbar-thumb:hover {
  background: rgba(255,165,0,0.5);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .category-buttons {
    flex-direction: column;
  }
  
  .category-buttons button {
    width: 100%;
    margin-bottom: 8px;
  }
  
  .experience-buttons {
    flex-direction: column;
  }
  
  .experience-buttons button {
    width: 100%;
    margin-bottom: 8px;
  }
  
  .actions {
    flex-direction: column;
  }
  
  .actions button {
    width: 100%;
    margin: 4px 0 !important;
  }
  
  .schedule-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  .tools-grid {
    grid-template-columns: 1fr !important;
  }
  
  /* Adjust guide output for mobile */
  #care-output {
    font-size: 12px !important;
    padding: 12px !important;
  }
}

/* Print styles */
@media print {
  .actions, button, details, #care-tools-section, #care-tips-section, #care-tracker-status {
    display: none !important;
  }
  
  #care-output {
    background: white !important;
    color: black !important;
    border: 1px solid #ccc !important;
    max-height: none !important;
    font-family: monospace !important;
  }
}
</style>
