<h2 id="inflation-title" style="margin-top:0;color:var(--accent);text-align:center;position:relative;">
  ðŸ“‰ <span style="color:#2dd4ff">Smart</span> Inflation Impact Calculator
  <div style="font-size:14px;color:rgba(230,250,255,0.7);font-weight:400;margin-top:4px;">
    See how inflation erodes your money's purchasing power
  </div>
</h2>

<!-- Financial Dashboard -->
<div style="background:linear-gradient(135deg, rgba(45,212,255,0.08), rgba(255,77,77,0.05));border-radius:12px;padding:16px;margin-bottom:20px;border:1px solid rgba(45,212,255,0.2);box-shadow:0 4px 20px rgba(0,0,0,0.2);">
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;text-align:center;">
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Purchasing Power Loss</div>
      <div id="infl-ppl-value" style="font-size:24px;font-weight:700;color:#ff2d55;">26%</div>
    </div>
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Effective Annual Return Needed</div>
      <div id="infl-earn-needed" style="font-size:18px;font-weight:700;color:#ffcc00;">4.12%</div>
    </div>
    <div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:8px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Years to Halve Value</div>
      <div id="infl-half-years" style="font-size:18px;font-weight:700;color:#39ff14;">23.4 yrs</div>
    </div>
  </div>
</div>

<form aria-describedby="inflation-desc" style="margin-top:16px;">
  <p id="inflation-desc" class="small" style="text-align:center;color:rgba(230,250,255,0.9);line-height:1.5;">
    Calculate <span style="color:var(--accent);font-weight:600">real-world purchasing power</span> with historical data, 
    multiple currencies, and personalized financial scenarios.
  </p>

  <!-- FINANCIAL INPUT SECTION -->
  <div style="background:rgba(45,212,255,0.05);border-radius:10px;padding:16px;margin-bottom:20px;border:1px solid rgba(45,212,255,0.15);">
    <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;display:flex;align-items:center;gap:8px;">
      <span style="font-size:18px">ðŸ’°</span> Your Financial Scenario
    </h4>
    
    <!-- Amount & Currency -->
    <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
      <!-- Amount -->
      <div>
        <label for="inflation-amount" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
          Amount
        </label>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="inflation-amount" type="number" min="0" step="100" value="10000" 
                 style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;text-align:center;font-size:16px;" />
          <select id="infl-currency" 
                  style="padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;cursor:pointer;min-width:80px;">
            <option value="GBP">Â£ GBP</option>
            <option value="USD">$ USD</option>
            <option value="EUR">â‚¬ EUR</option>
            <option value="JPY">Â¥ JPY</option>
            <option value="CAD">$ CAD</option>
            <option value="AUD">$ AUD</option>
          </select>
        </div>
        <div style="display:flex;gap:4px;margin-top:6px;">
          <button type="button" onclick="inflSetAmount(1000)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">Â£1k</button>
          <button type="button" onclick="inflSetAmount(10000)" style="flex:1;padding:4px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:4px;color:var(--accent);cursor:pointer;font-size:11px;">Â£10k</button>
          <button type="button" onclick="inflSetAmount(50000)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">Â£50k</button>
          <button type="button" onclick="inflSetAmount(100000)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">Â£100k</button>
        </div>
      </div>
      
      <!-- Inflation Rate -->
      <div>
        <label for="inflation-rate" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
          Annual Inflation Rate
        </label>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="inflation-rate" type="number" min="0" max="100" step="0.1" value="3" 
                 style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;text-align:center;" />
          <div style="font-size:12px;color:rgba(230,250,255,0.8);white-space:nowrap;">% per year</div>
        </div>
        <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:4px;text-align:center;">
          Historical rates: 
          <button type="button" onclick="inflSetRate(2)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">2%</button> â€¢ 
          <button type="button" onclick="inflSetRate(3)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">3%</button> â€¢ 
          <button type="button" onclick="inflSetRate(5)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">5%</button> â€¢ 
          <button type="button" onclick="inflSetRate(10)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">10%</button>
        </div>
      </div>
    </div>
    
    <!-- Time Period & Investment Return -->
    <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;">
      <!-- Years -->
      <div>
        <label for="inflation-years" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
          Time Period
        </label>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="inflation-years" type="number" min="1" max="100" value="10" 
                 style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;text-align:center;" />
          <div style="font-size:12px;color:rgba(230,250,255,0.8);white-space:nowrap;">years</div>
        </div>
        <div style="display:flex;gap:4px;margin-top:6px;">
          <button type="button" onclick="inflSetYears(5)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">5 yrs</button>
          <button type="button" onclick="inflSetYears(10)" style="flex:1;padding:4px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:4px;color:var(--accent);cursor:pointer;font-size:11px;">10 yrs</button>
          <button type="button" onclick="inflSetYears(20)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">20 yrs</button>
          <button type="button" onclick="inflSetYears(30)" style="flex:1;padding:4px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:4px;color:inherit;cursor:pointer;font-size:11px;">30 yrs</button>
        </div>
      </div>
      
      <!-- Investment Return -->
      <div>
        <label for="infl-investment-return" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
          Annual Investment Return (Optional)
        </label>
        <div style="display:flex;align-items:center;gap:8px;">
          <input id="infl-investment-return" type="number" min="0" max="100" step="0.1" value="5" 
                 style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(45,212,255,0.05);color:inherit;text-align:center;" />
          <div style="font-size:12px;color:rgba(230,250,255,0.8);white-space:nowrap;">% per year</div>
        </div>
        <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:4px;text-align:center;">
          Typical: 
          <button type="button" onclick="inflSetReturn(2)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">Savings 2%</button> â€¢ 
          <button type="button" onclick="inflSetReturn(5)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">Bonds 5%</button> â€¢ 
          <button type="button" onclick="inflSetReturn(8)" style="background:transparent;border:none;color:var(--accent);cursor:pointer;font-size:11px;">Stocks 8%</button>
        </div>
      </div>
    </div>
    
    <!-- Scenario Presets -->
    <div style="margin-top:16px;">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:6px;">Quick Scenarios:</div>
      <div style="display:flex;gap:6px;flex-wrap:wrap;">
        <button type="button" onclick="inflLoadScenario('retirement')" 
                style="padding:6px 10px;background:rgba(255,165,0,0.1);border:1px solid rgba(255,165,0,0.3);border-radius:6px;color:#ffa500;cursor:pointer;font-size:11px;white-space:nowrap;">
          ðŸ‘µ Retirement Savings
        </button>
        <button type="button" onclick="inflLoadScenario('emergency')" 
                style="padding:6px 10px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:11px;white-space:nowrap;">
          ðŸš¨ Emergency Fund
        </button>
        <button type="button" onclick="inflLoadScenario('education')" 
                style="padding:6px 10px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:11px;white-space:nowrap;">
          ðŸŽ“ College Fund
        </button>
        <button type="button" onclick="inflLoadScenario('hyperinflation')" 
                style="padding:6px 10px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:6px;color:#ff4d4d;cursor:pointer;font-size:11px;white-space:nowrap;">
          ðŸ“ˆ High Inflation
        </button>
      </div>
    </div>
  </div>

  <!-- ACTIONS -->
  <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
    <button type="button" onclick="inflationCalc()" 
            style="flex:1;padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:10px;color:var(--accent);cursor:pointer;font-weight:600;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px;">
      <span>ðŸ“‰</span> Calculate Inflation Impact
    </button>
    <button type="button" onclick="inflShareResults()"
            style="padding:14px 20px;background:linear-gradient(135deg, rgba(57,255,20,0.2), rgba(57,255,20,0.1));border:1px solid rgba(57,255,20,0.4);border-radius:10px;color:#39ff14;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:6px;">
      ðŸ“¤ Share
    </button>
  </div>
</form>

<!-- COMPREHENSIVE RESULTS -->
<div class="results" aria-live="polite" style="margin-top:20px;">
  <div style="background:linear-gradient(135deg, rgba(20,20,20,0.8), rgba(10,15,20,0.9));border-radius:12px;padding:20px;border:1px solid rgba(45,212,255,0.2);box-shadow:0 8px 32px rgba(0,0,0,0.3);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:16px;text-align:center;font-size:18px;">
      ðŸ“Š Inflation Impact Analysis
    </h3>
    
    <!-- Results Grid -->
    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:20px;">
      <!-- Purchasing Power -->
      <div style="text-align:center;padding:16px;background:rgba(255,77,77,0.08);border-radius:10px;border:1px solid rgba(255,77,77,0.2);">
        <div style="font-size:13px;color:rgba(230,250,255,0.7);margin-bottom:6px;">Future Purchasing Power</div>
        <div id="inflation-res" style="font-size:28px;font-weight:700;color:#ff2d55;margin-bottom:4px;">Â£7,441</div>
        <div style="font-size:11px;color:rgba(230,250,255,0.6);">
          Equivalent to today's money
        </div>
      </div>
      
      <!-- Value Loss -->
      <div style="text-align:center;padding:16px;background:rgba(255,165,0,0.08);border-radius:10px;border:1px solid rgba(255,165,0,0.2);">
        <div style="font-size:13px;color:rgba(230,250,255,0.7);margin-bottom:6px;">Total Value Erosion</div>
        <div id="inflation-loss" style="font-size:24px;font-weight:700;color:#ffa500;margin-bottom:4px;">Â£2,559</div>
        <div style="font-size:11px;color:rgba(230,250,255,0.6);">
          <span id="infl-loss-percent">25.6%</span> of original value lost
        </div>
      </div>
    </div>
    
    <!-- Investment Comparison -->
    <div style="margin-bottom:20px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <h4 style="color:rgba(230,250,255,0.9);margin:0;font-size:14px;">ðŸ“ˆ With Investment Growth</h4>
        <div style="font-size:12px;color:rgba(230,250,255,0.7);">
          Net effect after <span id="infl-invest-rate-display">5%</span> annual return
        </div>
      </div>
      
      <div style="display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:center;margin-bottom:12px;">
        <!-- Without Investment -->
        <div style="text-align:center;padding:12px;background:rgba(255,77,77,0.05);border-radius:8px;">
          <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Just Inflation</div>
          <div id="infl-without-investment" style="font-size:18px;font-weight:600;color:#ff2d55;">Â£7,441</div>
          <div style="font-size:10px;color:rgba(230,250,255,0.6);">Real value after inflation</div>
        </div>
        
        <!-- VS -->
        <div style="text-align:center;color:rgba(230,250,255,0.5);font-size:20px;">â†’</div>
        
        <!-- With Investment -->
        <div style="text-align:center;padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;">
          <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Inflation + Investment</div>
          <div id="infl-with-investment" style="font-size:18px;font-weight:600;color:#39ff14;">Â£12,763</div>
          <div style="font-size:10px;color:rgba(230,250,255,0.6);">Real value with growth</div>
        </div>
      </div>
      
      <!-- Net Gain/Loss -->
      <div style="text-align:center;padding:10px;background:rgba(45,212,255,0.08);border-radius:8px;border:1px solid rgba(45,212,255,0.2);">
        <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Net Real Gain from Investing</div>
        <div id="infl-net-gain" style="font-size:20px;font-weight:600;color:var(--accent);">+Â£5,322</div>
        <div style="font-size:10px;color:rgba(230,250,255,0.6);">Difference investment makes</div>
      </div>
    </div>
    
    <!-- Year-by-Year Breakdown -->
    <div style="margin-bottom:20px;">
      <h4 style="color:rgba(230,250,255,0.9);margin-bottom:8px;font-size:14px;">ðŸ“… Year-by-Year Purchasing Power</h4>
      <div style="height:200px;position:relative;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(255,255,255,0.1);padding:12px;">
        <canvas id="infl-chart" style="width:100%;height:100%;"></canvas>
        <div id="infl-no-chart" style="position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;color:rgba(230,250,255,0.5);">
          Enter values to see chart
        </div>
      </div>
    </div>
    
    <!-- Key Insights -->
    <div style="margin-top:20px;padding-top:16px;border-top:1px solid rgba(255,255,255,0.1);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <h4 style="color:rgba(230,250,255,0.9);margin:0;font-size:14px;">ðŸ’¡ Key Financial Insights</h4>
        <button type="button" onclick="inflNewInsight()" 
                style="padding:4px 8px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:6px;color:inherit;cursor:pointer;font-size:11px;">
          New Insight
        </button>
      </div>
      <div id="infl-insight" style="font-size:13px;color:rgba(230,250,255,0.9);line-height:1.5;padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;border-left:4px solid var(--accent);">
        <div style="display:flex;align-items:flex-start;gap:8px;">
          <span style="color:#39ff14;flex-shrink:0;font-size:16px;">ðŸ“Š</span>
          <span>With 3% inflation, your money loses half its purchasing power in about 24 years. To maintain purchasing power, you need investments that beat inflation by at least 1-2% annually.</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- HISTORICAL DATA -->
<details class="small" style="margin-top:20px;background:rgba(20,20,20,0.6);border-radius:10px;border:1px solid rgba(255,255,255,0.1);padding:8px;">
  <summary style="color:var(--accent);font-weight:600;cursor:pointer;padding:8px;font-size:14px;">
    ðŸ“š Historical Inflation Data & Analysis
  </summary>
  <div style="padding:12px 8px 8px;border-top:1px solid rgba(255,255,255,0.1);">
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
      <div>
        <h5 style="color:var(--accent);margin-top:0;margin-bottom:6px;font-size:13px;">Recent Inflation Rates</h5>
        <ul style="font-size:12px;color:rgba(230,250,255,0.8);padding-left:16px;margin:0;">
          <li>United States (2023): 3.4%</li>
          <li>United Kingdom (2023): 4.0%</li>
          <li>Eurozone (2023): 2.9%</li>
          <li>Japan (2023): 3.3%</li>
          <li>Canada (2023): 3.8%</li>
          <li>Australia (2023): 5.4%</li>
        </ul>
      </div>
      <div>
        <h5 style="color:var(--accent);margin-top:0;margin-bottom:6px;font-size:13px;">Historical Averages</h5>
        <ul style="font-size:12px;color:rgba(230,250,255,0.8);padding-left:16px;margin:0;">
          <li>Long-term average: 2-3%</li>
          <li>1970s high inflation: 7-14%</li>
          <li>1980s peak: 13.5% (US, 1980)</li>
          <li>Hyperinflation: 50%+ monthly</li>
          <li>Deflation periods: -1 to -2%</li>
          <li>Target rates: 2% (central banks)</li>
        </ul>
      </div>
    </div>
    
    <!-- Historical Examples -->
    <div style="background:rgba(45,212,255,0.05);border-radius:8px;padding:10px;margin-top:10px;border:1px solid rgba(45,212,255,0.1);">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">ðŸ“ˆ Real-World Impact Examples</div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;font-size:11px;">
        <div style="padding:6px;background:rgba(255,255,255,0.03);border-radius:4px;">
          <div style="color:var(--accent);font-weight:500;">Coffee Price</div>
          <div style="color:rgba(230,250,255,0.8);">2000: $1.50 â†’ 2023: $4.50 (+200%)</div>
        </div>
        <div style="padding:6px;background:rgba(255,255,255,0.03);border-radius:4px;">
          <div style="color:#ffa500;font-weight:500;">College Tuition</div>
          <div style="color:rgba(230,250,255,0.8);">1980: $9,438 â†’ 2020: $35,720 (+278%)</div>
        </div>
        <div style="padding:6px;background:rgba(255,255,255,0.03);border-radius:4px;">
          <div style="color:#ff2d55;font-weight:500;">Median Home</div>
          <div style="color:rgba(230,250,255,0.8);">1970: $23,000 â†’ 2023: $416,000 (+1,708%)</div>
        </div>
      </div>
    </div>
    
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;">
      <div style="font-size:11px;color:rgba(230,250,255,0.6);">
        Data: World Bank, IMF, Bureau of Labor Statistics
      </div>
      <button type="button" onclick="inflSaveScenario()"
              style="padding:6px 12px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:11px;">
        ðŸ’¾ Save This Scenario
      </button>
    </div>
  </div>
</details>

<!-- RETIREMENT PLANNING -->
<div style="margin-top:20px;background:rgba(20,20,20,0.6);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.1);">
  <h4 style="color:var(--accent);margin-top:0;margin-bottom:12px;text-align:center;font-size:16px;">
    ðŸ‘µ Retirement Planning Calculator
  </h4>
  
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
    <div style="text-align:center;padding:12px;background:rgba(57,255,20,0.08);border-radius:8px;">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Monthly Income Needed (Today)</div>
      <input id="infl-retirement-income" type="number" min="0" step="100" value="3000" 
             style="width:100%;padding:8px;border-radius:6px;border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);color:#39ff14;text-align:center;font-size:16px;font-weight:600;" />
    </div>
    <div style="text-align:center;padding:12px;background:rgba(45,212,255,0.08);border-radius:8px;">
      <div style="font-size:12px;color:rgba(230,250,255,0.7);margin-bottom:4px;">Years Until Retirement</div>
      <div id="infl-years-to-retire" style="font-size:16px;font-weight:600;color:var(--accent);">25 years</div>
      <div style="font-size:10px;color:rgba(230,250,255,0.6);margin-top:4px;">Based on current age</div>
    </div>
  </div>
  
  <div style="text-align:center;">
    <button type="button" onclick="inflCalculateRetirement()"
            style="padding:10px 20px;background:linear-gradient(135deg, rgba(255,165,0,0.2), rgba(255,165,0,0.1));border:1px solid rgba(255,165,0,0.4);border-radius:8px;color:#ffa500;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:6px;">
      ðŸŽ¯ Calculate Retirement Needs
    </button>
  </div>
  
  <!-- Retirement Result -->
  <div id="infl-retirement-result" style="margin-top:16px;padding:12px;background:rgba(255,165,0,0.05);border-radius:8px;border:1px solid rgba(255,165,0,0.2);display:none;">
    <div style="font-size:13px;color:rgba(230,250,255,0.9);text-align:center;">
      You'll need <span id="infl-future-income" style="color:#ffa500;font-weight:600;">Â£6,281</span> monthly in 
      <span id="infl-retirement-year" style="color:var(--accent);font-weight:600;">2048</span> to have today's purchasing power of 
      <span id="infl-current-income" style="color:#39ff14;font-weight:600;">Â£3,000</span>.
    </div>
  </div>
</div>

<script>
/* inflation-calculator.html - VIRAL FINANCIAL EDITION
   - Comprehensive inflation calculator
   - Historical data integration
   - Investment comparison
   - Retirement planning
   - Interactive visualizations
*/

// Configuration
let inflConfig = {
  currency: 'GBP',
  currencySymbols: {
    'GBP': 'Â£',
    'USD': '$',
    'EUR': 'â‚¬',
    'JPY': 'Â¥',
    'CAD': '$',
    'AUD': '$'
  },
  chart: null,
  lastCalculation: null
};

// Historical inflation data (simplified)
const inflHistoricalData = {
  'GBP': { name: 'British Pound', avg: 2.1, recent: 4.0, decadeAvg: 2.4 },
  'USD': { name: 'US Dollar', avg: 2.3, recent: 3.4, decadeAvg: 2.1 },
  'EUR': { name: 'Euro', avg: 1.9, recent: 2.9, decadeAvg: 1.7 },
  'JPY': { name: 'Japanese Yen', avg: 0.3, recent: 3.3, decadeAvg: 0.5 },
  'CAD': { name: 'Canadian Dollar', avg: 1.9, recent: 3.8, decadeAvg: 1.8 },
  'AUD': { name: 'Australian Dollar', avg: 2.5, recent: 5.4, decadeAvg: 2.3 }
};

// Financial insights database
const inflInsights = [
  "Inflation compounds like interest - small annual rates cause large losses over decades.",
  "At 3% inflation, Â£100 today will be worth only Â£55 in 20 years in purchasing power.",
  "To maintain purchasing power, your investments must earn more than inflation.",
  "Hyperinflation (50%+ monthly) can wipe out savings completely in months.",
  "Deflation (negative inflation) increases purchasing power but can cause economic stagnation.",
  "The 'Rule of 72' estimates years to halve value: 72 Ã· inflation rate = years.",
  "Central banks typically target 2% inflation to encourage spending and investment.",
  "Real return = nominal return - inflation rate. A 5% return with 3% inflation = 2% real return.",
  "Inflation hits fixed-income earners hardest - their buying power declines each year.",
  "Investing in assets like stocks, real estate, or commodities can hedge against inflation."
];

// Initialize
function inflInit() {
  console.log("Inflation Calculator initialized");
  
  // Load saved scenario
  const savedScenario = localStorage.getItem('inflScenario');
  if (savedScenario) {
    try {
      const scenario = JSON.parse(savedScenario);
      
      // Apply saved values
      document.getElementById('inflation-amount').value = scenario.amount || 10000;
      document.getElementById('inflation-rate').value = scenario.rate || 3;
      document.getElementById('inflation-years').value = scenario.years || 10;
      document.getElementById('infl-investment-return').value = scenario.investment || 5;
      document.getElementById('infl-retirement-income').value = scenario.retirementIncome || 3000;
      
      if (scenario.currency) {
        document.getElementById('infl-currency').value = scenario.currency;
        inflConfig.currency = scenario.currency;
      }
      
    } catch (e) {
      console.log("Failed to load scenario:", e);
    }
  }
  
  // Set up event listeners for real-time calculation
  document.querySelectorAll('#inflation-amount, #inflation-rate, #inflation-years, #infl-investment-return, #infl-currency, #infl-retirement-income').forEach(input => {
    input.addEventListener('input', function() {
      setTimeout(inflationCalc, 500);
    });
  });
  
  // Initialize chart
  inflInitChart();
  
  // Initial calculation
  inflationCalc();
}

// Set amount quickly
function inflSetAmount(amount) {
  document.getElementById('inflation-amount').value = amount;
  inflationCalc();
}

// Set rate quickly
function inflSetRate(rate) {
  document.getElementById('inflation-rate').value = rate;
  inflationCalc();
}

// Set years quickly
function inflSetYears(years) {
  document.getElementById('inflation-years').value = years;
  inflationCalc();
}

// Set investment return
function inflSetReturn(returnRate) {
  document.getElementById('infl-investment-return').value = returnRate;
  inflationCalc();
}

// Load predefined scenario
function inflLoadScenario(scenario) {
  switch (scenario) {
    case 'retirement':
      inflSetAmount(250000);
      inflSetRate(3);
      inflSetYears(25);
      inflSetReturn(6);
      document.getElementById('infl-retirement-income').value = 4000;
      break;
      
    case 'emergency':
      inflSetAmount(15000);
      inflSetRate(3);
      inflSetYears(5);
      inflSetReturn(2);
      break;
      
    case 'education':
      inflSetAmount(50000);
      inflSetRate(4);
      inflSetYears(18);
      inflSetReturn(5);
      break;
      
    case 'hyperinflation':
      inflSetAmount(10000);
      inflSetRate(15);
      inflSetYears(10);
      inflSetReturn(0);
      break;
  }
  
  inflationCalc();
}

// Main calculation function
function inflationCalc() {
  // Get input values
  const amount = parseFloat(document.getElementById('inflation-amount').value) || 0;
  const rate = parseFloat(document.getElementById('inflation-rate').value) / 100 || 0;
  const years = parseFloat(document.getElementById('inflation-years').value) || 0;
  const investmentRate = parseFloat(document.getElementById('infl-investment-return').value) / 100 || 0;
  const currency = document.getElementById('infl-currency').value;
  const symbol = inflConfig.currencySymbols[currency] || 'Â£';
  
  // Update config
  inflConfig.currency = currency;
  
  // Check for valid inputs
  if (amount <= 0 || years <= 0) {
    inflShowError("Please enter valid positive values for amount and years.");
    return;
  }
  
  // Calculate future purchasing power
  const futureValue = amount / Math.pow(1 + rate, years);
  const loss = amount - futureValue;
  const lossPercent = (loss / amount) * 100;
  
  // Calculate with investment
  const futureWithInvestment = amount * Math.pow(1 + investmentRate, years);
  const realValueWithInvestment = futureWithInvestment / Math.pow(1 + rate, years);
  const netGain = realValueWithInvestment - futureValue;
  
  // Calculate rule of 72 (years to halve value)
  const yearsToHalve = rate > 0 ? 72 / (rate * 100) : Infinity;
  
  // Calculate effective annual return needed to maintain value
  const effectiveReturnNeeded = rate * 100; // Simple approximation
  
  // Update dashboard
  document.getElementById('infl-ppl-value').textContent = lossPercent.toFixed(1) + '%';
  document.getElementById('infl-earn-needed').textContent = effectiveReturnNeeded.toFixed(2) + '%';
  document.getElementById('infl-half-years').textContent = yearsToHalve.toFixed(1) + ' yrs';
  
  // Update main results
  document.getElementById('inflation-res').textContent = symbol + futureValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('inflation-loss').textContent = symbol + loss.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('infl-loss-percent').textContent = lossPercent.toFixed(1) + '%';
  
  // Update investment comparison
  document.getElementById('infl-without-investment').textContent = symbol + futureValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('infl-with-investment').textContent = symbol + realValueWithInvestment.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('infl-net-gain').textContent = symbol + netGain.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('infl-invest-rate-display').textContent = (investmentRate * 100).toFixed(1) + '%';
  
  // Generate year-by-year data for chart
  inflUpdateChart(amount, rate, years, investmentRate, symbol);
  
  // Update retirement calculation
  inflUpdateRetirement();
  
  // Generate financial insight
  inflGenerateInsight(rate, years, lossPercent);
  
  // Save calculation
  inflConfig.lastCalculation = {
    amount: amount,
    rate: rate,
    years: years,
    futureValue: futureValue,
    loss: loss,
    timestamp: new Date().toISOString()
  };
}

// Initialize chart
function inflInitChart() {
  const canvas = document.getElementById('infl-chart');
  if (!canvas) return;
  
  const noChart = document.getElementById('infl-no-chart');
  if (noChart) noChart.style.display = 'flex';
  
  // We'll use Chart.js if available, otherwise simple canvas drawing
  if (typeof Chart !== 'undefined') {
    // Chart.js implementation
    const ctx = canvas.getContext('2d');
    inflConfig.chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [],
        datasets: [
          {
            label: 'Purchasing Power',
            data: [],
            borderColor: '#ff2d55',
            backgroundColor: 'rgba(255, 45, 85, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.3
          },
          {
            label: 'With Investment',
            data: [],
            borderColor: '#39ff14',
            backgroundColor: 'rgba(57, 255, 20, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.3,
            hidden: true
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            labels: {
              color: 'rgba(230,250,255,0.8)',
              font: {
                size: 11
              }
            }
          },
          tooltip: {
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(20,20,20,0.9)',
            titleColor: 'rgba(230,250,255,0.9)',
            bodyColor: 'rgba(230,250,255,0.9)',
            borderColor: 'rgba(45,212,255,0.3)',
            borderWidth: 1
          }
        },
        scales: {
          x: {
            grid: {
              color: 'rgba(255,255,255,0.05)'
            },
            ticks: {
              color: 'rgba(230,250,255,0.7)'
            }
          },
          y: {
            grid: {
              color: 'rgba(255,255,255,0.05)'
            },
            ticks: {
              color: 'rgba(230,250,255,0.7)',
              callback: function(value) {
                return inflConfig.currencySymbols[inflConfig.currency] + value.toLocaleString();
              }
            }
          }
        }
      }
    });
  }
}

// Update chart with data
function inflUpdateChart(amount, rate, years, investmentRate, symbol) {
  const canvas = document.getElementById('infl-chart');
  const noChart = document.getElementById('infl-no-chart');
  
  if (!canvas || !noChart) return;
  
  // Hide "no chart" message
  noChart.style.display = 'none';
  
  if (typeof Chart !== 'undefined' && inflConfig.chart) {
    // Update Chart.js chart
    const labels = [];
    const purchasingPowerData = [];
    const investmentData = [];
    
    for (let year = 0; year <= years; year++) {
      labels.push(`Year ${year}`);
      purchasingPowerData.push(amount / Math.pow(1 + rate, year));
      investmentData.push((amount * Math.pow(1 + investmentRate, year)) / Math.pow(1 + rate, year));
    }
    
    inflConfig.chart.data.labels = labels;
    inflConfig.chart.data.datasets[0].data = purchasingPowerData;
    inflConfig.chart.data.datasets[1].data = investmentData;
    inflConfig.chart.update();
    
  } else {
    // Simple canvas drawing as fallback
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    const padding = 40;
    
    // Clear canvas
    ctx.clearRect(0, 0, width, height);
    
    // Generate data
    const data = [];
    for (let year = 0; year <= years; year++) {
      data.push(amount / Math.pow(1 + rate, year));
    }
    
    // Find min and max
    const max = Math.max(...data);
    const min = Math.min(...data);
    const range = max - min;
    
    // Draw grid
    ctx.strokeStyle = 'rgba(255,255,255,0.1)';
    ctx.lineWidth = 1;
    
    // Vertical grid lines
    const xStep = (width - padding * 2) / years;
    for (let i = 0; i <= years; i++) {
      const x = padding + i * xStep;
      ctx.beginPath();
      ctx.moveTo(x, padding);
      ctx.lineTo(x, height - padding);
      ctx.stroke();
    }
    
    // Horizontal grid lines
    const yStep = (height - padding * 2) / 5;
    for (let i = 0; i <= 5; i++) {
      const y = padding + i * yStep;
      ctx.beginPath();
      ctx.moveTo(padding, y);
      ctx.lineTo(width - padding, y);
      ctx.stroke();
    }
    
    // Draw data line
    ctx.strokeStyle = '#ff2d55';
    ctx.lineWidth = 2;
    ctx.beginPath();
    
    for (let i = 0; i < data.length; i++) {
      const x = padding + i * xStep;
      const y = height - padding - ((data[i] - min) / range) * (height - padding * 2);
      
      if (i === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
      }
    }
    
    ctx.stroke();
    
    // Draw points
    ctx.fillStyle = '#ff2d55';
    for (let i = 0; i < data.length; i += Math.max(1, Math.floor(years / 5))) {
      const x = padding + i * xStep;
      const y = height - padding - ((data[i] - min) / range) * (height - padding * 2);
      ctx.beginPath();
      ctx.arc(x, y, 4, 0, Math.PI * 2);
      ctx.fill();
    }
    
    // Draw labels
    ctx.fillStyle = 'rgba(230,250,255,0.7)';
    ctx.font = '10px monospace';
    ctx.textAlign = 'center';
    
    // X-axis labels
    for (let i = 0; i <= years; i += Math.max(1, Math.floor(years / 5))) {
      const x = padding + i * xStep;
      ctx.fillText(`Y${i}`, x, height - padding + 15);
    }
    
    // Y-axis labels
    ctx.textAlign = 'right';
    for (let i = 0; i <= 5; i++) {
      const y = padding + i * yStep;
      const value = max - (i / 5) * range;
      ctx.fillText(symbol + value.toFixed(0), padding - 5, y + 3);
    }
    
    // Chart title
    ctx.textAlign = 'center';
    ctx.fillStyle = 'rgba(230,250,255,0.9)';
    ctx.font = '12px monospace';
    ctx.fillText('Purchasing Power Over Time', width / 2, 15);
  }
}

// Update retirement calculation
function inflUpdateRetirement() {
  const currentIncome = parseFloat(document.getElementById('infl-retirement-income').value) || 0;
  const rate = parseFloat(document.getElementById('inflation-rate').value) / 100 || 0;
  const years = parseFloat(document.getElementById('inflation-years').value) || 0;
  const symbol = inflConfig.currencySymbols[inflConfig.currency] || 'Â£';
  
  if (currentIncome <= 0) return;
  
  const futureIncomeNeeded = currentIncome * Math.pow(1 + rate, years);
  const currentYear = new Date().getFullYear();
  const retirementYear = currentYear + years;
  
  document.getElementById('infl-years-to-retire').textContent = years + ' years';
  document.getElementById('infl-current-income').textContent = symbol + currentIncome.toLocaleString();
  document.getElementById('infl-future-income').textContent = symbol + futureIncomeNeeded.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
  document.getElementById('infl-retirement-year').textContent = retirementYear;
  
  // Show result
  document.getElementById('infl-retirement-result').style.display = 'block';
}

// Calculate retirement needs
function inflCalculateRetirement() {
  inflationCalc(); // Update with current values
}

// Generate financial insight
function inflGenerateInsight(rate, years, lossPercent) {
  const insightElement = document.getElementById('infl-insight');
  if (!insightElement) return;
  
  let insight;
  
  if (rate <= 0.01) {
    insight = "With low or zero inflation, your money maintains most of its purchasing power. However, deflation can discourage spending and investment.";
  } else if (rate <= 0.03) {
    insight = `At ${(rate*100).toFixed(1)}% inflation, money loses about ${lossPercent.toFixed(1)}% of its purchasing power in ${years} years. This is near typical central bank targets.`;
  } else if (rate <= 0.06) {
    insight = `Moderate inflation of ${(rate*100).toFixed(1)}% significantly erodes purchasing power. You need investments earning at least ${(rate*100 + 1).toFixed(1)}% just to maintain value.`;
  } else if (rate <= 0.15) {
    insight = `High inflation of ${(rate*100).toFixed(1)}% can destroy savings quickly. Your money halves in value every ${(72/(rate*100)).toFixed(1)} years (Rule of 72).`;
  } else {
    insight = `Extreme inflation of ${(rate*100).toFixed(1)}% represents a serious threat to savings. Consider inflation-protected assets and investments.`;
  }
  
  insightElement.querySelector('span:nth-child(2)').textContent = insight;
}

// Show new insight
function inflNewInsight() {
  const insightElement = document.getElementById('infl-insight');
  
  // Get random insight that's not the current one
  let newInsight;
  const currentInsight = insightElement.querySelector('span:nth-child(2)').textContent;
  do {
    newInsight = inflInsights[Math.floor(Math.random() * inflInsights.length)];
  } while (newInsight === currentInsight && inflInsights.length > 1);
  
  insightElement.querySelector('span:nth-child(2)').textContent = newInsight;
  
  // Visual feedback
  insightElement.style.opacity = '0.5';
  setTimeout(() => {
    insightElement.style.opacity = '1';
    insightElement.style.transition = 'opacity 0.3s';
  }, 10);
}

// Share results
function inflShareResults() {
  const futureValue = document.getElementById('inflation-res').textContent;
  const loss = document.getElementById('inflation-loss').textContent;
  const years = document.getElementById('inflation-years').value;
  const rate = document.getElementById('inflation-rate').value;
  
  const shareText = `ðŸ“‰ With ${rate}% inflation, ${futureValue} in ${years} years will have today's purchasing power (${loss} lost to inflation). Calculate your inflation impact at The Most Useful Site in the World!`;
  
  // Try Web Share API first
  if (navigator.share) {
    navigator.share({
      title: 'My Inflation Impact',
      text: shareText,
      url: window.location.href
    }).catch(err => {
      console.log('Share cancelled:', err);
      // Fallback to clipboard
      navigator.clipboard.writeText(shareText).then(() => {
        alert('Results copied to clipboard! ðŸ“‹');
      });
    });
  } else {
    // Fallback to clipboard
    navigator.clipboard.writeText(shareText).then(() => {
      alert('Results copied to clipboard! ðŸ“‹ Share this financial insight!');
    });
  }
}

// Save scenario
function inflSaveScenario() {
  const scenario = {
    amount: parseFloat(document.getElementById('inflation-amount').value) || 0,
    rate: parseFloat(document.getElementById('inflation-rate').value) || 0,
    years: parseFloat(document.getElementById('inflation-years').value) || 0,
    investment: parseFloat(document.getElementById('infl-investment-return').value) || 0,
    retirementIncome: parseFloat(document.getElementById('infl-retirement-income').value) || 0,
    currency: inflConfig.currency,
    timestamp: new Date().toISOString()
  };
  
  localStorage.setItem('inflScenario', JSON.stringify(scenario));
  
  // Visual feedback
  const saveBtn = document.querySelector('[onclick="inflSaveScenario()"]');
  const originalText = saveBtn.textContent;
  saveBtn.textContent = 'âœ… Saved!';
  saveBtn.style.background = 'rgba(57,255,20,0.2)';
  
  setTimeout(() => {
    saveBtn.textContent = originalText;
    saveBtn.style.background = '';
  }, 1500);
}

// Show error message
function inflShowError(message) {
  // Update dashboard with zeros
  document.getElementById('infl-ppl-value').textContent = '0%';
  document.getElementById('infl-earn-needed').textContent = '0%';
  document.getElementById('infl-half-years').textContent = 'âˆž yrs';
  
  // Update main results
  const symbol = inflConfig.currencySymbols[inflConfig.currency] || 'Â£';
  document.getElementById('inflation-res').textContent = symbol + '0';
  document.getElementById('inflation-loss').textContent = symbol + '0';
  
  // Show chart placeholder
  const noChart = document.getElementById('infl-no-chart');
  if (noChart) noChart.style.display = 'flex';
}

// Reset form
function inflationReset(btn) {
  if (confirm("Reset all values to defaults?")) {
    document.querySelector('form').reset();
    document.getElementById('infl-currency').value = 'GBP';
    document.getElementById('infl-retirement-result').style.display = 'none';
    
    // Reset chart
    const noChart = document.getElementById('infl-no-chart');
    if (noChart) noChart.style.display = 'flex';
    
    inflationCalc();
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', inflInit);
} else {
  inflInit();
}
</script>

<style>
@keyframes valueShrink {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

#inflation-title {
  position: relative;
  overflow: hidden;
}

#inflation-title::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 25%;
  width: 50%;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--accent), transparent);
  border-radius: 2px;
}

/* Value loss animation */
#inflation-loss {
  animation: valueShrink 2s ease-in-out;
}

/* Button hover effects */
button {
  transition: all 0.2s ease;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

/* Input focus effects */
input:focus, select:focus {
  outline: none;
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px rgba(45,212,255,0.2);
}

/* Chart container styling */
#infl-chart {
  transition: opacity 0.3s ease;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .row {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  .actions {
    flex-direction: column;
  }
  
  .actions button {
    width: 100%;
    margin: 4px 0 !important;
  }
  
  .results-grid {
    grid-template-columns: 1fr !important;
  }
  
  .investment-comparison {
    grid-template-columns: 1fr !important;
  }
  
  .historical-grid {
    grid-template-columns: 1fr !important;
  }
  
  /* Adjust chart for mobile */
  #infl-chart {
    height: 150px !important;
  }
}

/* Print styles for saving reports */
@media print {
  .actions, button, details {
    display: none !important;
  }
  
  .results {
    break-inside: avoid;
  }
}
</style>
