<h2 id="onerepmax-title" style="margin-top:0;color:var(--accent);">üèãÔ∏è One‚ÄëRep Max Calculator</h2>

<form aria-describedby="onerepmax-desc" style="margin-bottom:20px;">
  <p id="onerepmax-desc" class="small" style="color:rgba(230,250,255,0.8);margin-bottom:16px;">
    Estimate your maximum lifting capacity across multiple formulas. Perfect for strength training and programming.
  </p>

  <!-- INPUT SECTION -->
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
    <div>
      <label for="onerepmax-weight" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Weight Lifted
      </label>
      <div style="position:relative;">
        <input id="onerepmax-weight" type="number" min="1" step="0.5" value="100" 
               style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;padding-right:40px;" />
        <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);color:rgba(230,250,255,0.6);">kg</span>
      </div>
    </div>
    
    <div>
      <label for="onerepmax-reps" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
        Repetitions
      </label>
      <input id="onerepmax-reps" type="number" min="1" max="30" value="8" 
             style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.05);color:inherit;" />
    </div>
  </div>

  <!-- QUICK WEIGHT PRESETS -->
  <div style="margin-bottom:16px;">
    <div style="color:rgba(230,250,255,0.8);margin-bottom:6px;font-size:13px;">Quick Weight Presets:</div>
    <div style="display:flex;gap:6px;flex-wrap:wrap;">
      <button type="button" onclick="ormSetWeight(60)" class="weight-preset">60 kg</button>
      <button type="button" onclick="ormSetWeight(80)" class="weight-preset">80 kg</button>
      <button type="button" onclick="ormSetWeight(100)" class="weight-preset">100 kg</button>
      <button type="button" onclick="ormSetWeight(120)" class="weight-preset">120 kg</button>
      <button type="button" onclick="ormSetWeight(140)" class="weight-preset">140 kg</button>
    </div>
  </div>

  <!-- QUICK REPS PRESETS -->
  <div style="margin-bottom:20px;">
    <div style="color:rgba(230,250,255,0.8);margin-bottom:6px;font-size:13px;">Quick Reps Presets:</div>
    <div style="display:flex;gap:6px;flex-wrap:wrap;">
      <button type="button" onclick="ormSetReps(3)" class="reps-preset">3 reps</button>
      <button type="button" onclick="ormSetReps(5)" class="reps-preset">5 reps</button>
      <button type="button" onclick="ormSetReps(8)" class="reps-preset">8 reps</button>
      <button type="button" onclick="ormSetReps(10)" class="reps-preset">10 reps</button>
      <button type="button" onclick="ormSetReps(12)" class="reps-preset">12 reps</button>
    </div>
  </div>

  <!-- ACTIONS -->
  <div class="actions" style="display:flex;gap:10px;margin-top:20px;">
    <button type="button" onclick="ormCalculate()" 
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
      üí™ Calculate 1RM
    </button>
    <button type="button" onclick="ormReset()"
            style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
      üîÑ Reset
    </button>
  </div>
</form>

<!-- RESULTS SECTION -->
<div class="results" aria-live="polite" style="margin-top:20px;">
  <h3 class="small" style="color:var(--accent);margin-bottom:12px;">üìä Estimated 1RM Results</h3>
  
  <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:12px;margin-bottom:20px;">
    <div style="background:rgba(45,212,255,0.08);border:1px solid rgba(45,212,255,0.2);border-radius:8px;padding:12px;">
      <div style="color:var(--accent);font-size:13px;margin-bottom:4px;font-weight:500;">Epley Formula</div>
      <div id="orm-epley" style="font-size:24px;font-weight:600;color:#fff;">‚Äì</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">Most Common</div>
    </div>
    
    <div style="background:rgba(57,255,20,0.08);border:1px solid rgba(57,255,20,0.2);border-radius:8px;padding:12px;">
      <div style="color:#39ff14;font-size:13px;margin-bottom:4px;font-weight:500;">Brzycki</div>
      <div id="orm-brzycki" style="font-size:24px;font-weight:600;color:#fff;">‚Äì</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">Conservative</div>
    </div>
    
    <div style="background:rgba(255,204,0,0.08);border:1px solid rgba(255,204,0,0.2);border-radius:8px;padding:12px;">
      <div style="color:#ffcc00;font-size:13px;margin-bottom:4px;font-weight:500;">Lombardi</div>
      <div id="orm-lombardi" style="font-size:24px;font-weight:600;color:#fff;">‚Äì</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">Powerlifters</div>
    </div>
  </div>
  
  <!-- RECOMMENDED WEIGHTS -->
  <div style="background:rgba(20,20,20,0.5);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:16px;margin-bottom:16px;">
    <div style="color:var(--accent);font-weight:500;margin-bottom:10px;font-size:14px;">üèÜ Recommended Training Weights (Based on Epley):</div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));gap:10px;">
      <div>
        <div style="color:rgba(230,250,255,0.7);font-size:12px;">For 3 reps</div>
        <div id="orm-weight-3" style="font-weight:600;color:#fff;">‚Äì kg</div>
      </div>
      <div>
        <div style="color:rgba(230,250,255,0.7);font-size:12px;">For 5 reps</div>
        <div id="orm-weight-5" style="font-weight:600;color:#fff;">‚Äì kg</div>
      </div>
      <div>
        <div style="color:rgba(230,250,255,0.7);font-size:12px;">For 8 reps</div>
        <div id="orm-weight-8" style="font-weight:600;color:#fff;">‚Äì kg</div>
      </div>
      <div>
        <div style="color:rgba(230,250,255,0.7);font-size:12px;">For 10 reps</div>
        <div id="orm-weight-10" style="font-weight:600;color:#fff;">‚Äì kg</div>
      </div>
    </div>
  </div>
</div>

<!-- FORMULAS EXPLANATION -->
<details class="small" style="margin-top:16px;border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:8px;">
  <summary style="color:var(--accent);font-weight:500;cursor:pointer;padding:6px;">üìö How it works & Formulas</summary>
  <div style="padding:12px 8px 4px 8px;color:rgba(230,250,255,0.8);">
    <p style="margin-bottom:10px;">Different formulas for different athletes and training styles:</p>
    
    <div style="background:rgba(45,212,255,0.05);border-left:3px solid var(--accent);padding:8px 10px;margin-bottom:8px;border-radius:4px;">
      <div style="color:var(--accent);font-weight:500;font-size:13px;">Epley Formula</div>
      <div style="font-family:monospace;font-size:12px;color:rgba(230,250,255,0.7);">1RM = Weight √ó (1 + Reps √∑ 30)</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">Most widely used, good for general training</div>
    </div>
    
    <div style="background:rgba(57,255,20,0.05);border-left:3px solid #39ff14;padding:8px 10px;margin-bottom:8px;border-radius:4px;">
      <div style="color:#39ff14;font-weight:500;font-size:13px;">Brzycki Formula</div>
      <div style="font-family:monospace;font-size:12px;color:rgba(230,250,255,0.7);">1RM = Weight √∑ (1.0278 ‚àí 0.0278 √ó Reps)</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">More conservative estimate, safer for beginners</div>
    </div>
    
    <div style="background:rgba(255,204,0,0.05);border-left:3px solid #ffcc00;padding:8px 10px;margin-bottom:8px;border-radius:4px;">
      <div style="color:#ffcc00;font-weight:500;font-size:13px;">Lombardi Formula</div>
      <div style="font-family:monospace;font-size:12px;color:rgba(230,250,255,0.7);">1RM = Weight √ó Reps^0.1</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">For powerlifters, higher volume work</div>
    </div>
    
    <div style="background:rgba(157,78,221,0.05);border-left:3px solid #9d4edd;padding:8px 10px;border-radius:4px;">
      <div style="color:#9d4edd;font-weight:500;font-size:13px;">O'Conner Formula</div>
      <div style="font-family:monospace;font-size:12px;color:rgba(230,250,255,0.7);">1RM = Weight √ó (1 + 0.025 √ó Reps)</div>
      <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:2px;">Simple linear model, easy to remember</div>
    </div>
  </div>
</details>

<script>
/* onerepmax-calculator.html
   - Enhanced 1RM calculator with multiple formulas
   - Scoped with orm- prefix
*/

function ormSetWeight(weight) {
  const card = document.currentScript?.closest('.card') || document;
  const weightInput = card.querySelector('#onerepmax-weight');
  weightInput.value = weight;
  ormCalculate();
}

function ormSetReps(reps) {
  const card = document.currentScript?.closest('.card') || document;
  const repsInput = card.querySelector('#onerepmax-reps');
  repsInput.value = reps;
  ormCalculate();
}

function ormCalculate() {
  const card = document.currentScript?.closest('.card') || document;
  const weight = parseFloat(card.querySelector('#onerepmax-weight').value) || 0;
  const reps = parseInt(card.querySelector('#onerepmax-reps').value, 10) || 1;
  
  if (weight <= 0 || reps <= 0) {
    card.querySelector('#orm-epley').textContent = '‚Äì';
    card.querySelector('#orm-brzycki').textContent = '‚Äì';
    card.querySelector('#orm-lombardi').textContent = '‚Äì';
    return;
  }
  
  // Calculate using different formulas
  const epley = weight * (1 + reps / 30);
  const brzycki = weight / (1.0278 - 0.0278 * reps);
  const lombardi = weight * Math.pow(reps, 0.1);
  const oconner = weight * (1 + 0.025 * reps);
  
  // Display results
  card.querySelector('#orm-epley').textContent = epley.toFixed(1) + ' kg';
  card.querySelector('#orm-brzycki').textContent = brzycki.toFixed(1) + ' kg';
  card.querySelector('#orm-lombardi').textContent = lombardi.toFixed(1) + ' kg';
  
  // Calculate recommended training weights (using Epley formula backwards)
  const oneRM = epley; // Use Epley as baseline for recommendations
  
  card.querySelector('#orm-weight-3').textContent = (oneRM / (1 + 3/30)).toFixed(1) + ' kg';
  card.querySelector('#orm-weight-5').textContent = (oneRM / (1 + 5/30)).toFixed(1) + ' kg';
  card.querySelector('#orm-weight-8').textContent = (oneRM / (1 + 8/30)).toFixed(1) + ' kg';
  card.querySelector('#orm-weight-10').textContent = (oneRM / (1 + 10/30)).toFixed(1) + ' kg';
  
  // Update strength level indicator
  updateStrengthLevel(oneRM);
}

function ormReset() {
  const card = document.currentScript?.closest('.card') || document;
  card.querySelector('#onerepmax-weight').value = '100';
  card.querySelector('#onerepmax-reps').value = '8';
  
  // Reset all results
  card.querySelector('#orm-epley').textContent = '‚Äì';
  card.querySelector('#orm-brzycki').textContent = '‚Äì';
  card.querySelector('#orm-lombardi').textContent = '‚Äì';
  
  card.querySelector('#orm-weight-3').textContent = '‚Äì kg';
  card.querySelector('#orm-weight-5').textContent = '‚Äì kg';
  card.querySelector('#orm-weight-8').textContent = '‚Äì kg';
  card.querySelector('#orm-weight-10').textContent = '‚Äì kg';
}

function updateStrengthLevel(oneRM) {
  const card = document.currentScript?.closest('.card') || document;
  const strengthLevel = card.querySelector('.strength-level');
  
  // Remove existing strength level indicator
  if (strengthLevel) {
    strengthLevel.remove();
  }
  
  let level = '';
  let color = '';
  let emoji = '';
  
  if (oneRM < 60) {
    level = 'Beginner'; color = '#2dd4ff'; emoji = 'üí™';
  } else if (oneRM < 100) {
    level = 'Intermediate'; color = '#39ff14'; emoji = 'üî•';
  } else if (oneRM < 140) {
    level = 'Advanced'; color = '#ffcc00'; emoji = '‚ö°';
  } else if (oneRM < 180) {
    level = 'Elite'; color = '#ff2d55'; emoji = 'üèÜ';
  } else {
    level = 'Superhuman'; color = '#9d4edd'; emoji = 'üëë';
  }
  
  // Add strength level indicator
  const resultsDiv = card.querySelector('.results');
  const levelDiv = document.createElement('div');
  levelDiv.className = 'strength-level';
  levelDiv.style.cssText = `
    background: ${color}15;
    border: 1px solid ${color}30;
    border-radius: 8px;
    padding: 10px;
    margin-top: 12px;
    text-align: center;
  `;
  levelDiv.innerHTML = `
    <div style="color:${color};font-weight:600;font-size:14px;">${emoji} ${level} Level</div>
    <div style="color:rgba(230,250,255,0.7);font-size:12px;margin-top:2px;">
      Estimated 1RM: <span style="color:#fff;font-weight:600;">${oneRM.toFixed(1)} kg</span>
    </div>
  `;
  
  resultsDiv.appendChild(levelDiv);
}

// Auto-calculate when inputs change
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    const card = document.currentScript?.closest('.card') || document;
    
    // Add input event listeners for live calculation
    const weightInput = card.querySelector('#onerepmax-weight');
    const repsInput = card.querySelector('#onerepmax-reps');
    
    weightInput.addEventListener('input', ormCalculate);
    repsInput.addEventListener('input', ormCalculate);
    
    // Perform initial calculation
    setTimeout(ormCalculate, 100);
    
    console.log('One-Rep Max Calculator ready');
  });
}
</script>

<style>
/* Card-specific styles */
#onerepmax-title {
  color: var(--accent);
  margin-top: 0;
  margin-bottom: 8px;
}

/* Preset button styles */
.weight-preset, .reps-preset {
  padding: 6px 10px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 6px;
  color: #e6faff;
  cursor: pointer;
  font-size: 13px;
  transition: all 0.2s;
}

.weight-preset:hover, .reps-preset:hover {
  background: rgba(45,212,255,0.1);
  border-color: rgba(45,212,255,0.3);
  color: var(--accent);
  transform: translateY(-1px);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .weight-preset, .reps-preset {
    padding: 8px 12px;
    font-size: 14px;
  }
  
  .results > div {
    grid-template-columns: 1fr !important;
  }
}
</style>
