<!-- cards/reading-time-estimator.html -->
<h2 id="reading-time-estimator-title">üìö Reading Time Calculator</h2>

<form aria-describedby="reading-time-estimator-desc">
    <p id="reading-time-estimator-desc" class="small">
        Calculate precise reading time estimates with multiple input methods, audience presets, and detailed breakdowns.
        <span style="color:var(--accent)">Perfect for writers, editors, and content creators!</span>
    </p>
    
    <!-- INPUT METHODS -->
    <div class="section" style="margin-bottom:20px;padding:16px;background:rgba(45,212,255,0.05);border-radius:10px;border:1px solid rgba(45,212,255,0.2);">
        <h3 style="color:var(--accent);margin-top:0;margin-bottom:12px;">üìù Input Methods</h3>
        
        <div style="display:flex;gap:12px;margin-bottom:16px;">
            <button type="button" onclick="rteSwitchMode('text')" id="rte-mode-text" 
                    style="padding:10px 16px;background:rgba(45,212,255,0.2);border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;flex:1;">
                üìÑ Paste Text
            </button>
            <button type="button" onclick="rteSwitchMode('words')" id="rte-mode-words" 
                    style="padding:10px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;flex:1;">
                üî¢ Word Count
            </button>
            <button type="button" onclick="rteSwitchMode('chars')" id="rte-mode-chars" 
                    style="padding:10px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;flex:1;">
                üìä Character Count
            </button>
        </div>
        
        <!-- TEXT INPUT -->
        <div id="rte-text-input" style="display:block;">
            <div style="margin-bottom:8px;">
                <label for="rte-input-text" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                    Paste Text Content
                </label>
                <textarea id="rte-input-text" rows="6" placeholder="Paste your article, blog post, or any text content here..."
                          style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.03);color:inherit;font-family:inherit;line-height:1.5;resize:vertical;"></textarea>
            </div>
            
            <div style="display:flex;justify-content:space-between;font-size:12px;color:rgba(230,250,255,0.7);">
                <div>
                    <span id="rte-text-words">0</span> words ‚Ä¢ 
                    <span id="rte-text-chars">0</span> characters ‚Ä¢
                    <span id="rte-text-paragraphs">0</span> paragraphs
                </div>
                <button type="button" onclick="rteClearText()" style="background:transparent;border:none;color:#ff4d4d;cursor:pointer;font-size:11px;">
                    Clear Text
                </button>
            </div>
        </div>
        
        <!-- WORD COUNT INPUT -->
        <div id="rte-words-input" style="display:none;">
            <div style="margin-bottom:16px;">
                <label for="rte-input-words" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                    Enter Word Count
                </label>
                <input id="rte-input-words" type="number" min="1" max="1000000" placeholder="e.g., 1500" 
                       style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.03);color:inherit;font-size:16px;text-align:center;" />
            </div>
            
            <div style="display:flex;gap:12px;">
                <button type="button" onclick="rteSetWordCount(500)" 
                        style="flex:1;padding:8px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">
                    500 words
                </button>
                <button type="button" onclick="rteSetWordCount(1000)"
                        style="flex:1;padding:8px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">
                    1,000 words
                </button>
                <button type="button" onclick="rteSetWordCount(2000)"
                        style="flex:1;padding:8px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:12px;">
                    2,000 words
                </button>
            </div>
        </div>
        
        <!-- CHARACTER COUNT INPUT -->
        <div id="rte-chars-input" style="display:none;">
            <div style="margin-bottom:16px;">
                <label for="rte-input-chars" style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;">
                    Enter Character Count
                </label>
                <input id="rte-input-chars" type="number" min="1" max="1000000" placeholder="e.g., 8000" 
                       style="width:100%;padding:12px;border-radius:8px;border:1px solid rgba(45,212,255,0.3);background:rgba(255,255,255,0.03);color:inherit;font-size:16px;text-align:center;" />
            </div>
            
            <div style="font-size:12px;color:rgba(230,250,255,0.7);text-align:center;">
                Approximately <span id="rte-chars-to-words">0</span> words (based on 6 chars/word)
            </div>
        </div>
    </div>
    
    <!-- READING SPEED SETTINGS -->
    <div class="section" style="margin-bottom:20px;padding:16px;background:rgba(57,255,20,0.05);border-radius:10px;border:1px solid rgba(57,255,20,0.2);">
        <h3 style="color:#39ff14;margin-top:0;margin-bottom:12px;">‚ö° Reading Speed Settings</h3>
        
        <!-- AUDIENCE PRESETS -->
        <div style="margin-bottom:16px;">
            <div style="color:var(--accent);font-weight:500;margin-bottom:8px;font-size:14px;">Audience Presets</div>
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:8px;">
                <button type="button" onclick="rteSetPreset('slow')" class="speed-preset" data-speed="150"
                        style="padding:10px;background:rgba(255,45,85,0.1);border:1px solid rgba(255,45,85,0.3);border-radius:8px;color:#ff2d55;cursor:pointer;text-align:center;">
                    <div style="font-weight:600;">Slow Reader</div>
                    <div style="font-size:11px;">150 WPM</div>
                </button>
                <button type="button" onclick="rteSetPreset('average')" class="speed-preset active" data-speed="200"
                        style="padding:10px;background:rgba(45,212,255,0.2);border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;text-align:center;">
                    <div style="font-weight:600;">Average Adult</div>
                    <div style="font-size:11px;">200 WPM</div>
                </button>
                <button type="button" onclick="rteSetPreset('fast')" class="speed-preset" data-speed="300"
                        style="padding:10px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;text-align:center;">
                    <div style="font-weight:600;">Fast Reader</div>
                    <div style="font-size:11px;">300 WPM</div>
                </button>
                <button type="button" onclick="rteSetPreset('speedreader')" class="speed-preset" data-speed="400"
                        style="padding:10px;background:rgba(157,78,221,0.1);border:1px solid rgba(157,78,221,0.3);border-radius:8px;color:#9d4edd;cursor:pointer;text-align:center;">
                    <div style="font-weight:600;">Speed Reader</div>
                    <div style="font-size:11px;">400+ WPM</div>
                </button>
            </div>
        </div>
        
        <!-- CUSTOM SPEED -->
        <div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <label for="rte-speed-custom" style="color:var(--accent);font-weight:500;font-size:14px;">
                    Custom Reading Speed
                </label>
                <div style="font-size:12px;color:rgba(230,250,255,0.7);">
                    <span id="rte-speed-value">200</span> words per minute
                </div>
            </div>
            
            <div style="display:flex;align-items:center;gap:12px;">
                <div style="color:#ff2d55;font-size:12px;font-weight:600;">Slow</div>
                <input type="range" id="rte-speed-custom" min="50" max="1000" value="200" step="10"
                       style="flex:1;height:8px;background:linear-gradient(90deg, #ff2d55, #ffcc00, #39ff14);border-radius:4px;outline:none;"
                       oninput="rteUpdateCustomSpeed(this.value)" />
                <div style="color:#39ff14;font-size:12px;font-weight:600;">Fast</div>
            </div>
            
            <div style="display:flex;justify-content:space-between;font-size:11px;color:rgba(230,250,255,0.6);margin-top:4px;">
                <span>50 WPM</span>
                <span>250 WPM</span>
                <span>500 WPM</span>
                <span>750 WPM</span>
                <span>1000 WPM</span>
            </div>
        </div>
        
        <!-- CONTENT DIFFICULTY -->
        <div style="margin-top:16px;">
            <div style="color:var(--accent);font-weight:500;margin-bottom:8px;font-size:14px;">Content Difficulty</div>
            <div style="display:flex;gap:8px;">
                <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                    <input type="radio" name="difficulty" value="1.0" checked style="accent-color:#39ff14;">
                    <span style="color:#39ff14;">Easy</span>
                </label>
                <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                    <input type="radio" name="difficulty" value="1.2" style="accent-color:#ffcc00;">
                    <span style="color:#ffcc00;">Medium</span>
                </label>
                <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                    <input type="radio" name="difficulty" value="1.5" style="accent-color:#ff2d55;">
                    <span style="color:#ff2d55;">Difficult</span>
                </label>
                <label style="display:flex;align-items:center;gap:6px;cursor:pointer;">
                    <input type="radio" name="difficulty" value="2.0" style="accent-color:#9d4edd;">
                    <span style="color:#9d4edd;">Technical</span>
                </label>
            </div>
            <div style="font-size:11px;color:rgba(230,250,255,0.6);margin-top:4px;">
                Adjusts reading time based on content complexity
            </div>
        </div>
    </div>
    
    <!-- CALCULATION OPTIONS -->
    <div class="section" style="margin-bottom:20px;padding:16px;background:rgba(255,204,0,0.05);border-radius:10px;border:1px solid rgba(255,204,0,0.2);">
        <h3 style="color:#ffcc00;margin-top:0;margin-bottom:12px;">üéØ Calculation Options</h3>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
            <div>
                <label style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;font-size:14px;">
                    Include Breaks
                </label>
                <select id="rte-breaks" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,204,0,0.3);background:rgba(255,204,0,0.05);color:inherit;">
                    <option value="0">No breaks</option>
                    <option value="0.5" selected>Short breaks (5 min/hour)</option>
                    <option value="1.0">Standard breaks (10 min/hour)</option>
                    <option value="1.5">Long breaks (15 min/hour)</option>
                </select>
            </div>
            
            <div>
                <label style="display:block;margin-bottom:6px;color:var(--accent);font-weight:500;font-size:14px;">
                    Time Format
                </label>
                <select id="rte-format" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,204,0,0.3);background:rgba(255,204,0,0.05);color:inherit;">
                    <option value="detailed">Detailed (2h 15m 30s)</option>
                    <option value="minutes" selected>Minutes only (135.5 min)</option>
                    <option value="hours">Hours only (2.26 hours)</option>
                    <option value="decimal">Decimal hours (2.258)</option>
                </select>
            </div>
        </div>
        
        <div style="margin-top:12px;">
            <label style="display:flex;align-items:center;gap:8px;color:var(--accent);font-weight:500;font-size:14px;cursor:pointer;">
                <input type="checkbox" id="rte-speech" style="accent-color:var(--accent);">
                Include speech time (130 words/minute)
            </label>
        </div>
    </div>
    
    <!-- ACTION BUTTONS -->
    <div class="actions" style="margin-top:20px;display:flex;gap:10px;">
        <button type="button" onclick="rteCalculate()" 
                style="flex:1;padding:14px;background:linear-gradient(135deg, rgba(45,212,255,0.3), rgba(45,212,255,0.2));border:1px solid rgba(45,212,255,0.6);border-radius:10px;color:var(--accent);cursor:pointer;font-weight:600;font-size:16px;">
            ‚ö° Calculate Reading Time
        </button>
        <button type="button" onclick="rteResetAll()"
                style="padding:14px 20px;background:rgba(255,77,77,0.1);border:1px solid rgba(255,77,77,0.3);border-radius:10px;color:#ff4d4d;cursor:pointer;font-weight:600;">
            üîÑ Reset All
        </button>
    </div>
</form>

<!-- RESULTS -->
<div class="section" style="margin-top:24px;padding:24px;background:linear-gradient(135deg, rgba(45,212,255,0.05), rgba(157,78,221,0.05));border-radius:12px;border:1px solid rgba(45,212,255,0.2);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:20px;text-align:center;">‚è±Ô∏è Reading Time Estimates</h3>
    
    <!-- PRIMARY RESULT -->
    <div style="text-align:center;margin-bottom:24px;">
        <div style="font-size:13px;color:rgba(230,250,255,0.7);margin-bottom:8px;">Estimated Reading Time</div>
        <div style="font-size:48px;font-weight:bold;color:#39ff14;margin-bottom:8px;" id="rte-primary-result">‚Äì</div>
        <div style="font-size:14px;color:rgba(230,250,255,0.8);" id="rte-result-detail"></div>
    </div>
    
    <!-- MULTIPLE SPEED RESULTS -->
    <div style="margin-bottom:24px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:12px;text-align:center;">Comparison Across Different Speeds</div>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:12px;">
            <div style="padding:12px;background:rgba(255,45,85,0.05);border-radius:8px;text-align:center;">
                <div style="font-size:11px;color:#ff2d55;margin-bottom:4px;">Slow Reader</div>
                <div style="font-size:20px;font-weight:bold;color:#ff2d55;" id="rte-result-slow">‚Äì</div>
                <div style="font-size:10px;color:rgba(230,250,255,0.6);">150 WPM</div>
            </div>
            
            <div style="padding:12px;background:rgba(45,212,255,0.05);border-radius:8px;text-align:center;">
                <div style="font-size:11px;color:var(--accent);margin-bottom:4px;">Average Adult</div>
                <div style="font-size:20px;font-weight:bold;color:var(--accent);" id="rte-result-average">‚Äì</div>
                <div style="font-size:10px;color:rgba(230,250,255,0.6);">200 WPM</div>
            </div>
            
            <div style="padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;text-align:center;">
                <div style="font-size:11px;color:#39ff14;margin-bottom:4px;">Fast Reader</div>
                <div style="font-size:20px;font-weight:bold;color:#39ff14;" id="rte-result-fast">‚Äì</div>
                <div style="font-size:10px;color:rgba(230,250,255,0.6);">300 WPM</div>
            </div>
            
            <div style="padding:12px;background:rgba(157,78,221,0.05);border-radius:8px;text-align:center;">
                <div style="font-size:11px;color:#9d4edd;margin-bottom:4px;">Speed Reader</div>
                <div style="font-size:20px;font-weight:bold;color:#9d4edd;" id="rte-result-speed">‚Äì</div>
                <div style="font-size:10px;color:rgba(230,250,255,0.6);">400 WPM</div>
            </div>
        </div>
    </div>
    
    <!-- BREAKDOWN -->
    <div style="margin-bottom:24px;">
        <div style="color:var(--accent);font-weight:500;margin-bottom:12px;text-align:center;">Time Breakdown</div>
        
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                    <div style="font-size:12px;color:rgba(230,250,255,0.7);">Reading Time</div>
                    <div style="font-size:12px;color:#39ff14;font-weight:600;" id="rte-breakdown-reading">‚Äì</div>
                </div>
                <div style="height:6px;background:rgba(57,255,20,0.2);border-radius:3px;overflow:hidden;">
                    <div id="rte-breakdown-reading-bar" style="height:100%;width:70%;background:#39ff14;"></div>
                </div>
            </div>
            
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                    <div style="font-size:12px;color:rgba(230,250,255,0.7);">Breaks</div>
                    <div style="font-size:12px;color:#ffcc00;font-weight:600;" id="rte-breakdown-breaks">‚Äì</div>
                </div>
                <div style="height:6px;background:rgba(255,204,0,0.2);border-radius:3px;overflow:hidden;">
                    <div id="rte-breakdown-breaks-bar" style="height:100%;width:15%;background:#ffcc00;"></div>
                </div>
            </div>
            
            <div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;">
                <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                    <div style="font-size:12px;color:rgba(230,250,255,0.7);">Speech Time</div>
                    <div style="font-size:12px;color:#2dd4ff;font-weight:600;" id="rte-breakdown-speech">‚Äì</div>
                </div>
                <div style="height:6px;background:rgba(45,212,255,0.2);border-radius:3px;overflow:hidden;">
                    <div id="rte-breakdown-speech-bar" style="height:100%;width:15%;background:#2dd4ff;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- VISUALIZATION -->
    <div>
        <div style="color:var(--accent);font-weight:500;margin-bottom:12px;text-align:center;">Reading Time Visualization</div>
        
        <div style="padding:20px;background:rgba(0,0,0,0.3);border-radius:10px;">
            <div style="display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:16px;">
                <div style="display:flex;align-items:center;gap:6px;">
                    <div style="width:12px;height:12px;background:#39ff14;border-radius:2px;"></div>
                    <span style="font-size:11px;color:rgba(230,250,255,0.7);">Reading</span>
                </div>
                <div style="display:flex;align-items:center;gap:6px;">
                    <div style="width:12px;height:12px;background:#ffcc00;border-radius:2px;"></div>
                    <span style="font-size:11px;color:rgba(230,250,255,0.7);">Breaks</span>
                </div>
                <div style="display:flex;align-items:center;gap:6px;">
                    <div style="width:12px;height:12px;background:#2dd4ff;border-radius:2px;"></div>
                    <span style="font-size:11px;color:rgba(230,250,255,0.7);">Speech</span>
                </div>
            </div>
            
            <div id="rte-visualization" style="height:40px;display:flex;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.2);">
                <div class="rte-visual-segment" style="flex:70;background:#39ff14;"></div>
                <div class="rte-visual-segment" style="flex:15;background:#ffcc00;"></div>
                <div class="rte-visual-segment" style="flex:15;background:#2dd4ff;"></div>
            </div>
            
            <div style="display:flex;justify-content:space-between;margin-top:12px;font-size:11px;color:rgba(230,250,255,0.6);">
                <span>0 min</span>
                <span id="rte-visual-mid">‚Äì</span>
                <span id="rte-visual-end">‚Äì</span>
            </div>
        </div>
    </div>
</div>

<!-- CONTEXT COMPARISONS -->
<div class="section" style="margin-top:24px;padding:20px;background:rgba(0,0,0,0.2);border-radius:10px;border:1px solid rgba(255,255,255,0.1);">
    <h3 style="color:var(--accent);margin-top:0;margin-bottom:16px;text-align:center;">üìä Context Comparisons</h3>
    
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;">
        <div style="padding:12px;background:rgba(45,212,255,0.05);border-radius:8px;text-align:center;">
            <div style="font-size:24px;color:var(--accent);margin-bottom:4px;" id="rte-comparison-coffee">‚Äì</div>
            <div style="font-size:11px;color:rgba(230,250,255,0.7);">Coffee Breaks</div>
        </div>
        
        <div style="padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;text-align:center;">
            <div style="font-size:24px;color:#39ff14;margin-bottom:4px;" id="rte-comparison-songs">‚Äì</div>
            <div style="font-size:11px;color:rgba(230,250,255,0.7);">3-min Songs</div>
        </div>
        
        <div style="padding:12px;background:rgba(255,204,0,0.05);border-radius:8px;text-align:center;">
            <div style="font-size:24px;color:#ffcc00;margin-bottom:4px;" id="rte-comparison-episodes">‚Äì</div>
            <div style="font-size:11px;color:rgba(230,250,255,0.7);">TV Episodes</div>
        </div>
        
        <div style="padding:12px;background:rgba(157,78,221,0.05);border-radius:8px;text-align:center;">
            <div style="font-size:24px;color:#9d4edd;margin-bottom:4px;" id="rte-comparison-commute">‚Äì</div>
            <div style="font-size:11px;color:rgba(230,250,255,0.7);">Commutes</div>
        </div>
    </div>
    
    <div style="margin-top:16px;padding:12px;background:rgba(0,0,0,0.3);border-radius:8px;">
        <div style="font-size:12px;color:rgba(230,250,255,0.8);">
            <strong>üí° Tip:</strong> The average blog post (1000-1500 words) takes 4-6 minutes to read at 250 WPM. 
            Web content should aim for under 7 minutes to maintain engagement.
        </div>
    </div>
</div>

<!-- ACTIONS -->
<div class="actions" style="margin-top:24px;display:flex;gap:10px;">
    <button type="button" onclick="rteCopyResults()" 
            style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
        üìã Copy Results
    </button>
    <button type="button" onclick="rteShareResults()"
            style="padding:12px 16px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:8px;color:#39ff14;cursor:pointer;">
        üîó Share
    </button>
</div>

<script>
/* reading-time-estimator.html
   - Enhanced reading time calculator with multiple features
   - Scoped with rte- prefix
*/

let rteCurrentMode = 'text';
let rteCurrentWordCount = 0;
let rteCurrentSpeed = 200;

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    console.log('Reading Time Estimator ready');
    
    // Setup text area analysis
    const textArea = document.getElementById('rte-input-text');
    textArea.addEventListener('input', rteAnalyzeText);
    
    // Setup character input conversion
    const charInput = document.getElementById('rte-input-chars');
    charInput.addEventListener('input', function() {
        const chars = parseInt(this.value) || 0;
        const words = Math.round(chars / 6);
        document.getElementById('rte-chars-to-words').textContent = words.toLocaleString();
    });
    
    // Setup word count input
    const wordInput = document.getElementById('rte-input-words');
    wordInput.addEventListener('input', function() {
        rteCurrentWordCount = parseInt(this.value) || 0;
    });
    
    // Load example text on first visit
    const hasVisited = localStorage.getItem('rte-has-visited');
    if (!hasVisited) {
        setTimeout(rteLoadExample, 1000);
        localStorage.setItem('rte-has-visited', 'true');
    }
});

// Switch input modes
function rteSwitchMode(mode) {
    rteCurrentMode = mode;
    
    // Update button styles
    document.getElementById('rte-mode-text').style.background = mode === 'text' ? 'rgba(45,212,255,0.2)' : 'rgba(255,255,255,0.05)';
    document.getElementById('rte-mode-text').style.border = mode === 'text' ? '1px solid rgba(45,212,255,0.4)' : '1px solid rgba(255,255,255,0.1)';
    document.getElementById('rte-mode-text').style.color = mode === 'text' ? 'var(--accent)' : 'inherit';
    document.getElementById('rte-mode-text').style.fontWeight = mode === 'text' ? '600' : 'normal';
    
    document.getElementById('rte-mode-words').style.background = mode === 'words' ? 'rgba(45,212,255,0.2)' : 'rgba(255,255,255,0.05)';
    document.getElementById('rte-mode-words').style.border = mode === 'words' ? '1px solid rgba(45,212,255,0.4)' : '1px solid rgba(255,255,255,0.1)';
    document.getElementById('rte-mode-words').style.color = mode === 'words' ? 'var(--accent)' : 'inherit';
    document.getElementById('rte-mode-words').style.fontWeight = mode === 'words' ? '600' : 'normal';
    
    document.getElementById('rte-mode-chars').style.background = mode === 'chars' ? 'rgba(45,212,255,0.2)' : 'rgba(255,255,255,0.05)';
    document.getElementById('rte-mode-chars').style.border = mode === 'chars' ? '1px solid rgba(45,212,255,0.4)' : '1px solid rgba(255,255,255,0.1)';
    document.getElementById('rte-mode-chars').style.color = mode === 'chars' ? 'var(--accent)' : 'inherit';
    document.getElementById('rte-mode-chars').style.fontWeight = mode === 'chars' ? '600' : 'normal';
    
    // Show/hide input sections
    document.getElementById('rte-text-input').style.display = mode === 'text' ? 'block' : 'none';
    document.getElementById('rte-words-input').style.display = mode === 'words' ? 'block' : 'none';
    document.getElementById('rte-chars-input').style.display = mode === 'chars' ? 'block' : 'none';
}

// Analyze text input
function rteAnalyzeText() {
    const text = document.getElementById('rte-input-text').value;
    
    // Word count (simple)
    const words = text.match(/\b[\w'-]+\b/g) || [];
    const wordCount = words.length;
    
    // Character count
    const charCount = text.length;
    
    // Paragraph count
    const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
    const paraCount = paragraphs.length || 1;
    
    // Update displays
    document.getElementById('rte-text-words').textContent = wordCount.toLocaleString();
    document.getElementById('rte-text-chars').textContent = charCount.toLocaleString();
    document.getElementById('rte-text-paragraphs').textContent = paraCount;
    
    rteCurrentWordCount = wordCount;
}

// Clear text
function rteClearText() {
    document.getElementById('rte-input-text').value = '';
    rteAnalyzeText();
}

// Set word count via buttons
function rteSetWordCount(count) {
    document.getElementById('rte-input-words').value = count;
    rteCurrentWordCount = count;
}

// Set reading speed preset
function rteSetPreset(preset) {
    const presets = {
        'slow': 150,
        'average': 200,
        'fast': 300,
        'speedreader': 400
    };
    
    const speed = presets[preset];
    rteCurrentSpeed = speed;
    
    // Update custom slider
    document.getElementById('rte-speed-custom').value = speed;
    document.getElementById('rte-speed-value').textContent = speed;
    
    // Update preset button styles
    document.querySelectorAll('.speed-preset').forEach(btn => {
        btn.style.background = 'rgba(255,255,255,0.05)';
        btn.style.border = '1px solid rgba(255,255,255,0.1)';
        btn.style.color = 'inherit';
        btn.style.fontWeight = 'normal';
    });
    
    const activeBtn = document.querySelector(`.speed-preset[data-speed="${speed}"]`);
    if (activeBtn) {
        activeBtn.style.background = 'rgba(45,212,255,0.2)';
        activeBtn.style.border = '1px solid rgba(45,212,255,0.4)';
        activeBtn.style.color = 'var(--accent)';
        activeBtn.style.fontWeight = '600';
    }
}

// Update custom speed from slider
function rteUpdateCustomSpeed(speed) {
    rteCurrentSpeed = parseInt(speed);
    document.getElementById('rte-speed-value').textContent = speed;
    
    // Clear preset styling when using custom speed
    document.querySelectorAll('.speed-preset').forEach(btn => {
        btn.style.background = 'rgba(255,255,255,0.05)';
        btn.style.border = '1px solid rgba(255,255,255,0.1)';
        btn.style.color = 'inherit';
        btn.style.fontWeight = 'normal';
    });
}

// Load example text
function rteLoadExample() {
    const exampleText = `Reading time estimation helps content creators understand how much time their audience needs to consume their work. This is crucial for web content, articles, blog posts, and any written material where reader engagement matters.

The average adult reads at about 200-250 words per minute for general content. However, reading speed varies based on factors like content difficulty, reader familiarity with the topic, and reading environment.

Technical documents, academic papers, and complex materials typically require slower reading speeds, often around 100-150 words per minute. Conversely, simple fiction or familiar topics can be read at 300+ words per minute by experienced readers.

When estimating reading time for web content, it's important to consider that online readers tend to skim more than print readers. Adding 10-20% to estimated times can provide a more realistic expectation for web articles.`;
    
    document.getElementById('rte-input-text').value = exampleText;
    rteAnalyzeText();
}

// Main calculation function
function rteCalculate() {
    let wordCount = 0;
    
    // Get word count based on current mode
    switch(rteCurrentMode) {
        case 'text':
            wordCount = rteCurrentWordCount;
            break;
        case 'words':
            wordCount = parseInt(document.getElementById('rte-input-words').value) || 0;
            break;
        case 'chars':
            const chars = parseInt(document.getElementById('rte-input-chars').value) || 0;
            wordCount = Math.round(chars / 6); // Approximate conversion
            break;
    }
    
    if (wordCount <= 0) {
        rteShowMessage('Please enter text or word count', 'warning');
        return;
    }
    
    // Get settings
    const speed = rteCurrentSpeed;
    const difficulty = parseFloat(document.querySelector('input[name="difficulty"]:checked').value);
    const breaksFactor = parseFloat(document.getElementById('rte-breaks').value);
    const format = document.getElementById('rte-format').value;
    const includeSpeech = document.getElementById('rte-speech').checked;
    
    // Calculate base reading time (minutes)
    let baseMinutes = (wordCount / speed) * difficulty;
    
    // Calculate break time (percentage of reading time)
    const breakMinutes = baseMinutes * (breaksFactor / 60);
    
    // Calculate speech time if selected
    const speechMinutes = includeSpeech ? wordCount / 130 : 0;
    
    // Total time
    const totalMinutes = baseMinutes + breakMinutes + speechMinutes;
    
    // Format results
    const formattedTime = rteFormatTime(totalMinutes, format);
    const formattedBase = rteFormatTime(baseMinutes, 'detailed');
    const formattedBreaks = rteFormatTime(breakMinutes, 'detailed');
    const formattedSpeech = rteFormatTime(speechMinutes, 'detailed');
    
    // Update primary result
    document.getElementById('rte-primary-result').textContent = formattedTime;
    document.getElementById('rte-result-detail').textContent = 
        `${wordCount.toLocaleString()} words at ${speed} WPM${difficulty > 1 ? ` (${difficulty}x difficulty)` : ''}`;
    
    // Calculate for different speeds
    const speeds = [150, 200, 300, 400];
    const speedResults = speeds.map(s => rteFormatTime((wordCount / s) * difficulty, format));
    
    document.getElementById('rte-result-slow').textContent = speedResults[0];
    document.getElementById('rte-result-average').textContent = speedResults[1];
    document.getElementById('rte-result-fast').textContent = speedResults[2];
    document.getElementById('rte-result-speed').textContent = speedResults[3];
    
    // Update breakdown
    document.getElementById('rte-breakdown-reading').textContent = formattedBase;
    document.getElementById('rte-breakdown-breaks').textContent = formattedBreaks;
    document.getElementById('rte-breakdown-speech').textContent = formattedSpeech;
    
    // Update visualization
    const totalSeconds = totalMinutes * 60;
    const readingPercent = (baseMinutes / totalMinutes) * 100;
    const breaksPercent = (breakMinutes / totalMinutes) * 100;
    const speechPercent = (speechMinutes / totalMinutes) * 100;
    
    document.getElementById('rte-breakdown-reading-bar').style.width = `${readingPercent}%`;
    document.getElementById('rte-breakdown-breaks-bar').style.width = `${breaksPercent}%`;
    document.getElementById('rte-breakdown-speech-bar').style.width = `${speechPercent}%`;
    
    // Update visual segments
    const visualSegments = document.querySelectorAll('.rte-visual-segment');
    visualSegments[0].style.flex = readingPercent;
    visualSegments[1].style.flex = breaksPercent;
    visualSegments[2].style.flex = speechPercent;
    
    // Update visualization labels
    const midMinutes = baseMinutes;
    const endMinutes = totalMinutes;
    
    document.getElementById('rte-visual-mid').textContent = rteFormatTime(midMinutes, 'minutes') + ' min';
    document.getElementById('rte-visual-end').textContent = rteFormatTime(endMinutes, 'minutes') + ' min';
    
    // Update context comparisons
    rteUpdateComparisons(totalMinutes);
    
    rteShowMessage('Calculation complete!', 'success');
}

// Format time based on selected format
function rteFormatTime(minutes, format) {
    if (minutes <= 0) return '0s';
    
    const totalSeconds = Math.round(minutes * 60);
    
    switch(format) {
        case 'detailed':
            const hours = Math.floor(minutes / 60);
            const mins = Math.floor(minutes % 60);
            const secs = Math.round((minutes - Math.floor(minutes)) * 60);
            
            if (hours > 0) {
                return `${hours}h ${mins}m ${secs}s`;
            } else if (mins > 0) {
                return `${mins}m ${secs}s`;
            } else {
                return `${secs}s`;
            }
            
        case 'minutes':
            return minutes.toFixed(1) + ' min';
            
        case 'hours':
            return (minutes / 60).toFixed(2) + ' hours';
            
        case 'decimal':
            return (minutes / 60).toFixed(3);
            
        default:
            return minutes.toFixed(1) + ' min';
    }
}

// Update context comparisons
function rteUpdateComparisons(totalMinutes) {
    // Coffee breaks (5 minutes each)
    const coffeeBreaks = (totalMinutes / 5).toFixed(1);
    document.getElementById('rte-comparison-coffee').textContent = coffeeBreaks;
    
    // Songs (3 minutes each)
    const songs = (totalMinutes / 3).toFixed(1);
    document.getElementById('rte-comparison-songs').textContent = songs;
    
    // TV episodes (22 minutes each)
    const episodes = (totalMinutes / 22).toFixed(1);
    document.getElementById('rte-comparison-episodes').textContent = episodes;
    
    // Commutes (30 minutes each)
    const commutes = (totalMinutes / 30).toFixed(1);
    document.getElementById('rte-comparison-commute').textContent = commutes;
}

// Show message
function rteShowMessage(message, type) {
    const colors = {
        success: '#39ff14',
        warning: '#ffcc00',
        error: '#ff2d55',
        info: '#2dd4ff'
    };
    
    // Remove existing message
    const existingMsg = document.querySelector('.rte-message');
    if (existingMsg) existingMsg.remove();
    
    // Create new message
    const msg = document.createElement('div');
    msg.className = 'rte-message';
    msg.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        background: rgba(0,0,0,0.9);
        border: 1px solid ${colors[type]};
        border-radius: 8px;
        color: ${colors[type]};
        z-index: 10000;
        font-weight: 500;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        animation: rteSlideIn 0.3s ease-out;
    `;
    
    msg.textContent = message;
    document.body.appendChild(msg);
    
    // Remove after 3 seconds
    setTimeout(() => {
        msg.style.animation = 'rteSlideOut 0.3s ease-out';
        setTimeout(() => msg.remove(), 300);
    }, 3000);
}

// Add CSS for animations
if (!document.querySelector('#rte-styles')) {
    const style = document.createElement('style');
    style.id = 'rte-styles';
    style.textContent = `
        @keyframes rteSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes rteSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    `;
    document.head.appendChild(style);
}

// Reset all
function rteResetAll() {
    if (confirm('Reset all inputs and results?')) {
        // Reset inputs
        document.getElementById('rte-input-text').value = '';
        document.getElementById('rte-input-words').value = '';
        document.getElementById('rte-input-chars').value = '';
        
        // Reset settings
        rteSetPreset('average');
        document.querySelector('input[name="difficulty"][value="1.0"]').checked = true;
        document.getElementById('rte-breaks').value = '0.5';
        document.getElementById('rte-format').value = 'minutes';
        document.getElementById('rte-speech').checked = false;
        
        // Reset results
        document.getElementById('rte-primary-result').textContent = '‚Äì';
        document.getElementById('rte-result-detail').textContent = '';
        
        document.getElementById('rte-result-slow').textContent = '‚Äì';
        document.getElementById('rte-result-average').textContent = '‚Äì';
        document.getElementById('rte-result-fast').textContent = '‚Äì';
        document.getElementById('rte-result-speed').textContent = '‚Äì';
        
        document.getElementById('rte-breakdown-reading').textContent = '‚Äì';
        document.getElementById('rte-breakdown-breaks').textContent = '‚Äì';
        document.getElementById('rte-breakdown-speech').textContent = '‚Äì';
        
        document.getElementById('rte-breakdown-reading-bar').style.width = '0%';
        document.getElementById('rte-breakdown-breaks-bar').style.width = '0%';
        document.getElementById('rte-breakdown-speech-bar').style.width = '0%';
        
        const visualSegments = document.querySelectorAll('.rte-visual-segment');
        visualSegments[0].style.flex = '70';
        visualSegments[1].style.flex = '15';
        visualSegments[2].style.flex = '15';
        
        document.getElementById('rte-visual-mid').textContent = '‚Äì';
        document.getElementById('rte-visual-end').textContent = '‚Äì';
        
        document.getElementById('rte-comparison-coffee').textContent = '‚Äì';
        document.getElementById('rte-comparison-songs').textContent = '‚Äì';
        document.getElementById('rte-comparison-episodes').textContent = '‚Äì';
        document.getElementById('rte-comparison-commute').textContent = '‚Äì';
        
        // Reset analysis
        rteAnalyzeText();
        
        rteShowMessage('Reset complete', 'success');
    }
}

// Copy results
function rteCopyResults() {
    const primary = document.getElementById('rte-primary-result').textContent;
    const detail = document.getElementById('rte-result-detail').textContent;
    
    if (primary === '‚Äì') {
        rteShowMessage('No results to copy', 'warning');
        return;
    }
    
    const text = `Reading Time: ${primary}\n${detail}\n\nCalculated with The Most Useful Site`;
    
    navigator.clipboard.writeText(text).then(() => {
        rteShowMessage('Results copied to clipboard!', 'success');
    }).catch(err => {
        console.error('Copy failed:', err);
        rteShowMessage('Copy failed', 'error');
    });
}

// Share results
function rteShareResults() {
    const primary = document.getElementById('rte-primary-result').textContent;
    const detail = document.getElementById('rte-result-detail').textContent;
    
    if (primary === '‚Äì') {
        rteShowMessage('No results to share', 'warning');
        return;
    }
    
    const text = `‚è±Ô∏è Reading Time: ${primary}\n${detail}\n\nCheck out The Most Useful Site!`;
    
    if (navigator.share) {
        navigator.share({
            title: 'Reading Time Estimate',
            text: text,
            url: window.location.href
        }).catch(err => {
            console.log('Share cancelled:', err);
        });
    } else {
        navigator.clipboard.writeText(text).then(() => {
            rteShowMessage('Results copied to clipboard!', 'success');
        });
    }
}
</script>

<style>
#reading-time-estimator-title {
    color: var(--accent);
    margin-top: 0;
    background: linear-gradient(135deg, #2dd4ff, #ffcc00);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section {
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Custom slider styling */
input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    height: 8px;
    background: linear-gradient(90deg, #ff2d55, #ffcc00, #39ff14);
    border-radius: 4px;
    outline: none;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid rgba(255,255,255,0.8);
    box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid rgba(255,255,255,0.8);
    box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .section > div > div {
        grid-template-columns: 1fr !important;
    }
    
    .actions {
        flex-direction: column;
    }
    
    .actions button {
        width: 100%;
    }
    
    #rte-mode-text, #rte-mode-words, #rte-mode-chars {
        padding: 8px !important;
        font-size: 12px !important;
    }
    
    .speed-preset {
        padding: 8px !important;
    }
}
</style>
