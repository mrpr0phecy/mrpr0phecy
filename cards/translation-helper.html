<h2 id="translation-helper-title" style="margin-top:0;">Translation Helper</h2>

<form aria-describedby="translation-helper-desc">
  <p id="translation-helper-desc" class="small">Translate text between languages and check clarity. Paste your text, choose source and target languages, and generate a draft translation with notes on style and accuracy.</p>

  <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
    <div class="field">
      <label for="th-source">Source language</label>
      <select id="th-source" style="width:100%;">
        <option value="en" selected>English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="it">Italian</option>
        <option value="zh">Chinese</option>
        <option value="ja">Japanese</option>
        <option value="ru">Russian</option>
      </select>
    </div>

    <div class="field">
      <label for="th-target">Target language</label>
      <select id="th-target" style="width:100%;">
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="it">Italian</option>
        <option value="zh">Chinese</option>
        <option value="ja">Japanese</option>
        <option value="ru">Russian</option>
        <option value="en">English</option>
      </select>
    </div>

    <div class="field" style="grid-column:1 / -1;">
      <label for="th-text">Text</label>
      <textarea id="th-text" rows="8" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;" placeholder="Paste text to translate..."></textarea>
    </div>
  </div>

  <div class="actions" style="margin-top:12px;">
    <button type="button" onclick="thTranslate(this)">Translate</button>
    <button type="button" class="secondary" onclick="thReset(this)">Reset</button>
    <button type="button" onclick="thCopy(this)">Copy Translation</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <h3 class="small">Translation</h3>
  <textarea id="th-output" rows="8" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;"></textarea>

  <div style="margin-top:8px;display:flex;gap:12px;align-items:center;">
    <div class="small">Estimated words: <span id="th-wordcount">0</span></div>
    <div id="th-hint" class="small" style="opacity:0.9;"></div>
  </div>

  <h3 class="small" style="margin-top:12px;">Notes</h3>
  <div id="th-notes" class="small" style="opacity:0.9;line-height:1.5;">
    No translation performed yet.
  </div>
</div>

<script>
/* translation-helper.html
   - Simple client-side translation helper (demo only)
   - Scoped with th- prefix
   - Provides mock translations and style notes
*/

function thReset(btn){
  const card=btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#th-output').value="";
  card.querySelector('#th-wordcount').textContent="0";
  card.querySelector('#th-hint').textContent="";
  card.querySelector('#th-notes').textContent="No translation performed yet.";
}

function thCopy(btn){
  const card=btn.closest('.card');
  const out=card.querySelector('#th-output').value;
  if(!out.trim())return;
  navigator.clipboard?.writeText(out).then(()=>{
    const hint=card.querySelector('#th-hint');
    hint.textContent="Copied to clipboard.";
    setTimeout(()=>{if(hint.textContent==="Copied to clipboard.")hint.textContent="";},1600);
  }).catch(()=>alert("Copy failed."));
}

function thTranslate(btn){
  const card=btn.closest('.card');
  const source=card.querySelector('#th-source').value;
  const target=card.querySelector('#th-target').value;
  const text=(card.querySelector('#th-text').value||"").trim();
  if(!text){card.querySelector('#th-hint').textContent="Please paste text.";return;}

  // For demo purposes, just reverse words and append language info
  const words=text.split(/\s+/);
  const mock=words.reverse().join(" ");
  const draft=`[${source}â†’${target}] ${mock}`;

  card.querySelector('#th-output').value=draft;
  card.querySelector('#th-wordcount').textContent=words.length;
  card.querySelector('#th-hint').textContent="Mock translation generated.";
  card.querySelector('#th-notes').textContent=`This is a placeholder translation. In production, connect to a translation API for accuracy. Ensure idioms and tone are preserved when moving from ${source} to ${target}.`;
}
</script>
