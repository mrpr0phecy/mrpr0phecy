<h2 id="algebra-title">Algebra Solver</h2>

<p class="card-description">Solve equations in one click. Just type your equation like you'd write it on paper.</p>

<div class="equation-container" style="margin: 20px 0;">
  <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
    <div style="font-size: 18px; color: #e6faff;">Equation:</div>
    <div style="display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
      <input type="text" id="alg-left" placeholder="2x + 5" style="background:none;border:none;color:#e6faff;font-size:16px;width:120px;text-align:center;outline:none;" value="2x + 5">
      <span style="color:#2dd4ff;font-weight:bold;">=</span>
      <input type="text" id="alg-right" placeholder="13" style="background:none;border:none;color:#e6faff;font-size:16px;width:60px;text-align:center;outline:none;" value="13">
    </div>
  </div>
  
  <div style="display: flex; gap: 8px; flex-wrap: wrap; margin: 15px 0;">
    <button onclick="setExample('linear1')" style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:#2dd4ff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      2x + 5 = 13
    </button>
    <button onclick="setExample('linear2')" style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:#2dd4ff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      3x - 7 = 8
    </button>
    <button onclick="setExample('quad1')" style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:#2dd4ff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      x² = 9
    </button>
    <button onclick="setExample('quad2')" style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:#2dd4ff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      2x² - 8 = 0
    </button>
    <button onclick="setExample('quad3')" style="background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:#2dd4ff;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      x² - 5x + 6 = 0
    </button>
  </div>
</div>

<div style="margin: 25px 0; text-align: center;">
  <button onclick="solveAlgebra()" style="background:#2dd4ff;color:#000;border:none;padding:14px 32px;border-radius:10px;cursor:pointer;font-size:16px;font-weight:600;box-shadow:0 4px 15px rgba(45,212,255,0.3);">
    SOLVE FOR X
  </button>
  <button onclick="clearAlgebra()" style="background:rgba(255,255,255,0.08);color:#e6faff;border:1px solid rgba(255,255,255,0.2);padding:14px 24px;border-radius:10px;cursor:pointer;font-size:16px;margin-left:12px;">
    Clear
  </button>
</div>

<div id="alg-solution" style="margin-top: 30px; display: none;">
  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px;">
    <div style="color:#39ff14;font-size:18px;font-weight:bold;">✓ SOLVED!</div>
    <button onclick="copySolution()" style="background:rgba(57,255,20,0.1);color:#39ff14;border:1px solid rgba(57,255,20,0.3);padding:6px 12px;border-radius:6px;cursor:pointer;font-size:14px;">
      Copy Answer
    </button>
  </div>
  
  <div style="background:rgba(20,20,20,0.7);border-radius:10px;padding:20px;border:1px solid rgba(57,255,20,0.2);">
    <div id="alg-answer" style="font-size:20px;font-weight:bold;color:#39ff14;text-align:center;margin-bottom:15px;">
      <!-- Answer appears here -->
    </div>
    
    <div id="alg-steps" style="color:#e6faff;line-height:1.6;font-size:15px;">
      <!-- Steps appear here -->
    </div>
    
    <div id="alg-graph" style="margin-top:20px;text-align:center;color:rgba(230,250,255,0.8);">
      <div>Graph: y = <span id="graph-equation"></span></div>
      <div style="margin-top:10px;font-family:monospace;font-size:14px;white-space:pre;">
        <!-- Graph will appear as text -->
      </div>
    </div>
  </div>
</div>

<div id="alg-error" style="margin-top:20px;padding:15px;background:rgba(255,77,77,0.1);border-radius:8px;border:1px solid rgba(255,77,77,0.3);color:#ff4d4d;display:none;">
  <div style="font-weight:bold;margin-bottom:5px;">⚠️ Please check your equation:</div>
  <div id="error-message"></div>
  <div style="margin-top:10px;font-size:14px;">
    <strong>Tips:</strong> Use 'x' as variable • For x² type 'x^2' or 'x*x' • Example: "3x + 2 = 11"
  </div>
</div>

<script>
// Simple examples
const examples = {
  linear1: { left: '2x + 5', right: '13' },
  linear2: { left: '3x - 7', right: '8' },
  quad1: { left: 'x^2', right: '9' },
  quad2: { left: '2x^2 - 8', right: '0' },
  quad3: { left: 'x^2 - 5x + 6', right: '0' }
};

function setExample(type) {
  const ex = examples[type];
  document.getElementById('alg-left').value = ex.left;
  document.getElementById('alg-right').value = ex.right;
  clearResult();
}

function clearResult() {
  document.getElementById('alg-solution').style.display = 'none';
  document.getElementById('alg-error').style.display = 'none';
}

function clearAlgebra() {
  document.getElementById('alg-left').value = '';
  document.getElementById('alg-right').value = '';
  clearResult();
  document.getElementById('alg-left').focus();
}

// SIMPLE SOLVER - No complex parsing
function solveAlgebra() {
  const left = document.getElementById('alg-left').value.trim();
  const right = document.getElementById('alg-right').value.trim();
  
  // Hide previous results
  document.getElementById('alg-error').style.display = 'none';
  document.getElementById('alg-solution').style.display = 'none';
  
  // Check inputs
  if (!left || !right) {
    showError("Please enter both sides of the equation");
    return;
  }
  
  if (!left.includes('x')) {
    showError("Equation should contain 'x' as the variable");
    return;
  }
  
  try {
    // Determine equation type
    const isQuadratic = left.includes('^2') || left.includes('x*x') || left.includes('x²');
    
    if (!isQuadratic) {
      // SIMPLE LINEAR EQUATION SOLVER
      solveLinear(left, right);
    } else {
      // SIMPLE QUADRATIC EQUATION SOLVER
      solveQuadratic(left, right);
    }
    
  } catch (error) {
    showError("Couldn't solve this equation. Try one of the examples above.");
  }
}

// SIMPLE LINEAR SOLVER
function solveLinear(left, right) {
  let leftSide = left;
  let rightSide = right;
  
  // Extract coefficients using simple matching
  let a = 0; // coefficient of x
  let b = 0; // constant on left
  
  // Look for x term
  const xMatch = leftSide.match(/([-+]?\s*\d*\.?\d*)\s*x/);
  if (xMatch) {
    const coeff = xMatch[1].replace(/\s/g, '');
    if (coeff === '' || coeff === '+') a = 1;
    else if (coeff === '-') a = -1;
    else a = parseFloat(coeff);
  }
  
  // Look for constant on left (not multiplied by x)
  const leftWithoutX = leftSide.replace(/([-+]?\s*\d*\.?\d*)\s*x/g, '');
  const leftConstMatch = leftWithoutX.match(/[-+]?\s*\d+\.?\d*/g);
  if (leftConstMatch) {
    leftConstMatch.forEach(match => {
      b += parseFloat(match.replace(/\s/g, '') || 0);
    });
  }
  
  // Parse right side
  let c = parseFloat(rightSide) || 0;
  
  // Calculate solution
  const solution = (c - b) / a;
  
  // Show results
  document.getElementById('alg-answer').innerHTML = 
    `<div style="font-size:24px;">x = ${formatNumber(solution)}</div>`;
  
  // Show steps
  const steps = [
    `Step 1: Write the equation: ${left} = ${right}`,
    `Step 2: Move constant to right side: ${a}x = ${c} - ${b} = ${c - b}`,
    `Step 3: Divide both sides by ${a}: x = ${c - b} ÷ ${a}`,
    `Step 4: Calculate: x = ${formatNumber(solution)}`,
    `✅ Check: ${a} × ${formatNumber(solution)} + ${b} = ${a * solution + b} (should equal ${right})`
  ];
  
  document.getElementById('alg-steps').innerHTML = 
    steps.map(step => `<div style="margin-bottom:8px;">${step}</div>`).join('');
  
  // Show graph
  document.getElementById('graph-equation').textContent = `${a}x + ${b}`;
  showGraph(a, b, c, solution);
  
  document.getElementById('alg-solution').style.display = 'block';
}

// SIMPLE QUADRATIC SOLVER
function solveQuadratic(left, right) {
  let a = 1, b = 0, c = 0;
  
  // Very simple coefficient extraction
  const expr = left.replace(/\s/g, '');
  
  // Find x^2 term
  const x2Match = expr.match(/([-+]?\d*)x\^2/);
  if (x2Match) {
    const coeff = x2Match[1];
    if (coeff === '' || coeff === '+') a = 1;
    else if (coeff === '-') a = -1;
    else a = parseFloat(coeff);
  }
  
  // Find x term
  const xMatch = expr.match(/([-+]?\d*)x(?!\^)/);
  if (xMatch) {
    const coeff = xMatch[1];
    if (coeff === '' || coeff === '+') b = 1;
    else if (coeff === '-') b = -1;
    else b = parseFloat(coeff);
  }
  
  // Find constant
  const constMatch = expr.match(/([-+]?\d+)(?!.*x)/);
  if (constMatch) {
    c = parseFloat(constMatch[0]);
  }
  
  // Adjust for right side
  const rightNum = parseFloat(right) || 0;
  c = c - rightNum;
  
  // Calculate discriminant
  const discriminant = b * b - 4 * a * c;
  
  // Show results
  let answerHTML = '';
  let steps = [];
  
  steps.push(`Step 1: Standard form: ${a}x² ${b >= 0 ? '+' : ''}${b}x ${c >= 0 ? '+' : ''}${c} = 0`);
  steps.push(`Step 2: Discriminant: D = b² - 4ac = ${b}² - 4×${a}×${c} = ${discriminant}`);
  
  if (discriminant > 0) {
    const sqrtD = Math.sqrt(discriminant);
    const x1 = (-b + sqrtD) / (2 * a);
    const x2 = (-b - sqrtD) / (2 * a);
    
    answerHTML = `
      <div style="font-size:20px;">Two solutions:</div>
      <div style="font-size:24px;margin-top:10px;">
        x₁ = ${formatNumber(x1)}<br>
        x₂ = ${formatNumber(x2)}
      </div>
    `;
    
    steps.push(`Step 3: D > 0 → Two real solutions`);
    steps.push(`Step 4: x₁ = (-b + √D)/(2a) = (${-b} + ${formatNumber(sqrtD)})/(2×${a})`);
    steps.push(`Step 5: x₂ = (-b - √D)/(2a) = (${-b} - ${formatNumber(sqrtD)})/(2×${a})`);
    
  } else if (discriminant === 0) {
    const x = -b / (2 * a);
    
    answerHTML = `
      <div style="font-size:20px;">One solution (double root):</div>
      <div style="font-size:28px;margin-top:10px;">x = ${formatNumber(x)}</div>
    `;
    
    steps.push(`Step 3: D = 0 → One repeated solution`);
    steps.push(`Step 4: x = -b/(2a) = ${-b}/(2×${a})`);
    
  } else {
    const real = -b / (2 * a);
    const imag = Math.sqrt(-discriminant) / (2 * a);
    
    answerHTML = `
      <div style="font-size:20px;">Two complex solutions:</div>
      <div style="font-size:20px;margin-top:10px;">
        x₁ = ${formatNumber(real)} + ${formatNumber(imag)}i<br>
        x₂ = ${formatNumber(real)} - ${formatNumber(imag)}i
      </div>
    `;
    
    steps.push(`Step 3: D < 0 → Two complex solutions`);
    steps.push(`Step 4: Real part = -b/(2a) = ${formatNumber(real)}`);
    steps.push(`Step 5: Imaginary part = √(-D)/(2a) = ${formatNumber(imag)}`);
  }
  
  document.getElementById('alg-answer').innerHTML = answerHTML;
  document.getElementById('alg-steps').innerHTML = 
    steps.map(step => `<div style="margin-bottom:8px;">${step}</div>`).join('');
  
  // Show graph
  document.getElementById('graph-equation').textContent = `${a}x² ${b >= 0 ? '+' : ''}${b}x ${c >= 0 ? '+' : ''}${c}`;
  showGraph(a, b, c);
  
  document.getElementById('alg-solution').style.display = 'block';
}

function showError(message) {
  document.getElementById('error-message').textContent = message;
  document.getElementById('alg-error').style.display = 'block';
}

function formatNumber(num) {
  if (Math.abs(num) < 0.000001) return '0';
  if (Math.abs(num - Math.round(num)) < 0.0001) {
    return Math.round(num).toString();
  }
  // Show clean decimal
  return num.toFixed(6).replace(/\.?0+$/, '');
}

function showGraph(a, b, c, solution) {
  const graphDiv = document.querySelector('#alg-graph div:last-child');
  let graph = '';
  
  if (b === undefined) { // Quadratic
    graph = `
      Parabola: y = ${a}x² ${b >= 0 ? '+' : ''}${b}x ${c >= 0 ? '+' : ''}${c}
      Vertex: (${formatNumber(-b/(2*a))}, ${formatNumber(c - b*b/(4*a))})
      ${a > 0 ? 'Opens upward' : 'Opens downward'}
    `;
  } else { // Linear
    graph = `
      Line: y = ${a}x + ${b}
      Slope: ${a}
      Y-intercept: ${b}
      Solution at x = ${formatNumber(solution)}
    `;
  }
  
  graphDiv.textContent = graph;
}

function copySolution() {
  const answer = document.getElementById('alg-answer').textContent;
  const steps = document.getElementById('alg-steps').textContent;
  const text = `SOLUTION:\n${answer}\n\nSTEPS:\n${steps}`;
  
  navigator.clipboard.writeText(text).then(() => {
    alert('✓ Solution copied to clipboard!');
  });
}

// Auto-solve when pressing Enter in any input
document.getElementById('alg-left').addEventListener('keypress', (e) => {
  if (e.key === 'Enter') solveAlgebra();
});

document.getElementById('alg-right').addEventListener('keypress', (e) => {
  if (e.key === 'Enter') solveAlgebra();
});

// Auto-focus on load
setTimeout(() => {
  document.getElementById('alg-left').focus();
}, 100);
</script>

<style>
.card-description {
  color: rgba(230,250,255,0.8);
  margin: 10px 0 20px 0;
  font-size: 15px;
}

input::placeholder {
  color: rgba(230,250,255,0.4);
}
</style>