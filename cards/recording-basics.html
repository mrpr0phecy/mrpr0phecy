<h2 id="recording-basics-title">üé§ Recording Basics</h2>

<form aria-describedby="recording-basics-desc">
    <p id="recording-basics-desc" class="small" style="margin-bottom:20px;color:var(--muted)">
        Learn fundamental recording techniques. 
        <span style="color:var(--accent)">‚ö†Ô∏è Educational only ‚Äî always verify with professional resources.</span>
    </p>
    
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:12px;margin-bottom:16px;">
        <div>
            <label for="rb-device" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                Recording Device
            </label>
            <select id="rb-device" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
                <option value="phone">Phone/Tablet</option>
                <option value="computer">Computer</option>
                <option value="portable">Portable Recorder</option>
                <option value="usbmic">USB Microphone</option>
            </select>
        </div>
        
        <div>
            <label for="rb-focus" style="display:block;margin-bottom:6px;color:var(--accent);font-size:14px;">
                Focus Area
            </label>
            <select id="rb-focus" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--glass);color:inherit;">
                <option value="vocals">Vocals</option>
                <option value="guitar">Guitar</option>
                <option value="piano">Piano/Keys</option>
                <option value="drums">Drums</option>
                <option value="acoustic">Acoustic Room</option>
            </select>
        </div>
    </div>
    
    <div style="margin-bottom:20px;">
        <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" id="rb-show-facts" checked style="accent-color:var(--accent);">
            <span style="color:var(--accent);font-size:14px;">Show Recording Facts</span>
        </label>
    </div>
    
    <div style="display:flex;gap:10px;">
        <button type="button" onclick="rbGenerate()" 
                style="flex:1;padding:12px;background:linear-gradient(135deg, rgba(45,212,255,0.2), rgba(45,212,255,0.1));border:1px solid rgba(45,212,255,0.4);border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600;">
            üéµ Generate Guide
        </button>
        <button type="button" onclick="rbReset()"
                style="padding:12px 16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:inherit;cursor:pointer;">
            üîÑ Reset
        </button>
    </div>
</form>

<!-- RESULTS -->
<div id="rb-results" style="margin-top:20px;display:none;">
    <h3 style="color:var(--accent);margin-bottom:12px;font-size:16px;">üéß Recording Guide</h3>
    
    <div id="rb-output" style="padding:16px;background:rgba(0,0,0,0.2);border-radius:8px;border:1px solid rgba(45,212,255,0.2);font-family:monospace;white-space:pre-line;max-height:300px;overflow-y:auto;">
        <!-- Results will appear here -->
    </div>
    
    <!-- FACTS -->
    <div id="rb-facts" style="margin-top:16px;display:none;">
        <h3 style="color:#39ff14;margin-bottom:12px;font-size:16px;">üìö Quick Facts</h3>
        <div style="padding:12px;background:rgba(57,255,20,0.05);border-radius:8px;border-left:3px solid #39ff14;">
            <ul style="margin:0;padding-left:20px;color:var(--muted);">
                <li style="margin-bottom:6px;">Microphone placement affects sound quality more than expensive gear</li>
                <li style="margin-bottom:6px;">Room acoustics matter - record in the quietest space available</li>
                <li style="margin-bottom:6px;">Keep input levels around -12dB to -6dB to avoid clipping</li>
                <li style="margin-bottom:6px;">Use headphones to monitor while recording</li>
                <li style="margin-bottom:6px;">Record multiple takes and keep the best one</li>
                <li>‚ö†Ô∏è Always verify techniques with professional resources</li>
            </ul>
        </div>
    </div>
    
    <div style="margin-top:16px;display:flex;gap:8px;">
        <button type="button" onclick="rbCopy()" 
                style="flex:1;padding:10px;background:rgba(57,255,20,0.1);border:1px solid rgba(57,255,20,0.3);border-radius:6px;color:#39ff14;cursor:pointer;font-size:13px;">
            üìã Copy Guide
        </button>
        <button type="button" onclick="rbSave()"
                style="padding:10px 14px;background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);border-radius:6px;color:var(--accent);cursor:pointer;font-size:13px;">
            üíæ Save Tips
        </button>
    </div>
</div>

<script>
/* recording-basics.html
   - Recording fundamentals guide
   - Scoped with rb- prefix (Recording Basics)
*/

// Recording database
const rbDatabase = {
    phone: {
        vocals: `üì± PHONE VOCAL RECORDING:
‚Ä¢ Use external microphone (clip-on lavalier)
‚Ä¢ Record in quiet room (closets work well)
‚Ä¢ Hold phone 6-8 inches from mouth
‚Ä¢ Use pop filter (sock over mic)
‚Ä¢ Record in landscape mode
‚Ä¢ Use apps: Voice Memos, GarageBand, BandLab
‚Ä¢ Export as WAV or high-quality MP3`,
        
        guitar: `üì± PHONE GUITAR RECORDING:
‚Ä¢ Place phone at 12th fret, 12 inches away
‚Ä¢ Use acoustic guitar pickup if available
‚Ä¢ Record in small, carpeted room
‚Ä¢ Turn off notifications and airplane mode
‚Ä¢ Use headphone mic as clip-on
‚Ä¢ Record rhythm/lead separately
‚Ä¢ Metronome app for timing`
    },
    
    computer: {
        vocals: `üíª COMPUTER VOCAL RECORDING:
‚Ä¢ USB microphone recommended (Blue Yeti, Samson)
‚Ä¢ Use pop filter or mesh screen
‚Ä¢ Record in DAW: Audacity (free), Reaper, GarageBand
‚Ä¢ Set sample rate: 44.1kHz, 24-bit
‚Ä¢ Use headphones to prevent bleed
‚Ä¢ Position mic at mouth level, slightly off-axis
‚Ä¢ Record multiple takes and comp best parts`,
        
        guitar: `üíª COMPUTER GUITAR RECORDING:
‚Ä¢ Interface needed: Focusrite Scarlett, Behringer
‚Ä¢ DI for electric, mic for acoustic
‚Ä¢ Acoustic: SM57 at 12th fret, condenser 3 feet away
‚Ä¢ Electric: Amp sim plugins (free: Ignite Amps)
‚Ä¢ Record dry signal for re-amping options
‚Ä¢ Double-track rhythm parts for thickness`
    }
};

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', rbInit);
} else {
    rbInit();
}

function rbInit() {
    console.log('Recording Basics initialized');
    // Load saved settings
    const saved = localStorage.getItem('rb-settings');
    if (saved) {
        try {
            const settings = JSON.parse(saved);
            document.getElementById('rb-device').value = settings.device || 'phone';
            document.getElementById('rb-focus').value = settings.focus || 'vocals';
            document.getElementById('rb-show-facts').checked = settings.showFacts !== false;
        } catch (e) {
            console.error('Failed to load settings:', e);
        }
    }
}

// Save settings
function rbSaveSettings() {
    const settings = {
        device: document.getElementById('rb-device').value,
        focus: document.getElementById('rb-focus').value,
        showFacts: document.getElementById('rb-show-facts').checked
    };
    localStorage.setItem('rb-settings', JSON.stringify(settings));
}

// Generate guide
function rbGenerate() {
    const device = document.getElementById('rb-device').value;
    const focus = document.getElementById('rb-focus').value;
    const showFacts = document.getElementById('rb-show-facts').checked;
    
    let guide = '';
    
    // Check if we have specific guidance
    if (rbDatabase[device] && rbDatabase[device][focus]) {
        guide = rbDatabase[device][focus];
    } else {
        // General guidance
        guide = `üéØ GENERAL RECORDING TIPS for ${focus.toUpperCase()} with ${device.toUpperCase()}:
        
‚Ä¢ Position microphone appropriately
‚Ä¢ Test levels before recording
‚Ä¢ Record in quiet environment
‚Ä¢ Use proper gain staging
‚Ä¢ Monitor with headphones
‚Ä¢ Take multiple recordings
‚Ä¢ Label files clearly
‚Ä¢ Back up your recordings`;
    }
    
    // Add timestamp
    guide += `\n\nüìÖ Generated: ${new Date().toLocaleDateString()}`;
    
    // Display results
    document.getElementById('rb-output').textContent = guide;
    document.getElementById('rb-results').style.display = 'block';
    
    // Show/hide facts
    if (showFacts) {
        document.getElementById('rb-facts').style.display = 'block';
    } else {
        document.getElementById('rb-facts').style.display = 'none';
    }
    
    // Save settings
    rbSaveSettings();
    
    rbShowMessage('Guide generated!', 'success');
}

// Copy to clipboard
function rbCopy() {
    const output = document.getElementById('rb-output').textContent;
    if (!output) {
        rbShowMessage('No guide to copy', 'warning');
        return;
    }
    
    navigator.clipboard.writeText(output).then(() => {
        rbShowMessage('Copied to clipboard!', 'success');
    }).catch(err => {
        console.error('Copy failed:', err);
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = output;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        rbShowMessage('Copied!', 'success');
    });
}

// Save tips
function rbSave() {
    const device = document.getElementById('rb-device').value;
    const focus = document.getElementById('rb-focus').value;
    const date = new Date().toLocaleDateString();
    
    let text = `üé§ RECORDING GUIDE\n`;
    text += `Device: ${device}\n`;
    text += `Focus: ${focus}\n`;
    text += `Date: ${date}\n`;
    text += '='.repeat(40) + '\n\n';
    text += document.getElementById('rb-output').textContent;
    
    // Create download
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `recording-guide-${device}-${focus}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    rbShowMessage('Guide saved!', 'success');
}

// Reset
function rbReset() {
    if (confirm('Reset all settings?')) {
        document.getElementById('rb-device').value = 'phone';
        document.getElementById('rb-focus').value = 'vocals';
        document.getElementById('rb-show-facts').checked = true;
        document.getElementById('rb-results').style.display = 'none';
        localStorage.removeItem('rb-settings');
        rbShowMessage('Reset complete', 'info');
    }
}

// Show message
function rbShowMessage(msg, type) {
    const colors = { success: '#39ff14', warning: '#ffcc00', error: '#ff2d55', info: '#2dd4ff' };
    
    // Remove existing
    const existing = document.querySelector('.rb-msg');
    if (existing) existing.remove();
    
    // Create new
    const div = document.createElement('div');
    div.className = 'rb-msg';
    div.textContent = msg;
    div.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        background: rgba(0,0,0,0.9);
        border: 1px solid ${colors[type]};
        border-radius: 8px;
        color: ${colors[type]};
        z-index: 10000;
        font-weight: 500;
        animation: rbSlideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(div);
    
    setTimeout(() => {
        div.style.animation = 'rbSlideOut 0.3s ease-out';
        setTimeout(() => div.remove(), 300);
    }, 3000);
}

// Add animation styles
if (!document.querySelector('#rb-styles')) {
    const style = document.createElement('style');
    style.id = 'rb-styles';
    style.textContent = `
        @keyframes rbSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes rbSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        #rb-output {
            line-height: 1.5;
            font-size: 14px;
        }
        
        #rb-output::-webkit-scrollbar {
            width: 8px;
        }
        
        #rb-output::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 4px;
        }
        
        #rb-output::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }
    `;
    document.head.appendChild(style);
}
</script>

<style>
#recording-basics-title {
    color: var(--accent);
    margin-top: 0;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    #rb-output {
        font-size: 13px !important;
        padding: 12px !important;
        max-height: 250px !important;
    }
    
    select, button {
        font-size: 16px !important; /* Prevents iOS zoom */
        min-height: 44px; /* Better touch target */
    }
    
    .actions {
        flex-direction: column;
        gap: 8px;
    }
    
    .actions button {
        width: 100%;
        margin: 4px 0;
    }
}
</style>
