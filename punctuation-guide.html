<h2 id="punctuation-guide-title" style="margin-top:0;">Punctuation Guide & Fixer</h2>

<form aria-describedby="punctuation-guide-desc">
  <p id="punctuation-guide-desc" class="small">Check punctuation in your text, get quick explanations, and apply safe fixes. Covers commas, semicolons, colons, apostrophes, quotation marks, dashes, and spacing around punctuation.</p>

  <div class="row">
    <div class="field" style="flex:1;">
      <label for="pg-text">Text</label>
      <textarea id="pg-text" rows="8" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:inherit;" placeholder="Paste text to check punctuation..."></textarea>
    </div>
  </div>

  <div class="row" style="margin-top:8px;align-items:center;">
    <div class="field">
      <label style="display:inline-flex;align-items:center;gap:8px;">
        <input id="pg-explain" type="checkbox" />
        <span class="small">Show brief explanations</span>
      </label>
    </div>

    <div class="field" style="margin-left:auto;">
      <label style="display:inline-flex;align-items:center;gap:8px;">
        <input id="pg-smart" type="checkbox" checked />
        <span class="small">Smart fixes only (safe)</span>
      </label>
    </div>
  </div>

  <div class="actions" style="margin-top:10px;">
    <button type="button" onclick="pgCheck(this)">Check Punctuation</button>
    <button type="button" class="secondary" onclick="pgReset(this)">Reset</button>
    <button type="button" onclick="pgApplyAll(this)">Apply All</button>
    <button type="button" onclick="pgCopy(this)">Copy Text</button>
  </div>
</form>

<div class="results" aria-live="polite" style="margin-top:12px;">
  <div class="result">
    <div class="label">Summary</div>
    <div class="value small" id="pg-summary">No check performed yet.</div>
  </div>

  <h3 class="small" style="margin-top:12px;">Suggestions</h3>
  <ul id="pg-suggestions" class="small" style="list-style:none;padding-left:0;max-height:320px;overflow:auto;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;"></ul>

  <h3 class="small" style="margin-top:12px;">Quick reference</h3>
  <div class="small" style="opacity:0.9;line-height:1.5;">
    <strong>Comma</strong>: separate clauses, items in lists, and after introductory phrases.<br/>
    <strong>Semicolon</strong>: join closely related independent clauses or separate complex list items.<br/>
    <strong>Colon</strong>: introduce a list, explanation, or quotation after an independent clause.<br/>
    <strong>Apostrophe</strong>: show possession (John's book) or contractions (don't). Not for plurals.<br/>
    <strong>Quotation marks</strong>: use double quotes for speech; punctuation placement depends on style (US vs UK).<br/>
    <strong>Em dash â€”</strong>: add emphasis or an abrupt break; use spaced or unspaced consistently.<br/>
    <strong>Spacing</strong>: one space after sentence-ending punctuation; no space before commas/periods.
  </div>
</div>

<script>
/* punctuation-guide.html
   - Client-side heuristics for punctuation issues
   - Scoped with pg- prefix
*/

function pgReset(btn){
  const card=btn.closest('.card');
  card.querySelector('#pg-text').value="";
  card.querySelector('#pg-suggestions').innerHTML="";
  card.querySelector('#pg-summary').textContent="Cleared.";
}

function pgCopy(btn){
  const card=btn.closest('.card');
  const text=card.querySelector('#pg-text').value||"";
  if(!text.trim())return;
  navigator.clipboard?.writeText(text).then(()=>{
    const prev=card.querySelector('#pg-summary').textContent;
    card.querySelector('#pg-summary').textContent="Copied.";
    setTimeout(()=>{card.querySelector('#pg-summary').textContent=prev;},1200);
  }).catch(()=>alert("Copy failed."));
}

function pgCheck(btn){
  const card=btn.closest('.card');
  const text=(card.querySelector('#pg-text').value||"");
  const explain=card.querySelector('#pg-explain').checked;
  const smartOnly=card.querySelector('#pg-smart').checked;
  if(!text.trim()){card.querySelector('#pg-summary').textContent="Paste text to check.";return;}
  const suggestions=[];
  // simple heuristics
  const multiSpace=/([.!?]) {2,}/g;let m;
  while((m=multiSpace.exec(text))!==null){suggestions.push({original:m[0],
