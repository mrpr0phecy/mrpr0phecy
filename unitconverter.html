<h2 id="unitconverter-title" style="margin-top:0;">Unit Converter</h2>

<form aria-describedby="unitconverter-desc">
  <p id="unitconverter-desc" class="small">Convert between common units of measurement.</p>

  <div class="row">
    <div class="field">
      <label for="unitconverter-value">Value</label>
      <input id="unitconverter-value" type="number" step="any" value="1" />
    </div>
    <div class="field">
      <label for="unitconverter-from">From</label>
      <select id="unitconverter-from">
        <option value="m">Meters</option>
        <option value="km">Kilometers</option>
        <option value="ft">Feet</option>
        <option value="mi">Miles</option>
        <option value="kg">Kilograms</option>
        <option value="lb">Pounds</option>
        <option value="c">Celsius</option>
        <option value="f">Fahrenheit</option>
      </select>
    </div>
    <div class="field">
      <label for="unitconverter-to">To</label>
      <select id="unitconverter-to">
        <option value="m">Meters</option>
        <option value="km">Kilometers</option>
        <option value="ft">Feet</option>
        <option value="mi">Miles</option>
        <option value="kg">Kilograms</option>
        <option value="lb">Pounds</option>
        <option value="c">Celsius</option>
        <option value="f">Fahrenheit</option>
      </select>
    </div>
  </div>

  <div class="actions">
    <button type="button" onclick="unitconverterCalc(this)">Convert</button>
    <button type="button" class="secondary" onclick="unitconverterReset(this)">Reset</button>
  </div>
</form>

<div class="results" aria-live="polite">
  <div class="result">
    <div class="label">Converted value</div>
    <div class="value" id="unitconverter-res">–</div>
  </div>
</div>

<script>
function unitconverterCalc(btn) {
  const card = btn.closest('.card');
  const value = parseFloat(card.querySelector('#unitconverter-value').value) || 0;
  const from = card.querySelector('#unitconverter-from').value;
  const to = card.querySelector('#unitconverter-to').value;

  let result = value;

  // length conversions
  const lengthFactors = { m:1, km:1000, ft:0.3048, mi:1609.34 };
  if (from in lengthFactors && to in lengthFactors) {
    result = value * (lengthFactors[from] / lengthFactors[to]);
  }

  // weight conversions
  const weightFactors = { kg:1, lb:0.453592 };
  if (from in weightFactors && to in weightFactors) {
    result = value * (weightFactors[from] / weightFactors[to]);
  }

  // temperature conversions
  if (from === "c" && to === "f") result = (value * 9/5) + 32;
  if (from === "f" && to === "c") result = (value - 32) * 5/9;

  card.querySelector('#unitconverter-res').textContent = result.toFixed(2);
}

function unitconverterReset(btn) {
  const card = btn.closest('.card');
  card.querySelector('form').reset();
  card.querySelector('#unitconverter-res').textContent = '–';
}
</script>
