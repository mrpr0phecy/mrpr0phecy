# Create the complete compressed HTML file
html_content = '''<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Most Useful Site in the World</title>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--accent:#2dd4ff;--text:#e6faff;--text-secondary:rgba(230,250,255,0.7);--bg-primary:#0a0f14;--bg-secondary:#141e28;--border:rgba(255,255,255,0.08);--success:#39ff14;--error:#ff4d4d;--premium:#ffd700;--radius:12px;--font-primary:'Exo 2',sans-serif;--font-display:'Rajdhani',sans-serif}
html,body{height:100%;font-family:var(--font-primary);background:linear-gradient(135deg,var(--bg-primary),var(--bg-secondary));color:var(--text);line-height:1.6;overflow-x:hidden;font-weight:300;letter-spacing:0.3px;-webkit-font-smoothing:antialiased}
#loadingScreen{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg-primary);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99999;transition:opacity 0.5s;font-family:var(--font-display)}
#loadingScreen.hidden{opacity:0;pointer-events:none}
.loading-spinner{width:60px;height:60px;border:3px solid rgba(45,212,255,0.1);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{margin-top:20px;color:var(--text-secondary);font-size:14px;font-weight:300;letter-spacing:2px;text-transform:uppercase}
.sticky-command-bar{position:fixed;top:0;left:0;right:0;height:50px;background:rgba(10,15,20,0.98);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 12px;transform:translateY(-100%);transition:transform 0.3s;z-index:1000;gap:8px}
.sticky-command-bar.visible{transform:translateY(0)}
.sticky-search-container{flex:1;min-width:0}
.sticky-search-bar{display:flex;background:rgba(255,255,255,0.05);border-radius:8px;border:1px solid var(--border);overflow:hidden;height:34px}
.sticky-search-bar:focus-within{border-color:var(--accent);box-shadow:0 0 0 2px rgba(45,212,255,0.2)}
.sticky-search-bar input{flex:1;border:0;background:transparent;color:var(--text);padding:0 12px;font-size:0.9rem;outline:none;height:100%;font-family:var(--font-primary);font-weight:300}
.sticky-search-bar input::placeholder{color:var(--text-secondary)}
.sticky-actions{display:flex;gap:4px}
.sticky-action-btn{width:34px;height:34px;border-radius:6px;background:transparent;border:1px solid var(--border);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;font-size:16px}
.sticky-action-btn:hover{transform:translateY(-1px);background:rgba(45,212,255,0.1);color:var(--accent);border-color:var(--accent)}
.sticky-action-btn.toolbox:hover{background:rgba(255,215,0,0.1);color:var(--premium);border-color:var(--premium)}
.sticky-action-btn.active{background:rgba(45,212,255,0.2);border-color:var(--accent);color:var(--accent)}
.sticky-action-btn.toolbox.active{background:rgba(255,215,0,0.2);border-color:var(--premium);color:var(--premium)}
.toolbox-popout{position:fixed;right:-400px;top:60px;width:380px;height:calc(100vh - 80px);background:rgba(10,15,20,0.98);border:1px solid var(--premium);border-right:none;border-radius:12px 0 0 12px;box-shadow:-10px 0 40px rgba(0,0,0,0.5);backdrop-filter:blur(20px);display:flex;flex-direction:column;z-index:9998;transition:right 0.4s;overflow:hidden}
.toolbox-popout.open{right:0}
.toolbox-popout::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:linear-gradient(180deg,var(--premium),transparent);opacity:0.5}
.toolbox-header{padding:16px;border-bottom:1px solid rgba(255,215,0,0.2);background:linear-gradient(180deg,rgba(255,215,0,0.05),transparent);flex-shrink:0}
.toolbox-title{font-family:var(--font-display);font-size:1.2rem;font-weight:600;color:var(--premium);display:flex;align-items:center;gap:8px;margin-bottom:8px;letter-spacing:1px}
.toolbox-subtitle{font-size:0.8rem;color:var(--text-secondary);font-weight:300}
.toolbox-controls{display:flex;gap:4px;margin-top:12px}
.toolbox-btn{flex:1;height:36px;border-radius:6px;background:rgba(255,255,255,0.05);border:1px solid var(--border);color:var(--text);cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px;font-size:0.85rem;font-family:var(--font-primary);transition:all 0.2s}
.toolbox-btn:hover{background:rgba(255,215,0,0.1);border-color:var(--premium);color:var(--premium)}
.toolbox-btn.active{background:rgba(255,215,0,0.2);border-color:var(--premium);color:var(--premium)}
.toolbox-content{flex:1;overflow-y:auto;padding:12px}
.toolbox-empty{text-align:center;padding:60px 20px;color:var(--text-secondary)}
.toolbox-item{background:rgba(255,255,255,0.03);border:1px solid rgba(255,215,0,0.15);border-radius:10px;margin-bottom:8px;overflow:hidden;transition:all 0.3s}
.toolbox-item:hover{border-color:rgba(255,215,0,0.4);box-shadow:0 4px 16px rgba(255,215,0,0.1)}
.toolbox-item-header{padding:12px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;background:rgba(255,215,0,0.03)}
.toolbox-item-name{font-family:var(--font-display);font-weight:500;font-size:0.95rem;letter-spacing:0.5px}
.toolbox-item-actions{display:flex;gap:4px}
.toolbox-item-btn{width:28px;height:28px;border-radius:5px;background:transparent;border:1px solid rgba(255,215,0,0.3);color:var(--premium);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all 0.2s}
.toolbox-item-btn:hover{background:rgba(255,215,0,0.2);transform:scale(1.1)}
.toolbox-item-btn.remove:hover{background:rgba(255,77,77,0.2);border-color:var(--error);color:var(--error)}
.toolbox-item-content{padding:12px;display:none;border-top:1px solid rgba(255,215,0,0.1);max-height:300px;overflow-y:auto;font-size:0.85rem;color:var(--text-secondary);line-height:1.5}
.toolbox-item.expanded .toolbox-item-content{display:block}
.toolbox-footer{padding:12px;border-top:1px solid rgba(255,215,0,0.1);display:flex;gap:8px;flex-shrink:0}
.toolbox-footer-btn{flex:1;height:36px;border-radius:6px;background:transparent;border:1px solid var(--border);color:var(--text-secondary);cursor:pointer;font-family:var(--font-primary);font-size:0.8rem;transition:all 0.2s}
.toolbox-footer-btn:hover{background:rgba(255,77,77,0.1);border-color:var(--error);color:var(--error)}
.palette-panel{position:fixed;right:12px;top:60px;width:360px;max-width:calc(100vw - 32px);background:rgba(10,15,20,0.98);border:1px solid var(--border);border-radius:12px;box-shadow:0 16px 40px rgba(0,0,0,0.4);backdrop-filter:blur(20px);display:none;z-index:9999;padding:16px;transform:translateY(10px);opacity:0;transition:all 0.3s}
.palette-panel.open{display:block;transform:translateY(0);opacity:1}
.palette-title{color:var(--accent);font-size:0.9rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:12px;font-family:var(--font-display)}
.palette-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:16px}
.palette-color{height:36px;border-radius:6px;cursor:pointer;transition:all 0.2s;position:relative}
.palette-color:hover{transform:scale(1.05);box-shadow:0 0 0 2px var(--accent)}
.palette-color.active::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-weight:bold;font-size:14px;text-shadow:0 1px 3px rgba(0,0,0,0.5)}
.theme-btn{height:36px;border-radius:6px;cursor:pointer;transition:all 0.2s;border:1px solid var(--border);background:transparent}
.theme-btn:hover{transform:scale(1.05);box-shadow:0 0 0 2px var(--accent)}
.theme-btn.active{box-shadow:0 0 0 2px var(--accent)}
.theme-btn.active::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-weight:bold;font-size:14px;text-shadow:0 1px 3px rgba(0,0,0,0.5)}
.main-header{padding:20px 12px;max-width:800px;margin:0 auto;text-align:center}
h1{font-family:var(--font-display);font-size:2.8rem;font-weight:300;background:linear-gradient(90deg,var(--accent),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px;letter-spacing:2px}
.subtitle{color:var(--text-secondary);font-size:1.1rem;max-width:600px;margin:0 auto 20px;font-weight:300;letter-spacing:0.5px}
.main-search-container{max-width:600px;margin:0 auto}
.main-search-bar{display:flex;background:rgba(255,255,255,0.05);border-radius:12px;border:1px solid var(--border);overflow:hidden;transition:all 0.2s}
.main-search-bar:focus-within{border-color:var(--accent);box-shadow:0 0 0 2px rgba(45,212,255,0.2)}
.main-search-bar input{flex:1;border:0;background:transparent;color:var(--text);padding:12px;font-size:1rem;outline:none;font-family:var(--font-primary);font-weight:300}
.main-search-bar input::placeholder{color:var(--text-secondary)}
.main-search-btn{background:rgba(45,212,255,0.1);border:1px solid rgba(45,212,255,0.3);color:var(--accent);padding:12px 16px;cursor:pointer;font-weight:500;font-family:var(--font-display);letter-spacing:1px;transition:all 0.2s}
.main-search-btn:hover{background:rgba(45,212,255,0.2)}
.dashboard{column-count:4;column-gap:12px;max-width:1600px;margin:0 auto;padding:12px;padding-top:20px}
@media(max-width:1400px){.dashboard{column-count:3}}
@media(max-width:1024px){.dashboard{column-count:2}}
@media(max-width:600px){.dashboard{column-count:1}}
.card{background:linear-gradient(145deg,rgba(255,255,255,0.03),rgba(255,255,255,0.05));border:1px solid var(--border);border-radius:12px;overflow:hidden;display:inline-block;width:100%;margin-bottom:12px;break-inside:avoid;transition:all 0.3s;position:relative;opacity:0;transform:translateY(20px)}
.card.visible{opacity:1;transform:translateY(0)}
.card:hover{transform:translateY(-4px) scale(1.01);box-shadow:0 12px 32px rgba(0,0,0,0.4);border-color:rgba(45,212,255,0.3)}
.card-header{padding:12px;border-bottom:1px solid var(--border);background:rgba(0,0,0,0.2);display:flex;justify-content:space-between;align-items:center}
.card-header h3{font-family:var(--font-display);font-size:1.1rem;color:var(--accent);margin:0;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:8px;font-weight:500;letter-spacing:0.5px}
.card-actions{display:flex;gap:8px}
.card-action-btn{width:32px;height:32px;border-radius:6px;background:transparent;border:1px solid var(--border);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;font-size:14px}
.card-action-btn:hover{transform:translateY(-1px);background:rgba(45,212,255,0.1);color:var(--accent)}
.card-action-btn.add-toolbox:hover{background:rgba(255,215,0,0.1);color:var(--premium);border-color:var(--premium)}
.card-shadow-host{position:relative;min-height:150px;background:rgba(0,0,0,0.1)}
.card-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:var(--text-secondary);font-weight:300}
.card-loading-spinner{width:40px;height:40px;border:3px solid rgba(45,212,255,0.1);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 10px}
.card-footer{background:linear-gradient(180deg,transparent,rgba(0,0,0,0.8) 30%,rgba(0,0,0,0.95));backdrop-filter:blur(8px);padding:8px 12px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px;min-height:44px}
.rating-display{display:flex;align-items:center;gap:8px;background:rgba(45,212,255,0.1);padding:2px 8px;border-radius:6px;border:1px solid rgba(45,212,255,0.2);flex:1;max-width:150px}
.rating-label{font-size:0.8rem;color:var(--text);font-weight:500;white-space:nowrap;font-family:var(--font-display)}
.rating-bar{width:50px;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;overflow:hidden;flex-shrink:0}
.rating-fill{height:100%;background:linear-gradient(90deg,var(--accent),#1aa3cc);border-radius:2px;transition:width 0.3s}
.rating-percentage{font-weight:600;color:var(--accent);font-size:0.85rem;min-width:32px;text-align:right;font-family:var(--font-display)}
.rating-buttons{display:flex;gap:4px;background:rgba(0,0,0,0.3);padding:2px;border-radius:6px;border:1px solid var(--border);flex-shrink:0}
.rating-btn{width:28px;height:28px;border-radius:4px;background:transparent;border:1px solid var(--border);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;transition:all 0.2s}
.rating-btn:hover{transform:translateY(-1px)}
.rating-btn.up:hover{background:rgba(57,255,20,0.1);border-color:var(--success);color:var(--success)}
.rating-btn.down:hover{background:rgba(255,77,77,0.1);border-color:var(--error);color:var(--error)}
.rating-btn.voted{border-width:2px;transform:scale(1.05)}
.rating-btn.up.voted{background:rgba(57,255,20,0.2);border-color:var(--success);color:var(--success)}
.rating-btn.down.voted{background:rgba(255,77,77,0.2);border-color:var(--error);color:var(--error)}
.embed-btn{background:rgba(45,212,255,0.1);color:var(--accent);border:1px solid rgba(45,212,255,0.3);padding:4px 10px;border-radius:4px;cursor:pointer;font-size:0.8rem;font-weight:500;transition:all 0.2s;display:flex;align-items:center;gap:4px;white-space:nowrap;height:28px;font-family:var(--font-primary)}
.embed-btn:hover{background:rgba(45,212,255,0.2);transform:translateY(-1px)}
.embed-btn.copied{background:rgba(57,255,20,0.1);color:var(--success);border-color:rgba(57,255,20,0.3)}
.notification-container{position:fixed;top:70px;right:20px;z-index:20000;display:flex;flex-direction:column;gap:8px}
.notification{background:rgba(10,15,20,0.98);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:8px;padding:12px 16px;min-width:300px;max-width:400px;animation:slideIn 0.3s;backdrop-filter:blur(10px);box-shadow:0 8px 32px rgba(0,0,0,0.4)}
.notification.hiding{animation:slideOut 0.3s forwards}
@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideOut{to{transform:translateX(100%);opacity:0}}
.notification-title{font-family:var(--font-display);font-weight:600;color:var(--accent);margin-bottom:4px;letter-spacing:0.5px}
.notification-message{font-size:14px;color:var(--text-secondary);font-weight:300}
.fab-container{position:fixed;bottom:30px;right:30px;z-index:9997}
.fab-main{width:56px;height:56px;border-radius:50%;background:var(--accent);border:none;color:#000;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 20px rgba(45,212,255,0.4);transition:all 0.3s;font-family:var(--font-display);font-weight:300}
.fab-main:hover{transform:scale(1.1);box-shadow:0 6px 30px rgba(45,212,255,0.6)}
.fab-menu{position:absolute;bottom:70px;right:0;display:flex;flex-direction:column;gap:10px;opacity:0;pointer-events:none;transform:translateY(20px);transition:all 0.3s}
.fab-menu.open{opacity:1;pointer-events:auto;transform:translateY(0)}
.fab-item{width:48px;height:48px;border-radius:50%;background:rgba(20,20,20,0.95);border:1px solid var(--border);color:var(--text);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.fab-item:hover{transform:scale(1.1);border-color:var(--accent);color:var(--accent)}
@media(max-width:768px){h1{font-size:1.8rem}.sticky-command-bar{height:46px}.dashboard{padding:8px;column-gap:8px}.card{margin-bottom:8px}}
@media(max-width:480px){h1{font-size:1.5rem}}
</style>
</head>
<body>
<div id="loadingScreen"><div class="loading-spinner"></div><div class="loading-text">Loading tools...</div></div>
<div class="sticky-command-bar" id="stickyCommandBar">
<div class="sticky-search-container"><div class="sticky-search-bar"><input type="text" id="stickySearchInput" placeholder="Search tools..."></div></div>
<div class="sticky-actions">
<button class="sticky-action-btn toolbox" id="stickyToolboxToggle">üß∞</button>
<button class="sticky-action-btn" id="stickyPaletteToggle">üé®</button>
<button class="sticky-action-btn" id="stickyReaderToggle">üëì</button>
</div>
</div>
<div id="toolboxPopout" class="toolbox-popout">
<div class="toolbox-header">
<div class="toolbox-title">üß∞ My Toolbox</div>
<div class="toolbox-subtitle">Build your custom workspace</div>
<div class="toolbox-controls">
<button id="toolboxGridBtn" class="toolbox-btn active">‚äû Grid</button>
<button id="toolboxListBtn" class="toolbox-btn">‚ò∞ List</button>
</div>
</div>
<div class="toolbox-content" id="toolboxContent">
<div class="toolbox-empty">
<div class="toolbox-empty-icon">üì¶</div>
<h3 style="color:var(--premium);margin-bottom:8px;font-family:var(--font-display)">Empty Toolbox</h3>
<p>Click üß∞ on any card to add it here</p>
</div>
</div>
<div class="toolbox-footer">
<button id="clearToolboxBtn" class="toolbox-footer-btn">üóëÔ∏è Clear All</button>
</div>
</div>
<div id="palettePanel" class="palette-panel">
<div class="palette-title">üé® Accent Colors</div>
<div class="palette-grid">
<div class="palette-color active" data-accent="#2dd4ff" style="background:#2dd4ff"></div>
<div class="palette-color" data-accent="#ff2d55" style="background:#ff2d55"></div>
<div class="palette-color" data-accent="#00ff99" style="background:#00ff99"></div>
<div class="palette-color" data-accent="#ffcc00" style="background:#ffcc00"></div>
<div class="palette-color" data-accent="#9d4edd" style="background:#9d4edd"></div>
<div class="palette-color" data-accent="#00e5ff" style="background:#00e5ff"></div>
<div class="palette-color" data-accent="#ff6b35" style="background:#ff6b35"></div>
</div>
<div class="palette-title">üåÖ Background Themes</div>
<div class="palette-grid">
<button class="theme-btn active" data-theme="default" style="background:linear-gradient(135deg,#0a0f14,#141e28)"></button>
<button class="theme-btn" data-theme="deep-blue" style="background:linear-gradient(135deg,#05080c,#0f151f)"></button>
<button class="theme-btn" data-theme="deep-purple" style="background:linear-gradient(135deg,#12081a,#1f1229)"></button>
<button class="theme-btn" data-theme="deep-teal" style="background:linear-gradient(135deg,#061616,#0f2525)"></button>
<button class="theme-btn" data-theme="deep-red" style="background:linear-gradient(135deg,#160606,#251010)"></button>
<button class="theme-btn" data-theme="deep-forest" style="background:linear-gradient(135deg,#081408,#152015)"></button>
<button class="theme-btn" data-theme="deep-space" style="background:linear-gradient(135deg,#000814,#1a1a2e)"></button>
</div>
</div>
<header class="main-header">
<h1>The Most Useful Site in the World</h1>
<p class="subtitle">Essential tools for productivity, creativity, and problem-solving. All free, no sign-ups required.</p>
<div class="main-search-container">
<div class="main-search-bar">
<input type="text" id="mainSearchInput" placeholder="üîç Search tools...">
<button id="mainSearchBtn" class="main-search-btn">Search</button>
</div>
</div>
</header>
<div id="dashboard" class="dashboard"></div>
<div class="fab-container">
<div class="fab-menu" id="fabMenu">
<button class="fab-item" id="fabScrollTop">‚¨ÜÔ∏è</button>
<button class="fab-item" id="fabRandom">üé≤</button>
</div>
<button class="fab-main" id="fabMain">+</button>
</div>
<div class="notification-container" id="notificationContainer"></div>
<script>
const CONFIG={GITHUB_REPO:'mrpr0phecy/mrpr0phecy',GITHUB_PATH:'cards',STICKY_THRESHOLD:100,NOTIFICATION_DURATION:4000};
let allCards=[],cardRatings={},toolboxCards=[],toolboxViewMode='grid',expandedToolboxItems=new Set(),isToolboxOpen=false;
const themes={default:{bg1:'#0a0f14',bg2:'#141e28'},'deep-blue':{bg1:'#05080c',bg2:'#0f151f'},'deep-purple':{bg1:'#12081a',bg2:'#1f1229'},'deep-teal':{bg1:'#061616',bg2:'#0f2525'},'deep-red':{bg1:'#160606',bg2:'#251010'},'deep-forest':{bg1:'#081408',bg2:'#152015'},'deep-space':{bg1:'#000814',bg2:'#1a1a2e'}};
document.addEventListener('DOMContentLoaded',async()=>{loadSettings();setupEventListeners();setupStickyBar();setupFAB();setupToolbox();await loadCards();document.getElementById('loadingScreen').classList.add('hidden');notify('Welcome!','All tools loaded','success');});
async function loadCards(){try{const[owner,repo]=CONFIG.GITHUB_REPO.split('/');const url=`https://api.github.com/repos/${owner}/${repo}/contents/${CONFIG.GITHUB_PATH}`;const response=await fetch(url);if(!response.ok)throw new Error(`GitHub API: ${response.status}`);const data=await response.json();const cardFiles=data.filter(item=>item.type==='file'&&item.name.endsWith('.html')).map(item=>item.name.replace('.html','')).sort();allCards=cardFiles;const dashboard=document.getElementById('dashboard');for(let i=0;i<cardFiles.length;i++){const cardName=cardFiles[i];const displayName=cardName.replace(/-/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());const card=document.createElement('div');card.className='card';card.dataset.name=cardName;card.dataset.displayName=displayName;card.style.animationDelay=`${i*0.03}s`;card.innerHTML=`<div class="card-header"><h3>${displayName}</h3><div class="card-actions"><button class="card-action-btn add-toolbox" data-card="${cardName}">üß∞</button><button class="card-action-btn expand-card" data-card="${cardName}">‚Üó</button></div></div><div class="card-shadow-host" id="host-${cardName}"><div class="card-loading"><div class="card-loading-spinner"></div><div>Loading...</div></div></div>`;dashboard.appendChild(card);await loadCardShadowDOM(cardName);addCardFooter(card,cardName);setTimeout(()=>card.classList.add('visible'),50);}}catch(error){notify('Error',error.message,'error');}}
async function loadCardShadowDOM(cardName){const host=document.getElementById(`host-${cardName}`);if(!host)return;try{const response=await fetch(`cards/${cardName}.html`);if(!response.ok)throw new Error(`HTTP ${response.status}`);const html=await response.text();host.innerHTML='';const shadow=host.attachShadow({mode:'closed'});const style=document.createElement('style');style.textContent=`:host{display:block;padding:16px;color:#e6faff;font-family:'Exo 2',sans-serif;font-size:14px;line-height:1.6;background:rgba(0,0,0,0.1);font-weight:300}*{max-width:100%;box-sizing:border-box}img,video,canvas,svg,iframe{max-width:100%;height:auto}table{width:100%;border-collapse:collapse}pre,code{white-space:pre-wrap;word-wrap:break-word}input,textarea,select,button{max-width:100%;font-family:inherit;font-size:14px}button{cursor:pointer}`;shadow.appendChild(style);const parser=new DOMParser();const doc=parser.parseFromString(html,'text/html');doc.querySelectorAll('script').forEach(s=>s.remove());const content=document.createElement('div');content.innerHTML=doc.body.innerHTML;shadow.appendChild(content);}catch(error){host.innerHTML=`<div style="padding:40px;text-align:center;color:#ff6b6b">‚ö†Ô∏è Failed to load ${cardName}</div>`;}}
function addCardFooter(card,cardName){const rating=getRating(cardName);const total=rating.up+rating.down;const percent=total===0?0:Math.round((rating.up/total)*100);const footer=document.createElement('div');footer.className='card-footer';footer.innerHTML=`<div class="rating-display"><span class="rating-label">Useful:</span><div class="rating-bar"><div class="rating-fill" style="width:${percent}%"></div></div><span class="rating-percentage">${percent}%</span></div><div class="rating-buttons"><button class="rating-btn up ${rating.userVote==='up'?'voted':''}" data-card="${cardName}" data-vote="up">üëç</button><button class="rating-btn down ${rating.userVote==='down'?'voted':''}" data-card="${cardName}" data-vote="down">üëé</button></div><button class="embed-btn" data-card="${cardName}">üîó Embed</button>`;card.appendChild(footer);}
function setupToolbox(){document.getElementById('stickyToolboxToggle').addEventListener('click',toggleToolbox);document.getElementById('toolboxGridBtn').addEventListener('click',()=>setToolboxViewMode('grid'));document.getElementById('toolboxListBtn').addEventListener('click',()=>setToolboxViewMode('list'));document.getElementById('clearToolboxBtn').addEventListener('click',clearToolbox);document.addEventListener('click',(e)=>{if(isToolboxOpen&&!document.getElementById('toolboxPopout').contains(e.target)&&!document.getElementById('stickyToolboxToggle').contains(e.target))closeToolbox();});}
function toggleToolbox(){const toolbox=document.getElementById('toolboxPopout');const btn=document.getElementById('stickyToolboxToggle');if(isToolboxOpen){closeToolbox();}else{toolbox.classList.add('open');btn.classList.add('active');isToolboxOpen=true;renderToolbox();}}
function closeToolbox(){document.getElementById('toolboxPopout').classList.remove('open');document.getElementById('stickyToolboxToggle').classList.remove('active');isToolboxOpen=false;}
function setToolboxViewMode(mode){toolboxViewMode=mode;document.getElementById('toolboxGridBtn').classList.toggle('active',mode==='grid');document.getElementById('toolboxListBtn').classList.toggle('active',mode==='list');renderToolbox();saveSettings();}
function addToToolbox(cardName){if(toolboxCards.find(c=>c.name===cardName)){notify('Already added',`${cardName} is in toolbox`,'warning');return;}const host=document.getElementById(`host-${cardName}`);let content='';if(host&&host.shadowRoot){const contentDiv=host.shadowRoot.querySelector('div:last-child');if(contentDiv)content=contentDiv.innerHTML;}const displayName=cardName.replace(/-/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());toolboxCards.push({name:cardName,displayName:displayName,content:content,addedAt:Date.now()});saveSettings();if(isToolboxOpen)renderToolbox();notify('Added',`${displayName} added to toolbox`,'success');if(!isToolboxOpen)toggleToolbox();}
function renderToolbox(){const content=document.getElementById('toolboxContent');if(toolboxCards.length===0){content.innerHTML=`<div class="toolbox-empty"><div class="toolbox-empty-icon">üì¶</div><h3 style="color:var(--premium);margin-bottom:8px;font-family:var(--font-display)">Empty Toolbox</h3><p>Click üß∞ on any card to add it here</p></div>`;return;}content.innerHTML='';toolboxCards.forEach((card,index)=>{const item=document.createElement('div');item.className=`toolbox-item ${expandedToolboxItems.has(index)?'expanded':''}`;item.innerHTML=`<div class="toolbox-item-header" data-index="${index}"><span class="toolbox-item-name">${card.displayName}</span><div class="toolbox-item-actions"><button class="toolbox-item-btn expand-btn" data-index="${index}">${expandedToolboxItems.has(index)?'‚àí':'+'}</button><button class="toolbox-item-btn remove" data-index="${index}">‚úï</button></div></div><div class="toolbox-item-content"><div class="toolbox-item-preview">${card.content||'Preview not available'}</div></div>`;item.querySelector('.toolbox-item-header').addEventListener('click',(e)=>{if(!e.target.closest('.toolbox-item-btn'))toggleToolboxItem(index);});item.querySelector('.expand-btn').addEventListener('click',(e)=>{e.stopPropagation();toggleToolboxItem(index);});item.querySelector('.remove').addEventListener('click',(e)=>{e.stopPropagation();removeFromToolbox(index);});content.appendChild(item);});}
function toggleToolboxItem(index){expandedToolboxItems.has(index)?expandedToolboxItems.delete(index):expandedToolboxItems.add(index);renderToolbox();}
function removeFromToolbox(index){const cardName=toolboxCards[index].displayName;toolboxCards.splice(index,1);expandedToolboxItems.delete(index);const newExpanded=new Set();expandedToolboxItems.forEach(i=>{if(i<index)newExpanded.add(i);if(i>index)newExpanded.add(i-1);});expandedToolboxItems=newExpanded;renderToolbox();saveSettings();notify('Removed',`${cardName} removed`,'info');}
function clearToolbox(){if(toolboxCards.length===0)return;if(confirm(`Clear all ${toolboxCards.length} tools?`)){toolboxCards=[];expandedToolboxItems.clear();renderToolbox();saveSettings();notify('Cleared','All tools removed','info');}}
function setupEventListeners(){const searchHandler=(e)=>{const query=e.target.value.toLowerCase();document.querySelectorAll('.card').forEach(card=>{const name=card.dataset.name.toLowerCase();const displayName=card.dataset.displayName.toLowerCase();card.style.display=(name.includes(query)||displayName.includes(query))?'':'none';});};document.getElementById('mainSearchInput').addEventListener('input',searchHandler);document.getElementById('stickySearchInput').addEventListener('input',searchHandler);document.getElementById('dashboard').addEventListener('click',(e)=>{const btn=e.target.closest('.card-action-btn');if(!btn)return;const cardName=btn.dataset.card;if(btn.classList.contains('add-toolbox'))addToToolbox(cardName);else if(btn.classList.contains('expand-card'))window.open(`cards/${cardName}.html`,'_blank');});document.getElementById('dashboard').addEventListener('click',(e)=>{const btn=e.target.closest('.rating-btn');if(!btn)return;rateCard(btn.dataset.card,btn.dataset.vote);});document.getElementById('dashboard').addEventListener('click',(e)=>{const btn=e.target.closest('.embed-btn');if(!btn)return;copyEmbed(btn.dataset.card);});document.getElementById('stickyPaletteToggle').addEventListener('click',()=>{document.getElementById('palettePanel').classList.toggle('open');});document.getElementById('stickyReaderToggle').addEventListener('click',()=>{document.body.classList.toggle('reader-mode');document.getElementById('stickyReaderToggle').classList.toggle('active',document.body.classList.contains('reader-mode'));saveSettings();});document.querySelectorAll('.palette-color').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.palette-color').forEach(b=>b.classList.remove('active'));btn.classList.add('active');document.documentElement.style.setProperty('--accent',btn.dataset.accent);saveSettings();});});document.querySelectorAll('.theme-btn').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.theme-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');const theme=themes[btn.dataset.theme];if(theme)document.body.style.background=`linear-gradient(135deg,${theme.bg1},${theme.bg2})`;saveSettings();});});document.addEventListener('click',(e)=>{if(!e.target.closest('.palette-panel')&&!e.target.closest('#stickyPaletteToggle')){document.getElementById('palettePanel').classList.remove('open');}});document.addEventListener('keydown',(e)=>{if(e.ctrlKey||e.metaKey){switch(e.key){case't':e.preventDefault();toggleToolbox();break;case'p':e.preventDefault();document.getElementById('stickyPaletteToggle').click();break;case'r':e.preventDefault();document.getElementById('stickyReaderToggle').click();break;case'k':e.preventDefault();document.getElementById('mainSearchInput').focus();break;}}if(e.key==='Escape'){closeToolbox();document.getElementById('palettePanel').classList.remove('open');}});}
function setupStickyBar(){const bar=document.getElementById('stickyCommandBar');window.addEventListener('scroll',()=>{window.pageYOffset>CONFIG.STICKY_THRESHOLD?bar.classList.add('visible'):bar.classList.remove('visible');},{passive:true});}
function setupFAB(){const fab=document.getElementById('fabMain');const menu=document.getElementById('fabMenu');fab.addEventListener('click',()=>{menu.classList.toggle('open');fab.style.transform=menu.classList.contains('open')?'rotate(45deg)':'';});document.getElementById('fabScrollTop').addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});menu.classList.remove('open');fab.style.transform='';});document.getElementById('fabRandom').addEventListener('click',()=>{const visibleCards=document.querySelectorAll('.card.visible');if(visibleCards.length>0){const random=visibleCards[Math.floor(Math.random()*visibleCards.length)];random.scrollIntoView({behavior:'smooth',block:'center'});}menu.classList.remove('open');fab.style.transform='';});}
function getRating(cardName){return cardRatings[cardName]||{up:0,down:0,userVote:null};}
function rateCard(cardName,type){if(!cardRatings[cardName])cardRatings[cardName]={up:0,down:0,userVote:null};if(cardRatings[cardName].userVote==='up')cardRatings[cardName].up--;if(cardRatings[cardName].userVote==='down')cardRatings[cardName].down--;cardRatings[cardName][type]++;cardRatings[cardName].userVote=type;saveSettings();const card=document.querySelector(`.card[data-name="${cardName}"]`);if(card){const footer=card.querySelector('.card-footer');if(footer)footer.remove();addCardFooter(card,cardName);}notify('Thanks!',`Rated ${type==='up'?'üëç':'üëé'}`,'success');}
function copyEmbed(cardName){const code=`<iframe src="${window.location.origin}/cards/${cardName}.html" width="100%" height="400" style="border:none;border-radius:12px" title="${cardName}"></iframe>`;navigator.clipboard.writeText(code).then(()=>{const btn=document.querySelector(`.embed-btn[data-card="${cardName}"]`);if(btn){btn.textContent='‚úÖ Copied!';btn.classList.add('copied');setTimeout(()=>{btn.textContent='üîó Embed';btn.classList.remove('copied');},2000);}notify('Copied!','Embed code copied','success');});}
function loadSettings(){const saved=localStorage.getItem('usefulSiteSettings');if(saved){const data=JSON.parse(saved);cardRatings=data.ratings||{};toolboxCards=data.toolbox||[];toolboxViewMode=data.toolboxViewMode||'grid';if(data.accent)document.documentElement.style.setProperty('--accent',data.accent);if(data.theme){const theme=themes[data.theme];if(theme)document.body.style.background=`linear-gradient(135deg,${theme.bg1},${theme.bg2})`;}if(data.readerMode)document.body.classList.add('reader-mode');}}
function saveSettings(){const data={ratings:cardRatings,toolbox:toolboxCards,toolboxViewMode:toolboxViewMode,accent:getComputedStyle(document.documentElement).getPropertyValue('--accent').trim(),theme:document.querySelector('.theme-btn.active')?.dataset.theme||'default',readerMode:document.body.classList.contains('reader-mode')};localStorage.setItem('usefulSiteSettings',JSON.stringify(data));}
function notify(title,message,type='info'){const container=document.getElementById('notificationContainer');const notif=document.createElement('div');notif.className='notification';const icons={success:'‚úÖ',error:'‚ùå',warning:'‚ö†Ô∏è',info:'‚ÑπÔ∏è'};notif.innerHTML=`<div class="notification-title">${icons[type]} ${title}</div><div class="notification-message">${message}</div>`;container.appendChild(notif);setTimeout(()=>{notif.classList.add('hiding');setTimeout(()=>notif.remove(),300);},CONFIG.NOTIFICATION_DURATION);}
</script>
</body>
</html>'''

# Save to file
with open('/mnt/kimi/output/themostusefulsiteintheworld.html', 'w', encoding='utf-8') as f:
    f.write(html_content)

print(f"File created successfully!")
print(f"Total size: {len(html_content)} characters ({len(html_content)/1024:.1f} KB)")
